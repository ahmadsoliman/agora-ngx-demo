(self.webpackChunkzeemo_chat_ui=self.webpackChunkzeemo_chat_ui||[]).push([[179],{255:ge=>{function le(U){return Promise.resolve().then(()=>{var D=new Error("Cannot find module '"+U+"'");throw D.code="MODULE_NOT_FOUND",D})}le.keys=()=>[],le.resolve=le,le.id=255,ge.exports=le},507:module=>{var le;window,le=function(){return function(ge){var le={};function U(D){if(le[D])return le[D].exports;var R=le[D]={i:D,l:!1,exports:{}};return ge[D].call(R.exports,R,R.exports,U),R.l=!0,R.exports}return U.m=ge,U.c=le,U.d=function(D,R,M){U.o(D,R)||Object.defineProperty(D,R,{enumerable:!0,get:M})},U.r=function(D){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})},U.t=function(D,R){if(1&R&&(D=U(D)),8&R||4&R&&"object"==typeof D&&D&&D.__esModule)return D;var M=Object.create(null);if(U.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:D}),2&R&&"string"!=typeof D)for(var T in D)U.d(M,T,function(N){return D[N]}.bind(null,T));return M},U.n=function(D){var R=D&&D.__esModule?function(){return D.default}:function(){return D};return U.d(R,"a",R),R},U.o=function(D,R){return Object.prototype.hasOwnProperty.call(D,R)},U.p="",U(U.s=92)}([function(ge,le,U){"use strict";U.r(le);var D,R=U(11),M=U.n(R),T=function(){var q=new Date;return q.toTimeString().split(" ")[0]+":"+q.getMilliseconds()},N=U(14),v=U(2),A=U(1),p=U(45),_=U.n(p),E=U(46),k=U.n(E),H=new Array(32).fill(void 0);function I(q){return H[q]}H.push(void 0,null,!0,!1);var S=H.length;function B(q){var te,F=I(q);return(te=q)<36||(H[te]=S,S=te),F}var P=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});P.decode();var G=null;function V(){return null!==G&&G.buffer===D.memory.buffer||(G=new Uint8Array(D.memory.buffer)),G}function ie(q,F){return P.decode(V().subarray(q,q+F))}function de(q){S===H.length&&H.push(H.length+1);var F=S;return S=H[F],H[F]=q,F}var oe=0,ae=new TextEncoder("utf-8"),J="function"==typeof ae.encodeInto?function(q,F){return ae.encodeInto(q,F)}:function(q,F){var te=ae.encode(q);return F.set(te),{read:q.length,written:te.length}},C=null;function d(){return null!==C&&C.buffer===D.memory.buffer||(C=new Int32Array(D.memory.buffer)),C}var K,W=function(){function q(){_()(this,q)}return k()(q,[{key:"free",value:function(){var F=this.ptr;this.ptr=0,D.__wbg_signmanager_free(F)}},{key:"get_digest",value:function(F){return B(D.signmanager_get_digest(this.ptr,de(F)))}}],[{key:"__wrap",value:function(F){var te=Object.create(q.prototype);return te.ptr=F,te}},{key:"new",value:function(){var F=D.signmanager_new();return q.__wrap(F)}}]),q}(),y=!1,u=null,m=0,w="free",x=[],ee=[],ue=0;(u?Promise.resolve(u):new Promise(function(q){y||D||function F(){var te={wbg:{}};te.wbg.__wbindgen_object_drop_ref=function(Ce){B(Ce)},te.wbg.__wbindgen_string_new=function(Ce,L){return de(ie(Ce,L))},te.wbg.__wbindgen_string_get=function(Ce,L){var xe=I(L),Qe="string"==typeof xe?xe:void 0,ze=null==Qe?0:function(ft,pe,g){if(void 0===g){var ce=ae.encode(ft),_e=pe(ce.length);return V().subarray(_e,_e+ce.length).set(ce),oe=ce.length,_e}for(var be=ft.length,ve=(_e=pe(be),V()),Z=0;Z<be;Z++){var Se=ft.charCodeAt(Z);if(Se>127)break;ve[_e+Z]=Se}if(Z!==be){0!==Z&&(ft=ft.slice(Z)),_e=g(_e,be,be=Z+3*ft.length);var Re=V().subarray(_e+Z,_e+be);Z+=J(ft,Re).written}return oe=Z,_e}(Qe,D.__wbindgen_malloc,D.__wbindgen_realloc),st=oe;d()[Ce/4+1]=st,d()[Ce/4+0]=ze},te.wbg.__wbindgen_throw=function(Ce,L){throw new Error(ie(Ce,L))};for(var Te=Uint8Array.from(atob("55ZBgM/2Bzm2JGhNn//ljJsSorhWUYE66a1Hf8O7pfQGR2zfol8qRP6CDhsi3iG7nFZu9stSyPq/qu2Rr2w8QkTGP6Gm2cg3J5qsQgq5bcHA9mDpGv/b24uEwsixZVl1eGkdV4SB/6ayw2v48hLmNA+w5UlnTCiWwerzESQPidpSUMbamXL3pU815EQm12GhhZ9aWzo568gdZvXevBc/WHfFKQSuTgWva4e4eSmW7UxpH8sY4HlDsCTMu0WwEB8B95XsZwOp3GLgfOQmJBw036DgIKU+XGn4KpIEq77WE/h6R7sZKsFUp+u+2cDnW7IPNe7xfd9areFo0EUh0/9K9CqxUkLqMB5hlgS1fwQHRzKPhQ7gALyc6HwMCPooS0M1NrzjdfH3vUn0PeQ1GBlnrnXgiu8TunfHg5TcbBfPEbxbyiiow1Np+VEBlHNh00PiAWyu024NHaPbDGfMtzu4WF02fgkh8Pxb7bCSpCZndjTytQgAzfZxk2bbe6NoHHFnsviqYzHVpxoPEk7icHRWcZC28d2muthq673KCMQay1fJcPqSTuYhWUZS5eylIguT33lP+TBbOWQI8KtCzBN5FzqILfKzRkzrJ3L192BUF8SILdwmriv10HU9ZlQAyQA1VdegnzOl/dYk2GGsB3724y7w/7aJLHJzEfwrfIzFd5CoAft7ct+zQW2G4Wm2kpoz6uJfgrNyykQgwCO6pkPy1ADrBUuJon9ySjhgcFru6AKa99wTlIhzBw3FKFt9Aa1/1KWWy7W1wAIGzRTs/7rLXRkKFjNqGVXBdoVNTpHFtfEFsuX0X98ISr0Bennlx0h2Yl/CGNb5Kc7i3bio1XJHX24avcMsEAwfdfskCki4/dkStn7QC97YJC3z+7gD84IiEEeGcnn7gHJyeALr0ssbqDUcKqxEyheyFs9FToJziLB+eYw6nMQLmYTrQyrg3b+3YBdgx7pzNEDSyz3tmaPaikwcLSyB/Igo6U/oP/fS2TZLtmN03m4iS76YrDJAgI+2W1GboabuixVcLdxm6SQ4CzUnHSPl1knhcGhW/+OcKa53tB5j5C4wEpiENv6T9PUu4K0YwtEAqFbd/eN2wVAYCKn/nlVA8uiESxCfgs0411mRFk4i1pixJLPP5AFPG9QFZnj6X19TqmhmIhl8D6Q1rOvPCqPZV/z04HjayX4qPzPzP/5NVilN/sHhQe7ulriGmU/3rj5QEuiOymsL7EdCQMc/4mXDPdVrDBfbt6dnv11oLYGmqOP1oSBj02FtsmYrMn9pRg7HJoCh86jAnzuOYn4tGnQ4gw/89sb64NAXcoIbTIjyiHBAQCCK2Yn4I/fNF10rkQlvSvkpqLG2eYpJmpWrcouNDEUtJFR607oNraLdmUKyLc1g7SNpS+ofp1FL6rua/HFSrb5kTF2Vcy2gl+6MACbFRChKoP/un7IbYJuOima/JWFZcs/MXokIx+ijuqjMtVKaYRTzNI5ncPa2y/EXTNdUUFpMhbE7sa39Uoh6Hci/viXy2KFTNbiw+BkWOPnyOr04LjIYKlJ8ud/KvjuvNUGQOHJvj6tpZJxj97tr0OrgZCAxSHGU5JQfqEd/U0QfzGM8Wh3zdsnd9LhoIIRJAtyA2PmjwJk4zTxeYlgwPqAVTU3+9bA1QD+jLZZ3Ffk3MRq+Ar2RT8YN6ASR4bItt3omBj0LJe0zeGY3OzfhljL6LA1m4+IUp+CzeWo0aEjnvRk3iCJeajgdC+NUGB5qh8PWKtBeC58woavnRjvRNphXS4b9M7Aymcfq26B2YY2lS+wLf763OnGJlVdV/srgyAUJJZjarxom4zrYy23kLFB8zFzWuwSMue5Xm1YWape91JGDuRLIctrJWU47/XfLm6Zgei4xOwq1RcjikGuaZtDwcFg9aKtO+JOGJsCjy9AiPnmt+rmdX83GsT3KtTETnLv6ZQcnGtmt4H8AjFgGYePdQc40cj8VAOV8NCLspyW5w63b3g37GXJrzjm9Fym3fh27psjo5RuTs7XCSrNENxKm9jCcXPqWxyuXJSn6dhdWnw5SAnUjixXviWS4HsnYjw4Xt4cSwkqCB9naLstVXt5D2HgG4fzHFNHvnETft0mrhU81IBDTSyNFdDvFEX8cifoc6FcNq7pzXlotl2ZS1FIzNXddZrdXpBNYZPV52gtCok6ePpUR/Y8jyJpE9P3q8dmFVivVGgmKTcBKMDDbzeOfl4MpOGBtBX/Lab/kzqG42sTyOyGUyOoFXYGMUWJ33GPI2KNa/mW8zVl+imshfbj7PiK1qRUn74KjAkH4wjKnu50AONYUaiveSdwnEc1zCjZSJ3dmBKSxhWAcO2PdHBg5m9+JCiPGCVfK9dzoM8Bm7xx9noJiqt4hNiVa5di1Fd1JRN4rnd1DbKglKpAVSoqvJPxmuyH56TFE4BQjhfKbDMZezQJqx+KXDiW1JWGeDYaPVBWPYeZX6STIzC/DjS7UFlqoKgGGAGP17x8wmMRE6O/axG5jDzloCGxCmrymT0ZGCh4g54O1iDYUtmJr7Bo1d+H9RQj2Y10BxcMkLFTIZVjm9e3vtIbeRx0OdXE1Ou37J/WeJZyPXn1fszvp/KonCqVnt862LrxfoB/0sF5gk4Y/f6LVneU5hun9/V1OVre9XrnDBhcVaQa9Ye6gs8sHW9HCNchaFbkUpxSiyxVEFZIlbejbjSPFlkYOLhtQHduwZWRHWA9akqykJNG3PKvOZAaJG5nWQq8+e4K0JF/AXTKIIr4J7zDt8ZR4xb9T2gxjl1nfqzidMRIY5B4rkw0oetta+j8rqkFpTEGA+hU/tw7bDtpkPYvCguwncnCjwULNFT9I9jXx3H4Ws3WWMCit29F7kGq2Ka+rU/MjnuP0lsXkoB1rr8LawHH5gaf8rajq/BhKrGTIfjDiZG5qz+L7SZBZsMSZZ9pM1QhKju+GTD9iC+9HlhfXMtj94gz8U4h7eGXziEO7lo7LwLL6/DVMrGbkv68JYUYhGz2yBm/8cbQEh5vhakbhmpv1K6XYM9rzdsd9bwYcYt3cfKE3m+/NrUa42+RpJBdFg7cAmxsZ7/0TMyVw6Aqu2gzldb2ag4iLrPNEyW1ywaJ2DXMgPi/sjnDzhuo+vIUrc86j4ZLhT4GAN6uqwbnXq5UDzX7TfuB48oMvvE1sK5q6owkdWfklgnC6pSBpK7wl+e3kuvaYnGRGJJMBQuVgWL1awHrVtfOTsSE1vc0ZdG+a/Jbza6pHbyfi5L7FXJAGdQTk0EP3VT54+F7RZ/MJ9fj56aMxzhJRwQJ6df3cM26qSc5bW/zP3PFXypTOBwzCvVtwGQzkGvDW7XGwgLbTNHDpQXOd2BQ5Zd9bjQqGg+S+kIqWZVZCqVLfyFPF9bEOHfPepL6nRDJUD2l5uRnXqeTvidaSIoqS1Fbc6mLPtYnbp6uuts6Qo8TbMzFuI7NuaPuKnQIyVu7vUGJ8jg1uVOjlMNKdVtLPr9/ZEKVZVj7lsFA+nm3zRjjr1DRKhr/wY1CI1iXKVTeQZ0i2PSnN99j4iVTSwNAYQLWWD+KyZ/xRLVxmZQPuSkLeKBRAkavxjWnIFQb1dn72wMSUdcB9cNCNJNdyTkrl44MRR+pUuiVrTAnTlzL33X32eEYwT+vn564yxFJLUDyIMNjJ0nx+GreKSOglI2et0kAwRHKYFclH9GVTiVlB0TWeUJGD+7JYogF7BizjTGyPOUEWQCguIEmtC4fHD5461T80Z3Mp7rhNTI+Cswuknr9hrIZmpRyFSrSrP8R4S1Cf34Tu4RNrDxpofVK9nGTklZPsYM6eiP29Lx264fsX9oLdYhq7vCwcrRMJ1a5d0QHXUYRV5IqTFBoUSpxkQ6IHHL8ckM4NCzwk8K0CA3pj5Jp2a9wZjfKq7R/eukzQFuhMxV2qgHf2E3t7/SA8N7sMvsmF0p3J96QRE3rA85ekH1q8nrBVujlIqahmL0Qto3+JxdqAfnKMCblQGSKVWZgWLMm82MG/9pjhdkMzG7C2GRLGMty2y8NhX1pZWHNbLOmvaC424LNz/Nl5tkPv7fVbCT2ItB+/dx3ZhVhmgSLd1zL+2PsNFmj7VGBruTttezlo1mDKErjY27nTswjf2fY/Uq8lPcVAgRpJM+m7jS/8dk8cdl7fkY7Tuj4TfiSe0tiNSoJgZwom4+9haoBQ65AifaB7pUiTc0MAXCvG+nDydkRIbKx5fL6gAlyMAnBbQf+Qh1naLfzzwLVTP0EEyoenW2W1zKqfMql5rwGlyCB9mSa2s25yHf4SDSBlgEVMJtplpRgegZvDakpWDKgx3UR4W7yKW+RD7bd7rEa/GQmA/q0RYAOIaXfO/2CgEUPtNhPS2uqy29lBYFPPv5SHQ0t/jRxQLBpe09ateAWKypt9TWS7Z5gynOePS5M2NC16AhF0Xz6s7DUjtI0xNho9Y6GK16J5V8HqHypV/OAz7+VBzTaiR57XGH4r62GoAiJqfWOM7okzKCeeSBnOIKPHtwgM0SQbvCvv7rmS6ZAacu4BbXZ5R9gOhdR9H3bi7lWLBNnqqLPIy0k6m4XBhtl40B6z/5AcJxjtKfwvIExl7VsQRqbW8gpPMsmJZfSp3uC35g1AkP+BJlju3RVoFZNo3JR18A5uc60NGD4zvzIdGTAOth4ZAZx0ZGQItHuNcLz/0CiavJdkjD65h4avf1vf7LFZ1uogJz6vLK3uDisXIBIGkXOlIpxTdjjjTQt6Khy50bYbXsG9JBrSUGhsBWpeRUnq2cZWOifhfueY95gFIDAu37oKR3FQ1YxGMg3UMq+L2VN2rtqodelSHof8SyYZVQWs7L0bjtgolId1tAAjHI7J1/+JIRXeUBjjaGGQAU+az9XFfiqn+VRAGG8JDdP/WmEqjhYpcy00LIBIBzCF9I9mbXCv8IX9fhPlI5NqWGO/v0ikpfn+hb5U16FcPYsx+xLb4la6nSbvrTDP5MthPyeLIIY7ZE/rNU4ajgPmI0/3RvD7WtEbo8UGPjnev55N2ELuFpEPzkNu9MzXqq8K0cWxk4lT2DQPi3rDO8x8i5jX7wWQi8e0neCMb0SUO67zRfaekZONGfaFl47LByciUuy5dhqxMPokhTE2WbzxqCyt/s2TqG66R0ocYHmzv9f7tJ+TES8NFyzL3fhNoZoW5IxWNE+stYWutd3LPwa7HKhhRAbl5uCEbEGjrUzTXwbzG0qvpmNtpnYnmKjzTaSAFNCxfw9edcjaxCiRKKIDd6GS/eDsGBgTvJexDfwGmVWm9jadZhee9jRFiZFtL6m7sY1oQa8F9ycxSuPANXCqWkApcaEfQLkt1yyfeRs5yC5O/6XGJ4TEtJmCTPJFRr95au20STIPgkoEF1mzZ+5ZRtWKUYuWJVZDwcA/lTy6oYp0/d0LGPRUXnXRm0qtIXQVdnoVhKZPeWACt9rujRL57MEDi2kHtfV/ucu+k03bN0fQlbalUJ0faY99GC6L8MO8MXTSmqDAxNSpqpIFPhgHgAg0YK/GZhlQjbQXE4tMDEDO9obNfp4W6m8fdznMesSSRINBG5FDf//DkT9pSRQsIdSg4VK7W7j2d2jsQUIyjJmbd/2zCTaqh0Yq0cH6mS/5g/cq3eGOiJbaCNo6oVwGURzXVAeVaGIfJFhd2A59sVp+rVfe1f8B6bVbCLIKgGUgpUokO0vTg6ouAxXGQKtveMhhBT83ukPIRZ02+qF1kvM+nNCVy8uzrB0+W9QIKbMio2m/7zW78xd5Tf9itocpLbRuNC5cuS/GyRGXw6fzFzjM1UITlQ5dlvoyYxuvb7ol4S1MyhkfMNZbif6/xic0wB3uSScez3oFTRbCHBd0cbJL3cLwfQjCBpGBrRVC7174qW4XWnw0eYGSSzTVSEDOlMaTUIGJO+s7/z8JxaZprcEsoB4+vt9/+uwtM/iyqLVPidu8ZTh+F1rsEWKwZhDAg/giVc6VzRq+DJCrhn81b/LYlLJOdgoAjID2VnwgU+mQhCL6KhgIqqiVraD25UIYEqxMcZ1aRcZvHa8x5gh5onPtsVcl53Xek9BOYqkyj64acX921zwqoY0lmNA81NE7BzVts3cwWDZ4Dk6uuzwtfJuJc7vVS+fdVDEg3ATwC9oG5/Vb1swTyzTsl2V4m+93bSQo5STFG5AruTDWTym6Lxtt4OrAeIVgdoyTJL+keHiHTNiL0/nO5oYwftSQK1aYBuA0e12t/FVN+LsCk0L/hfCCcke89LuP4d46qnFo3NLpHb+NFrvekXVT4GiZgMW2H0orIY0TpS15wlxVUaGCUo7YSN0yWDRU5+p41dCOs5/vXq1do7K+Byjj35/mPlQ+VEDqqF7OIBQrXfHgCXYPy8ye3Ih3io+tYA6nK0/2clIERrpA0AMHKLTGEO7q/IzIcOCwYN9W/ISH4v4uk9MhzNu7Fg2IPCq5CQF1GLuzQu+wNv2h94NIA2UJydawv5X2bHkZjv+kB/WQCYjxUNEU8ssUdxDZstpv2qNAHmI6BMD84olxMiwFdK5J80zc9x7de/cz3ZNIkkGIpMCZJqKKkaLVo1MLnR/h/hQeUvfqJmvkPeIre3EjnliNkKJKL0KNaupHzY7Eoztaj0cNOhJ5dxIRB2is3kLcSK1FZswRJR0B5OXX+Q4UlFIrhR10lIge3Fg5DnaGoZoOyFaaHztrdF251JubDsCZRDSWA0y6ysykO+h4jhXtuWF7D5Wp7B4Hx3EQvKsmPPZYcLevowjlWghHbRBEhwPI3bzjhNWXlqtym5ObYAeYxuHyvyYue2X4651f7Om3+m8KT7Y/JqLWXwgayCdzxHuJidti1ITuf/oXzeCfTRbG5ytXlDk/epX061W6BO074jI7nV518OkYtRJDnPqdDFAf0uWcATfk0h17+gP7GHjy0Rc0Ive9XmvA6gCkoMjNjMEA7GQ3xy7e12DzfNpIfND7GKKojMifTrvkDXrfa3o4wNYktY6/VlBdHtrcH9F7uMWICej/BjZXVX83WFGcVHx3nOXxSL59kE9bSmHc3Xp8iDbPuSG5GIRp3fTFHnmTzzGedl6al2gUbGFKtkC0jFNtKTk2rr8LEObiGgfCoSpTWknvAYDQBoj93s0KiRNPOqgY++Xka2cQiDwqUsLl8/i57YC/V6sy5/NvhViRRZgCzcyjNHGzZsYA5YMtUntyfC1gNFP7cL3AwVA+326NJI7MQJoxTqcHL/YhntsnYTR5R6GVVvFYIlW8Nv9qn3daoGXMz0MoAsXpCzbiHZ0XWkfw2qlJkmZjgQtMAEhHXNgokGRPfOprmtlvNZaNlGB1EjQTVX1Y4tCyJFZhdhID4CowB23uQF16NifyxH+DGnQrnxeklnG7UQV2BRVdr6ZEKZYv7Gj+PbpojzAskvbdtaFsataqPrLDoejjc6ZfPA5zA0iYcCvcNjzuy9SuT0uG8NWMTLv2OsImL++PQV1sifUENAwi4O3yBvzTy4J77B7mMBpjCYGXAyjFGFZL4eAazSmvZ8thJ0FFW+keLHL+ft1dQBKmXY6JatelGebcIC/PyLBHdfX9bRcauGg4xEO7mMl8AjlcPMczkPniNQpiQFqcDJYrFGoxMV2hskxMn0bRQT8Ajc6w6sQYkGl0CQUImPrGfie9dsk4mrCLMIFOqcm0WT8O8AiREEGmooBTO7WI0qk506NsV7ffvc0rVJERJKcyRyCmFZdTSn/SrBfjV7SXT3pQlgluoY4FBUCDDkzwBgjkrE1oFUA3ls+xVP10w5jjBIMwKBSQqRVAEDXw+Dyj+jH3ila8czULWsCKhWd4qGsMFN7++OGBAz9eXHjAO9m++mTXF6qiyG35Q+61yjYQKsBrjR4NNexrwVGqBwAZA6cr5mp8AhoyzPomJ6TLfWEJjEeRI3QsX5oQkNuyF7u650QFka+VjFeNRY6ALklleTW9I0v4ABKDCXTGkjv80vqVNk+FTL0bJK7ndSjjMJD7OBFIEywBPJFrxTdyzocmxEgG0zu1VDgsQuXITYCx1RRty89A/F+CdSAlbMlIkptCC0GrF/jFS8PAU+6TNV1eBqJrCr9BgH1mth8FtdfE7druR+xyZKn5idfUKzGW6ACGF4M61IRoSs9o6xmaj3dnAVQvFWUsMcR6MI3xTKJNyMxkhXhhvT0IxialnG7i/BBzXfMXYh5jl4BXzCSNlxU4+aboEgIDr48/+pfj8J3WcNccFfzV6eiX05qkNktmafoBcxrEsrM8WQV0VVSRybQyXPOqJ1yndwBI6BOGO9oGxGDAd+HcKaZlptCMJsR1Cp3m7F9HpBFSu/NYVj+WSDY7jWSFBlTBSCFyyPEUn8S9NmBVa+mwGVsz0Q+fxe23w1w6wVO7sVnZqRpmXJeXg72QFkl7Qda1lBzn/FW+rRwLvFxCsuad67Wmzab1RJdzPGsuq8AzW6tL+JiwW/VPUSBbBmV1+EjqQ28x1u9W5Eoy7zhsU8NT87CtNbZ0lPEpsoWMewxC80kPanfWPrQXmixWDXXz7uf1kBTr1J/iYuls7fUsyAChXjKcKOaCF4ySqkhMTGmjNqYiG5joBUi/SZpWvgxk28pyIPhf28YULINiqmbWPBKuTCLFruV7JfRgGM87XfNEFc7tgnYx503k/0UXJfpmjx6wKbKcvV5fqrctx+OrIn++TxRxSKlTScEIwd2vG5mg/p5wsQDpiD+X91XbkReKLB25Jvp/IJaJh715RXqBzwCwlY3URonyy+oZoTD8Ym8XMMv/dMllh0LCFZkZFn2gYcLG9iO+I5S/GyxwjajQLQtwH7o+n50vimC+ES8ePOpPDwlu4oG8KhS7NL/OTdIWPIHbSa6/9DfjOq9W66EpaK57R78PpEzVNLkTP2L6lllqDT6SDhIDIvQS3SQbxG96khXgvW/rME+tiXFXi+BC0udi9keyGlc3sLBN3CP3QXzswhBGTxvz2LmRMkU3rLuSkYR1Gzr7vj1VxTN1y1iciA0DswsPZ38eB6X10Uzk6HZqjzBK+EJ5osJJJ/s3b0MFRIWYlM15TPm1uzeOk1zQ96quClQLEZbpxmV/eAduIotXUYQZjWAkTulBJt7kw9uEnLo7OpZrf8k+0ZQP0agcOTLbfrekHji86Mxr7rTwve82mePKoAkkEthE45VI+f1VqpyWNW1kbBbVVfuatKt6MEKqyTUyxSFGHk81kY7CxkgMNexiikN0+IeiUNsfuktjfOAiMfDhbTe4rtxSEPvO4CCUGaktA58TGnSO8rHdCicmGkNrwWsnXgUWjhp8bllNcnQN10TbwxYPAwQKW/JJiYQadr4THXO+vWudiq3I47vqmEM/Ab3Dlq11Q7RmRWntYOEyESbTI8PZYwbtsmjcSwBtTAIHQ5h3I633h3FpOkT2c0PlMjzj0Q/OuqaTVt639fowVppqvSlNcK5KupBnrxfKHQK+SoKSuaO8PNMkYkbcEAc9F0I4uzPfRVP/q5QkvJVsVoJ8BEWW/q1+kivHEMQfb+J2NfJjSTG+WhjHjL8eqi7FgfVewxwmqG9IOnTkwDjAHUaJMIyhVkadW/+GQjLyNP4zyHcLAdWcB5zQ2kc/blAx2RKfG+ON3RfC+iQ5Th7V2i5abkoy0pjfyOwTjIvaq9slSCtoNGBZggBDOiWwau0CX4NAIThFyqu9VWCLr8TsqhQZvQP+xrywovGs6A079U7YBjhEXyQw4Q3rbQY1EQnxTPXNlHfn9vQnuhsJnzx6PZrCqry8fidPz2U1scmAMVPHxa/injIf+hDziEU02xWm9ou67OgebktON9V6wwVotoNOzVNJhiDBlHbktBwOjX1BlJHybLox5y/7NhR7uc8f85O6xdxueabhwtJjYcBzac56v6RbuI9IRvPzOnNbltj8Hh0ftwwhWyHAyiEat0oDSEVZ925jmxJKAqTo4/uHnkozgMDsnkzXPXBDJ1sDTawXy23mXuTJOYV6ZVWrervMaGGGQpgQjAnfP7KPZro+OKt/MpnoM0NeGQgIFAiH7dU7Nl1QbcMiwO6/5nIosJtrFB8w1kpqb6OjI9BgZHG1nzTMGA++HNrl4WQNcq3SajD4C9utQYAu/fETPFMMJeCDwHRCnPuRAlqJ5t0E5h3Wlh1Nw57LQ36kDjC3lS9w0a89eI8ym6BzEA25Cdz3LQAyz94Fvjqp7MyHrpm3PzmsV/tbSLF9NJBjFmzWPQ8Tfgvj3fi8dg78tXvEatqtUhLxsNp2VCU6IzSqafxWw93+Wk47skJv5qxM+tv7CrpYKvWLEylJNEXlh7GHm9UenNf2/szZOl+54P4ZWksh1r6+rphL68QYhmqW7DqKVrc2rjzPYcvFDmKtCGL/F62i3riMV9z+LoLnuVaMn4dtpNNFmQEQ4uEhDfLYU4x8G2OHCz7gnxLCa4zE4CFo9m/+ECmdzziVumHM/P00/BESH2rxUYMBL8/9NRG5fiskFJr4AO0qNUKUCgTRgEiFsTbGXtP4DTTzc8ZAmfNJuJQE5Kp7W7U7QZnBXKepfSHkYTEqgOhqo95Jw9i56kYGt4BWwX50mC27CCW92SVMl4tbUEhBDSB36zgztz5Zts0563Kjc34B+6ZUnMIk+BiQNvqSkZHnk3rHNSaYthO72IWLIxij0hcv7n228yc82FsQLK9jmptjY6estDfH3OSMaAj+poCLKwRFXvXWb6jwM9mG4nu1yug0Cc4L89w4EYek6dnV17VBfIxB2dmFFQdp0kqx3BM9gdMAr0KS7WLOSf3cn5eDItDLP2UW7MWaIR+GJ0EGcEL3ejBdu0to6vDh04JcRMNU55usmSn3jp74myzWE3azMIT96wr39F62c3G/ldGskbqTIMTk3gMg61vNBQ0cJSIxVdcgNb3xFDowwVyIqYz54F8Rqg0uQE4FIiUGZxJhND/AWhkukqIqLLZEpxj07kPBN6Zb2pWht/X5JrC8yJzPlvFhfJndQ4jcgjFyhvymr/a17uxTKHpKNWDEoL4nNa9/Prf7TYRw6Gyo6vcwYcUHk17SMb9aEdVnx24msNCDEKbj0OVzRaA3gFJeXZPObqJKvWqFlavGpxXnP+4ZYTl0Dmcri6vMdwX687ApG+ygiGHZDwNzU68F4JMPQ9JB45vLkCsE2w50QNP1kJZlI56dVGzfK1MyRqP4J6VshesfOT4hzR6MYq373IoONlLvENdYXN6pTxo5eRzQkwk2tZ1zmZqczCytqTEhpweKcBCCZ/FhizgLm8/x5ScBlO0wEXHZm90mpmL1gR/J2CUnz3wDU99YFFKqm01AZ8q2S5Fnh81CbD687c7K2OjWlZgdvEJA9M0JT3eKdIRd9GCx6g1TO5PWTE8OOphUDKdazyYnmMqFhFxfJ//cWJTsgYbol2a7Ob/Q69Fy3kb9K7aZLzH+Kl/uCzWnqTOrQonVL7LTFPr7wbTaepfAl5zSgMInjrGXY+Gspw+fCNgEU1zyC0Suum6VFyHBjdKWft7strrOXqOSQwxsYXp4F013mN9gZyu4Hc84A4dzIHN5UNXmxNn+vPjS82JM6klySWB9pLCzLBUgXiMDllaG6fT2PSBv/b+yaruyWBVcpsOKuEaQ37W3A3t9YFRcgB5rFMDjwOn3c0lfsg+5V+dBX2EmWLTSelNZkeq67CFnxaKtnlsAJRPBqYvoWVZcJKn0zSelrO2TwnailO7zgAHaMRmQYbXo9beBs16JWf7V8LjYGS/DYUKTTE1zKECC/pK1EKf6mxIgmV+mJ+Mc8h04qep+okIIEXaN351J3N0VUk7cEEaOLE1rFF3W4vqRcodPfbLqINF6QtTsfny1+O46J5ahlamZEyxglZtpjEkKd9yKDsgwnzqoAPN5o76IsI+FRaBc8u1qLBWxpKU615chTVegNFR5V4o1T2JGwVkueD6CjAhOplPnRyv8sauMnMy2wEMARR6AmCQ8S5ebL0nCEqjSztMoUyAEjQ6FDYqkGweu48DkBR5HjwlBloKVawYcDezxKBH8WWnMpJKZj1Ol+OHMmg5iq9xDswLx0iTNkujgatOkeRU0c/GmSSH+7GTTMLQJdj51l3EkojjEwWOjw8XBOm88GqC4bWPEE+U/5XYtZNJG/X4FYjgIvVd69RYVbMEMfPSKJ825e3XQ6RBesp/G+lkMk4VIxRakyUBPLO1u0UYnNG9ExAnPdOO0OfFvcPOL9rBJO8bR+q9Lp9/i+fH32KkaNR2WgoxQY3FY+rS2NUvtCOgZAaF9vny16WG/3zeUtRP9V28PcGivAHAwwCcRk0D0iohjAfgL/EKXJkr8gIFqbNq7lXUFRKqMbpBa182ol77SqJq1M5setGUJuSBKqYBYKdDZv3XdT/u6J5aKKkLvA5ez6PuWX0RT7kELSKDKfg9w9nwSmMmJHjbnr0blM2WvpiirR/nLid6SRN9+5KoLUb+pLw3QzD8JlS3X2q0m4BNRxfltr5KWqryOuuGDt6IOHSE8/zqGXMiTqgrUOfDH58NoWe0te4mFc1GxswvhZXWJZmaWaMJo2SBnuXa7+jIfFbnhNH74Z6jygwcqXsldYfI/Zh8BZbqTh2I7Hu44dilfbX8Uh18NVB3phRnTwpUonKquUs/iZXRnDFjtEmKg2YRQm2CP1FWRb/B92HqJlHT7Hs/Tpl3RrlxvkoskpNlW53/6Ujse0fkHLNeUm97TlDsaRXpfZkR1uWMTwhPv4oYM2Bv941R+c7nQ0yBdFNVQpZRkpejmIfjFrdQUA7DPwR69aq6Pzmk3IXarIMKG6R4MBdkB3j3HWxohnZLWpaNy/BMxS+84e4vPPfO/7+nLWVZsdpUY/nGDkQts0NGnRpZK/lW60tmncMoTepY5fMbow1GyKhqSXLbOZkz59l8DG9v9ZHPwA1roKz3MW/j2tN/U+lPQVYXTa6h1ePQkSWR2bp9OHmCCvT6s8v9PVG2ufK7dkbpY500gNx7fdArzH3yCjY33Fa5TbOuybLNdW8juJyJtikDn+5jMnMzIWP/+v12XkaXj195xk6eOKuvA5zeKk1i1PrSnmWA46Ca2ldgNqJ0rvLqM9X2EPn/QuMjLnLg0iVJ4H4r5S2PgpGdSdfVoiX/rBAq6yVDc30v8DOUae4oquSM0YDCIafLQ+hvEmB5b/f+QsTFtAR0zIVWeLyYbmrx3g9gHhVRfelCz9/exh19AGsyXcwuSaBiCzQIoctYvyhhkdCsC/cdZDce/1Fav35JQt+RJFAjiMRQhCdE4eS3SmfsREHe9LZa0ElOLhxxvs5uS/SnMYssyK9FxiucRjjOqfaIp2N8CmuNJqg3WvtMk+MlbAYeji9K94rx6U7nj9L1TGhVcAyz+Gb4sib21AW94HRzWbTrRKEkx5+KLE69Vc+8Cj1Vu2GkZ1AA2E4kaJ2aTjsEL2C0srAINXRAjnxwI3p5ED0NRYn9sT1iY9GPBJwhhd6WXEJ/Z44D0rufaDOA8dUj1SIqywRs2b7SjYcCYS8eefkwdWlpN0DvnecdwHVc3TqyCcUy7K2PMS2l2KZHzZfLCTCPaPq/NVc/Nlc5hVJoFvnNUpKWZcTsxVeHfH1mnELREECq9YES9v6FcvONCxXLQmf0k3S2dyNmsxbvlXM0u7lSqkx81md0rad3E33PPuPpDGM9UiBhSeJn3Sejmx+LdLCiZYcVxow59nCqrUmXGAbsR4O7wVQzyHdL6DX5s8k5BjHXlONz0PaIqS89xMhkYetMw6w7JZ5c/oJBH2jdZPbS6KbR0RpEe16BATLzU4QiHybxArrjBM8MKKP8Zz6MVbg/d8yb76U8nQzCK4Eqa5ombBm7/6xo2dR9O/ByfcU6qDu+efdLFAP4LiCr6C3aihDPjigUYuy0voLuX3Flevl7xXRtRZ4Vc48j2tgA7tK0wqv4OjLwCzZJn9lYIQuScQBEFMBjA6Vj8FTp4h3OphB6g0uA13nTnVLmKQ+zfELl+6znWX5nCWvbwak0t3q4qwWK3MAPKE2vqDEeCsFKvmJ2Ws+VOqnrA+ekCk9jaszBsZd71InADWijT4SHnyVmc55dv5ivXl1fED4vwNrxbiZHWeGinS3ImcoDAT1vGiLpP/D3NaiIPq9A2h5DT5SgaCVCh0JKu7DKsHjW9ZAACRxHgTSo5jrVWUJfGKweg2auQuittVidB+JaCdwYd0x9oJ4jyI5UygrB9Nzi2gbLVcCnpu+1ytsiWCbJb1Xxas8FhG/EX86taG6flZZauhaGnpRyfBB5ojGdsdPBVHEtb8R951oaNTvKXK7CddSeWaeOi2FIDPEhWhAk19RzuR9wSKEwvvi8nQFz649+fUlBMuDL7VmUBSsC1ExWwqY+uSdNKowEkpsBb+/KpWl6oGxymyR/e4uKjipBJrVPXg0nE2j6HL2JbCHNh01lV+/+6FUglhV8GTypzdvdfhYc7t0ZYtkyH/17wDakU7r1GAdUIXXmtxamhK2FdelBa4BPryblCC9gJG9htJue9LMrNS7mM6gbRA1xSFnWNsziDuGZeS3Dcu4bjsWaIebrgNnxpl/pLGxV5EtkFwDeh8fPyfPU8CZAM/Ljk3+Vi7jUtNZmZM8+f7d4wlUIkTHiAULRUKu0ODFIeyk20BiqLB7vvAT342SIDP+z5FPaa6Tjyqh/AsX2jFhbeIXKxDMb8fid0jHAWk6JKhswbtvtP6bDz+lYjvXIPwV1Y+nyft2uM8c1aUxmDHAUmZnJBvZXT43mxjXDHP05R1/dKfoExcgcYzv3wO5mazi7ugS01z6oUmByKtfQ6fA2+MQynPCoDHcp1eDtag/E3HQpHMWAgGkNh9wWR5Y48YG0W4CgvOrngI111j/x+MIuH5xFlVkxqptSjW+hnVbt9qxtXndEH5RtnxWfd9eP+kli/x3LU1WGsZVAkVElXD274LBGK0bMveEUbj/6EpnocEnvRSlglpE4GiAO5S4JdYb4uYd6oeK8vuZvTQaWMS3dEIJ2ssCxWz8DqYmc/b38ynz0DWCCeF1gCyipaLG2Kq9wqfHz3S6m7CS+H42nmDYAz2dYcx77M8purGOS5tQ4aykJXIDQBwHjIGSU+52M+1OV53rp4B3JbIXecQWEjfk9gkVoz8T6HJbIhFgm3quNMk+cIyRHlj/BdURXY8o7H7dBQfsdpLJhAsxS/1JtMkY8JoP4YdyOxzJY5x/+A9scOTXvPVoQAMqgmP899s6GvRtzNFGXLX7VHSnUj7VPO8K1qxaS/a/6v/YhRlUtNgnqnth3Jo/DKbdhdPn6HgB9YjU5GuN1uPyUXZJDZYfFwMfdqNPVoI8d1csoHMK5tquGoK060mIwBHMk3pFGqBosajr9g/5kBPrrtuIIEPFZnaAKSCQqLdeQq2B6Bs8WxD8+DfzGJ2nu0Xeb58spPoiHZAVV+I5lRUseUE0IA4E844UzFYADNYcLBW3zsP7aWzLnUZoQPuIDR3FX3bkM5mCunvXaPSi4PRkKnItEv8/OYiq8RSKQcaTwxX9YgdNbgPuXLwb5ARofv0Zj3WpHhNnlTq2Qu/lwvM3PUaqv8L7kpFqQR9aRaXfFanbLgbyxJ2kAx9oA1kRMyH3JXI06oQhRiZQ1LtWz+QKKxme0zAgI2q6/dmYApsA7WGeBae5+Y3eqkqDjXyS7Q+LzYgrM3EiqGHsibaKZKgFecxpGiMLXY5+kkuDKBdMkj2Bd8uTKI+aTWpu97gNp78fm891zYuT68sIEzE5JggpWjlWFSpzYayxvnOxJ3JYK/q8WbCy14KhtCFhdLOxCEAvyqXN3K+oP52ZzdxHiCAac5LX2TO5CTmkxp6zCT5JZDIBgnnmQU8GBowEvogfPni17fE1sljd55P2C4mWCNDr8l3hMH+4zpyZqp3iFbJx20nGtU+9LJozl0OxNrk/c0C9chEe+k4vUECnUaXbS8JqdnymqbZ1SCI+4+1BYMW4nzYKDLaqL3Nm08C/Ug7zNg2BuwhWepXrkqaRX58LCWLPDQyUzn369E1drtekeuNcI4SgdmyQZ/7xhXZ6sOKg9G/HEiJQsriRQThvHz4BhaFaXic4nlrz4LhUthGBLbnnB6tufJizYx4c6b2rY1E63pLDA8QdZsTOD7euNMku1a0T2nNQ9rOPBYPDyksaP+EmKTvqcgRycKMtzhHh37mAqVERuzIIMs/zXE9jGBpJBBWb8KCPZne6Sxw0+UFlY6/VeXJUHunHXY1csfc40Tw95XrkpLzxqX/LrsaYM7Y0UQ/Qe6PTjMQUXDseSMhYwHTXCohySQ+1fIjz/yjZWRFI1/a4d9eQzWLoGjz8O8ldPhzhpWFwwlaR0T1gpMP3VeHvDOx4RJocHJOSRQ+H4/nHJsiuXWDKowYZZW8Jk9vUiw2jExedn7glAsC/bgN1NrgIp1y+y3tmLd2V9x7yKVC+QK6MOFq19dlQflj350qUavBULMCTn0BvCRQY4q6VjniU6XHISUsaApCVoQeevAOuCUFcnwWfK+44XDo1qSpPF1wcnbH7N9aO+AzD212PgFlGkXlaQ3Gbfz9XIUMjulgGUREelr6IX+tR2K9H/yep959z5WLXlZ81Z8HCIV8CyU0JKYzkIeFqf6o2ywb2O73oRi7i8F6Vcn2zU1VWZpLfSXgTNkRtqM7r5s13UimLWtAVZs97rLcMRlwXzYp98ZnKvQLj/dpKn8nfNnU9V2Bp90frlQedeKt6zd4mPR53FKQ1J4r95n1G8ph0XG37DC9b185sWbnoyC4Q1iUvyy5IOxBrIqbqn/JSUWzdrlOiZGDJrU5IGuzUl5TaupUTIgFeLfT6uh0gIEJ5nZQ/8XjB0mmEZxTvocrU/BFoOaUvV/N48W3W/aQu5nR3KwsSByfSDAEq6qBqTVTkZtkaAd/1Rie2jkdRlZvxFMu0MGnLc0SHPII8eOz/bjfIhSQhAb38dSRcFmfRb+fpDrDHeazED6EHNayy0kESoRG+XFbJa6xWB6OlbwHVDwdO9Ka7bIOqLRHpZjwXmv/2DR9nu+2xwxE39cBHq/7Vv99HcvH8ZJeGmgHr8mBKQmOCTkvLkxf5k4FrqZuNpaRNhCB3puFuF5d2nnQbhgAaANLMCYAiGsJhX2bFM/r3BGhR/dkGPXeBQUJ4tTARQnVqA07mW/42Dv2k7Wa7hWU/wv7FTIWLwWyHX0Vqdg4BHrlJ7zh+b+T6fH+W3d53LS5rkXK5GIctMIttK+osfGYIvOD0BkkXBJR0EYUmteToIxpoaMVKZmCRC2BbmBLdUTIZiI1kVYKYnq9Q5xMGODu+6vCT2ofvYE0pmGbQ9Ln6wnBDYZUD/BL9rmiPn3n28Zs33OsHUQcLp2vjUEV5sOBLO2ScyescGu0N58y1q1NSNJuXCzI4fu4RWJtSIn3P3+9eAsMo/2NupFeaf70/usLGd2Z0F27EjLoIj+nmJ4/Q5edPFhVNpPURQrUzPALNNzEvx3e82rDtPpbZjugv7Abm2q2vMGwz5W+hGH0hkCzXdZhPFbLk0sR5vVhScLgAPdZIVZIjTuzwIKVuWmvpMr7Gwxgiglpy8ecfOAZcCpXRzG6lNuRB64D4G9AWD9vQi/crWV4Xq5VjJnRjQc3g4bJe+MmksjEctghn27n5i5PHZvW/gM0BsXzo8Pou6yOLnp49dGXpK/oLAbOdOel9h+kDqEtZunvsXa9EFomdl0QbDvk+H58SjszCVqVOXSgDpOdZjXWfZpFL6S/fd1Lq8FQS3LklgiNhdvE5GzgSO8uq3gtj8I2o+JzucnrUSrtoxa6IejmVQLGzF3rSCy3fdhBPhZnDdgctC89dRJ+PTfW4ga5WWAyaWspzFg5251FoByB8LUbD3AxhvV6M1ARNXRJ4NhPe2j9WOlu5I2KmCMGvGP5CbHAyZk3YhiuIdtDgOvre9Cz0yOWvHH5FpZQzqzyHE5XkTTFMU2JhG1nvne9SCi9zNvPnGj9h/bQXgpue78rpogXJl8oDSfMwz9fp4ocyOxEV1JCEslSsRvodEzPbUsMUYWDERNzR6f45Ku6EmW3qdD48dcFQtc9rr2wF3o85edZ/2SY0BSkOdQX1ahwPVBP554Q1Z4lbd0d/vrRCO5k3QBWOb3iML0vI4MRkiKwqt735Q2fkq0Xl1pI3nk4ll51cSEHOrFTctkxwLOiQl6HJh2q3iqHFmtOCSo0A4YLl+mllolm7FLpe/79gMoe7A5cbFPCbX9Z3GhI43FgBbWoq8pwaIoDlklRimVauOx355pv7v26P0MLrgiqWTOxJaIGO/UhHf7GSOm0r1O5m1sPYYn1bathmEkYfrQLiEWQ2/3IjunsIxgAmi6t4JsxalYxE4YyvD59EpzvswOjZUvSgkHwPZonVtaiMTLXnV3p0dKpCSSz38Kv8QbNFzqLbwbBBRUHw/nHSxNipNm5vtjfkuf06jWRwkctgu8wZqKwS/7IcGnFtmwnbJFPhpGcyV9GVFzCCG+TOeNgAWxOUPgmtLdD8JawVVDV+e3iR8kHuaZXIknncI/3uFnblTd2P/OdWvxl+9CXbqJb1CS8osg2fg/qaA9KvM3FQoZQ79JRZC/Upm90ABPCGzksTWJ7Xy9VHpnPZCgGzAVbJhmurq8tm24BjBvnm1GOKfotvCqXyIXFE1bYTRS1WtzgZrGWgR/oOUDnNgDPXqUfTmyFPfNCD9MX22hvuBans/Kl1DustiTunl9Kravj0NG1Ds5nkTqlQSYOfhgvRIowimmWAYWma55eqvaQL9GvHmuH/hIVB/tiN6s7yOW2iahReL8dNddIbMJ6BLVguJ4n1dnquV3ZNqi6V0H/Vn00j0cE80ERsZTgsHPJ0eUjxYik+eDtaEHnyAsYeR2AjRcGw=="),function(Ce){return Ce.charCodeAt(0)}),me=new Uint8Array([177,156,215,89,13,111,230,1]),fe=new Uint8Array(Te.length),Ne=new Uint8Array(256),je=0;je<256;je++)Ne[je]=je;var ke=0;for(je=0;je<256;je++){var qe=[Ne[ke=(ke+Ne[je]+me[je%me.length])%256],Ne[je]];Ne[je]=qe[0],Ne[ke]=qe[1]}je=0,ke=0;for(var et=0;et<0+Te.length;et++){var h=[Ne[ke=(ke+Ne[je=(je+1)%256])%256],Ne[je]];Ne[je]=h[0],Ne[ke]=h[1],et>=0&&(fe[et-0]=Te[et-0]^Ne[(Ne[je]+Ne[ke])%256])}return y=!0,new Promise(function(Ce){var L,xe;(L=fe.buffer,xe=te,WebAssembly.instantiate(L,xe)).then(function(L){y=!1,D=L.instance.exports,F.__wbindgen_wasm_module=L.module,Ce()})})}().then(function(){u=W.new(),q(u)})})).then(function(q){K=q});var ye=!0;setInterval(function(){Object(v.getParameter)("UPLOAD_LOG")&&ne.info("console log upload")},9e5);var ne=function(){var q,F,te,Te,me,fe,Ne=null,je=["DEBUG","INFO","WARNING","ERROR","NONE"],Ue=0,qe=function(h,Ce){if(Object(v.getParameter)("UPLOAD_LOG"))try{Ce=Array.prototype.slice.call(Ce);var L="";if(Ce.forEach(function(xe){"object"===M()(xe)&&(xe=JSON.stringify(xe)),L=L+xe+" "}),x.push({payload:L,log_level:h}),ye)return;"free"===w&&function xe(Qe){w="uploading",setTimeout(function(){!function(h,Ce,L){var xe={};Array.isArray(h)||(h=[h]),h=h.map(function(st){return{log_item_id:m++,log_level:st.log_level,payload_str:st.payload}}),xe={timestamp:Date.now(),sdk_version:v.VERSION,process_id:Object(A.getProcessId)(),payload:JSON.stringify(h)},K?xe.hash=K.get_digest("".concat(xe.payload).concat(xe.process_id).concat(xe.timestamp)):L&&L();try{var Qe=Ne,ze=Ne||"https://".concat(Object(v.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2");Object(N.post)(ze,xe,function(st){"OK"===st?Ce&&Ce():L&&L()},function(st){L&&L()},Qe?{withCredentials:!0}:{withCredentials:!0,"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})}catch(st){L&&L()}}(Qe,function(){ue=0,0!==x.length?(ee=x.splice(0,x.length<10?x.length:10),xe(ee)):w="free"},function(){setTimeout(function(){xe(ee)},ue++<2?200:1e4)})},3e3)}(ee=x.splice(0,x.length<10?x.length:10))}catch(xe){}};F=function(){for(var h=[0],Ce=0;Ce<arguments.length;Ce++)h.push(arguments[Ce]);q.apply(this,h)},te=function(){for(var h=[1],Ce=0;Ce<arguments.length;Ce++)h.push(arguments[Ce]);q.apply(this,h)},Te=function(){for(var h=[2],Ce=0;Ce<arguments.length;Ce++)h.push(arguments[Ce]);q.apply(this,h)},me=function(){for(var h=[3],Ce=0;Ce<arguments.length;Ce++)h.push(arguments[Ce]);q.apply(this,h)};var et={};return fe=function(h){et[h]||(Te.apply(void 0,arguments),et[h]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,stopWaitJoin:function(){ye=!1},enableLogUpload:function(){Object(v.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(v.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(h){Ne=h?"https://".concat(h,"/ls/?h=").concat(Object(v.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v2"):"https://".concat(Object(v.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2")},setLogLevel:function(h){h>4?h=4:h<0&&(h=0),Ue=h},log:q=function(){var h=arguments[0],Ce=arguments;if(Ce[0]=T()+" Agora-SDK ["+(je[h]||"DEFAULT")+"]:",qe(h,Ce),!(h<Ue))switch(h){case 0:case 1:console.log.apply(console,Ce);break;case 2:console.warn.apply(console,Ce);break;case 3:console.log.apply(console,Ce);break;default:return void console.log.apply(console,Ce)}},debug:F,info:te,warning:Te,deprecate:fe,error:me}}();le.default=ne},function(ge,le,U){"use strict";U.r(le),U.d(le,"report",function(){return C}),U.d(le,"SESSION_INIT",function(){return B}),U.d(le,"JOIN_CHOOSE_SERVER",function(){return P}),U.d(le,"JOIN_GATEWAY",function(){return G}),U.d(le,"PUBLISH",function(){return V}),U.d(le,"SUBSCRIBE",function(){return ie}),U.d(le,"getProcessId",function(){return J});var D=U(43),R=U.n(D),M=U(7),T=U.n(M),N=U(2),v=U(0),A=U(14),p=U(28),_=U.n(p),E=U(44);function k(d,W){var y=Object.keys(d);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(d);W&&(u=u.filter(function(K){return Object.getOwnPropertyDescriptor(d,K).enumerable})),y.push.apply(y,u)}return y}function H(d){for(var W=1;W<arguments.length;W++){var y=null!=arguments[W]?arguments[W]:{};W%2?k(Object(y),!0).forEach(function(u){R()(d,u,y[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(y)):k(Object(y)).forEach(function(u){Object.defineProperty(d,u,Object.getOwnPropertyDescriptor(y,u))})}return d}var I,S,B="session_init",P="join_choose_server",G="join_gateway",V="publish",ie="subscribe",de=new(U.n(E).a),oe={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},ae=null,J=function(){return ae||(ae="process-"+_()(),v.default.info("processId: "+ae)),ae},C=(S=0,(I={list:{},setProxyServer:function(d){de.setProxy(d),I.proxyServerURL=d},getUrl:function(){return I.proxyServerURL?"https://".concat(I.proxyServerURL,"/rs/?h=").concat(Object(N.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(N.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message")},getBackUrl:function(){return I.proxyServerURL?"https://".concat(I.proxyServerURL,"/rs/?h=").concat(Object(N.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(N.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message")},getSessionStartTime:function(d){return I.list[d]?I.list[d].startTime:(v.default.DEBUG("[getSessionStartTime]: session ".concat(d," no exit")),0)},sessionInit:function(d,W){var y=T()({},oe);y.startTime=+new Date,y.sid=d,y.cname=W.cname,I.list[d]=y;var u=T()({},{willUploadConsoleLog:Object(N.getParameter)("UPLOAD_LOG"),areaVersion:"global"},W.extend),K=T()({},y);K.eventType=B,K.appid=W.appid,K.browser=navigator.userAgent,K.build=N.BUILD,K.lts=+new Date,K.elapse=K.lts-K.startTime,K.extend=JSON.stringify(u),K.mode=W.mode,K.process=J(),K.success=W.succ,K.version=N.VERSION,delete K.startTime,I.send({type:"Session",data:K}),I._flushInvokeReport(d)},joinChooseServer2:function(d,W,y){if(I.list[d]){I.list[d].uid||(W.uid&&(I.list[d].uid=parseInt(W.uid)),W.cid&&(I.list[d].cid=parseInt(W.cid)),W.vid&&(I.list[d].vid=parseInt(W.vid)));var u=T()({},I.list[d]);u.eventType=P;var K=W.lts;u.lts=Date.now(),u.eventElapse=u.lts-K,u.chooseServerAddr=W.csAddr,u.errorCode=W.ec,u.elapse=u.lts-u.startTime,u.success=W.succ,u.chooseServerIp=W.chooseServerIp||"",u.chooseServerAddrList=JSON.stringify(W.serverList),delete u.startTime,I.send({type:"JoinChooseServer",data:u})}},joinChooseServer:function(d,W,y){if(I.list[d]){y&&(W.uid&&(I.list[d].uid=parseInt(W.uid)),W.cid&&(I.list[d].cid=parseInt(W.cid)),W.vid&&(I.list[d].vid=parseInt(W.vid)));var u=T()({},I.list[d]);u.eventType=P;var K=W.lts;u.lts=Date.now(),u.eventElapse=u.lts-K,u.chooseServerAddr=W.csAddr,u.errorCode=W.ec,u.elapse=u.lts-u.startTime,u.success=W.succ,u.chooseServerIp=W.chooseServerIp||"",u.chooseServerAddrList=JSON.stringify(W.serverList),delete u.startTime,I.send({type:"JoinChooseServer",data:u})}},reqUserAccount:function(d,W){W.vid&&(I.list[d].vid=parseInt(W.vid));var y=T()({},I.list[d]),u=W.lts;y.eventType="req_user_account",y.lts=Date.now(),y.success=W.success,y.serverAddress=W.serverAddress,y.stringUid=W.stringUid,y.uid=W.uid,y.errorCode=W.errorCode,y.elapse=y.lts-y.startTime,y.eventElapse=y.lts-u,y.extend="string"==typeof W.extend?W.extend:JSON.stringify(W.extend),delete y.startTime,I.send({type:"ReqUserAccount",data:y})},joinGateway:function(d,W){W.vid&&(I.list[d].vid=parseInt(W.vid)),W.uid&&(I.list[d].uid=parseInt(W.uid));var y=T()({},I.list[d]),u=W.lts;y.eventType=G,y.firstSuccess=W.firstSuccess,y.lts=Date.now(),y.gatewayAddr=W.addr,y.success=W.succ,y.errorCode=W.ec,y.elapse=y.lts-y.startTime,y.eventElapse=y.lts-u,delete y.startTime,I.send({type:"JoinGateway",data:y})},publish:function(d,W){var y=T()({},I.list[d]);y.eventType=V;var u=W.lts;y.lts=Date.now(),y.eventElapse=y.lts-u,y.elapse=y.lts-y.startTime,y.success=W.succ,y.errorCode=W.ec,y.audio=W.audio,y.video=W.video,y.screenshare=W.screenshare,y.publishRequestid=W.publishRequestid,y.p2pid=W.p2pid,W.videoName&&(y.videoName=W.videoName),W.audioName&&(y.audioName=W.audioName),W.screenName&&(y.screenName=W.screenName),delete y.startTime,I.send({type:"Publish",data:y}),I._flushInvokeReport(d)},subscribe:function(d,W){var y=T()({},I.list[d]);y.eventType=ie;var u=W.lts;y.lts=Date.now(),y.eventElapse=y.lts-u,y.elapse=y.lts-y.startTime,y.errorCode=W.ec,y.success=W.succ,y.subscribeRequestid=W.subscribeRequestid,y.p2pid=W.p2pid,isFinite(W.peerid)?y.peer=W.peerid:y.peerSuid=""+W.peerid,"boolean"==typeof W.video&&(y.video=W.video),"boolean"==typeof W.audio&&(y.audio=W.audio),delete y.startTime,I.send({type:"Subscribe",data:y}),I._flushInvokeReport(d)},firstRemoteFrame:function(d,W){var y=T()({},I.list[d]);y.eventType="first_remote_frame";var u=W.lts;y.lts=Date.now(),y.eventElapse=y.lts-u,y.elapse=y.lts-y.startTime,y.width=W.width,y.height=W.height,y.success=W.succ,y.errorCode=W.ec,isFinite(W.peerid)?y.peer=W.peerid:y.peerSuid=""+W.peerid,delete y.startTime,I.send({type:"FirstFrame",data:y})},firstVideoReceived:function(d,W){var y=T()({},I.list[d]);y.eventType="first_video_received",y.lts=Date.now(),y.peer=W.peerid,y.uid=W.uid,y.elapse=W.elapse,y.subscribeElapse=W.subscribeElapse,y.subscribeRequestid=W.subscribeRequestid,y.p2pid=W.p2pid,I.send({type:"FirstVideoReceived",data:y})},firstAudioReceived:function(d,W){var y=T()({},I.list[d]);y.eventType="first_audio_received",y.lts=Date.now(),y.peer=W.peerid,y.uid=W.uid,y.elapse=W.elapse,y.subscribeElapse=W.subscribeElapse,y.subscribeRequestid=W.subscribeRequestid,y.p2pid=W.p2pid,I.send({type:"FirstAudioReceived",data:y})},firstVideoDecode:function(d,W){var y=T()({},I.list[d]);y.eventType="first_video_decode",y.lts=Date.now(),y.peer=W.peerid,y.uid=W.uid,y.elapse=W.elapse,y.videowidth=W.width,y.videoheight=W.height,y.subscribeElapse=W.subscribeElapse,y.subscribeRequestid=W.subscribeRequestid,y.p2pid=W.p2pid,I.send({type:"FirstVideoDecode",data:y})},firstAudioDecode:function(d,W){var y=T()({},I.list[d]);y.eventType="first_audio_decode",y.lts=Date.now(),y.uid=W.uid,y.peer=W.peerid,y.elapse=W.elapse,y.subscribeElapse=W.subscribeElapse,y.subscribeRequestid=W.subscribeRequestid,y.p2pid=W.p2pid,I.send({type:"FirstAudioDecode",data:y})},onAddAudioStream:function(d,W){var y=T()({},I.list[d]);y.eventType="on_add_audio_stream",y.lts=Date.now(),y.uid=W.uid,y.peer=W.peerid,I.send({type:"OnAddAudioStream",data:y})},onAddVideoStream:function(d,W){var y=T()({},I.list[d]);y.eventType="on_add_video_stream",y.lts=Date.now(),y.uid=W.uid,y.peer=W.peerid,I.send({type:"OnAddVideoStream",data:y})},onUpdateStream:function(d,W){var y=T()({},I.list[d]);y.eventType="on_update_stream",y.lts=Date.now(),y.uid=W.uid,y.peer=W.peerid,y.audio=W.audio,y.video=W.video,I.send({type:"OnUpdateStream",data:y})},onRemoveStream:function(d,W){var y=T()({},I.list[d]);y.eventType="on_remove_stream",y.lts=Date.now(),y.uid=W.uid,y.peer=W.peerid,I.send({type:"OnRemoveStream",data:y})},streamSwitch:function(d,W){var y=T()({},I.list[d]);y.eventType="stream_switch",y.lts=Date.now(),y.isDual=W.isdual,y.elapse=y.lts-y.startTime,y.success=y.succ,delete y.startTime,I.send({type:"StreamSwitch",data:y})},audioSendingStopped:function(d,W){var y=T()({},I.list[d]);y.eventType="audio_sending_stopped",y.lts=Date.now(),y.elapse=y.lts-y.startTime,y.reason=W.reason,y.success=W.succ,delete y.startTime,I.send({type:"AudioSendingStopped",data:y})},videoSendingStopped:function(d,W){var y=T()({},I.list[d]);y.eventType="video_sending_stopped",y.lts=Date.now(),y.elapse=y.lts-y.startTime,y.reson=W.reason,y.success=W.succ,delete y.startTime,I.send({type:"VideoSendingStopped",data:y})},requestProxyAppCenter:function(d,W){var y=T()({},I.list[d]),u=W.lts;y.eventType="request_proxy_appcenter",y.lts=Date.now(),y.eventElapse=y.lts-u,y.elapse=y.lts-y.startTime,y.extend=W.extend+"",y.APAddr=W.APAddr,y.workerManagerList=W.workerManagerList,y.response=W.response,y.errorCode=W.ec,y.success=W.succ,delete y.startTime,I.send({type:"RequestProxyAppCenter",data:y})},requestProxyWorkerManager:function(d,W){var y=T()({},I.list[d]),u=W.lts;y.eventType="request_proxy_worker_manager",y.lts=Date.now(),y.eventElapse=y.lts-u,y.elapse=y.lts-y.startTime,y.extend=W.extend,y.workerManagerAddr=W.workerManagerAddr,y.response=W.response,y.errorCode=W.ec,y.success=W.succ,delete y.startTime,I.send({type:"RequestProxyWorkerManager",data:y})},requestWorkerEvent:function(d,W){var y=T()({},I.list[d]),u=y.startTime,K=Date.now();delete(y=H({},y,{},W,{elapse:K-u,lts:K,productType:"WebRTC"})).startTime,I.send({type:"WorkerEvent",data:y})},requestApWorkerEvent:function(d,W){var y=T()({},I.list[d]),u=y.startTime,K=Date.now();y=H({},y,{},W,{elapse:K-u,lts:K}),I.send({type:"APWorkerEvent",data:y})},sendCustomReportMessage:function(d,W,y){var u={type:"UserAnalytics",data:H({sid:d},W)},K=I.getUrl(),m=!!I.proxyServerURL;Object(A.post)(K,u,function(w){y&&y()},function(w){var x=I.getBackUrl();Object(A.post)(x,u,function(ee){y&&y()},function(ee){y&&y("Failed")},m?{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},m?{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},joinChannelTimeOut:function(d){I.send({type:"JoinChannelTimeout",data:H({},d)})},peerPublishStatus:function(d){I.send({type:"PeerPublishStatus",data:H({},d)})},joinWebProxyAP:function(d){I.send({type:"JoinWebProxyAP",data:H({},d)})},webSocketQuit:function(d){I.send({type:"WebSocketQuit",data:H({},d)})}}).reportApiInvoke=function(d,W){var y=W.tag,u=W.name,K=W.getStates,m=W.options,w=W.timeout,x=void 0===w?6e4:w,ee=W.callback,ue=W.reportResult,ye=void 0===ue||ue,ne=Date.now(),q=0,F=S++,te=function(){return H({tag:y,invokeId:F,sid:d,name:u,apiInvokeTime:ne,options:m},K&&{states:(fe=K(),Object.keys(fe).reduce(function(Ne,je){var Ue=Ne;return null!=fe[je]&&(Ue[je]=fe[je]),Ue},{}))});var fe},Te=!!Object(N.getParameter)("SHOW_REPORT_INVOKER_LOG");Te&&v.default.info("".concat(u," start"));var me=setTimeout(function(){C._sendApiInvoke(H({},te(),{error:"API_INVOKE_TIMEOUT",success:!1}))},x);return function(fe,Ne){if(clearTimeout(me),++q>1&&(fe="EXECUTOR_INVOKE_".concat(q)),fe)return C._sendApiInvoke(H({},te(),{success:!1,error:fe},K&&{states:K()})),Te&&v.default.info("".concat(u," onFailure"),fe),ee&&ee(fe);C._sendApiInvoke(H({},te(),{success:!0},ye&&{result:Ne},{},K&&{states:K()})),Te&&v.default.info("".concat(u," onSuccess")),ee&&ee(null,Ne)}},I._cachedItems=[],I._cacheInvokeReport=function(d){d.lts||(d.lts=Date.now()),I._cachedItems.push(d),I._cachedItems.length>50&&I._cachedItems.shift()},I._flushInvokeReport=function(d){if(I._cachedItems.length){var W=I._cachedItems;I._cachedItems=[],v.default.debug("Flush cached event reporting:",W.length),W.forEach(function(y,u){y.sid=d,setTimeout(function(){I._sendApiInvoke(y)},5e3+500*u)})}},I._sendApiInvoke=function(d){var W=d.tag,y=d.invokeId,u=d.sid,K=d.name,m=d.result,w=d.states,x=d.options,ee=d.error,ue=d.success,ye=d.apiInvokeTime,ne=d.lts,q=Object(N.getParameter)("NOT_REPORT_EVENT");if(!(W&&q instanceof Array&&-1!==q.indexOf(W)))if(I.list[u]){var F=I.list[u],te=F.startTime,Te=F.cname,me=F.uid,fe=F.cid,Ne=(ne=ne||Date.now())-te,je=ne-ye,Ue="";if(x)try{Ue=JSON.stringify(x)}catch(qe){Ue=x.toString()}var ke=H({invokeId:y,sid:u,cname:Te,cid:fe,lts:ne,uid:me,success:ue,elapse:Ne,apiName:K,execElapse:je},void 0!==x&&{options:Ue},{},void 0!==w&&{execStates:JSON.stringify(w)},{},void 0!==ee&&{errorCode:JSON.stringify(ee)},{},void 0!==m&&{execResult:JSON.stringify(m)});I.send({type:"ApiInvoke",data:ke})}else I._cacheInvokeReport(arguments[0])},I.sendCache=[],I.sendTimer=null,I.send=function(d){if(d.data){var W=d.data;I._lastLts&&I._lastLts>=W.lts&&(W.lts=I._lastLts+1),I._lastLts=W.lts}if(I.sendCache.push(d),null===I.sendTimer)return function y(){I.sendTimer=setTimeout(function(){if(0!==I.sendCache.length){var u=I.sendCache.splice(0,I.sendCache.length<10?I.sendCache.length:10);return de.sendReportList(u,I.list[u[0].data.sid].vid),y()}I.sendTimer=null},Object(N.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()},I)},function(ge,le,U){"use strict";Object.defineProperty(le,"__esModule",{value:!0}),le.BUILD="v3.6.5-0-g5b46e23",le.VERSION="3.6.5";var D=0*Date.now()+11499+86604+5615+6547+846;le.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,100,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]},le.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var R={AREA_SETTING:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"web-2.statscollector.sd-rtn.com",EVENT_REPORT_BACKUP_DOMAIN:"web-3.statscollector.sd-rtn.com",ENABLE_LIVE_SERVER_LIST:!1,LIVE_SERVER_LIST:[],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e7,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,LIVE_STREAMING_TIMEOUT:12e4,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1,AP_BACKOFF_MAX_TIME:8,SET_DEFAULT_TURNSERVER:!0,TURN_SERVER_PASSWORD:D.toString(),PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",NGINX:"webrtc-cloud-proxy.sd-rtn.com",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CR:!0,CRL:10,CRI:6,CUSTOMER_REPORT_TIMEOUT:5e3,LIVE_STREAMING_ADDRESS:"",CHOOSE_SERVER_FRAGEMENT_LENGTH:4,PLAN:"plan-b"};le.setParameter=function(M,T){return void 0!==R[M]&&(R[M]=T,!0)},le.getParameter=function(M){return void 0!==R[M]?R[M]:null}},function(ge,le,U){"use strict";U.r(le),U.d(le,"checkValidObject",function(){return v}),U.d(le,"checkValidString",function(){return A}),U.d(le,"checkValidNumber",function(){return p}),U.d(le,"checkValidArray",function(){return _}),U.d(le,"checkValidFloatNumber",function(){return E}),U.d(le,"checkValidBoolean",function(){return k}),U.d(le,"checkValidEnum",function(){return N}),U.d(le,"checkValidUID",function(){return H}),U.d(le,"isValidString",function(){return I}),U.d(le,"isValidNumber",function(){return S}),U.d(le,"isValidBoolean",function(){return P}),U.d(le,"isASCII",function(){return ie}),U.d(le,"isInteger",function(){return de}),U.d(le,"isNumber",function(){return oe}),U.d(le,"isString",function(){return ae}),U.d(le,"isArray",function(){return J}),U.d(le,"isEmpty",function(){return C}),U.d(le,"isValidToken",function(){return G}),U.d(le,"isValidChannelName",function(){return V});var D=U(11),R=U.n(D),M=U(10),T=U(0),N=function(d,W,y){for(var u=0;u<y.length;u++)if(d===y[u])return!0;throw new Error("".concat(W," can only be set as ").concat(JSON.stringify(y)))},v=function(d,W){if(!d)throw new Error("Invalid param: ".concat(W||"param"," cannot be empty"));if("object"!==R()(d))throw new Error("".concat(W||"This paramter"," is of the object type"));return!0},A=function(d,W,y,u,K){if(C(y)&&(y=1),u=u||255,C(K)&&(K=!0),C(d))throw new Error("".concat(W||"param"," cannot be empty"));if(!I(d,y,u,K))throw new Error("Invalid ".concat(W||"string param",": Length of the string: [").concat(y,",").concat(u,"].").concat(K?" ASCII characters only.":""))},p=function(d,W,y,u){if(C(y)&&(y=1),u=u||1e4,C(d))throw new Error("".concat(W||"param"," cannot be empty"));if(!S(d,y,u))throw new Error("Invalid ".concat(W||"number param",": The value range is [").concat(y,",").concat(u,"]. integer only"))},_=function(d,W){if(!Array.isArray(d))throw new Error("".concat(W," should be an array"))},E=function(d,W,y,u){if(null==d)throw new Error("".concat(W||"param"," cannot be null"));if(C(y)&&(y=0),u=u||1e4,C(d))throw new Error("".concat(W||"param"," cannot be empty"));if(!B(d,y,u))throw new Error("Invalid ".concat(W||"number param",": The value range is [").concat(y,",").concat(u,"]."))},k=function(d,W){if(C(d))throw new Error("".concat(W||"param"," cannot be empty"));if(!P(d))throw new Error("Invalid ".concat(W||"boolean param",": The value is of the boolean type."))},H=function(d){if(!Object(M.is32Uint)(d)&&!I(d,1,255))throw T.default.error("Invalid UID ".concat(d," ").concat(R()(d))),new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")},I=function(d,W,y,u){return W||(W=0),y||(y=Number.MAX_SAFE_INTEGER),C(u)&&(u=!0),ae(d)&&(!u||ie(d))&&d.length>=W&&d.length<=y},S=function(d,W,y){return de(d)&&d>=W&&d<=y},B=function(d,W,y){return oe(d)&&d>=W&&d<=y},P=function(d){return"boolean"==typeof d},G=function(d){return I(d,1,2047)},V=function(d){return ae(d)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(d)},ie=function(d){if("string"==typeof d){for(var W=0;W<d.length;W++){var y=d.charCodeAt(W);if(y<0||y>255)return!1}return!0}},de=function(d){return"number"==typeof d&&d%1==0},oe=function(d){return"number"==typeof d},ae=function(d){return"string"==typeof d},J=function(d){return d instanceof Array},C=function(d){return null==d}},function(ge,le,U){"use strict";U.r(le),U.d(le,"APErrorCode",function(){return D}),U.d(le,"GatewayErrorCode",function(){return R}),U.d(le,"StringUidErrorCode",function(){return M}),U.d(le,"JOIN_GS_TRYNEXT_LIST",function(){return T}),U.d(le,"JOIN_CS_RETRY_LIST",function(){return N}),U.d(le,"JOIN_PROXY_RETRY_LIST",function(){return v}),U.d(le,"INJECT_STREAM_STATUS",function(){return A}),U.d(le,"WEBSOCKET_CLOSE_REASON",function(){return p});var D={1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY",2010016:"USER_OVERLOAD",2010018:"FORBIDDEN_REGION",2010019:"CANNOT_MEET_AREA_DEMAND"},R={2e3:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",2028:"ILLEGAL_AES_PASSWORD",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},M={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},T=["ERR_NO_VOCS_AVAILABLE","ERR_NO_VOS_AVAILABLE","ERR_JOIN_CHANNEL_TIMEOUT","WARN_LOOKUP_CHANNEL_TIMEOUT","WARN_OPEN_CHANNEL_TIMEOUT","ERR_VOM_SERVICE_UNAVAILABLE","ERR_TOO_MANY_USERS","ERR_MASTER_VOCS_UNAVAILABLE","ERR_INTERNAL_ERROR"],N=["NO_SERVICE_AVAILABLE"],v=["NO_SERVICE_AVAILABLE","REQUEST_PROXY_SERVER_FAILED","REQUEST_PROXY_SERVER_TIME_OUT"],A={INJECT_STREAM_STATUS_START_SUCCESS:0,INJECT_STREAM_STATUS_START_ALREADY_EXISTS:1,INJECT_STREAM_STATUS_START_UNAUTHORIZED:2,INJECT_STREAM_STATUS_START_TIMEDOUT:3,INJECT_STREAM_STATUS_START_FAILED:4,INJECT_STREAM_STATUS_STOP_SUCCESS:5,INJECT_STREAM_STATUS_STOP_NOT_FOUND:6,INJECT_STREAM_STATUS_STOP_UNAUTHORIZED:7,INJECT_STREAM_STATUS_STOP_TIMEDOUT:8,INJECT_STREAM_STATUS_STOP_FAILED:9,INJECT_STREAM_STATUS_BROKEN:10},p={WS_DISCONNECT:"WS_DISCONNECT"};le.default={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"}},function(ge,le,U){"use strict";U.r(le),U.d(le,"getBrowserInfo",function(){return P}),U.d(le,"getBrowserVersion",function(){return E}),U.d(le,"getBrowserOS",function(){return k}),U.d(le,"isChrome",function(){return D}),U.d(le,"isSafari",function(){return R}),U.d(le,"isFireFox",function(){return T}),U.d(le,"isOpera",function(){return N}),U.d(le,"isEdge",function(){return M}),U.d(le,"isQQBrowser",function(){return v}),U.d(le,"isWeChatBrowser",function(){return A}),U.d(le,"isLegacyChrome",function(){return I}),U.d(le,"isSupportedPC",function(){return p}),U.d(le,"isSupportedMobile",function(){return _}),U.d(le,"getChromeKernelVersion",function(){return B}),U.d(le,"isChromeKernel",function(){return H});var D=function(){var G=P();return G.name&&"Chrome"===G.name},R=function(){var G=P();return G.name&&"Safari"===G.name},M=function(){var G=P();return G.name&&"Edge"===G.name},T=function(){var G=P();return G.name&&"Firefox"===G.name},N=function(){var G=P();return G.name&&"OPR"===G.name},v=function(){var G=P();return G.name&&"QQBrowser"===G.name},A=function(){var G=P();return G.name&&"MicroMessenger"===G.name},p=function(){var G=k();return"Linux"===G||"Mac OS X"===G||"Mac OS"===G||-1!==G.indexOf("Windows")},_=function(){var G=k();return"Android"===G||"iOS"===G},E=function(){return P().version},k=function(){return P().os},H=function(){return!!navigator.userAgent.match(/chrome\/[\d]./i)};function I(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var S,B=function(){var G=navigator.userAgent.match(/chrome\/[\d]./i);return G&&G[0]&&G[0].split("/")[1]},P=(S=function(){var G,V=navigator.userAgent,ie=V.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===ie[1]&&null!=(G=V.match(/(OPR(?=\/))\/?(\d+)/i))&&(ie=G),"Safari"===ie[1]&&null!=(G=V.match(/version\/(\d+)/i))&&(ie[2]=G[1]),~V.toLowerCase().indexOf("qqbrowser")&&null!=(G=V.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(ie=G),~V.toLowerCase().indexOf("micromessenger")&&null!=(G=V.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(ie=G),~V.toLowerCase().indexOf("edge")&&null!=(G=V.match(/(edge(?=\/))\/?(\d+)/i))&&(ie=G),~V.toLowerCase().indexOf("trident")&&null!=(G=/\brv[ :]+(\d+)/g.exec(V)||[])&&(ie=[null,"IE",G[1]]);var de=void 0,oe=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var ae in oe){var J=oe[ae];if(J.r.test(navigator.userAgent)){de=J.s;break}}return{name:ie[1],version:ie[2],os:de}}(),function(){return S})},function(ge,le,U){"use strict";U.d(le,"b",function(){return D}),U.d(le,"a",function(){return R}),U.d(le,"c",function(){return M}),U(0);var D=function(T,N,v){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight","VideoPublishDuration","AudioPublishDuration"].indexOf(N)>-1&&("string"==typeof v||isFinite(v)))return T[N]=""+v},R=function(T){var N={};return T.forEach(function(v){v.id&&v.type&&(-1===v.id.indexOf("send")&&-1===v.type.toLowerCase().indexOf("outbound")&&-1===v.id.indexOf("outbound_rtp")&&-1===v.id.indexOf("OutboundRTP")||("audio"===v.mediaType?(D(N,"audioSendBytes",v.bytesSent),D(N,"audioSendPackets",v.packetsSent),D(N,"audioSendPacketsLost",v.packetsLost)):(D(N,"videoSendBytes",v.bytesSent),D(N,"videoSendPackets",v.packetsSent),D(N,"videoSendPacketsLost",v.packetsLost),D(N,"videoSendFrameRate",v.googFrameRateSent),D(N,"videoSendResolutionWidth",v.googFrameWidthSent),D(N,"videoSendResolutionHeight",v.googFrameHeightSent))))}),N},M=function(T){var N={};return T.forEach(function(v){v.id&&v.type&&(-1===v.id.indexOf("recv")&&-1===v.type.toLowerCase().indexOf("inbound")&&-1===v.id.indexOf("inbound_rtp")&&-1===v.id.indexOf("inbound-rtp")&&-1===v.id.indexOf("InboundRTP")||("audio"===v.mediaType?(D(N,"audioReceiveBytes",v.bytesReceived),D(N,"audioReceivePackets",v.packetsReceived),D(N,"audioReceivePacketsLost",v.packetsLost)):(D(N,"videoReceiveBytes",v.bytesReceived),D(N,"videoReceivePacketsLost",v.packetsLost),D(N,"videoReceivePackets",v.packetsReceived),D(N,"videoReceiveFrameRate",v.googFrameRateReceived),D(N,"videoReceiveDecodeFrameRate",v.googFrameRateDecoded),D(N,"videoReceiveResolutionWidth",v.googFrameWidthReceived),D(N,"videoReceiveResolutionHeight",v.googFrameHeightReceived))))}),N}},function(ge,le){function U(){return ge.exports=U=Object.assign||function(D){for(var R=1;R<arguments.length;R++){var M=arguments[R];for(var T in M)Object.prototype.hasOwnProperty.call(M,T)&&(D[T]=M[T])}return D},U.apply(this,arguments)}ge.exports=U},function(ge,le,U){"use strict";U.d(le,"b",function(){return R}),U.d(le,"e",function(){return T}),U.d(le,"a",function(){return N}),U.d(le,"d",function(){return v}),U.d(le,"c",function(){return A});var D=U(0),R=function(){var p={dispatcher:{}};return p.dispatcher.eventListeners={},p.addEventListener=function(_,E){void 0===p.dispatcher.eventListeners[_]&&(p.dispatcher.eventListeners[_]=[]),p.dispatcher.eventListeners[_].push(E)},p.hasListeners=function(_){return!(!p.dispatcher.eventListeners[_]||!p.dispatcher.eventListeners[_].length)},p.on=p.addEventListener,p.removeEventListener=function(_,E){var k;p.dispatcher.eventListeners[_]&&-1!==(k=p.dispatcher.eventListeners[_].indexOf(E))&&p.dispatcher.eventListeners[_].splice(k,1)},p.dispatchEvent=function(_){var E;for(E in p.dispatcher.eventListeners[_.type])if(p.dispatcher.eventListeners[_.type]&&p.dispatcher.eventListeners[_.type].hasOwnProperty(E)&&"function"==typeof p.dispatcher.eventListeners[_.type][E])try{p.dispatcher.eventListeners[_.type][E](_)}catch(k){D.default.debug("[".concat(p.clientId,"] Error in ").concat(_.type," event"),k)}},p.dispatchSocketEvent=function(_){var E;for(E in p.dispatcher.eventListeners[_.type])p.dispatcher.eventListeners[_.type]&&p.dispatcher.eventListeners[_.type].hasOwnProperty(E)&&"function"==typeof p.dispatcher.eventListeners[_.type][E]&&p.dispatcher.eventListeners[_.type][E](_.msg)},p},M=function(p){var _={};return _.type=p.type,_},T=function(p){var _=M(p);return _.stream=p.stream,_.reason=p.reason,_.msg=p.msg,_},N=function(p){var _=M(p);return _.uid=p.uid,_.attr=p.attr,_.stream=p.stream,_},v=function(p){var _=M(p);return _.msg=p.msg,_},A=function(p){var _=M(p);return _.url=p.url,_.uid=p.uid,_.status=p.status,_.reason=p.reason,_}},function(ge,le,U){"use strict";var D,R=this&&this.__extends||(D=function(oe,ae){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,C){J.__proto__=C}||function(J,C){for(var d in C)C.hasOwnProperty(d)&&(J[d]=C[d])})(oe,ae)},function(oe,ae){function J(){this.constructor=oe}D(oe,ae),oe.prototype=null===ae?Object.create(ae):(J.prototype=ae.prototype,new J)}),M=this&&this.__awaiter||function(oe,ae,J,C){return new(J||(J=Promise))(function(d,W){function y(m){try{K(C.next(m))}catch(w){W(w)}}function u(m){try{K(C.throw(m))}catch(w){W(w)}}function K(m){var w;m.done?d(m.value):(w=m.value,w instanceof J?w:new J(function(x){x(w)})).then(y,u)}K((C=C.apply(oe,ae||[])).next())})},T=this&&this.__generator||function(oe,ae){var J,C,d,W,y={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return W={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function u(K){return function(m){return function(w){if(J)throw new TypeError("Generator is already executing.");for(;y;)try{if(J=1,C&&(d=2&w[0]?C.return:w[0]?C.throw||((d=C.return)&&d.call(C),0):C.next)&&!(d=d.call(C,w[1])).done)return d;switch(C=0,d&&(w=[2&w[0],d.value]),w[0]){case 0:case 1:d=w;break;case 4:return y.label++,{value:w[1],done:!1};case 5:y.label++,C=w[1],w=[0];continue;case 7:w=y.ops.pop(),y.trys.pop();continue;default:if(!((d=(d=y.trys).length>0&&d[d.length-1])||6!==w[0]&&2!==w[0])){y=0;continue}if(3===w[0]&&(!d||w[1]>d[0]&&w[1]<d[3])){y.label=w[1];break}if(6===w[0]&&y.label<d[1]){y.label=d[1],d=w;break}if(d&&y.label<d[2]){y.label=d[2],y.ops.push(w);break}d[2]&&y.ops.pop(),y.trys.pop();continue}w=ae.call(oe,y)}catch(x){w=[6,x],C=0}finally{J=d=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([K,m])}}},N=this&&this.__importDefault||function(oe){return oe&&oe.__esModule?oe:{default:oe}};Object.defineProperty(le,"__esModule",{value:!0});var v=N(U(67)),A=U(2),p=N(U(0)),_=U(3),E=U(14),k=U(10),H=function(oe){function ae(J,C){var d=oe.call(this)||this;return d._state=G.RELAY_STATE_IDLE,d._onStatus=function(W){p.default.debug("["+d.clientId+"] ChannelMediaStatus: "+JSON.stringify(W)),W&&W.command&&("onAudioPacketReceived"===W.command&&d.emit("event",P.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===W.command&&d.emit("event",P.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===W.command&&(d._state=G.RELAY_STATE_FAILURE,d.emit("state",G.RELAY_STATE_FAILURE,V.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===W.command&&(d._state=G.RELAY_STATE_FAILURE,d.emit("state",G.RELAY_STATE_FAILURE,V.DEST_TOKEN_EXPIRED,W.channelName?{came:W.channelName}:null)))},d._onClose=function(){return M(d,void 0,void 0,function(){var W;return T(this,function(y){switch(y.label){case 0:if(p.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",P.NETWORK_DISCONNECTED),this.state=G.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return y.sent(),[3,4];case 3:return(W=y.sent())instanceof de&&(W.message===S.WS_ABORT||W.message===S.AP_REQUEST_ABORT)?[2]:(this.emit("state",G.RELAY_STATE_FAILURE,V.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}})})},d.token=J.appId,d.appId=J.appId,d.cname=J.cname,d.uid=J.uid,d.sid=J.sid,d.clientId=C,d}return R(ae,oe),Object.defineProperty(ae.prototype,"state",{get:function(){return this._state},set:function(J){var C=this._state;this._state=J,C!==J&&this.emit("state",J)},enumerable:!0,configurable:!0}),ae.prototype.startChannelMediaRelay=function(J){return M(this,void 0,void 0,function(){return T(this,function(C){switch(C.label){case 0:if(this.state!==G.RELAY_STATE_IDLE)throw new de(S.BAD_STATE);return this.state=G.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return C.sent(),p.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage(J)];case 2:return C.sent(),this._prevChannelMediaConfig=J,[2]}})})},ae.prototype.updateChannelMediaRelay=function(J){return M(this,void 0,void 0,function(){return T(this,function(C){switch(C.label){case 0:if(this.state!==G.RELAY_STATE_RUNNING)throw new de(S.BAD_STATE);return[4,this._sendUpdateMessage(J)];case 1:return C.sent(),this._prevChannelMediaConfig=J,[2]}})})},ae.prototype.stopChannelMediaRelay=function(){return M(this,void 0,void 0,function(){return T(this,function(J){switch(J.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return J.sent(),p.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=G.RELAY_STATE_IDLE,this.dispose(),[2]}})})},ae.prototype.dispose=function(){p.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=G.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},ae.prototype._requestOneAP=function(J){var C=this;return new Promise(function(d,W){var y={command:"convergeAllocateEdge",sid:C.sid,appId:C.appId,token:"",ts:+new Date,version:A.VERSION,cname:C.cname,uid:C.uid+"",seq:1,requestId:1},u={service_name:"tele_channel",json_body:JSON.stringify(y)};E.post("https://"+J,u,function(m){var w=null,x=null;try{w=JSON.parse(m)}catch(ee){W(new de(S.AP_JSON_PARSE_ERROR,ee))}0!==w.code&&W(new de(S.AP_REQUEST_ERROR,w));try{x=JSON.parse(w.json_body)}catch(ee){W(new de(S.AP_JSON_PARSE_ERROR,ee))}200!==x.code&&W(new de(S.AP_REQUEST_ERROR,x)),x.servers?d(x.servers):W(new de(S.AP_JSON_PARSE_ERROR,x))},function(m){return W(m)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})})},ae.prototype._requestAP=function(){var J=this,C=A.getParameter("UAP_AP");return new Promise(function(d,W){setTimeout(function(){W(new de(S.AP_REQUEST_TIMEOUT))},5e3),J.on("dispose",function(){W(new de(S.AP_REQUEST_ABORT))}),C.forEach(function(y){J._requestOneAP(y+="/api/v1").then(function(u){p.default.debug("["+J.clientId+"] startChannelMediaRelay request AP "+y+" success: "+JSON.stringify(u));var K=u[0],m="wss://"+K.address.replace(/\./g,"-")+".edge.agora.io:"+K.wss;d(m)}).catch(function(u){p.default.debug("["+J.clientId+"] startChannelMediaRelay request AP "+y+" failed: "+JSON.stringify(u))})})})},ae.prototype._connectWebsocket=function(J){return this._signal=new ie(this.appId,this.cname,this.uid,this.sid),this._signal.connect(J)},ae.prototype._connect=function(){return M(this,void 0,void 0,function(){var J;return T(this,function(C){switch(C.label){case 0:return[4,this._requestAP()];case 1:return J=C.sent(),[4,this._connectWebsocket(J)];case 2:return C.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",P.NETWORK_CONNECTED),[2]}})})},ae.prototype._sendStartRelayMessage=function(J){return M(this,void 0,void 0,function(){var C,d,W,y,u,K;return T(this,function(m){switch(m.label){case 0:return this._checkSignal(),C=this._genMessage(B.StopPacketTransfer),[4,this._signal.request(C)];case 1:return m.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return m.sent(),p.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),d=this._genMessage(B.SetSdkProfile,J),[4,this._signal.request(d)];case 3:return m.sent(),p.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),W=this._genMessage(B.SetSourceChannel,J),[4,this._signal.request(W)];case 4:return m.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return m.sent(),this.emit("event",P.PACKET_JOINED_SRC_CHANNEL),p.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),y=this._genMessage(B.SetSourceUserId,J),[4,this._signal.request(y)];case 6:return m.sent(),p.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),u=this._genMessage(B.SetDestChannel,J),[4,this._signal.request(u)];case 7:return m.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return m.sent(),this.emit("event",P.PACKET_JOINED_DEST_CHANNEL),p.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),K=this._genMessage(B.StartPacketTransfer,J),[4,this._signal.request(K)];case 9:return m.sent(),this.emit("event",P.PACKET_SENT_TO_DEST_CHANNEL),this.state=G.RELAY_STATE_RUNNING,p.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}})})},ae.prototype._sendReconnectMessage=function(J){return M(this,void 0,void 0,function(){var C;return T(this,function(d){switch(d.label){case 0:return this._checkSignal(),C=this._genMessage(B.Reconnect,J),[4,this._signal.request(C)];case 1:return d.sent(),[2]}})})},ae.prototype._sendUpdateMessage=function(J){return M(this,void 0,void 0,function(){var C;return T(this,function(d){switch(d.label){case 0:return this._checkSignal(),C=this._genMessage(B.UpdateDestChannel,J),[4,this._signal.request(C)];case 1:return d.sent(),this.emit("event",P.PACKET_UPDATE_DEST_CHANNEL),p.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}})})},ae.prototype._sendStopRelayMessage=function(){return M(this,void 0,void 0,function(){var J;return T(this,function(C){switch(C.label){case 0:return this._checkSignal(),J=this._genMessage(B.StopPacketTransfer),[4,this._signal.request(J)];case 1:return C.sent(),p.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}})})},ae.prototype._genMessage=function(J,C){var d=this,W=[],y=[],u=[],K={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:A.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},m=null;switch(J){case B.SetSdkProfile:return K.clientRequest={command:"SetSdkProfile",type:"multi_channel"},K;case B.SetSourceChannel:return m=C.getSrcChannelMediaInfo(),K.clientRequest={command:"SetSourceChannel",uid:m.uid+"",channelName:m.channelName,token:m.token||this.appId},K;case B.SetSourceUserId:return m=C.getSrcChannelMediaInfo(),K.clientRequest={command:"SetSourceUserId",uid:this.uid+""},K;case B.SetDestChannel:return C.getDestChannelMediaInfos().forEach(function(w){W.push(w.channelName),y.push(w.uid+""),u.push(w.token||d.appId)}),K.clientRequest={command:"SetDestChannel",channelName:W,uid:y,token:u},K;case B.StartPacketTransfer:return K.clientRequest={command:"StartPacketTransfer"},K;case B.Reconnect:return K.clientRequest={command:"Reconnect"},K;case B.StopPacketTransfer:return K.clientRequest={command:"StopPacketTransfer"},K;case B.UpdateDestChannel:return C.getDestChannelMediaInfos().forEach(function(w){W.push(w.channelName),y.push(w.uid+""),u.push(w.token||d.appId)}),K.clientRequest={command:"UpdateDestChannel",channelName:W,uid:y,token:u},K}},ae.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new de(S.WS_DISCONNECTED)},ae}(v.default);le.default=H;var I=function(){function oe(){this.destChannelMediaInfos=new Map}return oe.prototype.setSrcChannelInfo=function(ae){_.checkValidObject(ae,"srcInfo");var J=ae.uid,C=ae.channelName,d=ae.token;if(d&&!_.isValidToken(d))throw new Error("Invalid token in SrcChannelInfo");if(!_.isValidChannelName(C))throw new Error("Invalid channelName in SrcChannelInfo");if(!k.is32Uint(J))throw new Error("Invalid uid in SrcChannelInfo");this.srcChannelMediaInfo=ae},oe.prototype.setDestChannelInfo=function(ae,J){if(!_.isValidChannelName(ae))throw new Error("Invalid channelName in DestChannelInfo");_.checkValidObject(J,"destInfo");var C=J.uid,d=J.token,W=J.channelName;if(d&&!_.isValidToken(d))throw new Error("Invalid token in DestChannelInfo");if(!_.isValidChannelName(W))throw new Error("Invalid channelName in DestChannelInfo");if(!k.is32Uint(C))throw new Error("Invalid uid in DestChannelInfo");this.destChannelMediaInfos.set(ae,J)},oe.prototype.removeDestChannelInfo=function(ae){if(!_.isValidChannelName(ae))throw new Error("Invalid channelName when invoke removeDestChannelInfo");this.destChannelMediaInfos.delete(ae)},oe.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},oe.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},oe}();le.ChannelMediaRelayConfiguration=I;var S,B,P,G,V,oe,ie=function(oe){function ae(J,C,d,W){var y=oe.call(this)||this;return y._onOpen=function(){y.emit("open")},y._onClose=function(u){y.emit("close"),y.dispose()},y._onMessage=function(u){var K=JSON.parse(u.data);if(!K||"serverResponse"!==K.command||!K.requestId)return K&&"serverStatus"===K.command&&K.serverStatus&&K.serverStatus.command?(y.emit("status",K.serverStatus),void y.emit(K.serverStatus.command,K.serverStatus)):void 0;y.emit("req_"+K.requestId,K)},y._requestId=1,y.appId=J,y.cname=C,y.uid=d,y.sid=W,y}return R(ae,oe),ae.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},ae.prototype.sendMessage=function(J){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new de(S.WS_DISCONNECTED);var C=this._requestId++;return J.requestId=C,J.seq=C,this._ws.send(JSON.stringify(J)),C},ae.prototype.waitStatus=function(J){var C=this;return new Promise(function(d,W){var y=window.setTimeout(function(){W(new de(S.WAIT_STATUS_TIMEOUT,J))},5e3);C.once(J,function(u){clearTimeout(y),u.state&&0!==u.state?W(new de(S.WAIT_STATUS_ERROR,J)):d()}),C.once("dispose",function(){clearTimeout(y),W(new de(S.WS_ABORT))})})},ae.prototype.request=function(J){var C=this;return new Promise(function(d,W){var y=C.sendMessage(J),u=window.setTimeout(function(){C.removeAllListeners("req_"+y),W(new de(S.REQUEST_TIMEOUT))},3e3);C.once("req_"+y,function(K){clearTimeout(u),K&&200===K.code?d(K):W(new de(S.REQUEST_FAILED,K))}),C.once("dispose",function(){clearTimeout(u),W(new de(S.WS_ABORT))})})},ae.prototype.connect=function(J){var C=this;return new Promise(function(d,W){C._ws=new WebSocket(J),C._ws.onopen=function(){C._onOpen(),C._prvUrl=J,C._ws.onmessage=C._onMessage,C._ws.onclose=C._onClose,C._startHeartBeatCheck(),d()},C._ws.onclose=function(y){C._ws=null,W(new de(S.CONNECT_FAILED,"websocket error code: "+y.code))},setTimeout(function(){C._ws&&C._ws.readyState!==WebSocket.OPEN&&(C._ws.onopen=null,C._ws.onclose=null,C._ws.close(),C._ws=null,W(new de(S.CONNECT_TIMEOUT)))},5e3),C.once("dispose",function(){W(new de(S.WS_ABORT))})})},ae.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},ae.prototype._sendPing=function(J){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new de(S.WS_DISCONNECTED);var C=this._requestId++;return J.requestId=C,this._ws.send(JSON.stringify(J)),C},ae.prototype._startHeartBeatCheck=function(){var J=this;this._heartBeatTimer=window.setInterval(function(){J._sendPing({command:"ping",appId:J.appId,cname:J.cname,uid:J.uid+"",sid:J.sid,ts:+new Date,requestId:0})},3e3)},ae.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},ae}(v.default),de=function(oe,ae,J){void 0===oe&&(oe=""),this.code=J,this.data=ae,this.message=oe};le.ChannelMediaError=de,(oe=S=le.CHANNEL_MEDIA_ERROR||(le.CHANNEL_MEDIA_ERROR={})).CONNECT_FAILED="connect failed",oe.CONNECT_TIMEOUT="connect timeout",oe.WS_DISCONNECTED="websocket disconnected",oe.REQUEST_TIMEOUT="request timeout",oe.REQUEST_FAILED="request failed",oe.WAIT_STATUS_TIMEOUT="wait status timeout",oe.WAIT_STATUS_ERROR="wait status error",oe.BAD_STATE="bad state",oe.WS_ABORT="ws abort",oe.AP_REQUEST_TIMEOUT="AP request timeout",oe.AP_JSON_PARSE_ERROR="AP json parse error",oe.AP_REQUEST_ERROR="AP request error",oe.AP_REQUEST_ABORT="AP request abort",function(oe){oe[oe.SetSdkProfile=0]="SetSdkProfile",oe[oe.SetSourceChannel=1]="SetSourceChannel",oe[oe.SetSourceUserId=2]="SetSourceUserId",oe[oe.SetDestChannel=3]="SetDestChannel",oe[oe.StartPacketTransfer=4]="StartPacketTransfer",oe[oe.StopPacketTransfer=5]="StopPacketTransfer",oe[oe.UpdateDestChannel=6]="UpdateDestChannel",oe[oe.Reconnect=7]="Reconnect",oe[oe.SetVideoProfile=8]="SetVideoProfile"}(B||(B={})),function(oe){oe[oe.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",oe[oe.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",oe[oe.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",oe[oe.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",oe[oe.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",oe[oe.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",oe[oe.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",oe[oe.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",oe[oe.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",oe[oe.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(P=le.CHANNEL_MEDIA_RELAY_EVENT||(le.CHANNEL_MEDIA_RELAY_EVENT={})),function(oe){oe[oe.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",oe[oe.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",oe[oe.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",oe[oe.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(G=le.CHANNEL_MEDIA_RELAY_STATE||(le.CHANNEL_MEDIA_RELAY_STATE={})),function(oe){oe[oe.RELAY_OK=0]="RELAY_OK",oe[oe.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",oe[oe.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",oe[oe.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",oe[oe.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",oe[oe.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",oe[oe.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",oe[oe.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",oe[oe.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",oe[oe.INTERNAL_ERROR=9]="INTERNAL_ERROR",oe[oe.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",oe[oe.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",oe[oe.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",oe[oe.RELAY_NOT_START=13]="RELAY_NOT_START",oe[oe.OPERATION_ABORT=14]="OPERATION_ABORT"}(V=le.CHANNEL_MEDIA_RELAY_ERROR||(le.CHANNEL_MEDIA_RELAY_ERROR={}))},function(ge,le,U){"use strict";U.r(le),U.d(le,"isLiveTranscodingValid",function(){return V}),U.d(le,"generateSessionId",function(){return B}),U.d(le,"audioLevelHelper",function(){return H}),U.d(le,"vsResHack",function(){return P}),U.d(le,"is32Uint",function(){return G}),U.d(le,"safeCall",function(){return _}),U.d(le,"random",function(){return de}),U.d(le,"popBanTip",function(){return J}),U.d(le,"lengthInUtf8Bytes",function(){return oe}),U.d(le,"audioTimerLoop",function(){return ae}),U.d(le,"generateId",function(){return S}),U.d(le,"uint8ArrayToBase64",function(){return E}),U.d(le,"base64ToUint8Array",function(){return k});var D=U(11),R=U.n(D),M=U(5),T=U(0),N=U(28),v=U.n(N),A=U(25),p=U(15),_=function(){var C=arguments[0];if("function"==typeof C){var d=Array.prototype.slice.call(arguments,1);C.apply(null,d)}},E=function(C){for(var d="",W=0;W<C.length;W+=1)d+=String.fromCharCode(C[W]);return window.btoa(d)},k=function(C){for(var d=window.atob(C),W=new Uint8Array(new ArrayBuffer(d.length)),y=0;y<d.length;y+=1)W[y]=d.charCodeAt(y);return W},H=function(C){return this.audioContext=Object(A.a)(),this.sourceNode=C.otWebkitAudioSource||this.audioContext.createMediaStreamSource(C),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var d=0,W=0;W<this.timeDomainData.length;W++)d=Math.max(d,Math.abs(this.timeDomainData[W]-128));return d/128}return T.default.warning("can't find analyser in audioLevelHelper"),0},this},I=1e4;function S(){return++I}function B(){return v()().replace(/-/g,"").toUpperCase()}var P=function(C,d,W){try{T.default.debug("start vsResHack",C);var y=document.createElement("video");y.setAttribute("autoplay",""),y.setAttribute("muted",""),y.muted=!0,y.setAttribute("playsinline",""),y.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(y);var u=!1;y.addEventListener("playing",function(K){M.isFireFox()?y.videoWidth&&(u=!0,T.default.debug("[vsResHack] get stream resolution: ","".concat(y.videoWidth," x ").concat(y.videoHeight),C),d(y.videoWidth,y.videoHeight),y.srcObject=null,y.remove()):(u=!0,T.default.debug("[vsResHack] get stream resolution: ","".concat(y.videoWidth," x ").concat(y.videoHeight),C),d(y.videoWidth,y.videoHeight),y.srcObject=null,y.remove())}),Object(p.setSrcObject)(y,C),y.play().catch(function(){}),setTimeout(function(){!u&&y&&(d(y.videoWidth,y.videoHeight),y.srcObject=null,y.remove())},4e3)}catch(K){W(K)}},G=function(C){return"number"==typeof C&&0<=C&&C<=4294967295},V=function(C){var d=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var W in C)if("lowLatency"===W&&"boolean"!=typeof C[W]||"userConfigExtraInfo"===W&&"object"!==R()(C[W])||"transcodingUsers"===W&&!ie(C[W])||!~d.indexOf(W)&&"number"!=typeof C[W])throw new Error("Param ["+W+"] is inValid");return!0},ie=function(C){for(var d=0;d<C.length;d++)for(var W in C[d])if("number"!=typeof C[d][W])throw new Error("Param user["+d+"] - ["+W+"] is inValid");return!0},de=function(C){isNaN(C)&&(C=1e3);var d=+new Date,W=(d=(9301*d+49297)%233280)/233280;return Math.ceil(W*C)},oe=function(C){var d=encodeURIComponent(C).match(/%[89ABab]/g);return C.length+(d?d.length:0)},ae=function(C,d){var W=1/d,y=Object(A.a)(),u=y.createGain();u.gain.value=0,u.connect(y.destination);var K=!1;return function m(){var w=y.createOscillator();w.onended=m,w.connect(u),w.start(0),w.stop(y.currentTime+W),C(y.currentTime),K&&(w.onended=function(){})}(),function(){K=!0}},J=function(){if(!document.getElementById("agora-ban-tip")){var C=document.createElement("div");C.id="agora-ban-tip",C.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(C);var d=document.createElement("div");d.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",C.append(d);var W=document.createElement("div");W.style="height: 76px; display: flex; justify-content: center; align-items: center;";var y=document.createElement("span");y.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",y.innerText="!";var u=document.createElement("span");u.innerText="This browser does not support webRTC",W.append(y),W.append(u);var K=document.createElement("div");K.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",K.innerText="OK",d.append(W),d.append(K),K.onclick=function(){var m=document.getElementById("agora-ban-tip");m.parentNode.removeChild(m)}}}},function(ge,le){function U(D){return ge.exports=U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},U(D)}ge.exports=U},function(ge,le,U){ge.exports=U(62)},function(ge,le,U){"use strict";var D=U(12),R=U.n(D),M=U(17),T=U.n(M),N=U(11),v=U.n(N),A=U(30),p=U.n(A),_=U(7),E=U.n(_),k=U(22),H=U(8),I=function(q){q&&q.apply(this,[].slice.call(arguments,1))},S=U(0),B=U(1),P=U(10),G=U(14),V=U(2),ie=function(q){var F=Object(H.b)(q);F.needReconnect=!0,F.isTimeout=!1,F.isInit=!0,F.sendbytes=0,F.recvbytes=0,F.startTime=Date.now(),F.lastMsgTime=null,F.clientId=q.clientId,F.hostIndex=0,F.requestID=0,F.host=q.host instanceof Array?q.host:[q.host],F.getSendBytes=function(){return F.sendbytes},F.getRecvBytes=function(){return F.recvbytes},F.getDuration=function(){return Math.ceil((Date.now()-F.startTime)/1e3)},F.getURL=function(){return F.connection.url},F.reconnect=function(){F.isInit=!0,F.creatConnection()},F.connectNext=function(){F.isInit=!0,++F.hostIndex,S.default.debug("["+F.clientId+"] Gateway length:"+F.host.length+" current index:"+F.hostIndex),F.hostIndex>=F.host.length?F.dispatchEvent(Object(H.d)({type:"recover"})):F.creatConnection()},F.replaceHost=function(me){F.host=me||F.host,F.hostIndex=0,F.creatConnection()},F.creatConnection=function(){F.needReconnect=!0,F.lts=(new Date).getTime(),F.connection=new WebSocket("wss://"+F.host[F.hostIndex]),F.connection.binaryType="arraybuffer",F.turnConfig={};var me=q.proxyServerType;if(F.connection.url&&3!==me&&4!==me&&5!==me){var fe=F.connection.url.match(/wss\:\/\/([^:]+):(\d+)/),Ne=F.host[F.hostIndex].split(":"),je=F.connection.url.match(/h=([^:]+)&p=(\d+)/);fe?(F.turnConfig.url=fe[1],Object(V.getParameter)("TURN_ENABLE_TCP")&&(F.turnConfig.tcpport=parseInt(fe[2])+30),Object(V.getParameter)("TURN_ENABLE_UDP")&&(F.turnConfig.udpport=parseInt(fe[2])+30)):je?(F.turnConfig.url=je[1],Object(V.getParameter)("TURN_ENABLE_TCP")&&(F.turnConfig.tcpport=parseInt(je[2])+30),Object(V.getParameter)("TURN_ENABLE_UDP")&&(F.turnConfig.udpport=parseInt(je[2])+30)):Ne&&(F.turnConfig.url=Ne[0],Object(V.getParameter)("TURN_ENABLE_TCP")&&(F.turnConfig.tcpport=parseInt(Ne[1])+30),Object(V.getParameter)("TURN_ENABLE_UDP")&&(F.turnConfig.udpport=parseInt(Ne[1])+30))}F.connection.onopen=function(Ue){F.needReconnect=!0,F.isTimeout=!1,F.isInit=!1,F.sendbytes=0,F.recvbytes=0,F.startTime=Date.now(),Object(G.resetHTTPByetsCount)(),clearTimeout(F.timeoutCheck),F.dispatchEvent(Object(H.d)({type:"onopen",event:Ue,socket:F}))},F.connection.onmessage=function(Ue){if(Ue.data instanceof ArrayBuffer)F.dispatchEvent({type:"onBinaryData",data:Ue.data});else{F.recvbytes+=Object(P.lengthInUtf8Bytes)(Ue.data);var ke=JSON.parse(Ue.data);F.lastMsgTime=Date.now(),ke.hasOwnProperty("_id")?F.dispatchEvent(Object(H.d)({type:ke._id,msg:ke})):ke.hasOwnProperty("_type")&&F.dispatchSocketEvent(Object(H.d)({type:ke._type,msg:ke._message}))}},F.connection.onclose=function(Ue){F.needReconnect?F.isTimeout||F.isInit?(S.default.debug("["+F.clientId+"] websockect connect timeout"),B.report.joinGateway(q.sid,{lts:F.lts,succ:!1,ec:"timeout",addr:F.connection.url}),F.connectNext()):(F.dispatchEvent(Object(H.d)({type:"disconnect",event:Ue})),F.requests&&F.requests instanceof Array&&(F.requests.map(function(ke){ke.callback("REQUEST_ABORT")}),F.requests=[])):(S.default.debug("["+F.clientId+"] websockect closeed"),I(q.onFailure,Ue),clearTimeout(F.timeoutCheck),F.dispatchEvent(Object(H.d)({type:"close",event:Ue})),F.connection.onopen=void 0,F.connection.onclose=void 0,F.connection.onerror=void 0,F.connection.onmessage=void 0,F.connection=void 0)},F.connection.onerror=function(Ue){},setTimeout(function(){F.connection&&F.connection.readyState!=WebSocket.OPEN&&(F.isTimeout=!0,F.connection.close())},5e3)},F.creatConnection(),F.sendMessage=function(me,fe){if(F.connection&&F.connection.readyState==WebSocket.OPEN){var Ne=JSON.stringify(me);F.sendbytes+=Object(P.lengthInUtf8Bytes)(Ne),F.connection.send(Ne)}else fe({error:"Gateway not connected"})},F.disconnect=function(){F.needReconnect=!0,F.connection.close()},F.close=function(){F.needReconnect=!1,F.connection.onclose=void 0,F.connection.close(),clearInterval(F.requestTimer),F.requests&&F.requests instanceof Array&&(F.requests.map(function(me){me.callback("REQUEST_ABORT")}),F.requests=[])},F.sendSignalCommand=function(me,fe){me._id="_request_"+F.requestID,F.requestID+=1,"publish_stats"!==me._type&&"subscribe_stats"!==me._type&&"publish_stats_low"!==me._type&&F.on(me._id,function(Ne){Ne.msg&&fe&&fe(Ne.msg._result,Ne.msg.message),delete F.dispatcher.eventListeners[me._id]}),F.sendMessage(me,function(Ne){Ne.reason="NOT_CONNECTED",fe&&fe(Ne.reason,Ne)})},F.requests=[];var te=function(me){var fe=F.requests.findIndex(function(je){return je.id===me.type});if(fe>=0)var Ne=F.requests.splice(fe,1)[0];Ne&&F.dispatcher.eventListeners[me.type]?(delete F.dispatcher.eventListeners[me.type],me.msg&&Ne.callback&&Ne.callback(me.msg._result,me.msg._message)):S.default.warning("Detached Response",me.type,me.msg)},Te=function(me){var fe=this,Ne=F.requests.findIndex(function(je){return je.id===fe.id});Ne>=0&&(fe=F.requests.splice(Ne,1)[0]),fe&&F.dispatcher.eventListeners[me.type]?(delete F.dispatcher.eventListeners[me.type],me.reason="NOT_CONNECTED",fe.callback&&fe.callback(me.reason,me)):S.default.warning("handleSendError",fe)};return F.sendRequest=function(me,fe){me=E()({_id:"_request_"+F.requestID},me),F.requestID+=1;var Ne={id:me._id,timeoutCounter:0,stalledAt:Date.now(),message:me,callback:fe};F.requests.push(Ne),F.addEventListener(me._id,te),F.sendMessage(me,Te.bind(Ne))},F.checkRequestTimeout=function(){for(var me=Math.ceil(Object(V.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(V.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),fe=F.requests.length-1;fe>=0;fe--){var Ne=F.requests[fe];Ne.timeoutCounter>=me?(F.requests.splice(fe,1),S.default.error("Request Timeout",Ne.timeoutCounter,Ne.message),Ne.callback&&Ne.callback("TIMEOUT")):Ne.timeoutCounter++}},clearInterval(F.requestTimer),F.requestTimer=setInterval(F.checkRequestTimeout,Object(V.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),F.sendReport=function(me){F.sendMessage(me,function(){})},F},oe=U(23),ae=U(4),J=U(20),C=U(5),d={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"tryNext",K_SERVICE_TOO_HEAVY:"tryNext",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},W={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb",peer_publish_audio_duration:"B_ppad",peer_publish_video_duration:"B_ppvd"},y={};for(var u in W){var K=W[u];y[K]&&S.default.error("Key Conflict: ".concat(K,": ").concat(W[K],"| ").concat(u)),y[K]=u}var m=function(q){return W[q]||q},w=function(q){return y[q]||q},x=U(9),ee=U.n(x),ue=U(51),ye=function q(F){var g,ce,te=!1,Te=function(g){return{_type:"control",_message:g}},me=function(g,ce){var _e={};return Object.keys(ce).forEach(function(be){Object(V.getParameter)("STATS_FILTER")[be]||(_e[m(be)]=ce[be])}),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:g,stats:_e}}},fe=function(g){return{_type:"publish",_message:g}},Ne=function(g,ce){var _e={};return Object.keys(ce).forEach(function(be){Object(V.getParameter)("STATS_FILTER")[be]||(_e[m(be)]=ce[be])}),{_type:"subscribe_stats",_message:{stream_id:g,stats:_e}}},je=q.DISCONNECTED,Ue=q.CONNECTING,ke=q.CONNECTED,qe=q.DISCONNECTING,et=je,h=Object(H.b)(F);Object.defineProperty(h,"state",{set:function(g){var ce=et;et=g,Object(J._setClientConnectionStateRecord)(h.clientId,g),g!==q.CONNECTED&&g!==q.DISCONNECTING&&(h.hasJoined=!1),ce!==g&&h.dispatchEvent({type:"connection-state-change",prevState:q.connetionStateMap[ce],curState:q.connetionStateMap[g]})},get:function(){return et}}),h.socket=void 0,h.state=je,h.mode=F.mode,h.role=F.role,h.codec=F.codec,h.config={},h.timers={},h.timer_counter={},h.localStreams={},h.remoteStreams={},h.remoteMuteState={},h.attemps=1,h.p2p_attemps=1,h.audioLevel={},h.activeSpeaker=void 0,h.reconnectMode="tryNext",h.rejoinAttempt=0,h.hasChangeBGPAddress=!1,h.traffic_stats={},h.clientId=F.clientId,h.pingpongCounter=0,h.hasInvokeLeave=!1,h.p2ps=new Map,h.liveStreams=new Map,h.injectLiveStreams=new Map,h.remoteStreamsInChannel=new Set,h.subscribeRequestId=new Map,h.publishRequestId=0,h.hasJoined=!1,h.isFirstSuccess=!0,h.peerPublishDurationMap=new Map,ce=I,(g=h).makeRequest=function(_e,be,ve){if(void 0===g.socket)return S.default.debug("[".concat(g.clientId,"] No socket available")),void ce(ve,ae.default.INVALID_OPERATION);try{g.socket.emitRequest(_e,function(Z,Se){var Re;"success"===Z?"function"==typeof be&&be(Se):"function"==typeof ve&&(Re=Se&&Se.error_code&&ae.GatewayErrorCode[Se.error_code]?ae.GatewayErrorCode[Se.error_code]:Se&&Se.error_str?Se.error_str:Se&&Se.error_code?"UNKNOW_ERROR_".concat(Se.error_code):Z,ve(Re,Se))})}catch(Z){S.default.debug("[".concat(g.clientId,"] Socket emit message failed ").concat(JSON.stringify(_e))),S.default.debug("[".concat(g.clientId,"] "),Z),ce(ve,ae.default.SOCKET_ERROR)}},g.makeReport=function(_e){void 0===g.socket&&S.default.debug("[".concat(g.clientId,"] No socket available"));try{g.socket.emitReport(_e)}catch(be){S.default.debug("[".concat(g.clientId,"] Socket emit report failed ").concat(JSON.stringify(_e)))}},h.inChannelInfo={joinAt:null,duration:0},h._sendMessage=function(g,ce){switch(g){case"SubscribeStats":h.makeReport(Ne.apply(void 0,p()(ce)));break;case"SubscribeRelatedStats":h.makeReport(me.apply(void 0,p()(ce)))}};var Ce=I;h.p2pCounter=Object(P.random)(1e5),h.generateP2PId=function(){return++h.p2pCounter},h.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},h.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},h.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},h.configPublisher=function(g){h.config=g},h.getGatewayInfo=function(g,ce){h.makeRequest({_type:"gateway_info"},g,ce)},h.setClientRole=function(g,ce){S.default.debug("[".concat(h.clientId,"] setClientRole to ").concat(g));var _e=B.report.reportApiInvoke(h.joinInfo.sid,{name:"_setClientRole",callback:ce});h.makeRequest({_type:"set_client_role",_message:{role:g}},function(){h.role=g,h.dispatchEvent({type:"client-role-changed",role:g}),_e&&_e(null,{role:g})},function(be,ve){if(ve&&ve.code&&(be=ae.GatewayErrorCode[ve.code]||"UNKNOW_ERROR_"+ve.code),"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE"===be)return _e&&_e(null);S.default.error("set Client role error to "+g+": "+be),_e&&_e(be)})},h.join=function(g,ce,_e,be){h.hasInvokeLeave=!1,g.useProxyServer&&(h.hasChangeBGPAddress=!0);var ve=(new Date).getTime(),Z=g.uid;if(h.inChannelInfo.joinAt&&(h.inChannelInfo.duration+=ve-h.inChannelInfo.joinAt),h.inChannelInfo.joinAt=ve,h.state!==Ue)return S.default.error("[".concat(h.clientId,"] GatewayClient.join Failed: state "),h.state),be&&be(ae.default.INVALID_OPERATION),void B.report.joinGateway(g.sid,{lts:ve,succ:!1,ec:ae.default.INVALID_OPERATION,addr:null});if(null!=Z&&parseInt(Z)!==Z)return S.default.error("[".concat(h.clientId,"] Input uid is invalid")),h.state=je,be&&be(ae.default.INVALID_PARAMETER),void B.report.joinGateway(g.sid,{lts:ve,succ:!1,ec:ae.default.INVALID_PARAMETER,addr:null});var Se=ne.register(h,{uid:Z,cname:g&&g.cname});if(Se)return h.state=je,be&&be(Se),void B.report.joinGateway(g.sid,{lts:ve,succ:!1,ec:Se,addr:null});h.joinInfo=E()({},g),h.uid=Z,h.key=ce,h.pingpongCounter=0,ze(g,function(Re){if(g.useLocalAccessPoint)try{var Pe=h.socket.signal.connection.url.match(/wss\:\/\/([^:]+):(\d+)/)[1];Object(V.setParameter)("EVENT_REPORT_DOMAIN",Pe),Object(V.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",Pe),Object(V.setParameter)("LOG_UPLOAD_SERVER","".concat(Pe,":6444"))}catch(Oe){S.default.debug("[".concat(h.clientId,"] LocalAccessPoint error: ").concat(Oe))}if(h.state===qe||h.state===je)return be&&be("LEAVE_BEFORE_JOIN_SUCCESS");h.state=ke,S.default.debug("[".concat(h.clientId,"] Connected to gateway server")),clearInterval(h.pingTimer),h.pingTimer=setInterval(function(){var Oe=Object(V.getParameter)("PING_PONG_TIME_OUT");if(++h.pingpongCounter>=Oe){var Xe=Date.now();h.socket&&S.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(Xe-h.socket.getLastMsgTime(),"ms")),h.socket&&h.socket.getLastMsgTime()&&Xe-h.socket.getLastMsgTime()>Object(V.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(h.pingpongCounter=0,h.socket.close(),h.socket.dispatchEvent(Object(H.d)({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var tt=Date.now();h.makeRequest({_type:"ping"},function(){h.pingpongCounter=0;var Ze=Date.now()-tt;Object(V.getParameter)("REPORT_STATS")&&h.makeRequest({_type:"ping_back",_message:{pingpongElapse:Ze}})},function(Ze,gt){"TIMEOUT"!==Ze&&(S.default.error("Ping Error ".concat(Ze," ").concat(JSON.stringify(gt))),gt&&gt.error_code&&h.socket&&h.socket.signal&&h.socket.signal.connection&&h.socket.signal.connection.readyState===WebSocket.OPEN&&(S.default.info("Disconnecting websocket connection"),h.socket.signal.connection.close()))})},3e3),function(Oe,Xe){var tt=Oe.role,Ze=E()({},h.joinInfo.apResponse),gt={session_id:h.joinInfo.sid,app_id:F.appId,channel_key:h.key,channel_name:h.joinInfo.cname,sdk_version:V.VERSION,browser:navigator.userAgent,process_id:Object(B.getProcessId)(),mode:h.mode,codec:h.codec,role:tt,has_changed_gateway:Object(V.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||h.hasChangeBGPAddress,ap_response:Ze,optionalInfo:h.joinInfo.optionalInfo,extend:Object(V.getParameter)("JOIN_EXTEND"),details:{}};if(h.joinInfo.hasOwnProperty("stringUid")&&(gt.string_uid=h.joinInfo.stringUid),h.socket&&h.socket.signal&&h.socket.signal&&(Ze.addresses&&Ze.addresses[h.socket.signal.hostIndex]&&(gt.ap_response.ticket=Ze.addresses[h.socket.signal.hostIndex].ticket,delete Ze.addresses),Object(V.getParameter)("SET_DEFAULT_TURNSERVER")&&h.socket.signal.turnConfig)){var at={username:h.joinInfo.uid.toString(),credential:h.joinInfo.token,forceturn:Object(V.getParameter)("FORCE_TURN")};at.url=h.socket.signal.turnConfig.url,h.socket.signal.turnConfig.tcpport&&(at.tcpport=""+h.socket.signal.turnConfig.tcpport),h.socket.signal.turnConfig.udpport&&(at.udpport=""+h.socket.signal.turnConfig.udpport),h.joinInfo.turnServers.find(function(Gt){if(Gt.url===at.url)return!0})||h.joinInfo.turnServers.push(at)}3===h.joinInfo.proxyServerType&&(gt.plugin="web_cloud_proxy",gt.details.cservice_map="1"),h.joinInfo.aesmode&&h.joinInfo.aespassword?(gt.aes_mode=h.joinInfo.aesmode,gt.aes_encrypt=!0,h.joinInfo.aes_salt&&(gt.aes_salt=h.joinInfo.aes_salt),Object(ue.encryptRSA)(h.joinInfo.aespassword).then(function(Gt){gt.aes_secret=Gt,h.dispatchEvent({type:"join-message-hook",joinMessage:gt}),Xe(null,{_type:"join",_message:gt})}).catch(function(Gt){S.default.error("[".concat(h.clientId,"] encrypt password failed "),Gt),Xe("ENCRYPT_PASSWORD_FAILED")})):(h.dispatchEvent({type:"join-message-hook",joinMessage:gt}),Xe(null,{_type:"join",_message:gt}))}({role:h.role},function(Oe,Xe){if(Oe)return be&&be(Oe);h.makeRequest(Xe,function(tt){if(B.report.joinGateway(g.sid,{lts:ve,succ:!0,ec:null,vid:g.vid,uid:g.uid,addr:h.socket.getURL(),firstSuccess:h.isFirstSuccess}),h.joinSuccessLts=Date.now(),h.isFirstSuccess=!1,h.rejoinAttempt=0,h.hasJoined=!0,_e&&_e(tt.uid),!0===tt.return_vosip||!0===Object(V.getParameter)("ENABLE_LIVE_SERVER_LIST")){var Ze=null;try{Ze=h.socket.signal.connection.url}catch(gt){S.default.debug("[".concat(h.clientId,"] Can not get gateway ip: ").concat(gt))}Ze?Object(V.setParameter)("LIVE_SERVER_LIST",[Ze]):Object(V.setParameter)("LIVE_SERVER_LIST",[])}h.dispatchEvent({type:"join"}),clearInterval(h.timers.trafficStats),h.timers.trafficStats=setInterval(function(){h.makeRequest({_type:"traffic_stats"},function(gt){var at={};for(var Gt in gt)at[w(Gt)]=gt[Gt];if(at.peer_delay&&at.peer_delay.length){var vt=[];at.peer_delay.forEach(function(_r){var It={};for(var xo in _r)It[w(xo)]=_r[xo];vt.push(It)}),at.peer_delay=vt}h.traffic_stats=at,h.traffic_stats.timestamp=Date.now();var _t=h.localStreams[Z]||h.localStreams[h.joinInfo.stringUid];_t&&(_t.traffic_stats={access_delay:at.access_delay}),at.peer_delay&&at.peer_delay.forEach(function(_r){var It=h.remoteStreams[_r.peer_uid];It&&(It.traffic_stats={access_delay:at.access_delay,e2e_delay:_r.e2e_delay,audio_delay:_r.audio_delay,video_delay:_r.video_delay})}),h.dispatchEvent({type:"after-getTrafficStats",trafficStats:at})})},3e3)},function(tt,Ze){if(S.default.error("[".concat(h.clientId,"] User join failed [").concat(tt,"]")),"ERR_JOIN_BY_MULTI_IP"===tt){try{B.report.joinGateway(g.sid,{lts:ve,succ:!1,ec:"ERR_JOIN_BY_MULTI_IP",addr:h.socket.getURL()})}catch(gt){}return h.dispatchEvent({type:"onMultiIP",option:Ze.option})}d[tt]&&h.rejoinAttempt<4?h._doWithAction(d[tt],_e,be):be&&be(tt),B.report.joinGateway(g.sid,{lts:ve,succ:!1,ec:tt,addr:h.socket&&h.socket.getURL()})})})},function(Re){S.default.error("[".concat(h.clientId,"] User join failed [").concat(Re,"]")),be&&be(Re),B.report.joinGateway(g.sid,{lts:ve,succ:!1,ec:Re,addr:h.socket.getURL()})}),this.remoteMuteState={},h.resetAudioVolumeIndication()},h.leave=function(g,ce){var _e=ne.unregister(h);switch(_e&&S.default.debug("[".concat(h.clientId,"] "),_e),h.p2ps.clear(),h.state){case je:return S.default.debug("[".concat(h.clientId,"] Client Already in DISCONNECTED status")),void Ce(g);case qe:return S.default.debug("[".concat(h.clientId,"] Client Already in DISCONNECTING status")),void Ce(ce,ae.default.INVALID_OPERATION);case Ue:return h.socket&&h.socket.close(),h.socket=void 0,S.default.info("[".concat(h.clientId,"] Client connecting, Leave channel success")),h.state=je,g&&g()}for(var be in h.state=qe,h.channelMediaConfig&&(h.channelMediaRelayController&&h.channelMediaRelayController.dispose(),h.channelMediaRelayController=null),clearInterval(h.pingTimer),h.timers)h.timers.hasOwnProperty(be)&&clearInterval(h.timers[be]);for(var be in h.inChannelInfo.joinAt&&(h.inChannelInfo.duration+=Date.now()-h.inChannelInfo.joinAt,h.inChannelInfo.joinAt=null),h.hasJoined?h.makeRequest({_type:"leave"},function(Se){h.socket.close(),h.socket=void 0,S.default.info("[".concat(h.clientId,"] Leave channel success")),h.state=je,g&&g(Se)},function(Se){"TIMEOUT"!==Se&&"REQUEST_ABORT"!==Se&&(S.default.error("[".concat(h.clientId,"] Leave Channel Failed"),Se),h.state=ke,ce&&ce(Se))}):(h.socket&&(h.socket.close(),h.socket=void 0),S.default.info("[".concat(h.clientId,"] Leave channel before joined")),h.state=je,g&&g()),h.localStreams)if(h.localStreams.hasOwnProperty(be)){var ve=h.localStreams[be];delete h.localStreams[be],void 0!==ve.pc&&(ve.pc.close(),ve.pc=void 0)}pe()},h.publish=function(g,ce,_e,be){var ve=(new Date).getTime(),Z=!1;if(g.publishLTS=ve,"object"!==v()(g)||null===g)return S.default.error("[".concat(h.clientId,"] Invalid local stream")),be&&be(ae.default.INVALID_LOCAL_STREAM),void B.report.publish(h.joinInfo.sid,{lts:ve,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:ae.default.INVALID_LOCAL_STREAM});if(!g.stream&&void 0===g.url)return S.default.error("[".concat(h.clientId,"] Invalid local media stream")),be&&be(ae.default.INVALID_LOCAL_STREAM),void B.report.publish(h.joinInfo.sid,{lts:ve,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:ae.default.INVALID_LOCAL_STREAM});if(h.state!==ke)return S.default.error("[".concat(h.clientId,"] User is not in the session")),be&&be(ae.default.INVALID_OPERATION),void B.report.publish(h.joinInfo.sid,{lts:ve,succ:!1,audio:g.hasAudio(),video:g.hasVideo(),screenshare:g.hasScreen(),audioName:g.hasAudio()&&g.audioName,videoName:g.hasVideo()&&g.videoName,screenName:g.hasScreen()&&g.screenName,ec:ae.default.INVALID_OPERATION});var Se=g.getAttributes()||{};if(g.local&&void 0===h.localStreams[g.getId()]&&(g.hasAudio()||g.hasVideo()||g.hasScreen())){var Re=h.generateP2PId();if(h.p2ps.set(Re,g),g.p2pId=Re,void 0!==g.url)st(fe({state:"url",audio:g.hasAudio(),video:g.hasVideo(),attributes:g.getAttributes()}),function(Oe,Xe){"success"===Oe?(g.getUserId()!==Xe&&g.setUserId(Xe),h.localStreams[Xe]=g,g.onClose=function(){h.unpublish(g)}):S.default.error("[".concat(h.clientId,"] Publish local stream failed"),Oe)});else{h.localStreams[g.getId()]=g,g.connectionSpec={callback:function(Oe){Oe||be&&be("CANNOT_GET_OFFER"),"motion"===g.optimizationMode&&g.pc.setRtpSenderParameters("maintain-framerate"),"detail"===g.optimizationMode&&g.pc.setRtpSenderParameters("maintain-resolution"),h.makeRequest(fe({state:"offer",stream_type:1==ce.streamType?"low":"high",p2p_id:Re,sdp:Oe,audio:g.audio||g.screenAudio,video:g.screen||g.video,screen:g.screen,attributes:g.getAttributes(),dtx:g.DTX,hq:g.highQuality,lq:g.lowQuality,stereo:g.stereo,speech:g.speech,codec:h.codec,extend:Object(V.getParameter)("PUB_EXTEND")}),function(Xe){g.getUserId()!==Xe.uid&&g.setUserId(Xe.uid),S.default.info("[".concat(h.clientId,"] Local stream published with uid"),Xe.uid),g.onClose=function(){h.unpublish(g)},g._onAudioUnmute=function(){h.makeReport(Te({action:"unmute_local_audio",stream_id:g.getId()}))},g._onVideoUnmute=function(){h.makeReport(Te({action:"unmute_local_video",stream_id:g.getId()}))},g._onAudioMute=function(){h.makeReport(Te({action:"mute_local_audio",stream_id:g.getId()}))},g._onVideoMute=function(){h.makeReport(Te({action:"mute_local_video",stream_id:g.getId()}))},g.getId()===g.getUserId()&&(g.isAudioOn()||g.hasAudio()&&(S.default.debug("[".concat(h.clientId,"] local stream audio mute")),g._onAudioMute()),g.isVideoOn()||(g.hasVideo()||g.hasScreen())&&(S.default.debug("[".concat(h.clientId,"] local stream video mute")),g._onVideoMute())),g.pc.oniceconnectionstatechange=function(tt){if("failed"===tt){if(null!=h.timers[g.getId()]&&(clearInterval(h.timers[g.getId()]),clearInterval(h.timers[g.getId()]+"_RelatedStats")),S.default.error("[".concat(h.clientId,"] Publisher connection is lost -- streamId: ").concat(g.getId(),", p2pId: ").concat(Re)),h.p2ps.delete(Re),S.default.debug("[".concat(h.clientId,"] publish p2p failed: "),h.p2ps),!Z)return Z=!0,B.report.publish(h.joinInfo.sid,{lts:ve,succ:!1,audio:g.hasAudio(),video:g.hasVideo(),screenshare:g.hasScreen(),audioName:g.hasAudio()&&g.audioName,videoName:g.hasVideo()&&g.videoName,screenName:g.hasScreen()&&g.screenName,ec:ae.default.PEERCONNECTION_FAILED,publishRequestid:h.publishRequestId||0,p2pid:Re}),h.dispatchEvent(Object(H.a)({type:"pubP2PLost",stream:g})),be&&be(ae.default.PEERCONNECTION_FAILED);h.dispatchEvent(Object(H.a)({type:"pubP2PLost",stream:g}))}else if("connected"===tt&&(S.default.debug("[".concat(h.clientId,"] publish p2p connected: "),h.p2ps),g.getId()===g.getUserId()&&(g._isAudioMuted()?h.makeReport(Te({action:"mute_local_audio",stream_id:g.getId()})):h.makeReport(Te({action:"unmute_local_audio",stream_id:g.getId()})),g._isVideoMuted()?h.makeReport(Te({action:"mute_local_video",stream_id:g.getId()})):h.makeReport(Te({action:"unmute_local_video",stream_id:g.getId()}))),!Z))return Z=!0,B.report.publish(h.joinInfo.sid,{lts:ve,succ:!0,audio:g.hasAudio(),video:g.hasVideo(),screenshare:g.hasScreen(),audioName:g.hasAudio()&&g.audioName,videoName:g.hasVideo()&&g.videoName,screenName:g.hasScreen()&&g.screenName,ec:null,publishRequestid:h.publishRequestId||0,p2pid:Re}),_e&&_e()},g.pc.processSignalingMessage(Xe.sdp)},function(Xe,tt){S.default.error("Publish Failed: ".concat(Xe)),B.report.publish(h.joinInfo.sid,{lts:ve,succ:!1,audio:g.hasAudio(),video:g.hasVideo(),screenshare:g.hasScreen(),audioName:g.hasAudio()&&g.audioName,videoName:g.hasVideo()&&g.videoName,screenName:g.hasScreen()&&g.screenName,ec:Xe,publishRequestid:h.publishRequestId||0,p2pid:Re}),"TIMEOUT"!=Xe&&(h.processPublishFailure(g),be&&be(Xe))})},audio:g.hasAudio(),video:g.hasVideo(),screen:g.hasScreen(),optimizationMode:g.optimizationMode,isSubscriber:!1,stunServerUrl:h.stunServerUrl,turnServers:h.joinInfo.turnServers,maxAudioBW:Se.maxAudioBW,minVideoBW:Se.minVideoBW,maxVideoBW:Se.maxVideoBW,mode:h.mode,codec:h.codec,isVideoMute:g.userMuteVideo||g.peerMuteVideo,isAudioMute:g.userMuteAudio||g.peerMuteAudio,maxFrameRate:g.attributes.maxFrameRate,agoraStream:g,clientId:h.clientId,isCloudProxy3:3===h.joinInfo.proxyServerType,onNoIceCandidate:function(){h.dispatchEvent({type:"no_ice_candidate",stream:g})}},g.pc=Object(oe.a)(g.connectionSpec),g.pc.addStream(g.stream),S.default.debug("[".concat(h.clientId,"] PeerConnection add stream :"),g.stream),g.pc.onnegotiationneeded=function(Oe){"motion"===g.optimizationMode&&g.pc.setRtpSenderParameters("maintain-framerate"),"detail"===g.optimizationMode&&g.pc.setRtpSenderParameters("maintain-resolution");var Xe={state:"negotiation",stream_type:1===ce.streamType?"low":"high",p2p_id:Re,sdp:Oe};h.makeRequest(fe(Xe),function(tt){S.default.debug("Negotating Stream ".concat(g.getId())),g.pc.processSignalingMessage(tt.sdp)},function(tt,Ze){S.default.error("Negotiation failed ".concat(tt),Ze,Xe)})},clearInterval(h.timers[g.getId()]),h.timers[g.getId()]=setInterval(function(){if(Object(V.getParameter)("REPORT_STATS")){var Oe=0;g&&g.pc&&g.pc.getStats&&g.pc.getStatsRate(function(Xe){Xe.forEach(function(tt){if(tt&&tt.id&&!(/_recv$/.test(tt.id)||/^time$/.test(tt.id)||~tt.type.toLowerCase().indexOf("inbound"))&&g.getUserId()){if(-1===tt.id.indexOf("outbound_rtp")&&-1===tt.id.indexOf("OutboundRTP")&&-1===tt.type.toLowerCase().indexOf("outbound")||"video"!==tt.mediaType||(tt.googFrameWidthSent=g.videoWidth+"",tt.googFrameHeightSent=g.videoHeight+""),"video"===tt.mediaType)try{var Ze=g.stream.getVideoTracks()[0];tt.A_vstd=Ze.enabled?"0":"1"}catch(Gt){}if("audio"===tt.mediaType)try{var gt=g.stream.getAudioTracks()[0];tt.A_astd=gt.enabled?"0":"1"}catch(Gt){}if(g.getId()==g.getUserId()){var at=200*Oe;Oe++,setTimeout(function(){var vt,gn,Gt=h.socket&&h.socket.getLastMsgTime()&&Date.now()-h.socket.getLastMsgTime();Gt>Object(V.getParameter)("REPORT_STATS_TIMEOUT")?S.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(Gt)):h.makeReport((vt=tt,gn={},Object.keys(vt).forEach(function(_t){Object(V.getParameter)("STATS_FILTER")[_t]||(gn[m(_t)]=vt[_t])}),{_type:"publish_stats",_message:{stream_type:"high",stats:gn}}))},at)}else at=200*Oe,Oe++,setTimeout(function(){var vt,gn,Gt=h.socket&&h.socket.getLastMsgTime()&&Date.now()-h.socket.getLastMsgTime();Gt>Object(V.getParameter)("REPORT_STATS_TIMEOUT")?S.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(Gt)):h.makeReport((vt=tt,gn={},Object.keys(vt).forEach(function(_t){Object(V.getParameter)("STATS_FILTER")[_t]||(gn[m(_t)]=vt[_t])}),{_type:"publish_stats",_message:{stream_type:"low",stats:gn}}))},at)}})})}},3e3);var Pe=function(){Object(V.getParameter)("REPORT_STATS")&&g&&g.pc&&g.pc.getVideoRelatedStats&&g.pc.getVideoRelatedStats(function(Oe){var Xe,tt,gt,at,Ze=h.socket&&h.socket.getLastMsgTime()&&Date.now()-h.socket.getLastMsgTime();Ze>Object(V.getParameter)("REPORT_STATS_TIMEOUT")?S.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(Ze)):g.getId()===g.getUserId()?h.makeReport((Xe=Oe,tt={},Object.keys(Xe).forEach(function(gt){Object(V.getParameter)("STATS_FILTER")[gt]||(tt[m(gt)]=Xe[gt])}),{_type:"publish_related_stats",_message:{stream_type:"high",stats:tt}})):h.makeReport((gt=Oe,at={},Object.keys(gt).forEach(function(Gt){Object(V.getParameter)("STATS_FILTER")[Gt]||(at[m(Gt)]=gt[Gt])}),{_type:"publish_related_stats",_message:{stream_type:"low",stats:at}}))})};Pe(),clearInterval(h.timers[g.getId()+"_RelatedStats"]),h.timers[g.getId()+"_RelatedStats"]=setInterval(Pe,1e3)}}},h.unpublish=function(g,ce,_e,be){if("object"!==v()(g)||null===g)return S.default.error("[".concat(h.clientId,"] Invalid local stream")),void Ce(be,ae.default.INVALID_LOCAL_STREAM);if(h.state!==ke)return S.default.error("[".concat(h.clientId,"] User not in the session")),void Ce(be,ae.default.INVALID_OPERATION);if(null!=h.timers[g.getId()]&&(clearInterval(h.timers[g.getId()]),clearInterval(h.timers[g.getId()+"_RelatedStats"])),void 0!==h.socket)if(g.local&&void 0!==h.localStreams[g.getId()]){delete h.localStreams[g.getId()];var ve={stream_id:g.getUserId(),stream_type:1===ce.streamType?"low":"high"};h.makeRequest({_type:"unpublish",_message:ve}),(g.hasAudio()||g.hasVideo()||g.hasScreen())&&void 0===g.url&&void 0!==g.pc&&(g.pc.close(),g.pc=void 0),g.onClose=void 0,g._onAudioMute=void 0,g._onAudioUnute=void 0,g._onVideoMute=void 0,g._onVideoUnmute=void 0,h.p2ps.delete(g.p2pId),_e&&_e()}else S.default.error("[".concat(h.clientId,"] Invalid local stream")),Ce(be,ae.default.INVALID_LOCAL_STREAM);else S.default.error("[".concat(h.clientId,"] User not in the session")),Ce(be,ae.default.INVALID_OPERATION)},h.subscribe=function(g,ce,_e){var be=(new Date).getTime();g.subscribeLTS=be;var ve=!1;if(S.default.info("[".concat(h.clientId,"] Gatewayclient ").concat(h.uid," Subscribe ").concat(g.getId(),": ").concat(JSON.stringify(g.subscribeOptions))),"object"!==v()(g)||null===g)return S.default.error("[".concat(h.clientId,"] Invalid remote stream")),_e&&_e(ae.default.INVALID_REMOTE_STREAM),void B.report.subscribe(h.joinInfo.sid,{lts:be,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:ae.default.INVALID_REMOTE_STREAM});if(h.state!==ke&&(S.default.error("[".concat(h.clientId,"] User is not in the session")),!ve))return ve=!0,B.report.subscribe(h.joinInfo.sid,{lts:be,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:ae.default.INVALID_OPERATION}),_e&&_e(ae.default.INVALID_OPERATION);if(!g.local&&h.remoteStreams.hasOwnProperty(g.getId()))if(g.hasAudio()||g.hasVideo()||g.hasScreen()){var Z=h.generateP2PId();h.p2ps.set(Z,g),g.p2pId=Z,g.pc=Object(oe.a)({callback:function(Se){Se||_e&&_e("CANNOT_GET_OFFER");var Re={stream_id:g.getId(),audio:!g.subscribeOptions||g.subscribeOptions.audio,video:!g.subscribeOptions||g.subscribeOptions.video,codec:h.codec,p2p_id:Z,sdp:Se,tcc:Object(V.getParameter)("SUBSCRIBE_TCC"),extend:Object(V.getParameter)("SUB_EXTEND")};h.makeRequest({_type:"subscribe",_message:Re},function(Pe){g.pc.processSignalingMessage(Pe.sdp)},function(Pe,Oe){S.default.error("[".concat(h.clientId,"] Subscribe remote stream Failed: ").concat(Pe,", closing stream "),g.getId(),Oe),B.report.subscribe(h.joinInfo.sid,{lts:be,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:Pe}),"TIMEOUT"!=Pe&&(h.processSubscribeFailure(g),_e&&_e(Pe))})},nop2p:!0,audio:!0,video:!0,screen:g.hasScreen(),isSubscriber:!0,stunServerUrl:h.stunServerUrl,turnServers:h.joinInfo.turnServers,isVideoMute:g.userMuteVideo,isAudioMute:g.userMuteAudio,uid:g.getId(),agoraStream:g,clientId:h.clientId}),g.pc.onaddstream=function(Se,Re){if(g._onAudioUnmute=function(){h.makeReport(Te({action:"unmute_remote_audio",stream_id:g.getId()}),function(){},function(){})},g._onAudioMute=function(){h.makeReport(Te({action:"mute_remote_audio",stream_id:g.getId()}),function(){},function(){})},g._onVideoUnmute=function(){h.makeReport(Te({action:"unmute_remote_video",stream_id:g.getId()}),function(){},function(){})},g._onVideoMute=function(){h.makeReport(Te({action:"mute_remote_video",stream_id:g.getId()}),function(){},function(){})},"ontrack"===Re&&"video"===Se.track.kind||"onaddstream"===Re){S.default.info("[".concat(h.clientId,"] Remote stream subscribed with uid "),g.getId());var Pe=h.remoteStreams[g.getId()];if(h.remoteStreams[g.getId()].stream="onaddstream"===Re?Se.stream:Se.streams[0],h.remoteStreams[g.getId()].hasVideo()){if(Object(C.isFireFox)()||Object(C.isSafari)()){var Oe=h.remoteStreams[g.getId()].stream;Object(P.vsResHack)(Oe,function(Ze,gt){g.videoWidth=Ze,g.videoHeight=gt},function(Ze){return S.default.warning("[".concat(h.clientId,"] vsResHack failed: ")+Ze)})}}else{var Xe=h.remoteStreams[g.getId()];Xe.peerMuteVideo=!0,h._adjustPCMuteStatus(Xe)}Pe&&Pe.isPlaying()&&Pe.elementID&&(S.default.debug("[".concat(h.clientId,"] Reload Player ").concat(Pe.elementID," StreamId ").concat(Pe.getId())),g.audioOutput=Pe.audioOutput,Pe.stop(),g.play(Pe.elementID,Pe.playOptions)),delete g.audioLevelHelper;var tt=Object(H.e)({type:"stream-subscribed",stream:h.remoteStreams[g.getId()]});h.dispatchEvent(tt)}},clearInterval(h.timers[g.getId()]),h.timers[g.getId()]=setInterval(function(){if(Object(V.getParameter)("REPORT_STATS")){var Se=0;g&&g.pc&&g.pc.getStats&&g.pc.getStatsRate(function(Re){Re.forEach(function(Pe){if(Pe&&Pe.id){if(/_send$/.test(Pe.id)||/^time$/.test(Pe.id)||/^bweforvideo$/.test(Pe.id))return;-1===Pe.id.indexOf("inbound_rtp")&&-1===Pe.id.indexOf("inbound-rtp")&&-1===Pe.type.toLowerCase().indexOf("inbound")||"video"!==Pe.mediaType||(Pe.googFrameWidthReceived=g.videoWidth+"",Pe.googFrameHeightReceived=g.videoHeight+"");var Oe=200*Se;Se++;var Xe=g.getId();setTimeout(function(){var tt=h.socket&&h.socket.getLastMsgTime()&&Date.now()-h.socket.getLastMsgTime();if(tt>Object(V.getParameter)("REPORT_STATS_TIMEOUT"))S.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(tt));else{if("video"===Pe.mediaType)try{var Ze=g.stream.getVideoTracks()[0];Pe.A_vrtd=Ze.enabled?"0":"1",g.player&&g.player.freezeTimeCounterList.length>0&&(Pe.A_vrft=g.player.freezeTimeCounterList.splice(0,1)[0].toString())}catch(at){}if("audio"===Pe.mediaType)try{var gt=g.stream.getAudioTracks()[0];Pe.A_artd=gt.enabled?"0":"1"}catch(at){}h.makeReport(Ne(Xe,Pe))}},Oe)}})})}},3e3),clearInterval(h.timers[g.getId()+"_RelatedStats"]),h.timers[g.getId()+"_RelatedStats"]=setInterval(function(){if(Object(V.getParameter)("REPORT_STATS")&&g&&g.pc){var Se=h.socket&&h.socket.getLastMsgTime()&&Date.now()-h.socket.getLastMsgTime();if(Se>Object(V.getParameter)("REPORT_STATS_TIMEOUT"))return void S.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(Se));g.pc.getVideoRelatedStats&&g.pc.getVideoRelatedStats(function(Re){g.player&&(g.hasVideo()&&!g.peerMuteVideo&&(Re.isFreeze=g.player.freezeCount>g.player.lastFreezeCount),g.player.lastFreezeCount=g.player.freezeCount),h.makeReport(me(g.getId(),Re))}),g.pc.getAudioRelatedStats&&g.pc.getAudioRelatedStats(function(Re){h.makeReport(me(g.getId(),Re))})}},1e3),h.audioLevel[g.getId()]=0,clearInterval(h.timers[g.getId()+"audio"]),h.timers[g.getId()+"audio"]=setInterval(function(){h.hasListeners("active-speaker")&&g&&g.pc&&"established"===g.pc.state&&g.pc.getStats&&g.pc.getStats(function(Se){Se.forEach(function(Re){if("audio"===Re.mediaType){if(Re.audioOutputLevel>5e3)for(var Pe in h.audioLevel[g.getId()]<20&&(h.audioLevel[g.getId()]+=1),h.audioLevel)Pe!==""+g.getId()&&h.audioLevel[Pe]>0&&(h.audioLevel[Pe]-=1);var Oe=Object.keys(h.audioLevel).sort(function(tt,Ze){return h.audioLevel[Ze]-h.audioLevel[tt]});if(h.activeSpeaker!==Oe[0]){var Xe=Object(H.a)({type:"active-speaker",uid:Oe[0]});h.dispatchEvent(Xe),h.activeSpeaker=Oe[0],S.default.debug("[".concat(h.clientId,"] Update active speaker: ").concat(h.activeSpeaker))}}})},50)},50),g.pc.oniceconnectionstatechange=function(Se){if("failed"===Se)null!=h.timers[g.getId()]&&(clearInterval(h.timers[g.getId()]),clearInterval(h.timers[g.getId()]+"audio")),S.default.error("[".concat(h.clientId,"] Subscriber connection is lost -- streamId: ").concat(g.getId(),", p2pId: ").concat(Z)),S.default.debug("[".concat(h.clientId,"] subscribe p2p failed: "),h.p2ps),ve||(ve=!0,_e&&_e(ae.default.PEERCONNECTION_FAILED),B.report.subscribe(h.joinInfo.sid,{lts:be,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:ae.default.PEERCONNECTION_FAILED,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:Z})),h.remoteStreams[g.getId()]&&h.p2ps.has(Z)&&(h.p2ps.delete(Z),h.dispatchEvent(Object(H.a)({type:"subP2PLost",stream:g})));else if("connected"===Se&&(S.default.debug("[".concat(h.clientId,"] subscribe p2p connected: "),h.p2ps),!ve)){ve=!0,B.report.subscribe(h.joinInfo.sid,{lts:be,succ:!0,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:null,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:Z}),h._adjustPCMuteStatus(g);var Re=!1,Pe=!1,Oe=!1,Xe=setInterval(function(){Re&&Pe||(g.pc?g.pc.getStats(function(Gt){Gt.forEach(function(vt){if((-1!==vt.id.indexOf("recv")||vt.type&&-1!==vt.type.toLowerCase().indexOf("inbound")||-1!==vt.id.indexOf("inbound_rtp")||-1!==vt.id.indexOf("inbound-rtp")||-1!==vt.id.indexOf("InboundRTP"))&&"audio"===vt.mediaType){if((vt.googDecodingNormal>0||vt.audioOutputLevel>0)&&!Re){Re=!0,h.dispatchEvent({type:"first-audio-frame-decode",stream:g}),Re&&Pe&&clearInterval(Xe);var gn=Date.now(),_t=B.report.getSessionStartTime(h.joinInfo.sid);B.report.firstAudioDecode(h.joinInfo.sid,{peerid:g.uintId,uid:h.uid,elapse:gn-_t,subscribeElapse:gn-g.subscribeLTS,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:Z})}parseInt(vt.packetsReceived)>0&&!Pe&&(Pe=!0,h.dispatchEvent({type:"first-audio-packet-received",stream:g}),Re&&Pe&&clearInterval(Xe),gn=Date.now(),_t=B.report.getSessionStartTime(h.joinInfo.sid),B.report.firstAudioReceived(h.joinInfo.sid,{peerid:g.uintId,uid:h.uid,elapse:gn-_t,subscribeElapse:gn-g.subscribeLTS,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:Z}))}})},100):clearInterval(Xe))},100),tt=!1,Ze=!1,gt=setInterval(function(){tt&&Ze||(g.pc?g.pc.getStats(function(Gt){Gt.forEach(function(vt){if((-1!==vt.id.indexOf("recv")||vt.type&&-1!==vt.type.toLowerCase().indexOf("inbound")||-1!==vt.id.indexOf("inbound_rtp")||-1!==vt.id.indexOf("inbound-rtp")||-1!==vt.id.indexOf("InboundRTP"))&&"video"===vt.mediaType){if((vt.framesDecoded>0||vt.googFramesDecoded>0)&&!tt){tt=!0,h.dispatchEvent({type:"first-video-frame-decode",stream:g}),tt&&Ze&&clearInterval(gt);var gn=Date.now(),_t=B.report.getSessionStartTime(h.joinInfo.sid);g.firstFrameTime=(new Date).getTime()-g.subscribeLTS,B.report.firstVideoDecode(h.joinInfo.sid,{peerid:g.uintId,width:parseInt(vt.googFrameWidthReceived)||0,height:parseInt(vt.googFrameHeightReceived)||0,uid:h.uid,elapse:gn-_t,subscribeElapse:gn-g.subscribeLTS,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:Z})}vt.packetsReceived>0&&!Ze&&(Ze=!0,h.dispatchEvent({type:"first-video-packet-received",stream:g}),tt&&Ze&&clearInterval(gt),gn=Date.now(),_t=B.report.getSessionStartTime(h.joinInfo.sid),B.report.firstVideoReceived(h.joinInfo.sid,{peerid:g.uintId,uid:h.uid,elapse:gn-_t,subscribeElapse:gn-g.subscribeLTS,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:Z}))}})},100):clearInterval(gt))},100),at=setInterval(function(){if(!Oe){var Gt=g.getId(),vt=h.traffic_stats;if(vt&&vt.peer_delay){var gn=vt.peer_delay.find(function(an){return an.peer_uid==Gt});if(gn){if(Oe=!0,h.peerPublishDurationMap.get(g.getId()))return void clearInterval(at);var _t=gn.peer_publish_audio_duration,_r=gn.peer_publish_video_duration;if(void 0===_t||void 0===_r)return;h.peerPublishDurationMap.set(g.getId(),!0);var It=B.report.getSessionStartTime(h.joinInfo.sid),xo=(_t||_r)+(Date.now()-vt.timestamp),ma=Date.now();B.report.peerPublishStatus({audiotag:_t?1:-1,videotag:_r?1:-1,lts:ma,sid:h.joinInfo.sid,cname:h.joinInfo.cname,cid:h.joinInfo.cid,uid:h.joinInfo.uid,elapse:ma-It,peer:g.uintId,peerPublishDuration:xo,joinChannelSuccessElapse:ma-h.joinSuccessLts,subscribeElapse:ma-g.subscribeLTS}),clearInterval(at)}}}},1e3);return g.sid=h.joinInfo.sid,ce&&ce()}}}else S.default.error("[".concat(h.clientId,"] Invalid remote stream")),ve||(ve=!0,_e&&_e(ae.default.INVALID_REMOTE_STREAM),B.report.subscribe(h.joinInfo.sid,{lts:be,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:ae.default.INVALID_REMOTE_STREAM}));else S.default.error("[".concat(h.clientId,"] No such remote stream")),ve||(ve=!0,_e&&_e(ae.default.NO_SUCH_REMOTE_STREAM),B.report.subscribe(h.joinInfo.sid,{lts:be,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:ae.default.NO_SUCH_REMOTE_STREAM}))},h.subscribeChange=function(g,ce,_e){var be=Date.now();S.default.info("[".concat(h.clientId,"] Gatewayclient ").concat(h.uid," SubscribeChange ").concat(g.getId(),": ").concat(JSON.stringify(g.subscribeOptions))),h._adjustPCMuteStatus(g);var ve={stream_id:g.getId(),audio:g.subscribeOptions.audio,video:g.subscribeOptions.video};h.makeRequest({_type:"subscribe_change",_message:ve},function(Z){var Se=Object(H.e)({type:"stream-subscribe-changed",stream:h.remoteStreams[g.getId()]});B.report.subscribe(h.joinInfo.sid,{lts:be,succ:!0,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:null,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:h.p2ps.get(g.getId())}),h.dispatchEvent(Se),ce&&ce()},function(Z,Se){S.default.error("[".concat(h.clientId,"] Subscribe Change Failed ").concat(g.getId()),Z,Se),_e&&_e(Z,Se)})},h.processPublishFailure=function(g){g.publishLTS=null,g.p2pId&&h.p2ps.get(g.p2pId)===g&&h.p2ps.delete(g.p2pId),h.localStreams[g.getUserId()]===g&&delete h.localStreams[g.getUserId()],h.localStreams[g.getId()]===g&&delete h.localStreams[g.getId()],g.pc&&(g.pc.processSignalingMessage=function(){},g.pc.oniceconnectionstatechange=function(){},g.pc.close(),delete g.pc),delete g.onClose,delete g._onAudioUnmute,delete g._onVideoUnmute,delete g._onAudioMute,delete g._onVideoMute,delete g._onAudioUnmute},h.processSubscribeFailure=function(g){g.p2pId&&h.p2ps.get(g.p2pId)===g&&h.p2ps.delete(g.p2pId),g.pc&&(g.pc.onaddstream=function(){},g.pc.processSignalingMessage=function(){},g.pc.oniceconnectionstatechange=function(){},g.pc.close(),delete g.pc),delete g.onClose,delete g._onAudioUnmute,delete g._onVideoUnmute,delete g._onAudioMute,delete g._onVideoMute,delete g._onAudioUnmute},h._adjustPCMuteStatus=function(g){S.default.debug("[".concat(h.clientId,"]: use _adjustPCMuteStatus: ").concat(g.getId())),S.default.debug("[".concat(h.clientId,"]: video: ").concat(g.video,", audio: ").concat(g.audio,", suboption: ").concat(JSON.stringify(g.subscribeOptions),",userMuteVideo: ").concat(g.userMuteVideo,", peerMuteVideo: ").concat(g.peerMuteVideo,", userMuteAudio: ").concat(g.userMuteAudio,", peerMuteAudio: ").concat(g.peerMuteAudio)),!g.local&&g.pc&&g.pc.peerConnection.getReceivers&&g.pc.peerConnection.getReceivers().forEach(function(ce){if(ce&&ce.track&&"audio"===ce.track.kind){var _e=!g.userMuteAudio&&!g.peerMuteAudio;g.subscribeOptions&&!g.subscribeOptions.audio&&(_e=!1),S.default.debug("[".concat(h.clientId,"]: set receiver audio track: ").concat(_e)),ce.track.enabled=!!_e}else if(ce&&ce.track&&"video"===ce.track.kind){var be=!g.userMuteVideo&&!g.peerMuteVideo;g.subscribeOptions&&!g.subscribeOptions.video&&(be=!1),S.default.debug("[".concat(h.clientId,"]: set receiver video track: ").concat(be)),ce.track.enabled=!!be}})},h.unsubscribe=function(g,ce,_e){if("object"!==v()(g)||null===g)return S.default.error("[".concat(h.clientId,"] Invalid remote stream")),void Ce(_e,ae.default.INVALID_REMOTE_STREAM);if(h.state!==ke)return S.default.error("[".concat(h.clientId,"] User is not in the session")),void Ce(_e,ae.default.INVALID_OPERATION);if(null!=h.timers[g.getId()]&&(clearInterval(h.timers[g.getId()]),clearInterval(h.timers[g.getId()]+"audio")),null!=h.audioLevel[g.getId()]&&delete h.audioLevel[g.getId()],null!=h.timer_counter[g.getId()]&&delete h.timer_counter[g.getId()],h.remoteStreams.hasOwnProperty(g.getId())){if(!h.socket)return S.default.error("[".concat(h.clientId,"] User is not in the session")),void Ce(_e,ae.default.INVALID_OPERATION);if(g.local)return S.default.error("[".concat(h.clientId,"] Invalid remote stream")),void Ce(_e,ae.default.INVALID_REMOTE_STREAM);g.close(),g.stop();var be={stream_id:g.getId()};h.makeRequest({_type:"unsubscribe",_message:be}),void 0!==g.pc&&(g.pc.close(),g.pc=void 0),g.onClose=void 0,g._onAudioMute=void 0,g._onAudioUnute=void 0,g._onVideoMute=void 0,g._onVideoUnmute=void 0,delete g.subscribeOptions,h.p2ps.delete(g.p2pId),S.default.info("[".concat(h.clientId,"] Unsubscribe stream success")),ce&&ce()}else Ce(_e,ae.default.NO_SUCH_REMOTE_STREAM)},h.setRemoteVideoStreamType=function(g,ce){if(S.default.debug("[".concat(h.clientId,"] Switching remote video stream ").concat(g.getId()," to ").concat(ce)),"object"===v()(g)&&null!==g)if(h.state===ke){if(!g.local){switch(ce){case h.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case h.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case h.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var _e={stream_id:g.getId(),stream_type:ce};h.makeRequest({_type:"switch_video_stream",_message:_e},function(){S.default.debug("SwitchVideoStream Success ".concat(_e.stream_id," ").concat(_e.stream_type))},function(be,ve){S.default.error("SwitchVideoStream Error ".concat(be," ").concat(_e.stream_id," ").concat(_e.stream_type),ve)})}}else S.default.error("[".concat(h.clientId,"] User is not in the session"));else S.default.error("[".concat(h.clientId,"] Invalid remote stream"))},h.renewToken=function(g,ce,_e){g?h.key?h.state!==ke?(S.default.debug("[".concat(h.clientId,"] Client is not connected. Trying to rejoin")),h.key=g,h.rejoin(),ce&&ce()):(S.default.debug("[".concat(h.clientId,"] renewToken from ").concat(h.key," to ").concat(g)),h.key=g,h.makeRequest({_type:"renew_token",_message:{token:g}},ce,_e)):(S.default.error("[".concat(h.clientId,"] Client is previously joined without token")),_e&&_e(ae.default.INVALID_PARAMETER)):(S.default.error("[".concat(h.clientId,"] Invalid Token ").concat(g)),_e&&_e(ae.default.INVALID_PARAMETER))},h.setStreamFallbackOption=function(g,ce){if(S.default.debug("[".concat(h.clientId,"] Set stream fallback option ").concat(g.getId()," to ").concat(ce)),"object"===v()(g)&&null!==g)if(h.state===ke){if(!g.local){switch(ce){case h.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case h.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case h.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var _e={stream_id:g.getId(),fallback_type:ce};h.makeRequest({_type:"set_fallback_option",_message:_e},function(){S.default.debug("SetStreamFallbackOption success ".concat(_e.stream_id," ").concat(ce))},function(be,ve){S.default.error("Failed to SetStreamFallbackOption ".concat(_e.stream_id," ").concat(ce," ").concat(be),ve)})}}else S.default.error("[".concat(h.clientId,"] User is not in the session"));else S.default.error("[".concat(h.clientId,"] Invalid remote stream"))},h.enableAudioVolumeIndicator=function(g,ce){h.audioVolumeIndication.enabled=!0,h.audioVolumeIndication.interval=g,h.audioVolumeIndication.smooth=ce,h.resetAudioVolumeIndication()},h.resetAudioVolumeIndication=function(){if(clearInterval(h.timers.audioVolumeIndication),clearInterval(h.timers.audioVolumeSampling),h.audioVolumeIndication.enabled&&h.audioVolumeIndication.interval){var g=Math.floor(1e3*h.audioVolumeIndication.smooth/100);clearInterval(h.timers.audioVolumeSampling),h.timers.audioVolumeSampling=setInterval(function(){h.audioVolumeSampling||(h.audioVolumeSampling={});var ce={};for(var _e in h.remoteStreams){var be=h.remoteStreams[_e];if(be.stream&&be.hasAudio()){var ve=be.getAudioLevel();ve>0&&ve<1&&(ve*=100);var Z=h.audioVolumeSampling[_e]||[];for(Z.push(ve);Z.length>g;)Z.shift();ce[_e]=Z}}h.audioVolumeSampling=ce},100),clearInterval(h.timers.audioVolumeIndication),h.timers.audioVolumeIndication=setInterval(function(){if(h.socket&&h.socket.signal&&h.socket.signal.connection&&h.socket.signal.connection.readyState===WebSocket.OPEN){var ce=[];for(var _e in h.remoteStreams)if(h.audioVolumeSampling&&h.audioVolumeSampling[_e]){var be=h.audioVolumeSampling[_e],ve=0;be.forEach(function(Pe){ve+=Pe});var Z={uid:_e,level:Math.floor(ve/be.length)};Z.level&&ce.push(Z)}var Se=ce.sort(function(Pe,Oe){return Pe.level-Oe.level});S.default.debug("[".concat(h.clientId,"] volume-indicator "),JSON.stringify(Se)),h.audioVolumeIndication.sortedAudioVolumes=Se;var Re=Object(H.a)({type:"volume-indicator",attr:Se});h.dispatchEvent(Re)}},h.audioVolumeIndication.interval)}},h.closeGateway=function(){S.default.debug("[".concat(h.clientId,"] close gateway")),h.state=je,h.socket.close(),xe()},h.startChannelMediaRelay=function(){var g=T()(R.a.mark(function ce(_e){var be,ve,Se;return R.a.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(!h.channelMediaRelayController){Re.next=2;break}throw new x.ChannelMediaError("RELAY_ALREADY_START","",x.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return be=function(Pe){h.dispatchEvent({type:"channel-media-relay-event",code:Pe})},ve=function(Pe,Oe,Xe){Pe===x.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&Oe===x.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(h.channelMediaRelayController.dispose(),h.channelMediaRelayController=null),h.dispatchEvent({type:"channel-media-relay-state",state:Pe,code:Oe,data:Xe})},h.channelMediaRelayController=new ee.a(h.joinInfo,h.clientId),h.channelMediaRelayController.on("event",be),h.channelMediaRelayController.on("state",ve),Re.prev=7,Re.next=10,h.channelMediaRelayController.startChannelMediaRelay(_e);case 10:Re.next=22;break;case 12:throw Re.prev=12,Re.t0=Re.catch(7),S.default.debug("[".concat(h.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(Re.t0))),h.dispatchEvent({type:"channel-media-relay-state",state:x.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:x.CHANNEL_MEDIA_RELAY_ERROR[Se=Re.t0 instanceof x.ChannelMediaError?"SetSourceChannelStatus"===Re.t0.data||Re.t0.data&&Re.t0.data.serverResponse&&"SetSourceChannel"===Re.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===Re.t0.data||Re.t0.data&&Re.t0.data.serverResponse&&"SetDestChannel"===Re.t0.data.serverResponse.command?"FAILED_JOIN_DEST":Re.t0.data&&Re.t0.data.serverResponse&&"StartPacketTransfer"===Re.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":Re.t0.message===x.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||Re.t0.message===x.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":Re.t0.message===x.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||Re.t0.message===x.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":Re.t0.message===x.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":Re.t0.message===x.CHANNEL_MEDIA_ERROR.WS_ABORT||Re.t0.message===x.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR"]}),h.channelMediaRelayController&&(h.channelMediaRelayController.dispose(),h.channelMediaConfig=null,h.channelMediaRelayController=null),h.dispatchEvent({type:"channel-media-relay-state",state:x.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new x.ChannelMediaError(Se,null,x.CHANNEL_MEDIA_RELAY_ERROR[Se]);case 22:h.dispatchEvent({type:"channel-media-relay-state",state:x.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:x.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),h.channelMediaConfig=_e;case 24:case"end":return Re.stop()}},ce,null,[[7,12]])}));return function(ce){return g.apply(this,arguments)}}(),h.updateChannelMediaRelay=function(){var g=T()(R.a.mark(function ce(_e){var be,ve;return R.a.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(h.channelMediaRelayController){Z.next=2;break}throw new x.ChannelMediaError("RELAY_NOT_START",null,x.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return Z.prev=2,Z.next=5,h.channelMediaRelayController.updateChannelMediaRelay(_e);case 5:Z.next=18;break;case 7:throw Z.prev=7,Z.t0=Z.catch(2),S.default.debug("[".concat(h.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),be=x.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,ve=e instanceof x.ChannelMediaError?e.message===x.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===x.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===x.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===x.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===x.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===x.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",h.dispatchEvent({type:"channel-media-relay-event",code:x.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),h.dispatchEvent({type:"channel-media-relay-state",state:be,code:x.CHANNEL_MEDIA_RELAY_ERROR[ve]}),h.channelMediaRelayController&&(h.channelMediaRelayController.dispose(),h.channelMediaConfig=null,h.channelMediaRelayController=null),h.dispatchEvent({type:"channel-media-relay-state",state:x.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new x.ChannelMediaError(ve,null,x.CHANNEL_MEDIA_RELAY_ERROR[ve]);case 18:h.channelMediaConfig=_e;case 19:case"end":return Z.stop()}},ce,null,[[2,7]])}));return function(ce){return g.apply(this,arguments)}}(),h.stopChannelMediaRelay=T()(R.a.mark(function g(){var _e;return R.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(h.channelMediaRelayController){be.next=2;break}throw new x.ChannelMediaError("RELAY_NOT_START",null,x.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return be.prev=2,be.next=5,h.channelMediaRelayController.stopChannelMediaRelay();case 5:be.next=17;break;case 7:throw be.prev=7,be.t0=be.catch(2),S.default.debug("[".concat(h.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),_e=e instanceof x.ChannelMediaError?e.message===x.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===x.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===x.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===x.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",h.dispatchEvent({type:"channel-media-relay-state",state:x.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:x.CHANNEL_MEDIA_RELAY_ERROR[_e]}),h.channelMediaRelayController&&(h.channelMediaRelayController.dispose(),h.channelMediaConfig=null,h.channelMediaRelayController=null),h.dispatchEvent({type:"channel-media-relay-state",state:x.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new x.ChannelMediaError(_e,null,x.CHANNEL_MEDIA_RELAY_ERROR[_e]);case 17:h.channelMediaConfig=null,h.channelMediaRelayController=null;case 19:case"end":return be.stop()}},g,null,[[2,7]])})),h.sendMetadata=function(g,ce){h.makeRequest({_type:"send_metadata",_message:{session_id:h.joinInfo.sid,metadata:window.btoa(unescape(encodeURIComponent(g)))}},function(){S.default.debug("[".concat(h.clientId,'] send metadata "').concat(g,'" success')),ce&&ce(null)},function(_e){S.default.error("[".concat(h.clientId,'] send metadata "').concat(g,'" failed'),_e),ce&&ce(_e)})},h._reportWebsocketCloseEvent=function(g,ce){try{var _e=B.report.getSessionStartTime(h.joinInfo.sid),be=Date.now();B.report.webSocketQuit({lts:be,sid:h.joinInfo.sid,cname:h.joinInfo.cname,cid:h.joinInfo.cid,uid:h.joinInfo.uid,elapse:be-_e,succ:g,errorCode:ce,ip:null})}catch(ve){S.default.debug("[".concat(h.clientId,"]: _reportWebsocketCloseEvent exception, ").concat(ve))}};var L=function(){S.default.debug("[".concat(h.clientId,"] Reconnect gateway")),h.state=je,h.socket.close(),xe(),h.reconnectMode="recover",h.state=Ue,Qe()};h.recover=L;var xe=function(){for(var g in h.dispatchEvent({type:"before-clear-connection"}),h.timers)h.timers.hasOwnProperty(g)&&clearInterval(h.timers[g]);for(var g in h.remoteStreams)if(h.remoteStreams.hasOwnProperty(g)){var ce=h.remoteStreams[g],_e=Object(H.a)({type:"stream-removed",uid:ce.getId(),stream:ce});h.dispatchEvent(_e)}h.p2ps.clear(),pe(),ft(),clearInterval(h.pingTimer)};h.rejoin=function(){h.socket&&(clearInterval(h.pingTimer),h.socket.close(),h.socket=void 0),h.state=Ue,Qe()};var Qe=function(g,ce){h.dispatchEvent(Object(H.a)({type:"rejoin-start"})),g=g||function(_e){S.default.info("[".concat(h.clientId,"] User ").concat(_e," is re-joined to ").concat(h.joinInfo.cname)),h.dispatchEvent(Object(H.a)({type:"rejoin"})),h.channelMediaConfig&&h.startChannelMediaRelay(h.channelMediaConfig).then(function(){S.default.debug("[".concat(h.clientId,"] restartChannelMediaRelay success"))}).catch(function(be){S.default.debug("[".concat(h.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(be)))}),h.liveStreams&&h.liveStreams.size&&h.liveStreams.forEach(function(be,ve){be&&h.setLiveTranscoding(h.transcoding),h.startLiveStreaming(ve,be)}),h.injectLiveStreams&&h.injectLiveStreams.size&&h.injectLiveStreams.forEach(function(be,ve){h.addInjectStreamUrl(ve,be)})},ce=ce||function(_e){S.default.error("[".concat(h.clientId,"] Re-join to channel failed "),_e),h.dispatchEvent(Object(H.e)({type:"error",reason:_e}))},h.key?(++h.rejoinAttempt,h.join(h.joinInfo,h.key,g,ce)):S.default.error("[".concat(h.clientId,"] Connection recover failed [Invalid channel key]"))},ze=function(g,ce,_e){if(h.onConnect=ce,h.socket){if(h.dispatchEvent({type:"reconnect"}),"retry"===h.reconnectMode)S.default.debug("[".concat(h.clientId,"] Retry current gateway")),h.socket.reconnect();else if("tryNext"===h.reconnectMode)S.default.debug("[".concat(h.clientId,"] Try next gateway")),h.socket.connectNext();else if("recover"===h.reconnectMode){S.default.debug("[".concat(h.clientId,"] Recover gateway")),S.default.debug("[".concat(h.clientId,"] Try to reconnect choose server and get gateway list again ")),h.reconnectingCS=!0;var be=h.joinInfo&&h.joinInfo.sid;Object(J.getGatewayList)(h.joinInfo,function(Z){S.default.debug("[".concat(h.clientId,"] session:  ").concat(be," get gateway list success")),h.joinInfo.apResponse=Z.res,h.reconnectingCS?h.socket.replaceHost(Z.gateway_addr):S.default.debug("[".concat(h.clientId,"] session:  ").concat(be," already leave"))})}}else h.socket=function(q,F){var te={connect:function(){F.host=q,te.signal=ie(F),te.on=te.signal.on,te.dispatchEvent=te.signal.dispatchEvent,te.signal.on("onopen",function(Te){te.signal.onEvent=function(me){te.dispatchEvent(Object(H.d)({type:me.event,msg:me}))},te.dispatchEvent(Object(H.d)({type:"connect",msg:Te}))}),te.signal.on("onError",function(Te){onError(Te.msg.code,"error")})},getLastMsgTime:function(){return te.signal&&te.signal.lastMsgTime},getSendBytes:function(){return te.signal.getSendBytes()},getRecvBytes:function(){return te.signal.getRecvBytes()},getDuration:function(){return te.signal.getDuration()},disconnect:function(){te.signal.disconnect()},close:function(){te.signal.close()},getURL:function(){return te.signal.getURL()},reconnect:function(){te.signal.reconnect()},connectNext:function(){te.signal.connectNext()},replaceHost:function(Te){te.signal.replaceHost(Te)},emitSimpleMessage:function(Te,me){te.signal.sendSignalCommand(Te,me)},emitRequest:function(Te,me){te.signal.sendRequest(Te,me)},emitReport:function(Te){te.signal.sendReport(Te)}};return te.connect(),te}(g.gatewayAddr,{sid:h.joinInfo.sid,clientId:h.clientId,proxyServerType:h.joinInfo.proxyServerType}),h.socket.on("start-connection",function(Z){h.ticket=Z&&Z.msg&&Z.msg.ticket}),h.socket.on("on_uplink_stats",function(Z){var Se={};for(var Re in Z)Se[w(Re)]=Z[Re];if(h.OutgoingAvailableBandwidth=Se.uplink_available_bandwidth,h.localStreams[h.uid]){var Pe=h.localStreams[h.uid].uplinkStats;Pe&&Pe.period_fir===Se.period_fir||S.default.debug("[".concat(h.clientId,"]: Period fir change to: ").concat(Se.period_fir)),h.localStreams[h.uid].uplinkStats=Se}}),h.socket.on("connect",function(){h.dispatchEvent({type:"connected"}),h.attemps=1,h.onConnect()}),h.socket.on("recover",function(){h.state=Ue,S.default.debug("[".concat(h.clientId,"] Try to reconnect choose server and get gateway list again ")),h.reconnectingCS=!0;var Z=h.joinInfo&&h.joinInfo.sid;Object(J.getGatewayList)(h.joinInfo,function(Se){S.default.debug("[".concat(h.clientId,"] session:  ").concat(Z," get gateway list success")),h.reconnectingCS?h.socket.replaceHost(Se.gateway_addr):S.default.debug("[".concat(h.clientId,"] session:  ").concat(Z," already leave"))})}),h.socket.on("disconnect",function(Z){if(S.default.debug("[".concat(h.clientId,"] Receive disconnect message")),h.state!==je){h.state=je,h._reportWebsocketCloseEvent(-1,ae.WEBSOCKET_CLOSE_REASON.WS_DISCONNECT);var Se=Object(H.e)({type:"error",reason:ae.default.SOCKET_DISCONNECTED});if(h.dispatchEvent(Se),h.reconnectMode=0===h.p2ps.size?"tryNext":"retry",xe(),h.channelMediaRelayController&&h.channelMediaRelayController.dispose(),h.channelMediaRelayController=null,1!=te){var Pe=1e3*Math.min(30,Math.pow(2,h.attemps)-1);if(S.default.error("[".concat(h.clientId,"] Disconnect from server [").concat(JSON.stringify(Z),"], attempt to recover [#").concat(h.attemps,"] after ").concat(Pe/1e3," seconds")),h.hasInvokeLeave)return S.default.debug("[".concat(h.clientId,"] No reconnection because Client.leave has been invoked")),void(h.hasInvokeLeave=!1);setTimeout(function(){h.attemps++,h.state=Ue,h.inChannelInfo&&Date.now()-h.inChannelInfo.joinAt>Object(V.getParameter)("TICKET_RENEW_TIMEOUT")?(S.default.debug("Recovering to renew ticket"),L()):Qe()},Pe)}else{var Oe=ne.unregister(h);Oe&&S.default.debug("[".concat(h.clientId,"] "),Oe)}}}),h.socket.on("on_add_audio_stream",function(Z){if(S.default.info("[".concat(h.clientId,"] Newly added audio stream with uid ").concat(Z.uid)),h.joinInfo.stringUid&&"string"!=typeof Z.uid&&S.default.error("StringUID is Mixed with UintUID"),h.remoteStreamsInChannel.has(Z.uid)||h.remoteStreamsInChannel.add(Z.uid),void 0===h.remoteStreams[Z.uid]){var Se=Object(k.a)({streamID:Z.uid,local:!1,audio:Z.audio,video:Z.video,uintUID:Z.uint_id||Z.uid});Se.peerMuteVideo=!0,h.remoteStreams[Z.uid]=Se;var Re=Object(H.e)({type:"stream-added",stream:Se});h.dispatchEvent(Re);var Pe=h.remoteMuteState[Z.uid];Pe&&Pe.audio&&(Re=Object(H.a)({type:"mute-audio",uid:Z.uid}),h.dispatchEvent(Re)),Pe&&Pe.video&&(Re=Object(H.a)({type:"mute-video",uid:Z.uid}),h.dispatchEvent(Re))}B.report.onAddAudioStream(h.joinInfo.sid,{peerid:Z.uint_id||Z.uid,uid:h.uid})}),h.socket.on("on_update_stream",function(Z){S.default.info("[".concat(h.clientId,"] on_update_stream:"),Z);var Se=h.remoteStreams[Z.uid];if(h.joinInfo.stringUid&&"string"!=typeof Z.uid&&S.default.error("StringUID is Mixed with UintUID"),Se){Se.audio=Z.audio,Se.video=Z.video,Se.screen=Z.screen,Se.pc&&h._adjustPCMuteStatus(Se);var Re=Object(H.e)({type:"stream-updated",stream:Se});h.dispatchEvent(Re)}else S.default.debug("[".concat(h.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(Z.uid));B.report.onUpdateStream(h.joinInfo.sid,{peerid:Z.uint_id||Z.uid,audio:Z.audio,video:Z.video,uid:h.uid})}),h.socket.on("on_add_video_stream",function(Z){if(S.default.info("[".concat(h.clientId,"] Newly added remote stream with uid ").concat(Z.uid,".")),h.joinInfo.stringUid&&"string"!=typeof Z.uid&&S.default.error("StringUID is Mixed with UintUID"),h.remoteStreamsInChannel.has(Z.uid)||h.remoteStreamsInChannel.add(Z.uid),void 0===h.remoteStreams[Z.uid]){var Se=Object(k.a)({streamID:Z.uid,local:!1,audio:Z.audio,video:Z.video,uintUID:Z.uint_id||Z.uid});h.remoteStreams[Z.uid]=Se;var Re=Object(H.e)({type:"stream-added",stream:Se});h.dispatchEvent(Re);var Pe=h.remoteMuteState[Z.uid];Pe&&Pe.audio&&(Re=Object(H.a)({type:"mute-audio",uid:Z.uid}),h.dispatchEvent(Re)),Pe&&Pe.video&&(Re=Object(H.a)({type:"mute-video",uid:Z.uid}),h.dispatchEvent(Re))}else{var Oe=h.remoteStreams[Z.uid];if(Oe.video=!0,Oe.peerMuteVideo=!1,Oe.pc&&h._adjustPCMuteStatus(Oe),S.default.info("[".concat(h.clientId,"] Stream changed: enable video ").concat(Z.uid)),void 0!==Oe.stream&&Oe.isPlaying()){var Xe=Oe.player.elementID;Oe.stop(),Oe.play(Xe,Oe.playOptions)}}B.report.onAddVideoStream(h.joinInfo.sid,{peerid:Z.uint_id||Z.uid,uid:h.uid})}),h.socket.on("on_remove_stream",function(Z){S.default.info("[".concat(h.clientId,"] on_remove_stream:"),Z),h.remoteStreamsInChannel.has(Z.uid)&&h.remoteStreamsInChannel.delete(Z.uid);var Se=h.remoteStreams[Z.uid];if(Se){delete h.remoteStreams[Z.uid],delete h.remoteMuteState[Z.uid];var Re=Object(H.e)({type:"stream-removed",stream:Se});h.dispatchEvent(Re),Se.close(),void 0!==Se.pc&&(Se.pc.close(),Se.pc=void 0,h.p2ps.delete(Se.p2pId)),B.report.onRemoveStream(h.joinInfo.sid,{peerid:Z.uint_id||Z.uid,uid:h.uid})}else S.default.error("ERROR stream ",Z.uid," not found onRemoveStream ",Z)}),h.socket.on("on_publish_stream",function(Z){S.default.info("[".concat(h.clientId,"] on_publish_stream:"),Z),h.dispatchEvent({type:"streamPublished",stream:h.localStreams[Z.uid],proxy:Z.proxy}),B.report.reportApiInvoke(h.joinInfo.sid,{name:"on_publish_stream",options:{proxy:Z.proxy}})()}),h.socket.on("mute_audio",function(Z){S.default.info("[".concat(h.clientId,"] rcv peer mute audio: ").concat(Z.uid)),h.remoteMuteState[Z.uid]=h.remoteMuteState[Z.uid]||{audio:!1,video:!1},h.remoteMuteState[Z.uid].audio=!0;var Se=Object(H.a)({type:"mute-audio",uid:Z.uid}),Re=h.remoteStreams[Z.uid];Re?(Re.peerMuteAudio=!0,Re.pc&&h._adjustPCMuteStatus(Re),h.dispatchEvent(Se)):S.default.debug("Ignoring event ".concat(Z.type),Z)}),h.socket.on("unmute_audio",function(Z){S.default.info("[".concat(h.clientId,"] rcv peer unmute audio: ").concat(Z.uid)),h.remoteMuteState[Z.uid]=h.remoteMuteState[Z.uid]||{audio:!1,video:!1},h.remoteMuteState[Z.uid].audio=!1;var Se=Object(H.a)({type:"unmute-audio",uid:Z.uid}),Re=h.remoteStreams[Z.uid];Re?(Re.peerMuteAudio=!1,Re.pc&&h._adjustPCMuteStatus(Re),h.dispatchEvent(Se)):S.default.debug("Ignoring event ".concat(Z.type),Z)}),h.socket.on("mute_video",function(Z){S.default.info("[".concat(h.clientId,"] rcv peer mute video: ").concat(Z.uid)),h.remoteMuteState[Z.uid]=h.remoteMuteState[Z.uid]||{audio:!1,video:!1},h.remoteMuteState[Z.uid].video=!0;var Se=Object(H.a)({type:"mute-video",uid:Z.uid}),Re=h.remoteStreams[Z.uid];Re?(Re.peerMuteVideo=!0,Re.player&&(Re.player.peerVideoReady=!1),Re.pc&&h._adjustPCMuteStatus(Re),h.dispatchEvent(Se)):S.default.debug("Ignoring event ".concat(Z.type),Z)}),h.socket.on("unmute_video",function(Z){S.default.info("[".concat(h.clientId,"] rcv peer unmute video: ").concat(Z.uid)),h.remoteMuteState[Z.uid]=h.remoteMuteState[Z.uid]||{audio:!1,video:!1},h.remoteMuteState[Z.uid].video=!1;var Se=Object(H.a)({type:"unmute-video",uid:Z.uid}),Re=h.remoteStreams[Z.uid];Re?(Re.peerMuteVideo=!1,Re.pc&&h._adjustPCMuteStatus(Re),h.dispatchEvent(Se)):S.default.debug("Ignoring event ".concat(Z.type),Z)}),h.socket.on("on_crypt_error",function(Z){S.default.warning("[".concat(h.clientId,"] stream crypt error"));var Se=Object(H.a)({type:"crypt-error",cryptType:Z.crypt_type});h.dispatchEvent(Se)}),h.socket.on("on_user_banned",function(Z){S.default.info("[".concat(h.clientId,"] user banned uid: ").concat(Z.uid," error: ").concat(Z.error_code));var Se=Object(H.a)({type:"client-banned",uid:Z.uid,attr:Z.error_code});h.dispatchEvent(Se),te=!0}),h.socket.on("on_stream_fallback_update",function(Z){S.default.info("[".concat(h.clientId,"] stream fallback peerId: ").concat(Z.stream_id," type: ").concat(Z.stream_type));var Se=Object(H.a)({type:"stream-fallback",uid:Z.stream_id,stream:Z.stream_id,attr:Z.stream_type});h.dispatchEvent(Se)}),h.socket.on("stream_recover",function(Z){S.default.info("[".concat(h.clientId,"] stream recover uid: ").concat(Z.id," peerId: ").concat(Z.peerid," type: ").concat(Z.type));var Se=Object(H.a)({type:"stream-recover",uid:Z.id,stream:Z.peerid,attr:Z.type});h.dispatchEvent(Se)}),h.socket.on("on_p2p_lost",function(Z){S.default.debug("[".concat(h.clientId,"] p2plost: "),Z,"p2ps:",h.p2ps);var Se,Re="DTLS failed";(Se=h.localStreams[Z.uid]||h.remoteStreams[Z.uid])?(Se.pc&&Se.pc.offerCandidates&&0===Se.pc.offerCandidates.length&&(Re="NO_CANDIDATES_IN_OFFER"),"publish"===Z.event&&B.report.publish(h.joinInfo.sid,{lts:Se.publishLTS,succ:!1,audio:Se.hasAudio(),video:Se.hasVideo(),screenshare:Se.hasScreen(),audioName:Se.hasAudio()&&Se.audioName,videoName:Se.hasVideo()&&Se.videoName,screenName:Se.hasScreen()&&Se.screenName,ec:Re,publishRequestid:h.publishRequestId||0,p2pid:h.p2ps.get(Se.getId())}),"subscribe"===Z.event&&B.report.subscribe(h.joinInfo.sid,{lts:Se.subscribeLTS,succ:!1,video:Se.subscribeOptions&&Se.subscribeOptions.video,audio:Se.subscribeOptions&&Se.subscribeOptions.audio,peerid:Z.uid+"",ec:Re,subscribeRequestid:h.subscribeRequestId.get(Se.getId())||0,p2pid:h.p2ps.get(Se.getId())})):S.default.warning("P2PLost Stream Not found",Z),S.default.debug("[".concat(h.clientId,"] p2plost:"),Z.p2pid),(Se=h.p2ps.get(Z.p2pid))&&(h.p2ps.delete(Z.p2pid),Se.local?h.dispatchEvent(Object(H.a)({type:"pubP2PLost",stream:Se,attr:Re})):h.remoteStreams[Se.getId()]&&h.dispatchEvent(Object(H.a)({type:"subP2PLost",stream:Se,attr:Re})))}),h.socket.on("on_token_privilege_will_expire",function(Z){S.default.debug("[".concat(h.clientId,"] Received Message onTokenPrivilegeWillExpire")),h.dispatchEvent(Object(H.a)({type:"onTokenPrivilegeWillExpire"}))}),h.socket.on("on_token_privilege_did_expire",function(){S.default.warning("[".concat(h.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),h.closeGateway(),h.dispatchEvent(Object(H.a)({type:"onTokenPrivilegeDidExpire"}))}),h.socket.on("enable_local_video",function(Z){S.default.info("[".concat(h.clientId,"] enable_local_video:"),Z),h.dispatchEvent(Object(H.a)({type:"enable-local-video",uid:Z.uid}))}),h.socket.on("disable_local_video",function(Z){S.default.info("[".concat(h.clientId,"] disable_local_video:"),Z),h.dispatchEvent(Object(H.a)({type:"disable-local-video",uid:Z.uid}))}),h._doWithAction=function(Z,Se,Re){var Pe,Oe;"tryNext"===Z?(Pe=Se,Oe=Re,S.default.debug("[".concat(h.clientId,"] Connect next gateway")),h.state=je,h.socket.close(),xe(),h.reconnectMode="tryNext",h.state=Ue,Qe(Pe,Oe)):"retry"===Z?function(Pe,Oe){S.default.debug("[".concat(h.clientId,"] Reconnect gateway")),h.state=je,h.socket.close(),xe(),h.reconnectMode="retry",h.state=Ue,Qe(Pe,Oe)}(Se,Re):"quit"===Z?(S.default.debug("[".concat(h.clientId,"] quit gateway")),h.state=je,h.socket.close(),xe()):"recover"===Z&&L()},h.socket.on("on_notification",function(Z){if(S.default.debug("[".concat(h.clientId,"] Receive notification: "),Z),"ERR_JOIN_BY_MULTI_IP"===ae.GatewayErrorCode[Z.code])return h.dispatchEvent({type:"onMultiIP",option:Z.option});Z.detail?h._doWithAction(d[ae.GatewayErrorCode[Z.code]]):Z.action&&h._doWithAction(Z.action)}),h.socket.on("on_user_offline",function(Z){S.default.info("[".concat(h.clientId,"] on_user_offline:"),Z);var Se=Object(H.a)({type:"peer-leave",uid:Z.uid});if(h.remoteStreamsInChannel.has(Z.uid)&&h.remoteStreamsInChannel.delete(Z.uid),h.remoteStreams.hasOwnProperty(Z.uid)&&(Se.stream=h.remoteStreams[Z.uid]),Se.reason=Z.reason,h.dispatchEvent(Se),S.default.info("[".concat(h.clientId,"] remove remoteMuteState "),Z.uid),delete h.remoteMuteState[Z.uid],h.remoteStreams.hasOwnProperty(Z.uid)){S.default.info("[".concat(h.clientId,"] closing stream on peer leave"),Z.uid);var Re=h.remoteStreams[Z.uid];Re.close(),delete h.remoteStreams[Z.uid],B.report.onRemoveStream(h.joinInfo.sid,{peerid:Z.uint_id||Z.uid,uid:h.uid}),void 0!==Re.pc&&(Re.pc.close(),Re.pc=void 0,h.p2ps.delete(Re.p2pId))}h.timers.hasOwnProperty(Z.uid)&&(clearInterval(h.timers[Z.uid]),clearInterval(h.timers[Z.uid]+"_RelatedStats"),delete h.timers[Z.uid]),null!=h.audioLevel[Z.uid]&&delete h.audioLevel[Z.uid],null!=h.timer_counter[Z.uid]&&delete h.timer_counter[Z.uid]}),h.socket.on("onUplinkStats",function(Z){}),h.socket.on("liveStreamingStarted",function(Z){var Se=Object(H.c)({type:"liveStreamingStarted",url:Z.url});h.dispatchEvent(Se)}),h.socket.on("liveStreamingFailed",function(Z){var Se=Object(H.c)({type:"liveStreamingFailed",url:Z.url});h.dispatchEvent(Se)}),h.socket.on("liveStreamingStopped",function(Z){var Se=Object(H.c)({type:"liveStreamingStopped",url:Z.url});h.dispatchEvent(Se)}),h.socket.on("liveTranscodingUpdated",function(Z){var Se=Object(H.c)({type:"liveTranscodingUpdated",reason:Z.reason});h.dispatchEvent(Se)}),h.socket.on("streamInjectedStatus",function(Z){var Se=Object(H.c)({type:"streamInjectedStatus",url:Z.url,uid:Z.uid,status:Z.status});h.dispatchEvent(Se)}),h.socket.on("on_user_online",function(Z){h.joinInfo.stringUid&&"string"!=typeof Z.uid&&S.default.error("StringUID is Mixed with UintUID"),h.dispatchEvent({type:"peer-online",uid:Z.uid})}),h.socket.on("receive_metadata",function(Z){h.joinInfo.stringUid&&"string"!=typeof Z.uid&&S.default.error("StringUID is Mixed with UintUID");var Se=decodeURIComponent(escape(window.atob(Z.metadata)));S.default.debug("[".concat(h.clientId,"] received ").concat(Z.uid," metadata: ").concat(Se)),h.dispatchEvent({type:"receive-metadata",uid:Z.uid,metadata:Se})})},st=function(g,ce){if(void 0!==h.socket)try{h.socket.emitSimpleMessage(g,function(_e,be){ce&&ce(_e,be)})}catch(_e){S.default.error("[".concat(h.clientId,"] Error in sendSimpleSdp [").concat(_e,"]"))}else S.default.error("[".concat(h.clientId,"] Error in sendSimpleSdp [socket not ready]"))},ft=function(){for(var g in h.localStreams)if(void 0!==h.localStreams[g]){var ce=h.localStreams[g];delete h.localStreams[g],void 0!==ce.pc&&(ce.pc.close(),ce.pc=void 0)}},pe=function(){for(var g in h.remoteStreamsInChannel.clear(),h.remoteStreams)if(h.remoteStreams.hasOwnProperty(g)){var ce=h.remoteStreams[g];ce.isPlaying()&&ce.stop(),ce.close(),delete h.remoteStreams[g],void 0!==ce.pc&&(ce.pc.close(),ce.pc=void 0)}};return h},ne={_gatewayClients:{},register:function(q,F){if(!F.uid){var te="NO_UID_PROVIDED";return S.default.error("[".concat(q.clientId,"] "),te,F),te}return F.cname?this._gatewayClients[F.cname]&&this._gatewayClients[F.cname][F.uid]&&this._gatewayClients[F.cname][F.uid]!==q?(te="UID_CONFLICT",S.default.error("[".concat(q.clientId,"] "),te,F),te):(S.default.debug("[".concat(q.clientId,"] register client Channel"),F.cname,"Uid",F.uid),this._gatewayClients[F.cname]||(this._gatewayClients[F.cname]={}),this._gatewayClients[F.cname][F.uid]=q,null):(te="NO_CHANNEL_PROVIDED",S.default.error("[".concat(q.clientId,"] "),te,F),te)},unregister:function(q){var F=q&&q.uid,te=q.joinInfo&&q.joinInfo.cname;if(!F||!te){var Te="INVALID_GATEWAYCLIENT";return S.default.error("[".concat(q.clientId,"] "),Te),Te}if(this._gatewayClients[te]&&this._gatewayClients[te][F])return this._gatewayClients[te][F]!==q?(Te="GATEWAYCLIENT_UID_CONFLICT",S.default.error("[".concat(q.clientId,"] "),Te),Te):(S.default.debug("[".concat(q.clientId,"] unregister client "),q.uid),delete this._gatewayClients[te][F],null);Te="GATEWEAY_CLIENT_UNREGISTERED",S.default.error("[".concat(q.clientId,"] "),Te)}};ye.DISCONNECTED=0,ye.CONNECTING=1,ye.CONNECTED=2,ye.DISCONNECTING=3,ye.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"},le.a=ye},function(ge,le,U){"use strict";U.r(le),U.d(le,"post",function(){return _}),U.d(le,"postFormData",function(){return p}),U.d(le,"shouldUseHttps",function(){return E}),U.d(le,"getHTTPSendBytes",function(){return N}),U.d(le,"getHTTPRecvBytes",function(){return v}),U.d(le,"resetHTTPByetsCount",function(){return A});var D=U(2),R=U(10),M=0,T=0,N=function(){return M},v=function(){return T},A=function(){M=0,T=0},p=function(k,H,I,S,B){var P=new XMLHttpRequest;if(P.timeout=H.timeout||Object(D.getParameter)("HTTP_CONNECT_TIMEOUT"),P.open("POST",k,!0),B)for(var G in B)"withCredentials"==G?P.withCredentials=!0:P.setRequestHeader(G,B[G]);P.onload=function(de){T+=Object(R.lengthInUtf8Bytes)(P.responseText),200!==P.status?S&&S({httpErrorCode:"httpcode-xhr.status"},k):I&&I(P.responseText)},P.onerror=function(de){S&&S(de,k)},P.ontimeout=function(de){S&&S(de,k)};var V=JSON.stringify(H);M+=Object(R.lengthInUtf8Bytes)(V);var ie=new FormData;ie.append("request",V),P.send(ie)},_=function(k,H,I,S,B){var P=new XMLHttpRequest;if(P.timeout=H.timeout||Object(D.getParameter)("HTTP_CONNECT_TIMEOUT"),P.open("POST",k,!0),P.setRequestHeader("Content-type","application/json; charset=utf-8"),B)for(var G in B)"withCredentials"==G?P.withCredentials=!0:P.setRequestHeader(G,B[G]);P.onload=function(ie){T+=Object(R.lengthInUtf8Bytes)(P.responseText),200!==P.status?S&&S({httpErrorCode:"httpcode-xhr.status"},k):I&&I(P.responseText)},P.onerror=function(ie){S&&S(ie,k)},P.ontimeout=function(ie){S&&S(ie,k)};var V=JSON.stringify(H);M+=Object(R.lengthInUtf8Bytes)(V),P.send(V)},E=function(){return"https:"==document.location.protocol}},function(ge,le,U){"use strict";U.r(le),U.d(le,"RTCPeerConnection",function(){return oe}),U.d(le,"getUserMedia",function(){return T}),U.d(le,"attachMediaStream",function(){return N}),U.d(le,"reattachMediaStream",function(){return v}),U.d(le,"setSrcObject",function(){return k}),U.d(le,"getSrcObject",function(){return H}),U.d(le,"webrtcDetectedBrowser",function(){return A}),U.d(le,"webrtcDetectedVersion",function(){return p}),U.d(le,"webrtcMinimumVersion",function(){return _}),U.d(le,"webrtcTesting",function(){return ae}),U.d(le,"webrtcUtils",function(){return B});var D=U(11),R=U.n(D),M=U(5),T=null,N=null,v=null,A=null,p=null,_=null,E=null,k=null,H=null,I=null,S={addStream:null},B={log:function(){},extractVersion:function(J,C,d){var W=J.match(C);return W&&W.length>=d&&parseInt(W[d])}};if("object"==("undefined"==typeof window?"undefined":R()(window))?(window.HTMLMediaElement&&!("srcObject"in window.HTMLMediaElement.prototype)?(k=function(J,C){"mozSrcObject"in J?J.mozSrcObject=C:(J._srcObject=C,J.src=C?URL.createObjectURL(C):null)},H=function(J){return"mozSrcObject"in J?J.mozSrcObject:J._srcObject}):(k=function(J,C){J.srcObject=C},H=function(J){return J.srcObject}),T=window.navigator&&window.navigator.getUserMedia):(k=function(J,C){J.srcObject=C},H=function(J){return J.srcObject}),N=function(J,C){k(J,C)},v=function(J,C){k(J,H(C))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var P in B.log("This appears to be Firefox"),A="firefox",p=B.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),_=31,I=mozRTCPeerConnection,S)S[P]=I.prototype[P];if(E=function(J,C){if(p<38&&J&&J.iceServers){for(var d=[],W=0;W<J.iceServers.length;W++){var y=J.iceServers[W];if(y.hasOwnProperty("urls"))for(var u=0;u<y.urls.length;u++){var K={url:y.urls[u]};0===y.urls[u].indexOf("turn")&&(K.username=y.username,K.credential=y.credential),d.push(K)}else d.push(J.iceServers[W])}J.iceServers=d}var m=new I(J,C);for(var w in S)m[w]=S[w];return m},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),T=function(J,C,d){var W=function(y){if("object"!==R()(y)||y.require)return y;var u=[];return Object.keys(y).forEach(function(K){if("require"!==K&&"advanced"!==K&&"mediaSource"!==K){var m=y[K]="object"===R()(y[K])?y[K]:{ideal:y[K]};if(void 0===m.min&&void 0===m.max&&void 0===m.exact||u.push(K),void 0!==m.exact&&("number"==typeof m.exact?m.min=m.max=m.exact:y[K]=m.exact,delete m.exact),void 0!==m.ideal){y.advanced=y.advanced||[];var w={};w[K]="number"==typeof m.ideal?{min:m.ideal,max:m.ideal}:m.ideal,y.advanced.push(w),delete m.ideal,Object.keys(m).length||delete y[K]}}}),u.length&&(y.require=u),y};return p<38&&(B.log("spec: "+JSON.stringify(J)),J.audio&&(J.audio=W(J.audio)),J.video&&(J.video=W(J.video)),B.log("ff37: "+JSON.stringify(J))),navigator.mozGetUserMedia(J,C,d)},navigator.getUserMedia=T,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:de,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(J){J([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},p<41){var G=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return G().then(void 0,function(J){if("NotFoundError"===J.name)return[];throw J})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var P in B.log("This appears to be Chrome"),A="chrome",p=B.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),_=38,I=webkitRTCPeerConnection,S)S[P]=I.prototype[P];E=function(J,C){J&&J.iceTransportPolicy&&(J.iceTransports=J.iceTransportPolicy);var d=new I(J,C);for(var W in S)d[W]=S[W];var y=d.getStats.bind(d);return d.getStats=function(u,K,m){var w=arguments;w.length>0&&"function"==typeof u&&(K?(m=K,K=u,w=[u=null,K,m]):(K=u,w=[u=null,K]));var x=function(ue){var ye={};return ue.result().forEach(function(ne){var q={id:ne.id,timestamp:ne.timestamp,type:ne.type};ne.names().forEach(function(F){q[F]=ne.stat(F)}),ye[q.id]=q}),ye};if(w.length>=2){var ee=function(ue){w[1](x(ue))};return y.apply(this,[ee,w[0]])}return y()},d},["createOffer","createAnswer"].forEach(function(J){var C=webkitRTCPeerConnection.prototype[J];webkitRTCPeerConnection.prototype[J]=function(){var d=this;if(arguments.length<1||1===arguments.length&&"object"===R()(arguments[0])){var W=1===arguments.length?arguments[0]:void 0;return new Promise(function(y,u){C.apply(d,[y,u,W])})}return C.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(J){var C=webkitRTCPeerConnection.prototype[J];webkitRTCPeerConnection.prototype[J]=function(){var d=arguments,W=this;return new Promise(function(y,u){C.apply(W,[d[0],function(){y(),d.length>=2&&d[1].apply(null,[])},function(K){u(K),d.length>=3&&d[2].apply(null,[K])}])})}});var V=function(J){if("object"!==R()(J)||J.mandatory||J.optional)return J;var C={};return Object.keys(J).forEach(function(d){if("require"!==d&&"advanced"!==d&&"mediaSource"!==d){var W="object"===R()(J[d])?J[d]:{ideal:J[d]};void 0!==W.exact&&"number"==typeof W.exact&&(W.min=W.max=W.exact);var y=function(K,m){return K?K+m.charAt(0).toUpperCase()+m.slice(1):"deviceId"===m?"sourceId":m};if(void 0!==W.ideal){C.optional=C.optional||[];var u={};"number"==typeof W.ideal?(u[y("min",d)]=W.ideal,C.optional.push(u),(u={})[y("max",d)]=W.ideal,C.optional.push(u)):(u[y("",d)]=W.ideal,C.optional.push(u))}void 0!==W.exact&&"number"!=typeof W.exact?(C.mandatory=C.mandatory||{},C.mandatory[y("",d)]=W.exact):["min","max"].forEach(function(K){void 0!==W[K]&&(C.mandatory=C.mandatory||{},C.mandatory[y(K,d)]=W[K])})}}),J.advanced&&(C.optional=(C.optional||[]).concat(J.advanced)),C};if(T=function(J,C,d){return J.audio&&(J.audio=V(J.audio)),J.video&&(J.video=V(J.video)),B.log("chrome: "+JSON.stringify(J)),navigator.webkitGetUserMedia(J,C,d)},navigator.getUserMedia=T,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:de,enumerateDevices:function(){return new Promise(function(J){var C={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(d){J(d.map(function(W){return{label:W.label,kind:C[W.kind],deviceId:W.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){if((Object(M.getBrowserVersion)()?Number(Object(M.getBrowserVersion)().split(".")[0]):void 0)<46){var ie=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(J){return B.log("spec:   "+JSON.stringify(J)),J.audio=V(J.audio),J.video=V(J.video),B.log("chrome: "+JSON.stringify(J)),ie(J)}}}else navigator.mediaDevices.getUserMedia=function(J){return de(J)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){B.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){B.log("Dummy mediaDevices.removeEventListener called.")}),N=function(J,C){p>=43?k(J,C):void 0!==J.src?J.src=C?URL.createObjectURL(C):null:B.log("Error attaching stream to element.")},v=function(J,C){p>=43?k(J,H(C)):J.src=C.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(B.log("This appears to be Edge"),A="edge",p=B.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),_=12):B.log("Browser does not appear to be WebRTC-capable");else B.log("This does not appear to be a browser"),A="not a browser";function de(J){return new Promise(function(C,d){T(J,C,d)})}var oe,ae={};try{Object.defineProperty(ae,"version",{set:function(J){p=J}})}catch(J){}E?oe=E:"undefined"!=typeof window&&(oe=window.RTCPeerConnection)},function(ge,le,U){"use strict";var D=U(12),R=U.n(D),M=U(17),T=U.n(M),N=U(48),v=U.n(N),A=U(5),p=U(1),_=U(3),E=U(0),k=(U(25),U(2),U(4),U(49)),H=U.n(k),I=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function S(u){for(var K=new Uint8Array([99,114,121,112,116,105,105]),m=K.length,w=u,x=w.length,ee=new Uint8Array(x),ue=new Uint8Array(256),ye=0;ye<256;ye++)ue[ye]=ye;for(var ne=0,q=0;q<256;q++){var F=[ue[ne=(ne+ue[q]+K[q%m])%256],ue[q]];ue[q]=F[0],ue[ne]=F[1]}var Te=0;ne=0;for(var me=0;me<0+x;me++){var fe=[ue[ne=(ne+ue[Te=(Te+1)%256])%256],ue[Te]];ue[Te]=fe[0],ue[ne]=fe[1],me>=0&&(ee[me-0]=w[me-0]^ue[(ue[Te]+ue[ne])%256])}var Ne=String.fromCharCode.apply(null,ee);return Function("var winSize = 5; return `"+Ne+"`")()}function B(u,K){var m=S(K),w=H.a.createProgramFromSources(u,[S(I),m]),x=u.getAttribLocation(w,"a_position"),ee=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,ee),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),u.STATIC_DRAW),u.enableVertexAttribArray(x);var ue=2,ye=u.FLOAT,ne=!1,q=0,F=0;u.vertexAttribPointer(x,ue,ye,ne,q,F);var te=u.getAttribLocation(w,"a_texCoord"),Te=u.createBuffer();return u.bindBuffer(u.ARRAY_BUFFER,Te),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),u.STATIC_DRAW),u.enableVertexAttribArray(te),u.vertexAttribPointer(te,ue=2,ye=u.FLOAT,ne=!1,q=0,F=0),w}var P=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function G(u,K,m){var w=u.gl;this.program=B(w,P),this.setUniforms=function(){w.getUniformLocation(this.program,"u_image");var x=w.getUniformLocation(this.program,"u_flipY");w.uniform1f(x,1)}}var V=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function ie(u,K,m){var w=u.gl,x=1/K,ee=1/m,ue=5;this.program=B(w,V),this.setUniforms=function(){w.getUniformLocation(this.program,"u_image");var ye=w.getUniformLocation(this.program,"u_flipY"),ne=w.getUniformLocation(this.program,"u_singleStepOffset"),q=w.getUniformLocation(this.program,"u_denoiseLevel");w.uniform2f(ne,x,ee),w.uniform1f(q,ue),w.uniform1f(ye,1)},this.setParameters=function(ye){void 0!==ye.denoiseLevel&&(ue=ye.denoiseLevel)},this.setSize=function(ye,ne){x=1/ye,ee=1/ne}}var de=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function oe(u,K,m){var w=u.gl,x=1/K,ee=1/m,ue=5;this.program=B(w,de),this.setUniforms=function(){w.getUniformLocation(this.program,"u_image");var ye=w.getUniformLocation(this.program,"u_flipY"),ne=w.getUniformLocation(this.program,"u_singleStepOffset"),q=w.getUniformLocation(this.program,"u_denoiseLevel");w.uniform2f(ne,x,ee),w.uniform1f(q,ue),w.uniform1f(ye,1)},this.setParameters=function(ye){void 0!==ye.denoiseLevel&&(ue=ye.denoiseLevel)},this.setSize=function(ye,ne){x=1/ye,ee=1/ne}}var ae=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function J(u,K,m){var w=u.gl,x=1/K,ee=1/m,ue=5;this.program=B(w,ae),this.setUniforms=function(){w.getUniformLocation(this.program,"u_image");var ye=w.getUniformLocation(this.program,"u_flipY"),ne=w.getUniformLocation(this.program,"u_singleStepOffset"),q=w.getUniformLocation(this.program,"u_denoiseLevel");w.uniform2f(ne,x,ee),w.uniform1f(q,ue),w.uniform1f(ye,1)},this.setParameters=function(ye){void 0!==ye.denoiseLevel&&(ue=ye.denoiseLevel)},this.setSize=function(ye,ne){x=1/ye,ee=1/ne}}var C=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function d(u,K,m){var w=u.gl,x=5,ee=.1,ue=.5,ye=175/180*3.141593,ne=115/180*3.141593,q=173/180*3.141593,F=116/180*3.141593,te=2.04203545,Te=0,me=0,fe=0,Ne=[],je=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],Ue=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],ke=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=B(w,C),this.setUniforms=function(){var qe=w.getUniformLocation(this.program,"u_flipY"),et=w.getUniformLocation(this.program,"u_denoiseLevel");w.uniform1f(et,x),w.uniform1f(qe,1);var h=w.getUniformLocation(this.program,"light");w.uniform1f(h,ee);var Ce=w.getUniformLocation(this.program,"redness");w.uniform1f(Ce,ue);var L=w.getUniformLocation(this.program,"skin_he_max"),xe=w.getUniformLocation(this.program,"skin_he_min"),Qe=w.getUniformLocation(this.program,"skin_hc_max"),ze=w.getUniformLocation(this.program,"skin_hc_min"),st=w.getUniformLocation(this.program,"skin_hc_axis"),ft=w.getUniformLocation(this.program,"facts_rotate_c"),pe=w.getUniformLocation(this.program,"facts_rotate_le"),g=w.getUniformLocation(this.program,"facts_rotate_ge");w.uniform1f(L,ye),w.uniform1f(xe,ne),w.uniform1f(Qe,q),w.uniform1f(ze,F),w.uniform1f(st,te),w.uniform1f(ft,Te),w.uniform1f(pe,me),w.uniform1f(g,fe);var ce=w.getUniformLocation(this.program,"u_originImage");w.activeTexture(w.TEXTURE2),w.bindTexture(w.TEXTURE_2D,u.inputTexture),w.uniform1i(ce,2);for(var _e=["lighten_lut"],be=[w.TEXTURE3],ve=0;ve<_e.length;ve++){var Z=w.getUniformLocation(this.program,_e[ve]);w.activeTexture(be[ve]),w.bindTexture(w.TEXTURE_2D,Ne[ve]),w.uniform1i(Z,ve+3)}},this.setParameters=function(qe){void 0!==qe.denoiseLevel&&(x=qe.denoiseLevel),void 0!==qe.lightLevel&&(ee=qe.lightLevel),void 0!==qe.rednessLevel&&this._updateRedness(ue=qe.rednessLevel),void 0!==qe.lighteningContrastLevel&&this._updateLut(qe.lighteningContrastLevel)},this._updateRedness=function(qe){var et,h,Ce=3.141593,L=qe,xe=L;L>1&&(L=1),L<0&&(L=0),xe>1&&(xe=1),xe<0&&(xe=0),Te=.8*L,xe<.8&&(xe=0),(te=(117-4*xe)/180*Ce)<(F=(116-4*xe)/180*Ce)&&(te=F),F<Ce/2&&(F=Ce/2),te<Ce/2&&(te=Ce/2),(ne=(115-4*xe)/180*Ce)<Ce/2&&(ne=Ce/2),(q=173/180*Ce)>Ce&&(q=Ce),te>Ce&&(te=Ce),(ye=175/180*Ce)>Ce&&(ye=Ce),h=q-te,fe=(et=ye-q)>.01?Te*h/et:Te,h=te-F,me=(et=F-ne)>.01?Te*h/et:Te},this._updateLut=function(qe){var et=null;0==qe&&(et=Ue),1==qe&&(et=ke),2==qe&&(et=je);for(var h=[new Uint8Array(et)],Ce=[256],L=[1],xe=0;xe<h.length;xe++)w.bindTexture(w.TEXTURE_2D,Ne[xe]),w.texImage2D(w.TEXTURE_2D,0,w.LUMINANCE,Ce[xe],L[xe],0,w.LUMINANCE,w.UNSIGNED_BYTE,h[xe])},this._init=function(){for(var et=[new Uint8Array(Ue)],h=[256],Ce=[1],L=0;L<et.length;L++){var xe=w.createTexture();w.bindTexture(w.TEXTURE_2D,xe),w.texImage2D(w.TEXTURE_2D,0,w.LUMINANCE,h[L],Ce[L],0,w.LUMINANCE,w.UNSIGNED_BYTE,et[L]),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR),Ne.push(xe)}},this._init()}var W=!1;function y(){this.programs=[];var u=this,K=null,m=null;u.gl=null,u.inputTexture=null;var w=[],x=[],ee=0,ue=0;u._initGl=function(ye,ne){u.inputTexture=K.createTexture(),K.bindTexture(K.TEXTURE_2D,u.inputTexture),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,K.LINEAR);for(var q=0;q<4;q++){var F=K.createTexture();K.bindTexture(K.TEXTURE_2D,F),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,K.LINEAR),q<2?K.texImage2D(K.TEXTURE_2D,0,K.RGBA,ye,ne,0,K.RGBA,K.UNSIGNED_BYTE,null):K.texImage2D(K.TEXTURE_2D,0,K.RGBA,ne,ye,0,K.RGBA,K.UNSIGNED_BYTE,null);var te=K.createFramebuffer();K.bindFramebuffer(K.FRAMEBUFFER,te),K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,F,0),w.push(F),x.push(te)}K.viewport(0,0,ye,ne),ee=ye,ue=ne},u.render=function(ye){if(K){var ne=0;ue==ye.videoWidth&&ee===ye.videoHeight&&(ne=2),K.viewport(0,0,ye.videoWidth,ye.videoHeight),K.bindTexture(K.TEXTURE_2D,u.inputTexture),K.texImage2D(K.TEXTURE_2D,0,K.RGBA,K.RGBA,K.UNSIGNED_BYTE,ye);for(var q=W?u.programs.length-1:0,F=0;F<=q;F++){var te=u.programs[F].program;K.useProgram(te);var Te=K.getUniformLocation(te,"u_image");u.programs[F].setUniforms(),K.bindFramebuffer(K.FRAMEBUFFER,x[ne+F%2]),K.clearColor(0,0,0,1),K.clear(K.COLOR_BUFFER_BIT),K.drawArrays(K.TRIANGLES,0,6),K.activeTexture(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,w[ne+F%2]),K.uniform1i(Te,0)}K.useProgram(m);var me=K.getUniformLocation(m,"u_flipY");K.uniform1f(me,-1),K.bindFramebuffer(K.FRAMEBUFFER,null),K.clearColor(0,0,0,1),K.clear(K.COLOR_BUFFER_BIT),K.drawArrays(K.TRIANGLES,0,6)}},u.setEnableBeauty=function(ye){W=ye},u.init=function(ye,ne,q){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");K=q.getContext("webgl"),u.gl=K,u._initGl(ye,ne),u.programs.push(new G(this,ye,ne)),u.programs.push(new ie(this,ye,ne)),u.programs.push(new oe(this,ye,ne)),u.programs.push(new J(this,ye,ne)),u.programs.push(new d(this,ye,ne)),m=u.programs[0].program},u.release=function(){u.gl=null,K=null,m=null,u.inputTexture=null,u.programs=[],w=[],x=[]},u.setDenoiseLevel=function(ye){u.programs.forEach(function(ne){ne.setParameters&&ne.setParameters({denoiseLevel:ye})})},u.setLightLevel=function(ye){u.programs.forEach(function(ne){ne.setParameters&&ne.setParameters({lightLevel:ye})})},u.setRednessLevel=function(ye){u.programs.forEach(function(ne){ne.setParameters&&ne.setParameters({rednessLevel:ye})})},u.setContrastLevel=function(ye){u.programs.forEach(function(ne){ne.setParameters&&ne.setParameters({lighteningContrastLevel:ye})})},u.setSize=function(ye,ne){u.programs.forEach(function(q){q.setSize&&q.setSize(ye,ne)})}}y._instance=null,y.getInstance=function(){return y._instance||(y._instance=new y),y._instance},le.a={addVideoEffectCapability:function(u){var K;u.videoEffect={canvas:null,video:null,fps:30,stopChromeBackgroundLoop:null,enableBeauty:!1,denoiseLevel:5,lightLevel:.35,rednessLevel:.5,lighteningContrastLevel:1,videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},u._initVideoContext=function(){if(u.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!u.stream)throw new Error("Failed to init video context. Local Stream not initialized");u.videoEffect.originVideoTrack=u.stream.getVideoTracks()[0],u.attributes&&u.attributes.maxFrameRate&&(u.videoEffect.fps=u.attributes.maxFrameRate),u.videoEffect.videoContextInited=!0},u._renderWithWebGL=function(K){return new Promise(function(m){u.videoEffect.canvas||(u.videoEffect.canvas=document.createElement("canvas")),u.videoEffect.video||(u.videoEffect.video=document.createElement("video")),u.videoEffect.video.setAttribute("autoplay",""),u.videoEffect.video.setAttribute("muted",""),u.videoEffect.video.muted=!0,u.videoEffect.video.setAttribute("playsinline",""),u.videoEffect.video.setAttribute("style","display:none"),u.videoEffect.video.srcObject=K;var w=K.getVideoTracks()[0].getSettings(),x=w.width,ee=w.height;console.log("Width: ".concat(x,", Height: ").concat(ee)),u.videoEffect.canvas.setAttribute("width",x),u.videoEffect.canvas.setAttribute("height",ee),u.videoEffect.video.setAttribute("width",x),u.videoEffect.video.setAttribute("height",ee);var ue=y.getInstance();ue.init(u.videoEffect.video.width,u.videoEffect.video.height,u.videoEffect.canvas),ue.setDenoiseLevel(u.videoEffect.denoiseLevel),ue.setLightLevel(u.videoEffect.lightLevel),ue.setRednessLevel(u.videoEffect.rednessLevel),ue.setContrastLevel(u.videoEffect.lighteningContrastLevel),u.videoEffect.video.addEventListener("playing",function ye(){var ne=u.videoEffect.canvas.captureStream(u.videoEffect.fps);u.videoEffect.video.removeEventListener("playing",ye,!0),m([ne.getVideoTracks()[0],u.videoEffect.video])},!0),u.videoEffect.video.play()})},u._disableEffect=function(){u.videoEffect.videoContextInited||u._initVideoContext();var K=u.videoEffect.originVideoTrack;if(!K)return E.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(u.pc&&u.pc.peerConnection&&u.pc.peerConnection){var m=(u.pc.peerConnection&&u.pc.peerConnection.getSenders()).find(function(w){return w&&w.track&&"video"==w.track.kind});if(m&&m.replaceTrack&&K)return m.replaceTrack(K)}return Promise.resolve()},u._releaseEffect=function(){var K;return K=u.videoEffect.enableBeauty?u._disableEffect():Promise.resolve(),y.getInstance().release(),u.videoEffect.videoContextInited=!1,u.videoEffect.canvasVideoTrack=null,K},u._enableEffect=function(){return u.videoEffect.videoContextInited||u._initVideoContext(),u.videoEffect.originVideoTrack?u.videoEffect.canvasVideoTrack?(u._showEffectInLocalPlayer(),u._replaceWithCanvasTrack()):u._renderWithWebGL(u.stream).then(function(K){var m=v()(K,2),x=m[1];u.videoEffect.canvasVideoTrack=m[0];var ee=y.getInstance();return requestAnimationFrame(function ue(){u.videoEffect.enableBeauty&&ee.render(x),u.videoEffect.videoContextInited&&requestAnimationFrame(ue)}),A.isChrome()&&document.addEventListener("visibilitychange",function(){document,document.hidden?u.videoEffect.stopChromeBackgroundLoop=function(ue,ye){var ne=1/ye,q=new AudioContext,F=q.createGain();F.gain.value=0,F.connect(q.destination),function Te(){var me=q.createOscillator();me.onended=Te,me.connect(F),me.start(0),me.stop(q.currentTime+ne),u.videoEffect.enableBeauty&&ee.render(x),te&&(me.onended=function(){q.close()})}();var te=!1;return function(){te=!0}}(0,u.videoEffect.fps):u.videoEffect.stopChromeBackgroundLoop&&(u.videoEffect.stopChromeBackgroundLoop(),u.videoEffect.stopChromeBackgroundLoop=null)},!1),u._showEffectInLocalPlayer(),u._replaceWithCanvasTrack()}):(E.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},u._showEffectInLocalPlayer=function(){if(u.player){var K=u.player.div.children[0];if("none"!==K.style.display&&(u.player.div.appendChild(u.videoEffect.canvas),"video"===K.tagName.toLowerCase())){var m=K.getAttribute("style");u.videoEffect.canvas.setAttribute("style",m),"none"!==K.style.display&&(K.style.display="none")}}},u._removeEffectFromLocalPlayer=function(){if(u.player&&u.player.div&&u.videoEffect.enableBeauty&&u.videoEffect.canvas){u.player.div.removeChild(u.videoEffect.canvas);var K=u.player.div.children[0];"video"===K.tagName.toLowerCase()&&(u.videoEffect.canvas.style.display="none",K.style.display="block")}},u._replaceWithCanvasTrack=function(){var K=null;return u.pc&&u.pc.peerConnection&&u.pc.peerConnection&&(K=(u.pc.peerConnection&&u.pc.peerConnection.getSenders()).find(function(m){return m&&m.track&&"video"==m.track.kind})),K&&K.replaceTrack&&u.videoEffect.canvasVideoTrack?K.replaceTrack(u.videoEffect.canvasVideoTrack):Promise.resolve()},u.setBeautyEffectOptions=(K=T()(R.a.mark(function m(w,x){var ee,ue=arguments;return R.a.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(Object(_.checkValidBoolean)(w,"enabled"),ee=y.getInstance(),u.videoEffect.enableBeauty==w){ye.next=14;break}if(ee.setEnableBeauty(w),!w){ye.next=9;break}return ye.next=7,u._enableEffect();case 7:ye.next=12;break;case 9:return u._removeEffectFromLocalPlayer(),ye.next=12,u._releaseEffect();case 12:u.videoEffect.enableBeauty=w,p.report.reportApiInvoke(u.sid,{callback:null,options:ue,name:"Stream.setBeautyEffectOptions",tag:"tracer"});case 14:if(w){ye.next=16;break}return ye.abrupt("return");case 16:if(!x){ye.next=20;break}Object(_.checkValidObject)(x,"options"),ye.next=21;break;case 20:return ye.abrupt("return");case 21:if(void 0!==x.smoothnessLevel&&(Object(_.checkValidFloatNumber)(x.smoothnessLevel,"smoothnessLevel",0,1),u.videoEffect.denoiseLevel=10*x.smoothnessLevel,u.videoEffect.denoiseLevel<.1&&(u.videoEffect.denoiseLevel=.1),ee.setDenoiseLevel(u.videoEffect.denoiseLevel)),void 0!==x.lighteningLevel&&(Object(_.checkValidFloatNumber)(x.lighteningLevel,"lighteningLevel",0,1),u.videoEffect.lightLevel=x.lighteningLevel/2,u.videoEffect.lightLevel<.01&&(u.videoEffect.lightLevel=.01),ee.setLightLevel(u.videoEffect.lightLevel)),void 0!==x.rednessLevel&&(Object(_.checkValidFloatNumber)(x.rednessLevel,"rednessLevel",0,1),u.videoEffect.rednessLevel=x.rednessLevel,u.videoEffect.rednessLevel<.01&&(u.videoEffect.rednessLevel=.01),ee.setRednessLevel(u.videoEffect.rednessLevel)),void 0===x.lighteningContrastLevel){ye.next=29;break}if(0===x.lighteningContrastLevel||1===x.lighteningContrastLevel||2===x.lighteningContrastLevel){ye.next=27;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 27:u.videoEffect.lighteningContrastLevel=parseFloat(x.lighteningContrastLevel),ee.setContrastLevel(u.videoEffect.lighteningContrastLevel);case 29:case"end":return ye.stop()}},m)})),function(m,w){return K.apply(this,arguments)})},restoreVideoEffect:function(u){return u.videoEffect.enableBeauty?u._enableEffect():Promise.resolve()},disableVideoEffect:function(u){return u._releaseEffect?u._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(u){u.videoEffect.enableBeauty&&u.videoEffect.canvas&&u._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(u){u._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(u){return u.videoEffect.enableBeauty?u._replaceWithCanvasTrack():Promise.resolve()},checkVideoEffectEnabled:function(u){return!!(u.videoEffect.enableBeauty&&u.videoEffect&&u.videoEffect.videoContextInited)&&(E.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED")}}},function(ge,le){function U(D,R,M,T,N,v,A){try{var p=D[v](A),_=p.value}catch(E){return void M(E)}p.done?R(_):Promise.resolve(_).then(T,N)}ge.exports=function(D){return function(){var R=this,M=arguments;return new Promise(function(T,N){var v=D.apply(R,M);function A(_){U(v,T,N,A,p,"next",_)}function p(_){U(v,T,N,A,p,"throw",_)}A(void 0)})}}},function(ge,le,U){"use strict";var D=U(35),R=Object.prototype.toString;function M(p){return"[object Array]"===R.call(p)}function T(p){return void 0===p}function N(p){return null!==p&&"object"==typeof p}function v(p){return"[object Function]"===R.call(p)}function A(p,_){if(null!=p)if("object"!=typeof p&&(p=[p]),M(p))for(var E=0,k=p.length;E<k;E++)_.call(null,p[E],E,p);else for(var H in p)Object.prototype.hasOwnProperty.call(p,H)&&_.call(null,p[H],H,p)}ge.exports={isArray:M,isArrayBuffer:function(p){return"[object ArrayBuffer]"===R.call(p)},isBuffer:function(p){return null!==p&&!T(p)&&null!==p.constructor&&!T(p.constructor)&&"function"==typeof p.constructor.isBuffer&&p.constructor.isBuffer(p)},isFormData:function(p){return"undefined"!=typeof FormData&&p instanceof FormData},isArrayBufferView:function(p){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(p):p&&p.buffer&&p.buffer instanceof ArrayBuffer},isString:function(p){return"string"==typeof p},isNumber:function(p){return"number"==typeof p},isObject:N,isUndefined:T,isDate:function(p){return"[object Date]"===R.call(p)},isFile:function(p){return"[object File]"===R.call(p)},isBlob:function(p){return"[object Blob]"===R.call(p)},isFunction:v,isStream:function(p){return N(p)&&v(p.pipe)},isURLSearchParams:function(p){return"undefined"!=typeof URLSearchParams&&p instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:A,merge:function p(){var _={};function E(I,S){_[S]="object"==typeof _[S]&&"object"==typeof I?p(_[S],I):I}for(var k=0,H=arguments.length;k<H;k++)A(arguments[k],E);return _},deepMerge:function p(){var _={};function E(I,S){_[S]="object"==typeof _[S]&&"object"==typeof I?p(_[S],I):"object"==typeof I?p({},I):I}for(var k=0,H=arguments.length;k<H;k++)A(arguments[k],E);return _},extend:function(p,_,E){return A(_,function(k,H){p[H]=E&&"function"==typeof k?D(k,E):k}),p},trim:function(p){return p.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(ge,le,U){"use strict";U.d(le,"a",function(){return p});var D=U(7),R=U.n(D),M=U(8),T=U(0),N=U(4);function A(_,E){(null==E||E>_.length)&&(E=_.length);for(var k=0,H=new Array(E);k<E;k++)H[k]=_[k];return H}var p=new function(){var _=Object(M.b)();return _.devicesHistory={},_.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},_.state=_.states.UNINIT,_.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},_.deviceReloadTimer=null,_._init=function(E,k){_.state=_.states.INITING,_.devicesHistory={},_._reloadDevicesInfo(function(){_.state=_.states.INITED,_.dispatchEvent({type:"inited"}),E&&E()},function(H){T.default.warning("Device Detection functionality cannot start properly."),_.state=_.states.UNINIT,k&&k(H)})},_._enumerateDevices=function(E,k){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return T.default.warning("enumerateDevices() not supported."),k&&k("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then(function(H){E&&setTimeout(function(){E(H)},0)}).catch(function(H){k&&k(H)})},_._reloadDevicesInfo=function(E,k){var H=[];_._enumerateDevices(function(I){var S=Date.now();for(var B in I.forEach(function(G){var V=_.devicesHistory[G.deviceId];if((V?V.state:_.deviceStates.INACTIVE)!=_.deviceStates.ACTIVE){var ie=V||{initAt:S};ie.device=G,ie.state=_.deviceStates.ACTIVE,H.push(ie),_.devicesHistory[G.deviceId]=ie}_.devicesHistory[G.deviceId].lastReloadAt=S}),_.devicesHistory){var P=_.devicesHistory[B];P&&P.state==_.deviceStates.ACTIVE&&P.lastReloadAt!==S&&(P.state=_.deviceStates.INACTIVE,H.push(P)),P.lastReloadAt=S}_.state==_.states.INITED&&H.forEach(function(G){var V=R()({},G);switch(G.device.kind){case"audioinput":V.type="recordingDeviceChanged";break;case"audiooutput":V.type="playoutDeviceChanged";break;case"videoinput":V.type="cameraChanged";break;default:T.default.warning("Unknown device change",V),V.type="unknownDeviceChanged"}_.dispatchEvent(V)}),E&&E()},k)},_.getDeviceById=function(E,k,H){_.getDevices(function(I){for(var S=0;S<I.length;S++){var B=I[S];if(B&&B.deviceId===E)return k&&k(B)}return H&&H()})},_.searchDeviceNameById=function(E){var k=_.devicesHistory[E];return k?k.device.label||k.device.deviceId:null},_.getDevices=function(E,k){_._enumerateDevices(E,function(H){k&&k(H.name+": "+H.message)})},_.getVideoCameraIdByLabel=function(E,k,H){_.getCameras(function(I){var S,B=function(_){if("undefined"==typeof Symbol||null==_[Symbol.iterator]){if(Array.isArray(_)||(_=function(P,G){if(P){if("string"==typeof P)return A(P,G);var V=Object.prototype.toString.call(P).slice(8,-1);if("Object"===V&&P.constructor&&(V=P.constructor.name),"Map"===V||"Set"===V)return Array.from(V);if("Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return A(P,G)}}(_))){var E=0,k=function(){};return{s:k,n:function(){return E>=_.length?{done:!0}:{done:!1,value:_[E++]}},e:function(P){throw P},f:k}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var H,I,S=!0,B=!1;return{s:function(){H=_[Symbol.iterator]()},n:function(){var P=H.next();return S=P.done,P},e:function(P){B=!0,I=P},f:function(){try{S||null==H.return||H.return()}finally{if(B)throw I}}}}(I);try{for(B.s();!(S=B.n()).done;){var P=S.value;if(P.label===E)return k&&k(P.deviceId)}}catch(G){B.e(G)}finally{B.f()}return H&&H(N.default.NOT_FIND_DEVICE_BY_LABEL)},H)},_.getRecordingDevices=function(E,k){return _._enumerateDevices(function(H){var I=H.filter(function(S){return"audioinput"==S.kind});E&&E(I)},function(H){k&&k(H)})},_.getPlayoutDevices=function(E,k){return _._enumerateDevices(function(H){var I=H.filter(function(S){return"audiooutput"==S.kind});E&&E(I)},function(H){k&&k(H)})},_.getCameras=function(E,k){return _._enumerateDevices(function(H){var I=H.filter(function(S){return"videoinput"==S.kind});E&&E(I)},function(H){k&&k(H)})},_._init(function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",function(){_._reloadDevicesInfo()}),_.deviceReloadTimer=setInterval(_._reloadDevicesInfo,5e3)}),_}},function(ge,le,U){"use strict";U.r(le),U.d(le,"_getReconnectCSTimer",function(){return oe}),U.d(le,"_setClientConnectionStateRecord",function(){return ae}),U.d(le,"getGatewayList",function(){return C}),U.d(le,"getUserAccount",function(){return W});var D=U(11),R=U.n(D),M=U(12),T=U.n(M),N=U(17),v=U.n(N),A=U(2),p=(U(5),U(0)),_=U(14),E=U(1),k=U(4),H=function(y,u){var K=!1,m=0,w=Object(A.getParameter)("PROXY_CS"),x=Object(A.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),ee=0,ue={command:"convergeAllocateEdge",sid:y.sid,appId:y.appId,token:y.token,uid:y.uid,cname:y.cname,ts:Math.floor(Date.now()/1e3),version:A.VERSION,seq:0,requestId:1},ye=function(q){var F=(new Date).getTime();I("https://"+q+"/api/v1",ue,function(te,Te){if(te)return p.default.debug("["+y.clientId+"] Request proxy server failed: ",te),m++,E.report.requestProxyAppCenter(y.sid,{lts:F,succ:!1,APAddr:q,workerManagerList:null,ec:JSON.stringify(te),response:JSON.stringify({err:te,res:Te})}),m>=w.length&&u&&u("Get proxy server failed: request all failed"),void(!(m%x)&&m<w.length&&(ee++,ne()));if(!K)if((Te=JSON.parse(Te)).json_body){var me=JSON.parse(Te.json_body);if(p.default.debug("["+y.clientId+"] App return:",me.servers),200!==me.code)m++,p.default.debug("["+y.clientId+"] "+(te="Get proxy server failed: response code ["+me.code+"], reason [ "+me.reason+"]")),E.report.requestProxyAppCenter(y.sid,{lts:F,succ:!1,APAddr:q,workerManagerList:null,ec:te,response:JSON.stringify({err:te,res:Te})}),m>=w.length&&u&&u(te),!(m%x)&&m<w.length&&(ee++,ne());else{K=!0;var fe=B(me.servers);E.report.requestProxyAppCenter(y.sid,{lts:F,succ:!0,APAddr:q,workerManagerList:JSON.stringify(fe),ec:null,response:JSON.stringify({res:Te})}),u&&u(null,fe)}}else p.default.debug("["+y.clientId+"] Get proxy server failed: no json_body"),E.report.requestProxyAppCenter(y.sid,{lts:F,succ:!1,APAddr:q,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:Te})})})},ne=function(){for(var q=ee*x,F=q;F<Math.min(w.length,q+x);F++)ye(w[F])};ne()},I=function(y,u,K){var m={service_name:"webrtc_proxy",json_body:JSON.stringify(u)};Object(_.post)(y,m,function(w){K&&K(null,w)},function(w){K&&K(w)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})},B=function(y){if(!(y&&[]instanceof Array))return[];var u=[];return y.forEach(function(K){var m;K.address&&K.tcp?(K.address.match(/^[\.\:\d]+$/)?m="".concat(K.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(p.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(K.address,". Used As Host instead")),m="".concat(K.address,":").concat(K.tcp)),u.push(m)):p.default.error("["+joinInfo.clientId+"] Invalid address format ",K)}),u},P=U(21),G=function(y,u,K,m){var w=Object(A.getParameter)("WEBCS_DOMAIN").concat(Object(A.getParameter)("WEBCS_DOMAIN_BACKUP_LIST")),x=Object(A.getParameter)("PROXY_SERVER_TYPE3");w=["".concat(x[0],"/ap/?url=").concat(w[1]),"".concat(x[0],"/ap/?url=").concat(w[3]),"".concat(x[1],"/ap/?url=").concat(w[0]),"".concat(x[1],"/ap/?url=").concat(w[2])];var ee,ue=0,ye=!0,ne=Object(A.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),q=0,F=function(Te){var me,fe,Ne,je,Ue,ke,qe,et,h,Ce;me=y,fe=Te,Ne=u,je=function(me,fe){me?(ue++,p.default.error("[".concat(u.clientId,"] request ").concat(Te," failed: ").concat(me)),me&&-1===k.JOIN_PROXY_RETRY_LIST.indexOf(me)&&(ee=me),ue===w.length&&(ee||(ee="RETRYABLE_ERROR"),K(ee)),!(ue%ne)&&ue<w.length&&(q++,te())):ye&&(/sd-rtn/.test(fe.gatewayServers.gateway_addr[0])?Object(A.setParameter)("NGINX",x[0]):Object(A.setParameter)("NGINX",x[1]),ye=!1,K(null,fe))},Ue=m,ke=Date.now(),qe=function(L,xe){try{E.report.joinChooseServer2(Ne.sid,{lts:ke,succ:!L,csAddr:fe,serverList:xe&&xe.gateway_addr,cid:xe&&xe.cid+"",uid:xe&&xe.uid+"",ec:L,chooseServerIp:xe&&xe.detail&&xe.detail[502]})}catch(Qe){}},et=function(L,xe){var Qe=Date.now();try{E.report.joinWebProxyAP({lts:Qe,sid:Ne.sid,cname:Ne.cname,cid:Ne.cid,uid:Ne.uid,sucess:L?-1:1,elapse:Qe-ke,eventType:me,apServerAddr:fe,turnServerAddrList:JSON.stringify(xe),errorCode:L||"0"})}catch(ze){}},h=Object(A.getParameter)("AREA_SETTING").reduce(function(L,xe,Qe){var ze=Object(P.getAreaCodeByArea)(xe);return ze?0===Qe?ze:"".concat(L,",").concat(ze):L},""),Ce={appid:Ne.token,client_ts:Date.now(),opid:133,sid:Ne.sid,request_bodies:[{uri:22,buffer:{cname:Ne.cname,detail:{11:h,6:Ne.stringUid},key:Ne.token,service_ids:[11,18],uid:Ne.uid||0}}]},fe="https://".concat(fe,"/api/v2/transpond/webrtc?v=2"),Object(_.postFormData)(fe,Ce,function(L){var xe=function(ve){return new RegExp(/10102\d{2}$/).test(ve)?"NO_SERVICE_AVAILABLE":k.APErrorCode[ve]||ve};try{var Qe,ze,st=JSON.parse(L);if(30===(st=st.response_body)[0].uri&&0!==st[0].buffer.code){var ft=xe(st[0].buffer.code);return et(ft,st),je(ft)}if(4096===st[0].buffer.flag?(ze=st[0].buffer,Qe=st[1].buffer):(ze=st[1].buffer,Qe=st[0].buffer),0!==Qe.code)return ft=xe(Qe.code),p.default.error("[".concat(Ne.clientId,"] requestProxyServer failed: ").concat(ft)),et(ft,Qe),je(ft);if(!Qe.edges_services||!Qe.edges_services instanceof Array)return et("UNEXPECTED_ERROR",Qe),je("UNEXPECTED_ERROR");var pe=Object(A.getParameter)("GATEWAY_DOMAINS"),g=0;if(fe.indexOf(pe[1])>-1&&(g=1),0===Qe.edges_services.length)return et("EMPTY_PROXY_LIST",Qe),je("EMPTY_PROXY_LIST");var ce=Qe.edges_services.map(function(ve){if(ve.ip)return ve.ip=Ue?"".concat(ve.ip.replace(/[^\d]/g,"-"),".").concat(pe[g++%pe.length]):"".concat(ve.ip),ve});if(et(null,ce),0!==ze.code)return ft=xe(ze.code),p.default.error("[".concat(Ne.clientId,"] requestChooseServer failed: ").concat(ft)),qe(ft),je(ft);var _e=[];if(pe=Object(A.getParameter)("GATEWAY_DOMAINS"),g=0,fe.indexOf(pe[1])>-1&&(g=1),ze.edges_services.forEach(function(ve){var Z;if(ve.ip&&ve.port){if(!ve.ip.match(/^[\.\:\d]+$/))return p.default.info("["+Ne.clientId+"] "+"Cannot recognized as IP address ".concat(ve.ip,". Used As Host instead")),void qe("UNEXPECTED_IP");Z="".concat(ve.ip.replace(/[^\d]/g,"-"),".").concat(pe[g++%pe.length]);var Se=Object(A.getParameter)("PROXY_SERVER_TYPE3");Z=/sd-rtn/.test(fe)?"".concat(Se[0],"/ws/?h=").concat(Z,"&p=").concat(ve.port):"".concat(Se[1],"/ws/?h=").concat(Z,"&p=").concat(ve.port),_e.push(Z)}else p.default.error("["+Ne.clientId+"] Invalid address format ",ve)}),!_e.length)return p.default.error("["+Ne.clientId+"] Empty Address response",st),qe("EMPTY_ADDRESS_RESPONSE"),je("EMPTY_ADDRESS_RESPONSE");ze.ticket=ze.cert;var be={gateway_addr:_e,uid:ze.uid,cid:ze.cid,vid:ze.detail&&ze.detail[8],res:ze,detail:st.detail};qe(null,be),je(null,{gatewayServers:be,turnServers:ce})}catch(ve){return p.default.error("[".concat(Ne.clientId,"] requestProxyServer failed with unexpected body "),ve),et("UNEXPECTED_ERROR"),je("UNEXPECTED_ERROR")}},function(L,xe){"timeout"===L.type?(et("REQUEST_PROXY_SERVER_TIME_OUT"),je("REQUEST_PROXY_SERVER_TIME_OUT")):(et("REQUEST_PROXY_SERVER_FAILED"),je("REQUEST_PROXY_SERVER_FAILED"))})},te=function(){for(var Te=q*ne,me=Te;me<Math.min(w.length,Te+ne);me++)F(w[me])};te()},V=U(13),ie={},de={},oe=function(y){return ie[y]},ae=function(y,u){de[y]=u},J=function(y,u,K,m,w,x){var ee=(new Date).getTime(),ue=u,ye="";u.multiIP&&u.multiIP.gateway_ip&&(ye={vocs_ip:[u.multiIP.uni_lbs_ip],vos_ip:[u.multiIP.gateway_ip]});var ne=Object(A.getParameter)("AREA_SETTING").reduce(function(F,te,Te){var me=Object(P.getAreaCodeByArea)(te);return me?0===Te?me:"".concat(F,",").concat(me):F},""),q={appid:u.token,opid:133,client_ts:+new Date,sid:u.sid,request_bodies:[{uri:22,buffer:{cname:u.cname,detail:{5:ye?JSON.stringify(ye):void 0,6:u.stringUid,11:ne},key:u.token,service_ids:[11],uid:u.uid||0}}]};Object(_.postFormData)(y,q,function(F){try{var te=JSON.parse(F),Te=(te=te.response_body[0].buffer).code}catch(qe){var me="requestChooseServer failed with unexpected body "+F;return p.default.error("["+ue.clientId+"]",me),m(me,void 0,void 0,x)}if(Te)return Ue=new RegExp(/10102\d{2}$/).test(Te)?"NO_SERVICE_AVAILABLE":k.APErrorCode[te.code]||Te,E.report.joinChooseServer(u.sid,{lts:ee,succ:!1,csAddr:y,serverList:null,ec:Ue,chooseServerIp:te&&te.detail&&te.detail[502]}),m("Get server node failed ["+Ue+"]",y,Ue,x);var fe=[],Ne=Object(A.getParameter)("GATEWAY_DOMAINS"),je=0;if(y.indexOf(Ne[1])>-1&&(je=1),te.edges_services.forEach(function(qe){var et;qe.ip&&qe.port?(qe.ip.match(/^[\.\:\d]+$/)?et="".concat(qe.ip.replace(/[^\d]/g,"-"),".").concat(Ne[je++%Ne.length],":").concat(qe.port):(p.default.info("["+ue.clientId+"] "+"Cannot recognized as IP address ".concat(qe.ip,". Used As Host instead")),et="".concat(qe.ip,":").concat(qe.port)),fe.push(et)):p.default.error("["+ue.clientId+"] Invalid address format ",qe)}),!fe.length){p.default.error("["+ue.clientId+"] Empty Address response",te);var Ue="EMPTY_ADDRESS_RESPONSE";return E.report.joinChooseServer(u.sid,{lts:ee,succ:!1,csAddr:y,serverList:null,ec:Ue,chooseServerIp:te&&te.detail&&te.detail[502]}),m("Get server node failed ["+Ue+"]",y,Ue,x)}return te.ticket=te.cert,K({gateway_addr:fe,uid:te.uid,cid:te.cid,vid:te.detail&&te.detail[8],res:te,uni_lbs_ip:te.detail},y)},function(F,te){"timeout"===F.type?(E.report.joinChooseServer(u.sid,{lts:ee,succ:!1,csAddr:te,serverList:null,ec:"timeout"}),m("Connect choose server timeout",te,void 0,x)):(E.report.joinChooseServer(u.sid,{lts:ee,succ:!1,csAddr:te,serverList:null,ec:F.httpErrorCode||"server_wrong"}),m("Connect choose server error",te,void 0,x))})},C=function(y,u,K){var m=!1,w=null,x=1,ee=1,ue=y.clientId,ye=function F(te,Te){if(!m){var me=[];!function(fe,Ne,je){var Ue,ke=(new Date).getTime(),qe=!1,et=0,h=0,Ce=Object(A.getParameter)("WEBCS_DOMAIN"),L=Ce.length,xe=Object(A.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),Qe=xe.length,ze=Object(A.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),st=0,ft=0,pe=function(ve,Z){var Se;try{Se=ve.res.detail[8]}catch(Xe){p.default.debug("["+fe.clientId+"] get vid failed",Xe)}if(qe)E.report.joinChooseServer(fe.sid,{lts:ke,succ:!0,csAddr:Z,serverList:ve.gateway_addr,cid:ve.cid+"",uid:ve.uid+"",ec:null,vid:Se,chooseServerIp:ve.res&&ve.res.detail&&ve.res.detail[502]},!1);else{if(clearTimeout(be),qe=!0,fe.proxyServer)for(var Re=ve.gateway_addr,Pe=0;Pe<Re.length;Pe++){var Oe=Re[Pe].split(":");ve.gateway_addr[Pe]=fe.proxyServer+"/ws/?h="+Oe[0]+"&p="+Oe[1]}(function(fe){m=!0,me=fe,clearTimeout(w),de[ue]!==V.a.DISCONNECTED&&de[ue]!==V.a.DISCONNECTING?Te&&Te(me,null):p.default.debug("[".concat(y.clientId,"] Request gateway list success when connection state is ").concat(de[ue]))})(ve),E.report.joinChooseServer(fe.sid,{lts:ke,succ:!0,csAddr:Z,serverList:ve.gateway_addr,cid:ve.cid+"",uid:ve.uid+"",ec:null,vid:Se,chooseServerIp:ve.res&&ve.res.detail&&ve.res.detail[502]},!0)}},g=function(ve,Z,Se,Re){"domain"===Re&&et++,"backup"===Re&&h++,p.default.error("["+fe.clientId+"]",ve,Z,Se),Se&&-1===k.JOIN_CS_RETRY_LIST.indexOf(Se)&&(Ue=Se),et===L&&h===Qe&&function(fe){if(fe)return p.default.info("["+y.clientId+"] Join failed: "+fe),void(K&&K(fe));if(de[ue]===V.a.DISCONNECTED||de[ue]===V.a.DISCONNECTING)return p.default.debug("[".concat(y.clientId,"] Request gateway list falied when connection state is ").concat(de[ue])),void(K&&K("OPERATION_ABORT"));p.default.debug("["+y.clientId+"] Request gateway list will be restart in "+x+"s"),w=setTimeout(function(){F(te,Te)},1e3*x),ie[ue]=w;var Ne=Object(A.getParameter)("AP_BACKOFF_MAX_TIME");x=x>=Ne?Ne:2*x}(Ue),"domain"===Re&&!(et%ze)&&et<L&&(st++,ce()),"backup"===Re&&!(h%ze)&&h<Qe&&(ft++,_e())},ce=function ve(){for(var Z=st*ze,Se=Z;Se<Math.min(L,Z+ze);++Se){var Re;if("string"==typeof Ce[Se]){var Pe=Ce[Se];Re=fe.proxyServer?"https://".concat(fe.proxyServer,"/ap/?url=").concat(Pe+"/api/v2/transpond/webrtc?v=2"):"https://".concat(Pe,"/api/v2/transpond/webrtc?v=2");var Oe=Object(P.getAreaCodeByWebCS)(Pe);p.default.debug("["+fe.clientId+"] "+"Connect to choose_server: ".concat(Re,", ").concat(Oe)),J(Re,fe,pe,g,0,"domain")}else et++,p.default.error("["+fe.clientId+"] Invalid Host",Ce[Se]),Se===Z+ze-1&&Se<L-1-1&&(st++,ve())}};ce();var _e=function ve(){if(!qe)for(var Z=ft*ze,Se=Z;Se<Math.min(Qe,Z+ze);Se++){var Re;if("string"==typeof xe[Se]){var Pe=xe[Se];Re=fe.proxyServer?"https://".concat(fe.proxyServer,"/ap/?url=").concat(Pe+"/api/v2/transpond/webrtc?v=2"):"https://".concat(Pe,"/api/v2/transpond/webrtc?v=2");var Oe=Object(P.getAreaCodeByWebCS)(Pe);p.default.debug("["+fe.clientId+"] "+"Connect to backup_choose_server: ".concat(Re,", ").concat(Oe)),J(Re,fe,pe,g,0,"backup")}else h++,p.default.error("["+fe.clientId+"] Invalid Host",xe[Se]),Se===Z+ze-1&&Se<xe-1-1&&(st++,ve())}},be=setTimeout(_e,1e3)}(y)}},ne=function F(){var te,Te;Te=function(te,Te){if(te){p.default.debug("["+y.clientId+"]",te),p.default.debug("["+y.clientId+"] Request proxy will be restart in "+ee+"s"),w=setTimeout(function(){F()},1e3*ee),ie[ue]=w;var me=Object(A.getParameter)("AP_BACKOFF_MAX_TIME");ee=ee>=me?me:2*ee}else{clearTimeout(w);var fe=Te.address;y.proxyServer=fe;var Ne={mode:"manual",url:Te.address,tcpport:Te.serverResponse.tcpport||"3433",udpport:Te.serverResponse.udpport||"3478",username:Te.serverResponse.username||"test",credential:Te.serverResponse.password||Object(A.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};Ne.tcpport+="",Ne.udpport+="",y.turnServers=[],y.turnServers.push(Ne),E.report.setProxyServer(fe),p.default.setProxyServer(fe),ye(fe,u)}},H(te=y,function(me,fe){if(me)return Te&&Te(me);p.default.debug("["+te.clientId+"] getProxyServerList: ",fe),function(y,u,K){var m=!1,w=0,x={command:"request",gatewayType:"http",appId:y.appId,cname:y.cname,uid:y.uid+"",sdkVersion:"2.3.1",sid:y.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:y.appId,cname:y.cname,uid:y.uid+"",sid:y.sid}};u.map(function(ee){var ye,ne,q,ue=(new Date).getTime();ye="https://"+ee+":4000/v2/machine",ne=x,q=function(ye,ne){if(ye)return p.default.debug("["+y.clientId+"] Request worker manager failed: ",ye),w++,E.report.requestProxyWorkerManager(y.sid,{lts:ue,succ:!1,workerManagerAddr:ee,ec:JSON.stringify(ye),response:JSON.stringify({res:ne})}),void(w>=u.length&&K&&K("requeet worker manager server failed: request failed"));if(!m){if(!(ne=JSON.parse(ne)).serverResponse)return K&&K("requeet worker manager server failed: serverResponse is undefined");m=!0,E.report.requestProxyWorkerManager(y.sid,{lts:ue,succ:!0,workerManagerAddr:ee,ec:JSON.stringify(ye),response:JSON.stringify({res:ne})}),K&&K(null,{address:ee,serverResponse:ne.serverResponse})}},Object(_.post)(ye,ne,function(F){q&&q(null,F)},function(F){q&&q(F)})})}(te,fe,Te)})},q=function F(){G("proxy3",y,function(te,Te){if(te)return"RETRYABLE_ERROR"!==te?K&&K(te):(p.default.debug("["+y.clientId+"]",te),p.default.debug("["+y.clientId+"] Request proxy will be restart in "+ee+"s"),w=setTimeout(function(){F()},1e3*ee),ie[ue]=w,void(ee=ee>=3600?3600:2*ee));var me=Te.gatewayServers,fe=Te.turnServers;clearTimeout(w);var Ne=Object(A.getParameter)("NGINX");y.proxyServer=Ne,y.turnServers=[],fe.map(function(je){var Ue={mode:"manual",url:je.ip,tcpport:"",udpport:je.port||"3478",username:je.username||"test",credential:je.password||Object(A.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};Ue.tcpport+="",Ue.udpport+="",y.turnServers.push(Ue)}),E.report.setProxyServer(Ne),p.default.setProxyServer(Ne),u(me)})};y.useProxyServer?1==y.proxyServerType?ne():2==y.proxyServerType?function F(){var te,Te;Te=function(te,Te){if(te)return p.default.debug("["+y.clientId+"]",te),p.default.debug("["+y.clientId+"] Request proxy will be restart in "+ee+"s"),w=setTimeout(function(){F()},1e3*ee),ie[ue]=w,void(ee=ee>=3600?3600:2*ee);clearTimeout(w);var me=Object(A.getParameter)("PROXY_SERVER_TYPE2");y.proxyServer=me;var fe={mode:"manual",url:Te.address,tcpport:Te.serverResponse.tcpport||"3433",udpport:Te.serverResponse.udpport||"3478",username:Te.serverResponse.username||"test",credential:Te.serverResponse.password||"111111",forceturn:!0};fe.tcpport+="",fe.udpport+="",y.turnServers=[],y.turnServers.push(fe),E.report.setProxyServer(me),p.default.setProxyServer(me),ye(me,u)},H(te=y,function(me,fe){return me?Te&&Te(me):(p.default.debug("["+te.clientId+"] getProxyServerList: ",fe),Te&&Te(null,{address:fe[0],serverResponse:{tcpport:"443",udpport:"3478",username:"test",password:"111111"}}))})}():3==y.proxyServerType?q():4==y.proxyServerType?G("proxy4",y,function(F,te){if(F)return"RETRYABLE_ERROR"!==F?K&&K(F):(p.default.debug("["+y.clientId+"]",F),p.default.debug("["+y.clientId+"] Request proxy will be restart in "+ee+"s"),w=setTimeout(function(){q()},1e3*ee),ie[ue]=w,void(ee=ee>=3600?3600:2*ee));var Te=te.gatewayServers,me=te.turnServers;clearTimeout(w);var fe=Object(A.getParameter)("NGINX");y.proxyServer=fe,y.turnServers=[],me.map(function(Ne){var je={mode:"manual",url:Ne.ip,tcpport:Ne.port||"443",udpport:"",username:Ne.username||"test",credential:Ne.password||Object(A.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!1};je.tcpport+="",je.udpport+="",y.turnServers.push(je)}),E.report.setProxyServer(fe),p.default.setProxyServer(fe),u(Te)}):5==y.proxyServerType?G("proxy5",y,function(F,te){if(F)return"RETRYABLE_ERROR"!==F?K&&K(F):(p.default.debug("["+y.clientId+"]",F),p.default.debug("["+y.clientId+"] Request proxy will be restart in "+ee+"s"),w=setTimeout(function(){q()},1e3*ee),ie[ue]=w,void(ee=ee>=3600?3600:2*ee));var Te=te.gatewayServers,me=te.turnServers;clearTimeout(w);var fe=Object(A.getParameter)("NGINX");y.proxyServer=fe,y.turnServers=[],me.map(function(Ne){var je={mode:"manual",url:Ne.ip,tcpport:Ne.port||"443",udpport:"",username:Ne.username||"test",credential:Ne.password||Object(A.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!1,useTurns:!0};je.tcpport+="",je.udpport+="",y.turnServers.push(je)}),E.report.setProxyServer(fe),p.default.setProxyServer(fe),u(Te)},!0):ne():ye(null,u)},d=function(y,u,K,m,w){var x=Date.now(),ee={sid:u.sid,opid:10,appid:u.appId,string_uid:m=m||u.stringUid};return new Promise(function(ue,ye){Object(_.post)(y+"".concat(-1===y.indexOf("?")?"?":"&","action=stringuid"),ee,function(ne){try{var q=JSON.parse(ne),F=q.code}catch(Ne){var te="requestUserAccount failed with unexpected body "+ne;return p.default.error("["+u.clientId+"]",te),ye({retryable:!0,info:te,url:y,error:"UNEXPECTED_ERROR"}),K&&K.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void E.report.reqUserAccount(ee.sid,{lts:x,success:!1,serverAddress:y,stringUid:m,uid:null,extend:ne,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(F){var Te=!1;return"INTERNAL_SERVER_ERROR"===(fe=k.StringUidErrorCode[q.code%1e4]||"REQ_ACCOUNT_ERR_".concat(F))&&(Te=!0),K&&K.dispatchEvent({type:"error",reason:fe}),E.report.reqUserAccount(ee.sid,{lts:x,success:!1,serverAddress:y,stringUid:m,uid:null,errorCode:fe,extend:ee}),ye({retryable:Te,info:te="Get String Uid Failed ["+fe+"]",url:y,error:fe})}var me=q.uid;if(!(me>0&&me<Math.pow(2,32))){p.default.error("["+u.clientId+"] "+"Invalid Uint Uid ".concat(m," => ").concat(me),q);var fe="INVALID_UINT_UID_".concat(me);return K&&K.dispatchEvent({type:"error",reason:fe}),E.report.reqUserAccount(ee.sid,{lts:x,success:!1,serverAddress:y,stringUid:m,uid:null,errorCode:fe,extend:ee}),ye({retryable:!0,error:fe,info:"Get String Uid failed ["+fe+"]",url:y})}ue({uid:me,url:y}),E.report.reqUserAccount(ee.sid,{lts:x,success:!0,serverAddress:y,stringUid:m,uid:me,errorCode:null,extend:ee})},function(ne,q){if("timeout"===ne.type){var F="USER_ACCOUNT_TIMEOUT";K&&K.dispatchEvent({type:"error",reason:F}),E.report.reqUserAccount(ee.sid,{lts:x,success:!1,serverAddress:q,stringUid:m,uid:null,errorCode:F,extend:ee}),ye({retryable:!0,info:F,url:q,error:F})}else{var te="USER_ACCOUNT_SERVER_WRONG_".concat(ne.type);K&&K.dispatchEvent({type:"error",reason:te}),E.report.reqUserAccount(ee.sid,{lts:x,success:!1,serverAddress:q,stringUid:m,uid:null,errorCode:te,extend:ee}),ye({retryable:!0,info:te,url:q,error:te})}},{"X-Packet-Service-Type":0,"X-Packet-URI":72})})},W=function(y,u,K){Date.now();var m,q,w=Object(A.getParameter)("ACCOUNT_REGISTER"),x=!1,ee=Object(A.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),ue=null,ye=null,ne=new Promise((q=v()(T.a.mark(function F(te,Te){var me,fe,Ne;return T.a.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:ue=te,ye=Te,m=0;case 3:if(!(m<Object(A.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){je.next=33;break}if(!x){je.next=6;break}return je.abrupt("return");case 6:return me=w[m%w.length],fe=y.proxyServer?"https://".concat(y.proxyServer,"/ap/?url=").concat(me+"/api/v1"):"https://".concat(me,"/api/v1"),je.prev=8,je.delegateYield(T.a.mark(function Ue(){var ke;return T.a.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=3,d(fe,y,u,K);case 3:if(ke=qe.sent,!x){qe.next=6;break}return qe.abrupt("return",{v:void 0});case 6:x=!0,setTimeout(function(){p.default.debug("Get UserAccount Successfully",ke),ue(ke)},0);case 8:case"end":return qe.stop()}},Ue)})(),"t0",10);case 10:if(Ne=je.t0,"object"!==R()(Ne)){je.next=13;break}return je.abrupt("return",Ne.v);case 13:je.next=30;break;case 15:if(je.prev=15,je.t1=je.catch(8),!x){je.next=19;break}return je.abrupt("return");case 19:if(!je.t1.retryable){je.next=27;break}return(ee=Math.ceil(ee*Object(A.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(A.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(ee=Object(A.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),p.default.error("".concat(je.t1.info," ").concat(je.t1.url," Will Fetch User Account in ").concat(ee/1e3," seconds")),je.next=25,new Promise(function(Ue){setTimeout(Ue,ee)});case 25:je.next=30;break;case 27:p.default.error("Get UserAccount Error: ".concat(je.t1.info," ").concat(je.t1.url),je.t1.error),x=!0,ye(je.t1.error);case 30:m++,je.next=3;break;case 33:case"end":return je.stop()}},F,null,[[8,15]])})),function(F,te){return q.apply(this,arguments)}));return ne.cancel=function(){x||(x=!0,ye({info:"Request Cancelled",retryable:!1}))},ne.isFinished=function(){return x},ne}},function(ge,le,U){"use strict";var D=this&&this.__spreadArrays||function(){for(var k=0,H=0,I=arguments.length;H<I;H++)k+=arguments[H].length;var S=Array(k),B=0;for(H=0;H<I;H++)for(var P=arguments[H],G=0,V=P.length;G<V;G++,B++)S[B]=P[G];return S},R=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(le,"__esModule",{value:!0});var M,T,k,N=R(U(0));(k=M||(M={})).CHINA="CHINA",k.ASIA="ASIA",k.NORTH_AMERICA="NORTH_AMERICA",k.EUROPE="EUROPE",k.JAPAN="JAPAN",k.INDIA="INDIA",k.OCEANIA="OCEANIA",k.SOUTH_AMERICA="SOUTH_AMERICA",k.AFRICA="AFRICA",k.OVERSEA="OVERSEA",k.GLOBAL="GLOBAL",le.AREAS=M,function(k){k.CHINA="CN",k.ASIA="AS",k.NORTH_AMERICA="NA",k.EUROPE="EU",k.JAPAN="JP",k.INDIA="IN",k.OCEANIA="OC",k.SOUTH_AMERICA="SA",k.AFRICA="AF",k.OVERSEA="OVERSEA",k.GLOBAL="GLOBAL"}(T||(T={}));var v={ASIA:{CODE:T.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:T.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:T.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:T.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:T.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:T.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],NGINX:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:T.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],NGINX:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:T.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:T.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:T.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};le.AREA_DOMAIN_MAP=v;var A={GLOBAL:{ASIA:[M.CHINA,M.JAPAN,M.INDIA],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},p=Object.keys(A[M.GLOBAL]),_=[M.CHINA,M.NORTH_AMERICA,M.EUROPE,M.ASIA,M.JAPAN,M.INDIA,M.OCEANIA,M.SOUTH_AMERICA,M.AFRICA];le.getAreaCodeByConfig=function(k){var H=k.areaCode,I=k.excludedArea;return I?function(k,H){var oe,S=[];if("string"==typeof k&&(k=[k]),H&&!k.includes(M.GLOBAL)&&(S=k),H||(S=k),H&&k.includes(M.GLOBAL)){var B=[M.GLOBAL,M.OVERSEA],P=Object.keys(v);if(H===M.GLOBAL)throw new Error("Can not set excludedArea to 'GLOBAL'");if(H===M.CHINA)S=[M.OVERSEA];else if(p.includes(H)){var G=(void 0===(oe=H)&&(oe=""),A[M.GLOBAL][oe]||[]),V=D(B,[H],G);S=P.filter(function(oe){return!V.includes(oe)})}else if(function(oe){var ae=!1;return p.forEach(function(J){A.GLOBAL[J].includes(oe)&&(ae=!0)}),ae}(H)){var ie=function(oe){void 0===oe&&(oe="");var ae="";return p.forEach(function(J){A.GLOBAL[J].includes(oe)&&(ae=J)}),ae}(H),de=D(B,[ie,H]);S=P.filter(function(oe){return!de.includes(oe)})}else S=k;S=function(oe){var ae=[];return _.forEach(function(J){oe.includes(J)&&ae.push(J)}),ae.concat(oe.filter(function(J){return!_.includes(J)}))}(S)}return console.log("getAreaCodeAfterCalculation result",S),S}(H,I):H},v.CHINA={CODE:T.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]},le.getAreaCodeByWebCS=function(k){for(var H=Object.keys(v),I=0;I<H.length;I++){var B=v[H[I]];if(B.WEBCS_DOMAIN.includes(k)||B.WEBCS_DOMAIN_BACKUP_LIST.includes(k))return B.CODE===T.OVERSEA?T.ASIA+","+T.EUROPE+","+T.AFRICA+","+T.NORTH_AMERICA+","+T.SOUTH_AMERICA+","+T.OCEANIA:B.CODE}},le.getAreaCodeByArea=function(k){return k===M.OVERSEA?T.ASIA+","+T.EUROPE+","+T.AFRICA+","+T.NORTH_AMERICA+","+T.SOUTH_AMERICA+","+T.OCEANIA:T[k]},le.getAreaDomainConfig=function(k){var H={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],NGINX:[]};return k.map(function(I){var S=v[I];if(S){var B=Object.keys(S);B?B.map(function(P){"CODE"!==P&&(H[P]=H[P].concat(S[P]))}):N.default.info(I+" is not exist")}else N.default.info(I+" is not exist")}),H}},function(ge,le,U){"use strict";U.d(le,"a",function(){return d}),U.d(le,"b",function(){return W});var D=U(7),R=U.n(D),M=U(5),T=U(8),v=U(0),A=U(15),p=U(4),_=U(2),E=U(1),k=0,H=function(y){var u=function(y){var u=Object(T.b)({});return u.url=".",u}();u.id=y.id,u.playerId=k++,u.destroyed=!1,u.fit=y.options&&y.options.fit,"contain"!==u.fit&&"cover"!==u.fit&&(u.fit=null),u.url=y.url,u.stream=y.stream.stream,u.peerVideoReady=!1,u.isFreeze=!1,u.freezeTimeCounterList=[],u.freezeCount=0,u.lastFreezeCount=0,u.lastTimeupdateTime=0,u.elementID=y.elementID,u.setAudioOutput=function(Ue,ke,qe){var et=u.video||u.audio;return et?et.setSinkId?void et.setSinkId(Ue).then(function(){return v.default.debug("["+u.id+"] "+"video ".concat(u.id," setAudioOutput ").concat(Ue," SUCCESS")),et==u.video&&u.audio?u.audio.setSinkId(Ue):Promise.resolve()}).then(function(){return v.default.debug("["+u.id+"] "+"audio ".concat(u.id," setAudioOutput ").concat(Ue," SUCCESS")),ke&&ke()}).catch(function(h){return v.default.error("["+u.id+"] VideoPlayer.setAudioOutput",h),qe&&qe(h)}):(v.default.error("["+u.id+"] ",p.default.WEB_API_NOT_SUPPORTED),qe&&qe(p.default.WEB_API_NOT_SUPPORTED)):(v.default.error("["+u.id+"] ",p.default.PLAYER_NOT_FOUND),qe&&qe(p.default.PLAYER_NOT_FOUND))},u.destroy=function(){v.default.debug("[".concat(u.id,"] destroy ").concat(y.stream.local?"local":"remote"," Player ").concat(u.id)),Object(A.setSrcObject)(u.video,null),Object(A.setSrcObject)(u.audio,null),u.video.load(),u.audio.load(),u.video.pause(),u.video.remove(),u.audio.remove(),u.freezeCheckInterval&&clearInterval(u.freezeCheckInterval),u.destroyed=!0,delete u.resizer,document.getElementById(u.div.id)&&u.parentNode.contains(u.div)&&u.div.remove()&&u.parentNode.removeChild(u.div),["video","audio"].forEach(function(Ue){var ke=w[Ue];clearTimeout(ke.playDeferTimeout),ke.formerMediaState=null;var qe={playerId:u.playerId,stateId:ke.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};w[Ue]=qe;var et={type:"player-status-change",playerId:u.playerId,mediaType:Ue,status:qe.status,reason:qe.reason,isErrorState:!1,streamId:u.id};v.default.debug("[".concat(u.id,"] Media Player Status Change Triggered by destroy()"),et),y.stream.dispatchEvent(et),E.report.reportApiInvoke(y.stream.sid,{name:"Stream.playerStatusChange",options:et,tag:"tracer"})()})},u.div=document.createElement("div"),u.div.setAttribute("id","player_"+u.id),u.div.setAttribute("style",y.stream.video?"width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;":"width: 100%; height: 100%; position: relative; overflow: hidden;"),u.video=document.createElement("video"),u.video.setAttribute("id","video"+u.id),u.video.setAttribute("style",y.stream.local&&!y.stream.screen?y.stream.mirror?"width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(u.fit||"cover",";"):"width: 100%; height: 100%; position: absolute; object-fit: ".concat(u.fit||"cover",";"):y.stream.video?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(u.fit||"cover",";"):y.stream.screen?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(u.fit||"contain"):"width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(u.fit||"cover"));var K={autoplay:!0,muted:!!y.stream.local||!(!M.isSafari()&&"iOS"!==M.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!1,volume:null},m=R()({},K,y.options);!0!==m.muted||m.volume||(m.volume=0),u.video.setAttribute("autoplay",""),u.video.setAttribute("muted",""),u.video.muted=!0,u.video.autoplay=!0,m.playsinline&&u.video.setAttribute("playsinline",""),m.controls&&u.video.setAttribute("controls",""),m.contains&&(u.video.controls=!0),Number.isFinite(m.volume)&&(u.video.volume=m.volume),u.audio=document.createElement("audio"),u.audio.setAttribute("id","audio"+u.id),!0===m.muted&&u.audio.setAttribute("muted",""),!0===m.muted&&(u.audio.muted=!0),m.playsinline&&u.audio.setAttribute("playsinline",""),Number.isFinite(m.volume)&&(u.audio.volume=m.volume),void 0!==u.elementID?(document.getElementById(u.elementID).appendChild(u.div),u.container=document.getElementById(u.elementID)):(document.body.appendChild(u.div),u.container=document.body),u.parentNode=u.div.parentNode;var w={video:{playerId:u.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:u.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};u.mediaElemExists=function(Ue){for(var ke=Ue,qe=0;qe<Object(_.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&ke;qe++)ke=ke.parentNode;return!!ke};var x=function(Ue){return u.mediaElemExists(Ue)?Ue.paused?"paused":"play":"aborted"},ee=function(Ue,ke,qe){var et=x(Ue),h=!0;return"paused"===et?("audio"===ke&&!0===qe.muted&&(h=!1),qe.autoplay||(h=!1)):"play"===et?"video"===ke?h=!1:!0===qe.muted?Ue.muted&&(h=!1):Ue.muted||(h=!1):"aborted"===et&&(h=!1),h},ue=function(Ue){var ke,qe=this;if(qe===u.video?ke="video":qe===u.audio&&(ke="audio"),ke){if(Ue.type||v.default.error("[".concat(u.id,"] Unexpected evt"),Ue),"video"===ke&&qe.muted&&qe.paused)return v.default.debug("[".concat(u.id,"] auto resume video element")),void qe.play();var et=x(qe);clearTimeout(w[ke].playDeferTimeout),w[ke].playDeferTimeout=setTimeout(function(){w[ke].playDeferTimeout=null;var h=w[ke],Ce=x(qe);if(et===Ce){var L={playerId:u.playerId,stateId:h.stateId+1,playDeferTimeout:null,error:ee(qe,ke,m),status:x(qe),reason:Ue.type,updatedAt:Date.now()};if(h.status!==L.status){w[ke]=L;var xe={type:"player-status-change",playerId:u.playerId,mediaType:ke,status:L.status,reason:L.reason,isErrorState:L.error,streamId:u.id};v.default.debug("[".concat(u.id,"] Media Player Status Change"),xe),y.stream.dispatchEvent(xe),E.report.reportApiInvoke(y.stream.sid,{name:"Stream.playerStatusChange",options:xe,tag:"tracer"})()}}else v.default.debug("[".concat(u.id,"] Status Change after event Triggered.")+"Stream ".concat(u.id," PlayerId ").concat(u.playerId," mediaType ").concat(ke," Status ").concat(et,"=>").concat(Ce))},Object(_.getParameter)("PLAYER_STATE_DEFER"))}else v.default.error("[".concat(u.id,"] Unknown media element"),qe)};u.video.addEventListener("playing",function(Ue){!function ke(){u.video.videoWidth*u.video.videoHeight>4?v.default.debug("["+u.id+"] video dimensions:",u.video.videoWidth,u.video.videoHeight):setTimeout(ke,50)}()});var ye=0,ne=0,q=0;u.freezeCheckInterval=setInterval(function(){Date.now()-u.lastTimeupdateTime>500&&u.peerVideoReady?(u.isFreeze=!0,u.freezeCount+=1):u.isFreeze=!1},500),u.video.addEventListener("playing",ue),u.video.addEventListener("canplay",ue),u.video.addEventListener("abort",ue),u.video.addEventListener("onerror",ue),u.video.addEventListener("suspend",ue),u.video.addEventListener("stalled",ue),u.video.addEventListener("pause",ue),u.audio.addEventListener("playing",ue),u.audio.addEventListener("canplay",ue),u.audio.addEventListener("abort",ue),u.audio.addEventListener("onerror",ue),u.audio.addEventListener("suspend",ue),u.audio.addEventListener("stalled",ue),u.audio.addEventListener("pause",ue);var F=u.audio,te="audio";if(y.stream.hasVideo()||y.stream.hasScreen())u.div.appendChild(u.video),u.div.appendChild(u.audio),M.isEdge()?u.video.srcObject=y.stream.stream:(Object(A.attachMediaStream)(u.video,y.stream.stream),Object(A.attachMediaStream)(u.audio,y.stream.stream)),u.video.addEventListener("timeupdate",function(){var Ue=Date.now();if((ye+=1)<10)u.lastTimeupdateTime=Ue;else for(Ue-u.lastTimeupdateTime>500&&(u.peerVideoReady?ne+=Ue-u.lastTimeupdateTime:u.peerVideoReady=!0),q+=Ue-u.lastTimeupdateTime,u.lastTimeupdateTime=Ue;q>=6e3;)q-=6e3,u.freezeTimeCounterList.push(Math.min(6e3,ne)),ne-=6e3,ne=Math.max(ne,0)});else{!1!==m.muted&&"video_element_muted"!==m.muted||(u.video.removeAttribute("muted"),u.video.muted=!1),u.video.removeAttribute("autoplay"),u.video.autoplay=!1,u.div.appendChild(u.video),F=u.video,te="video";var me={playerId:u.playerId,stateId:w.audio.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"audioonly",updatedAt:Date.now()};w.audio=me;var fe={type:"player-status-change",playerId:u.playerId,mediaType:"audio",status:me.status,reason:me.reason,isErrorState:me.error,streamId:u.id};if(v.default.debug("[".concat(u.id,"] Media Player Status Change"),fe),Promise.resolve().then(function(){return y.stream.dispatchEvent(fe)}),E.report.reportApiInvoke(y.stream.sid,{name:"Stream.playerStatusChange",options:fe,tag:"tracer"})(),window.MediaStream&&(M.isSafari()||"iOS"===M.getBrowserOS())){var Ne=new MediaStream(y.stream.stream.getAudioTracks());Object(A.setSrcObject)(u.video,Ne)}else Object(A.setSrcObject)(u.video,y.stream.stream)}if(m.autoplay&&F){var je=F.play();je&&je.catch&&je.catch(function(Ue){if(!u.destroyed&&F){var ke=w[te],qe={playerId:u.playerId,stateId:ke.stateId+1,playDeferTimeout:null,error:ee(F,te,m),status:x(F),reason:"error",updatedAt:Date.now()};if(ke.status!==qe.status){v.default.debug("[".concat(u.id,"] Player ").concat(u.playerId," Status Changed Detected by promise error: ").concat(ke.status,"=>").concat(qe.status),Ue),w[te]=qe;var et={type:"player-status-change",playerId:u.playerId,mediaType:te,status:qe.status,reason:qe.reason,isErrorState:qe.error,streamId:u.id};v.default.debug("[".concat(u.id,"] Media Player Status Change"),et),y.stream.dispatchEvent(et),E.report.reportApiInvoke(y.stream.sid,{name:"Stream.playerStatusChange",options:et,tag:"tracer"})()}}})}return u.setAudioVolume=function(Ue){var ke=parseInt(Ue)/100;isFinite(ke)&&(ke<0?ke=0:ke>1&&(ke=1),u.video&&(u.video.volume=ke),u.audio&&(u.audio.volume=ke))},u},I=U(23),S=U(10),B=U(6),P=U(19),G=U(3),V=U(25),ie=U(16),de=U(11),oe=U.n(de),ae=function(y){Object(G.checkValidString)(y,"profileName"),-1===(y=y.toLowerCase()).indexOf("_")&&(y+="_1"),Object(G.checkValidEnum)(y,"profileName",Object.keys(_.SUPPORT_RESOLUTION_LIST));var u=_.SUPPORT_RESOLUTION_LIST[y];u||(y=Object(_.getParameter)("DEFAULT_PROFILE"),u=_.SUPPORT_RESOLUTION_LIST[y]);var K={profileName:y,video:{width:u[0],height:u[1]},attributes:{resolution:"".concat(u[0],"x").concat(u[1]),minFrameRate:u[2],maxFrameRate:u[3],minVideoBW:u[4],maxVideoBW:u[5]}};return u[2]&&(K.video.frameRate=u[2]),u[6]&&u[7]&&(K.screen={width:u[0],height:u[1],frameRate:{min:u[6],max:u[7]}}),K},J=function(y){return Object.keys(_.SUPPORT_RESOLUTION_LIST).filter(function(u){var K=_.SUPPORT_RESOLUTION_LIST[u],m=["width","height","frameRate"];for(var w in m){var x=m[w];if(y[x]&&K[w]&&("number"==typeof y[x].max&&y[x].max<K[w]||"number"==typeof y[x].min&&y[x].min>K[w]))return!1}return!0}).reverse()},C=function(y){var u=_.AUDIO_PROFILE_SETTINGS[y]||_.AUDIO_PROFILE_SETTINGS.default;return{highQuality:u[0],stereo:u[1],speech:u[2],lowQuality:u[3]}},d=function(y){var m,u=Object(T.b)();if(u.params=R()({},y),u.stream=y.stream,u.url=y.url,u.onClose=void 0,u.local=!1,u.videoSource=y.videoSource,u.audioSource=y.audioSource,y.video=!(!y.videoSource&&!y.video),u.video=y.video,y.audio=!(!y.audioSource&&!y.audio),u.audio=y.audio,u.screen=!!y.screen,u.screenAudio=!!y.screenAudio,u.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},u.videoSize=y.videoSize,u.player=void 0,u.audioLevelHelper=null,y.attributes=y.attributes||{},u.attributes=y.attributes,u.microphoneId=y.microphoneId,u.cameraId=y.cameraId,u.facingMode=y.facingMode,u.inSwitchDevice=!1,u.userMuteVideo=!1,u.userMuteAudio=!1,u.peerMuteVideo=!1,u.peerMuteAudio=!1,u.lowStream=null,u.videoWidth=0,u.videoHeight=0,u.streamId=y.streamID,u.userId=null,u.uintId=y.uintUID||null,u.mirror=!1!==y.mirror,u.DTX=y.audioProcessing&&y.audioProcessing.DTX,u.audioProcessing=y.audioProcessing,u.optimizationMode=y.optimizationMode,u.highQuality=!1,u.stereo=!1,u.speech=!1,u.screen||delete u.screen,!(void 0===u.videoSize||u.videoSize instanceof Array&&4===u.videoSize.length))throw Error("Invalid Video Size");function K(){var m={};u.getVideoTrack()===this?(v.default.debug("Video Track Ended"),m.type="videoTrackEnded",m.track=this):u.getAudioTrack()===this?(v.default.debug("Audio Track Ended"),m.type="audioTrackEnded",m.track=this):v.default.debug("Detached Track ended",this.kind,this.label,this),m.type&&u.dispatchEvent(m)}return u.videoSize=[640,480,640,480],void 0!==y.local&&!0!==y.local||(u.local=!0),u.initialized=!u.local,u._streamInitID=null,(m=u).audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},m._initSoundIfNotExists=function(w,x){m.audioMixing.sounds[w]||(m.audioMixing.sounds[w]={soundId:w,state:"IDLE",muted:m.userMuteAudio,filePath:x,volume:m.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},m._initSoundIfNotExists(-1),m.loadAudioBuffer=function(w,x,ee){var ue=E.report.reportApiInvoke(m.sid,{callback:ee,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(G.checkValidString)(x,"url",1,1024,!1),Object(G.checkValidString)(w,"id",1,1024,!1);var ye=function(q){v.default.error("[".concat(m.streamId,"] loadAudioBuffer Failed: ")+q),ue(p.default.LOAD_AUDIO_FAILED)},ne=new XMLHttpRequest;ne.open("GET",x,!0),ne.responseType="arraybuffer",ne.onload=function(){if(ne.status>400)ye("".concat(ne.status," ").concat(ne.statusText));else{var q=ne.response;m.audioMixing.audioContextInited||m._initAudioContext(),m.audioMixing.ctx.decodeAudioData(q,function(F){m.audioMixing.buffer[w]=F,ue(null)},function(F){v.default.error("[".concat(m.streamId,"] decodeAudioData Failed: "),F),ue(F)})}},ne.onerror=function(){return ye("load error")},ne.ontimeout=function(){return ye("timeout")},ne.send()},m.createAudioBufferSource=function(w){var x=E.report.reportApiInvoke(m.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(m.audioMixing.buffer[w.id]){var ee=m.audioMixing.buffer[w.id],ue=m.audioMixing.ctx.createBufferSource();ue.buffer=ee;var ye=m.audioMixing.ctx.createGain();if(ue.connect(ye),ye.connect(m.audioMixing.mediaStreamDest),ue.gainNode=ye,w.loop)ue.loop=!0,ue.start(0,w.playTime/1e3);else if(w.cycle>1)if(Object(M.isChrome)()){ue.loop=!0;var ne=w.cycle*ee.duration*1e3-(w.playTime||0);ue.start(0,w.playTime/1e3,ne/1e3)}else v.default.warning("[".concat(m.streamId,"] Cycle Param is ignored by current browser")),ue.start(0,w.playTime/1e3);else ue.start(0,w.playTime/1e3);var q=m.audioMixing.sounds[w.soundId];return q.source=ue,m._flushAudioMixingMuteStatus(),ue.addEventListener("ended",function(){ue===q.source&&m.dispatchEvent({type:"audioSourceEnded",soundId:w.soundId,source:ue,sound:q})}),x(),ue}var F="AUDIOBUFFER_NOT_FOUND";return v.default.error("[".concat(m.streamId,"] "),F,w.id),x(!1),!1},m.on("audioSourceEnded",function(w){var x=w.source,ee=w.sound;ee&&ee.state===m.audioMixing.states.BUSY&&!ee.pauseAt&&(ee.state=m.audioMixing.states.IDLE,ee.startAt=null,ee.startOffset=null,ee.resumeAt=null,ee.resumeOffset=null,x.gainNode&&x.gainNode.disconnect&&x.gainNode.disconnect(),x.buffer=null,m.audioMixing.mediaStreamSource.connect(m.audioMixing.mediaStreamDest))}),m.clearAudioBufferSource=function(){m.audioBufferSource.forEach(function(w){w.stop()})},m._isSoundExists=function(w){return!!m.audioMixing.sounds[w.soundId]||(v.default.error("SoundId not exists. #".concat(w.soundId)),!1)},m._initAudioContext=function(){if(m.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!m.stream)throw new Error("Failed to init audio context. Local Stream not initialized");m.audioMixing.ctx=Object(V.a)(),m.audioMixing.mediaStreamSource=m.audioMixing.ctx.createMediaStreamSource(m.stream),m.audioMixing.mediaStreamDest=m.audioMixing.ctx.createMediaStreamDestination(),m.audioMixing.mediaStreamSource.connect(m.audioMixing.mediaStreamDest);var w=m.stream.getVideoTracks()[0];if(w&&m.audioMixing.mediaStreamDest.stream.addTrack(w),m._originStream=m.stream,m._isAudioMuted()?(m._unmuteAudio(),m.stream=m.audioMixing.mediaStreamDest.stream,m._muteAudio()):m.stream=m.audioMixing.mediaStreamDest.stream,m.audioLevelHelper=null,m.pc&&m.pc.peerConnection&&m.pc.peerConnection){var x=(m.pc.peerConnection&&m.pc.peerConnection.getSenders()).find(function(ue){return ue&&ue.track&&"audio"==ue.track.kind}),ee=m.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];x&&x.replaceTrack&&ee&&x.replaceTrack(ee)}m.audioMixing.audioContextInited=!0},m._cleanupAudioMixing=function(){if(m.audioMixing.audioContextInited){for(var w in m.audioMixing.sounds){var x=m.audioMixing.sounds[w];x.state!==m.audioMixing.states.BUSY&&x.state!==m.audioMixing.states.PAUSED||m._stopOneEffect({soundId:w})}m.audioLevelHelper=null,m.audioMixing.audioContextInited=!1}},m._reloadInEarMonitoringMode=function(w){if(w){if(!m.audioMixing.inEarMonitoringModes[w])return v.default.error("[".concat(m.streamId,"] Invalid InEarMonitoringMode ").concat(w));m.audioMixing.inEarMonitoring=w}switch(m.audioMixing.audioContextInited||m._initAudioContext(),m.audioMixing.inEarMonitoring){case m.audioMixing.inEarMonitoringModes.FILE:m.audioMixing.mediaStreamSource.connectedToDestination&&(m.audioMixing.mediaStreamSource.disconnect(m.audioMixing.ctx.destination),m.audioMixing.mediaStreamSource.connectedToDestination=!1);case m.audioMixing.inEarMonitoringModes.ALL:for(var x in m.audioMixing.sounds){var ee=m.audioMixing.sounds[x];ee&&ee.source&&!ee.source.connectedToDestination&&(ee.source.gainNode.connect(m.audioMixing.ctx.destination),ee.source.connectedToDestination=!0)}}switch(m.audioMixing.inEarMonitoring){case m.audioMixing.inEarMonitoringModes.MICROPHONE:m.audioMixing.source.forEach(function(ue){ue.connectedToDestination&&(ue.gainNode.disconnect(m.audioMixing.ctx.destination),ue.connectedToDestination=!1)});case m.audioMixing.inEarMonitoringModes.ALL:m.audioMixing.mediaStreamSource.connectedToDestination||(m.audioMixing.mediaStreamSource.connect(m.audioMixing.ctx.destination),m.audioMixing.mediaStreamSource.connectedToDestination=!0)}},m._startAudioMixingBufferSource=function(w){m.audioMixing.audioContextInited||m._initAudioContext();var ee=w.replace,ue=m.createAudioBufferSource({soundId:w.soundId,id:w.filePath,loop:w.loop,cycle:w.cycle,playTime:w.playTime||0});return ue.sound=m.audioMixing.sounds[w.soundId],ue?(ue.addEventListener("ended",m._audioMixingFinishedListener,{once:!0}),m._reloadInEarMonitoringMode(),ee&&m.audioMixing.mediaStreamSource.disconnect(m.audioMixing.mediaStreamDest),ue):null},m._stopAudioMixingBufferSource=function(w){var x=m.audioMixing.sounds[w.soundId].source;return x?(x.removeEventListener("ended",m._audioMixingFinishedListener),m.audioMixing.mediaStreamSource.connect(m.audioMixing.mediaStreamDest),x.stop(),x.gainNode&&x.gainNode.disconnect&&x.gainNode.disconnect(),x.buffer=null,x):null},m._flushAudioMixingMuteStatus=function(w){for(var x in m.audioMixing.sounds){var ee=m.audioMixing.sounds[x];ee&&(void 0!==w&&(ee.muted=!!w),ee.source&&(ee.source.gainNode.gain.value=ee.muted?0:ee.volume/100))}},m._handleAudioMixingInvalidStateError=function(w,x,ee){var ue=m.audioMixing.sounds[x.soundId],ye=-1===x.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";v.default.error("[".concat(m.streamId,"] Cannot ").concat(w,": ").concat(ye,", state is ").concat(ue.state)),ee&&ee(ye)},m._handleAudioMixingNoSourceError=function(w,x,ee){m.audioMixing.sounds[x.soundId].state=m.audioMixing.states.IDLE;var ue=-1===x.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";v.default.error("[".concat(m.streamId,"] Cannot ").concat(w,": ").concat(ue)),ee&&ee(ue)},m._getOneEffectStates=function(w){var x=m.audioMixing.sounds[w.soundId];return function(){return x?{state:x.state,startAt:x.startAt,resumeAt:x.resumeAt,pauseOffset:x.pauseOffset,pauseAt:x.pauseAt,resumeOffset:x.resumeOffset,stopAt:x.stopAt,duration:m._getOneEffectDuration(w),position:m._getOneEffectCurrentPosition(w)}:{}}},m._audioMixingFinishedListener=function(){var w=this.sound;w.state===m.audioMixing.states.IDLE&&m.audioMixing.buffer[w.options.filePath]&&!w.options.cacheResource&&(v.default.debug("Recycled buffer ".concat(w.options.filePath)),delete m.audioMixing.buffer[w.options.filePath]),-1===w.soundId&&m.dispatchEvent({type:"audioMixingFinished"})},m._playOneEffect=function(w,x){Object(G.checkValidObject)(w,"options");var ee=w.soundId,ue=w.cacheResource;if(Object(M.isSafari)()&&Object(M.getBrowserVersion)()<12){var ye="BROWSER_NOT_SUPPORT";return v.default.error("[".concat(m.streamId,"] Cannot _playOneEffect: "),ye),x(ye)}m.audioMixing.audioContextInited||m._initAudioContext(),m._initSoundIfNotExists(ee);var ne=m.audioMixing.sounds[ee];if(ne.state===m.audioMixing.states.IDLE){if(void 0!==w.cycle&&!w.cycle>0)return ye="Invalid Parmeter cycle: "+w.cycle,v.default.error("[".concat(m.streamId,"] ").concat(ee),ye),x(ye);if(Object(G.isEmpty)(ue)&&(w.cacheResource=!0),ne.state=m.audioMixing.states.STARTING,ne.options=w,m.audioMixing.buffer[w.filePath]){var q=m._startAudioMixingBufferSource(w);if(q)return ne.source=q,ne.startAt=Date.now(),ne.resumeAt=null,ne.pauseOffset=null,ne.pauseAt=null,ne.resumeOffset=null,ne.stopAt=null,ne.startOffset=w.playTime||0,ne.state=m.audioMixing.states.BUSY,m._flushAudioMixingMuteStatus(),x(null);ne.state=m.audioMixing.states.IDLE;var F="CREATE_BUFFERSOURCE_FAILED";if(x)return x(F);v.default.error("[".concat(m.streamId,"] "),F)}else m.loadAudioBuffer(w.filePath,w.filePath,function(te){if(te)ne.state=m.audioMixing.states.IDLE,x?x(te):v.default.error("[".concat(m.streamId,"] "),te);else{var Te=m._startAudioMixingBufferSource(w);if(Te)return ne.source=Te,ne.startAt=Date.now(),ne.resumeAt=null,ne.pauseOffset=null,ne.pauseAt=null,ne.resumeOffset=null,ne.stopAt=null,ne.startOffset=w.playTime||0,ne.state=m.audioMixing.states.BUSY,m._flushAudioMixingMuteStatus(),x(null);if(ne.state=m.audioMixing.states.IDLE,te="CREATE_BUFFERSOURCE_FAILED",x)return x(te);v.default.error("[".concat(m.streamId,"] "),te)}})}else m._handleAudioMixingInvalidStateError("_playEffect",w,x)},m._stopOneEffect=function(w,x){var ee=m.audioMixing.sounds[w.soundId];return m._isSoundExists(w)?ee.state===m.audioMixing.states.BUSY||ee.state===m.audioMixing.states.PAUSED?(m._stopAudioMixingBufferSource(w),ee.stopAt=Date.now(),ee.state=m.audioMixing.states.IDLE,m.audioMixing.buffer[ee.options.filePath]&&!ee.options.cacheResource&&(v.default.debug("Recycled buffer ".concat(ee.options.filePath)),delete m.audioMixing.buffer[ee.options.filePath]),void(x&&x(null))):void m._handleAudioMixingInvalidStateError("_stopOneEffect",w,x):x("SOUND_NOT_EXISTS")},m._pauseOneEffect=function(w,x){var ee=m.audioMixing.sounds[w.soundId];if(ee.state===m.audioMixing.states.BUSY)return m._stopAudioMixingBufferSource(w)?(ee.pauseAt=Date.now(),ee.state=m.audioMixing.states.PAUSED,ee.pauseOffset=ee.resumeAt?ee.pauseAt-ee.resumeAt+ee.resumeOffset:ee.pauseAt-ee.startAt+ee.startOffset,x&&x(null)):void m._handleAudioMixingNoSourceError("_pauseOneEffect",w,x);m._handleAudioMixingInvalidStateError("_pauseOneEffect",w,x)},m._resumeOneEffect=function(w,x){var ee=m.audioMixing.sounds[w.soundId];if(ee.state===m.audioMixing.states.PAUSED){var ye=m._startAudioMixingBufferSource({soundId:w.soundId,filePath:ee.options.filePath,cycle:ee.options.cycle,loop:ee.options.loop,playTime:ee.pauseOffset,replace:ee.options.replace});if(!ye){var ne="CREATE_BUFFERSOURCE_FAILED";return x(ne),void v.default.error("[".concat(m.streamId,"] "),ne)}ee.source=ye,ee.resumeAt=Date.now(),ee.resumeOffset=ee.pauseOffset,ee.state=m.audioMixing.states.BUSY,ee.pauseAt=null,ee.pauseOffset=null,x(null)}else m._handleAudioMixingInvalidStateError("_resumeOneEffect",w,x)},m._getOneEffectDuration=function(w){var x=m.audioMixing.sounds[w.soundId];return x.options&&x.options.filePath&&m.audioMixing.buffer[x.options.filePath]?1e3*m.audioMixing.buffer[x.options.filePath].duration:null},m._getOneEffectCurrentPosition=function(w,x){var ee=m.audioMixing.sounds[w.soundId];return ee.state===m.audioMixing.states.PAUSED?ee.pauseOffset%m._getOneEffectDuration(w):ee.state===m.audioMixing.states.BUSY?ee.resumeAt?(Date.now()-ee.resumeAt+ee.resumeOffset)%m._getOneEffectDuration(w):(Date.now()-ee.startAt+ee.startOffset)%m._getOneEffectDuration(w):void(x&&m._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",w))},m._setOneEffectPosition=function(w,x,ee){var ue=m.audioMixing.sounds[w.soundId];if(ue.state===m.audioMixing.states.BUSY){if(!m._stopAudioMixingBufferSource(w))return void m._handleAudioMixingNoSourceError("_setOneEffectPosition",w,ee);var ne=m._startAudioMixingBufferSource({soundId:w.soundId,filePath:ue.options.filePath,loop:ue.options.loop,cycle:ue.options.cycle,playTime:x});if(!ne){var q="CREATE_BUFFERSOURCE_FAILED";return ee&&ee(q),void v.default.error("[".concat(m.streamId,"] "),q)}ue.source=ne,ue.startAt=Date.now(),ue.startOffset=x,ue.resumeAt=null,ue.resumeOffset=null,ue.pauseOffset=null,ue.pauseAt=null}else{if(ue.state!==m.audioMixing.states.PAUSED)return void m._handleAudioMixingInvalidStateError("_setOneEffectPosition",w,ee);ue.pauseOffset=x}ee&&ee(null)},m.startAudioMixing=function(w,x){var ee=E.report.reportApiInvoke(m.sid,{callback:function(me){if(me)return x&&x(me);m.dispatchEvent({type:"audioMixingPlayed"}),x&&x(null)},getStates:m._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:w});Object(G.checkValidObject)(w,"options");var ue=w.filePath,ye=w.cacheResource,ne=w.cycle,q=w.loop,F=w.playTime,te=w.replace;Object(G.checkValidString)(ue,"filePath",1,Object(_.getParameter)("FILEPATH_LENMAX"),!1),Object(G.checkValidNumber)(F,"playTime",0,1e8),!Object(G.isEmpty)(ne)&&Object(G.checkValidNumber)(ne,"cycle"),!Object(G.isEmpty)(q)&&Object(G.checkValidBoolean)(q,"loop"),!Object(G.isEmpty)(te)&&Object(G.checkValidBoolean)(te,"replace"),!Object(G.isEmpty)(ye)&&Object(G.checkValidBoolean)(ye,"cacheResource");var Te=R()({soundId:-1},w);m._playOneEffect(Te,ee)},m.stopAudioMixing=function(w){var x=E.report.reportApiInvoke(m.sid,{callback:w,getStates:m._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});m._stopOneEffect({soundId:-1},x)},m.pauseAudioMixing=function(w){var x=E.report.reportApiInvoke(m.sid,{callback:w,getStates:m._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return m._pauseOneEffect({soundId:-1},x)},m.resumeAudioMixing=function(w){var x=E.report.reportApiInvoke(m.sid,{callback:function(ee,ue){if(ee)return w&&w(ee);m.dispatchEvent({type:"audioMixingPlayed"}),w&&w(null)},getStates:m._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});m._resumeOneEffect({soundId:-1},x)},m.adjustAudioMixingVolume=function(w){var x=E.report.reportApiInvoke(m.sid,{getStates:m._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(G.checkValidNumber)(w,"volume",0,100),m.audioMixing.sounds[-1].volume=w,m._flushAudioMixingMuteStatus(),x()},m.getAudioMixingDuration=function(){var w=E.report.reportApiInvoke(m.sid,{getStates:m._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),x=m._getOneEffectDuration({soundId:-1});return w(null,x),x},m.getAudioMixingCurrentPosition=function(){var w=E.report.reportApiInvoke(m.sid,{getStates:m._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),x=m._getOneEffectCurrentPosition({soundId:-1},!0);return w(null,x),x},m.setAudioMixingPosition=function(w,x){var ee=E.report.reportApiInvoke(m.sid,{callback:x,options:arguments,tag:"tracer",getStates:m._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(G.checkValidNumber)(w,"position",0,1e8),m._setOneEffectPosition({soundId:-1},w,ee)},m.playEffect=function(w,x){var ee=E.report.reportApiInvoke(m.sid,{callback:function(q){if(q)return x&&x(q);m.dispatchEvent({type:"effectPlayed"}),x&&x(null)},name:"Stream.playEffect",options:w});Object(G.checkValidObject)(w,"options");var ue=w.soundId,ye=w.filePath,ne=w.cycle;Object(G.checkValidNumber)(ue,"soundId",1,1e4),Object(G.checkValidString)(ye,"filePath",0,Object(_.getParameter)("FILEPATH_LENMAX"),!1),!Object(G.isEmpty)(ne)&&Object(G.checkValidNumber)(ne,"cycle"),m._playOneEffect(w,ee)},m.stopEffect=function(w,x){var ee=E.report.reportApiInvoke(m.sid,{callback:x,getStates:m._getOneEffectStates({soundId:w}),name:"Stream.stopEffect"});Object(G.checkValidNumber)(w,"soundId",1,1e4),m._stopOneEffect({soundId:w},ee)},m.stopAllEffects=function(w){var x=E.report.reportApiInvoke(m.sid,{callback:w,name:"Stream.stopAllEffect"}),ee=!1,ue=0,ye=0,ne=function(te){ee||(te?(x(te),ee=!0):ue+=1,ue===ye&&(x(null),ee=!0))};for(var q in m.audioMixing.sounds){var F=m.audioMixing.sounds[q];-1!==F.soundId&&(F.state!==m.audioMixing.states.BUSY&&F.state!==m.audioMixing.states.PAUSED||(ye++,m._stopOneEffect({soundId:q},ne)))}ye||x(null)},m.preloadEffect=function(w,x,ee){var ue=E.report.reportApiInvoke(m.sid,{callback:ee,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(G.checkValidNumber)(w,"soundId",1,1e4),Object(G.checkValidString)(x,"filePath",1,Object(_.getParameter)("FILEPATH_LENMAX"),!1),m._initSoundIfNotExists(w,x),m.audioMixing.buffer[x]?ue(null):m.loadAudioBuffer(x,x,ue)},m.unloadEffect=function(w,x){var ee=E.report.reportApiInvoke(m.sid,{callback:x,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(G.checkValidNumber)(w,"soundId",1,1e4);var ue=m.audioMixing.sounds[w];if(!ue){var ye="SOUND_NOT_EXISTS";return v.default.error(ye,w),void ee(ye)}var ne=ue.options?ue.options.filePath:ue.filePath;if(ne)delete m.audioMixing.buffer[ne],delete m.audioMixing.sounds[w],ee(null);else{var q="SOUND_BUFFER_NOT_FOUND";v.default.error(q,w),ee(q)}},m.pauseEffect=function(w,x){var ee=E.report.reportApiInvoke(m.sid,{callback:x,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return m._pauseOneEffect({soundId:w},ee)},m.pauseAllEffects=function(w){var x=E.report.reportApiInvoke(m.sid,{callback:w,name:"Stream.pauseAllEffects"}),ee=!1,ue=0,ye=0,ne=function(F){ee||(F?(x(F),ee=!0):ue+=1,ue===ye&&(x(null),ee=!0))};for(var q in m.audioMixing.sounds)"-1"!==q&&m.audioMixing.sounds[q].state===m.audioMixing.states.BUSY&&(ye++,m._pauseOneEffect({soundId:q},ne));ye||x(null)},m.resumeEffect=function(w,x){Object(G.checkValidNumber)(w,"soundId",1,1e4);var ee=E.report.reportApiInvoke(m.sid,{callback:x,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return m._resumeOneEffect({soundId:w},ee)},m.resumeAllEffects=function(w){var x=E.report.reportApiInvoke(m.sid,{callback:w,name:"Stream.resumeAllEffects"}),ee=!1,ue=0,ye=0,ne=function(F){ee||(F?(x(F),ee=!0):ue+=1,ue===ye&&(x(null),ee=!0))};for(var q in m.audioMixing.sounds)"-1"!==q&&m.audioMixing.sounds[q].state===m.audioMixing.states.PAUSED&&(ye++,m._resumeOneEffect({soundId:q},ne));ye||x(null)},m.getEffectsVolume=function(){var w=[];for(var x in m.audioMixing.sounds){var ee=m.audioMixing.sounds[x];ee&&"-1"!==x&&w.push({soundId:parseInt(x),volume:ee.volume})}return w},m.setEffectsVolume=function(w,x){var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:x});for(var ue in Object(G.checkValidNumber)(w,"volume",0,100),m.audioMixing.defaultVolume=w,m.audioMixing.sounds){var ye=m.audioMixing.sounds[ue];"-1"!==ue&&(ye.volume=w)}m._flushAudioMixingMuteStatus(),ee(null)},m.setVolumeOfEffect=function(w,x,ee){var ue=E.report.reportApiInvoke(m.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:ee});Object(G.checkValidNumber)(w,"soundId",0,1e4),Object(G.checkValidNumber)(x,"volume",0,100),m._initSoundIfNotExists(w);var ye=m.audioMixing.sounds[w];ye.volume=x,m._flushAudioMixingMuteStatus(),ue(null)},ie.a.addVideoEffectCapability(u),function(m,w){m.videoConstraint={},w.cameraId&&(m.videoConstraint.deviceId={exact:w.cameraId}),w.facingMode&&(m.videoConstraint.facingMode=w.facingMode),m.videoSize&&(m.videoConstraint.width=m.videoSize[0],m.videoConstraint.height=m.videoSize[1]),Object(M.isLegacyChrome)()||(m.videoConstraint.frameRate=30),m.audioConstraint={},w.microphoneId&&(m.audioConstraint.deviceId={exact:w.microphoneId}),Object(M.isLegacyChrome)()||m.audioProcessing&&(void 0!==m.audioProcessing.AGC&&(Object(M.isFireFox)()?m.audioConstraint.autoGainControl=m.audioProcessing.AGC:Object(M.isChrome)()&&(m.audioConstraint.googAutoGainControl=m.audioProcessing.AGC,m.audioConstraint.googAutoGainControl2=m.audioProcessing.AGC)),void 0!==m.audioProcessing.AEC&&(m.audioConstraint.echoCancellation=m.audioProcessing.AEC),void 0!==m.audioProcessing.ANS&&(Object(M.isFireFox)()?m.audioConstraint.noiseSuppression=m.audioProcessing.ANS:Object(M.isChrome)()&&(m.audioConstraint.googNoiseSuppression=m.audioProcessing.ANS))),m.screenConstraint={},w.sourceId&&(m.screenConstraint.sourceId=w.sourceId),w.extensionId&&Object(M.isChrome)()?(m.screenConstraint.extensionId=w.extensionId,m.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:m.screenAttributes.width,maxHeight:m.screenAttributes.height,maxFrameRate:m.screenAttributes.maxFr,minFrameRate:m.screenAttributes.minFr}):(m.screenConstraint.mediaSource="screen",m.screenConstraint.width=m.screenAttributes.width,m.screenConstraint.height=m.screenAttributes.height,m.screenConstraint.frameRate={ideal:m.screenAttributes.maxFr,max:m.screenAttributes.maxFr}),w.mediaSource&&(m.screenConstraint.mediaSource=w.mediaSource),m.setVideoResolution=function(x){var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(x instanceof Array)){var ue=ae(x+="");return ue&&ue.video?(m.videoConstraint=R()(m.videoConstraint,{width:{ideal:ue.video.width},height:{ideal:ue.video.height}}),w.attributes.resolution=ue.attributes.resolution,(ye=m.stream&&m.stream.getVideoTracks&&m.stream.getVideoTracks()[0])&&ye.applyConstraints?(v.default.debug("setVideoResolution applyConstraints",m.videoConstraint),ye.applyConstraints(m.videoConstraint).then(ee).catch(ee)):ee(),!0):(ee("NO_PROFILE_".concat(x)),!1)}var ye,ne=x[0],q=x[1];m.videoConstraint=R()(m.videoConstraint,{width:{ideal:ne},height:{ideal:q}}),w.attributes.resolution="".concat(ne,"x").concat(q),(ye=m.stream&&m.stream.getVideoTracks&&m.stream.getVideoTracks()[0])&&ye.applyConstraints?(v.default.debug("setVideoResolution applyConstraints",m.videoConstraint),ie.a.disableVideoEffect(m).then(function(){return ye.applyConstraints(m.videoConstraint).then(ee).catch(ee)}).then(function(){return ie.a.restoreVideoEffect(m)})):ee()},m.setVideoFrameRate=function(x){var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(M.isFireFox)())return ee("FIREFOX_NOT_SUPPORTED"),!1;if("object"===oe()(x)&&x instanceof Array&&x.length>1){m.videoConstraint=R()(m.videoConstraint,{frameRate:x[0]}),m.attributes.minFrameRate=x[0],m.attributes.maxFrameRate=x[1];var ue=m.stream&&m.stream.getVideoTracks&&m.stream.getVideoTracks()[0];return ue&&ue.applyConstraints?(v.default.debug("setVideoFrameRate applyConstraints",m.videoConstraint),ue.applyConstraints(m.videoConstraint).then(ee).catch(ee)):ee(),!0}return ee("INVALID_PARAM_".concat(JSON.stringify(x))),!1},m.setVideoBitRate=function(x){var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===oe()(x)&&x instanceof Array&&x.length>1?(w.attributes.minVideoBW=x[0],w.attributes.maxVideoBW=x[1],m.connectionSpec&&(m.connectionSpec.minVideoBW=x[0],m.connectionSpec.maxVideoBW=x[1]),m.pc&&m.pc.renegotiate&&m.pc.renegotiate(),ee(),!0):(ee("INVALID_PARAM_".concat(JSON.stringify(x))),!1)},m.setScreenBitRate=function(x){var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===oe()(x)&&x instanceof Array&&x.length>1?(m.screenAttributes.minVideoBW=x[0],m.screenAttributes.maxVideoBW=x[1],ee(),!0):(ee("INVALID_PARAM_".concat(JSON.stringify(x))),!1)},m.setScreenProfile=function(x){var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(G.checkValidEnum)(x,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var ue=ae(x);return ue&&ue.screen?(m.screenConstraint.mandatory?(m.screenConstraint.mandatory.maxWidth=ue.screen.width,m.screenConstraint.mandatory.maxHeight=ue.screen.height,ue.screen.frameRate&&ue.screen.frameRate.min&&ue.screen.frameRate.max&&(m.screenConstraint.mandatory.minFrameRate=ue.screen.frameRate.min,m.screenConstraint.mandatory.maxFrameRate=ue.screen.frameRate.max)):m.screenConstraint=R()(m.screenConstraint,ue.screen),m.screenAttributes.width=ue.screen.width,m.screenAttributes.height=ue.screen.height,m.screenAttributes.minFr=ue.screen.frameRate.min,m.screenAttributes.maxFr=ue.screen.frameRate.max,ee(),!0):(ee("NO_SCREEN_PROFILE_".concat(JSON.stringify(x))),!1)},m.setVideoProfileCustom=function(x){var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});m.setVideoResolution(x[0]),m.setVideoFrameRate([x[1],x[1]]),m.setVideoBitRate([x[2],x[2]]),ee()},m.setVideoProfileCustomPlus=function(x){var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});m.setVideoResolution([x.width,x.height]),w.attributes.resolution="".concat(x.width,"x").concat(x.height),m.setVideoFrameRate([x.framerate,x.framerate]),m.setVideoBitRate([x.bitrate,x.bitrate]),ee()},m.setVideoProfile=function(x){var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),ue=ae(x);if(!ue){var ye="Invalid Profile ".concat(x);throw new Error(ye)}if(m.profile=x,ue&&ue.video){m.profile=ue.profileName,m.videoConstraint=R()(m.videoConstraint,ue.video),m.connectionSpec&&ue.attributes.maxVideoBW&&(m.connectionSpec.minVideoBW=ue.attributes.minVideoBW,m.connectionSpec.maxVideoBW=ue.attributes.maxVideoBW),Object(M.isEdge)()&&(m.videoConstraint.frameRate.max=60),Object(M.isFireFox)()&&(m.videoConstraint.frameRate=30),w.attributes=R()(w.attributes,ue.attributes),m.pc&&m.pc.renegotiate&&m.pc.renegotiate();var ne=m.stream&&m.stream.getVideoTracks&&m.stream.getVideoTracks()[0];return ne&&ne.applyConstraints?(v.default.debug("setVideoProfile applyConstraints",m.videoConstraint),ie.a.disableVideoEffect(m).then(function(){return ne.applyConstraints(m.videoConstraint)}).then(function(){return ie.a.restoreVideoEffect(m)}).then(function(q){return new Promise(function(F,te){ee(q),setTimeout(function(){Object(S.vsResHack)(m.stream,function(Te,me){m.videoWidth=Te,m.videoHeight=me,F()},function(Te){v.default.warning("[".concat(m.streamId,"] vsResHack failed: "),Te),te()})},2500)})}).catch(ee)):ee(),!0}return ee("INVALID_VIDEO_PROFILE_".concat(x)),!1},m.setAudioProfile=function(x){var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(G.checkValidEnum)(x,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),m.audioProfile=x;var ue=C(x);return m.highQuality=ue.highQuality,m.stereo=ue.stereo,m.speech=ue.speech,m.lowQuality=ue.lowQuality,m.stereo&&Object(M.isChrome)()&&(m.audioConstraint.googAutoGainControl=!1,m.audioConstraint.googAutoGainControl2=!1,m.audioConstraint.echoCancellation=!1,m.audioConstraint.googNoiseSuppression=!1),ee(),!0},m.setVideoEncoderConfiguration=function(x){Object(G.checkValidObject)(x,"config");var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.setVideoEncoderConfiguration",options:x,tag:"tracer"});x.resolution&&(Object(G.checkValidNumber)(x.resolution.width,"config.resolution.width"),Object(G.checkValidNumber)(x.resolution.height,"config.resolution.height"),m.setVideoResolution([x.resolution.width,x.resolution.height])),x.frameRate&&(Object(G.checkValidNumber)(x.frameRate.min,"config.frameRate.min"),Object(G.checkValidNumber)(x.frameRate.max,"config.frameRate.max"),m.setVideoFrameRate([x.frameRate.min,x.frameRate.max])),x.bitrate&&(Object(G.checkValidNumber)(x.bitrate.min,"config.bitrate.min",1,1e7),Object(G.checkValidNumber)(x.bitrate.max,"config.bitrate.max",1,1e7),m.setVideoBitRate([x.bitrate.min,x.bitrate.max])),ee()},m.getSupportedProfile=function(x){var ee=E.report.reportApiInvoke(m.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:x});if(!m.local){var ue="ONLY_LOCAL_STREAM_SUPPORTED";return v.default.error(ue),ee(ue)}if(!m.stream)return v.default.error(ue="STREAM_NOT_INIT"),ee(ue);if(!m.stream.getVideoTracks)return v.default.error(ue="TRACK_NOT_SUPPORT"),ee(ue);var ye=m.stream.getVideoTracks()[0];if(!ye)return v.default.error(ue="NO_VIDEO_TRACK_FOUND"),ee(ue);if(!ye.getCapabilities)return v.default.error(ue="GETCAPABILITY_NOT_SUPPORT"),ee(ue);var ne=ye.getCapabilities(),q=J(ne);return ee(null,q)}}(u,y),u.getId=function(){return u.streamId},u.getUserId=function(){return u.userId},u.checkDualStreamEnabled=function(){return!(!Object(_.getParameter)("DUALSTREAM_OPERATION_CHECK")||!u.isDualStream)&&(v.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED")},u.setUserId=function(m){var w=E.report.reportApiInvoke(u.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});u.userId&&v.default.warning("[".concat(u.streamId,"] Stream.userId ").concat(u.userId," => ").concat(m)),u.userId=m,w()},u.getAttributes=function(){return y.screen?u.screenAttributes:y.attributes},u.hasAudio=function(){return!!u.audio},u.hasVideo=function(){return!!u.video},u.hasScreen=function(){return!!u.screen},u.hasScreenAudio=function(){return!!u.screenAudio},u.isVideoOn=function(){return(u.hasVideo()||u.hasScreen())&&!u.userMuteVideo},u.isAudioOn=function(){return u.hasAudio()&&!u.userMuteAudio},u.init=function(m,w){var x=E.report.reportApiInvoke(u.sid,{callback:function(ne,q){if(ne)return w&&w(ne);m&&m(q)},name:"Stream.init",options:arguments,tag:"tracer"}),ee=((new Date).getTime(),arguments[2]);if(void 0===ee&&(ee=2),!0===u.initialized)return x({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==u.local)return x({type:"warning",msg:"STREAM_NOT_LOCAL"});var ue=Math.random().toString().slice(3);u._streamInitID=ue,u.videoSource?u.videoName="videoSource":u.video&&(u.videoName=P.a.searchDeviceNameById(y.cameraId)||"default"),u.audioSource?u.audioName="audioSource":u.audio&&(u.audioName=P.a.searchDeviceNameById(y.microphoneId)||"default"),u.screen&&(u.screenName=y.extensionId||"default");try{if(y.audio||y.video||y.screen||y.screenAudio||y.videoSource||y.audioSource){v.default.debug("[".concat(u.streamId,"] Requested access to local media"));var ye={streamId:u.streamId};y.videoSource?ye.videoSource=y.videoSource:y.screen?ye.screen=u.screenConstraint:y.video&&(ye.video=u.videoConstraint),y.audioSource?ye.audioSource=y.audioSource:y.screenAudio?ye.screenAudio=y.screenAudio:y.audio&&(ye.audio=u.audioConstraint),Object(I.b)(ye,function(ne){if(ye.screenAudio&&!ne.getAudioTracks()[0]&&v.default.warning("[".concat(u.streamId,"] Audio sharing is not selected")),ye.screen&&v.default.debug("[".concat(u.streamId,"] User has granted access to screen sharing")),(ye.video||ye.audio)&&v.default.debug("[".concat(u.streamId,"] User has granted access to local media")),null===u._streamInitID){ne.getTracks().forEach(function(F){F.stop()});var q={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return v.default.error(u.streamId,q.info),void x(q)}if(u._streamInitID!==ue)return ne.getTracks().forEach(function(F){F.stop()}),v.default.error(u.streamId,(q={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"}).info),void x(q);u.dispatchEvent({type:"accessAllowed"}),u.stream=ne,u.initialized=!0,u.reloadDeviceName(),u.hasVideo()&&Object(S.vsResHack)(ne,function(F,te){u.videoWidth=F,u.videoHeight=te},function(F){v.default.warning("[".concat(u.streamId,"] vsResHack failed: "),F)}),y.screen&&u.stream&&u.stream.getVideoTracks()[0]&&(u.stream.getVideoTracks()[0].onended=function(){u.dispatchEvent({type:"stopScreenSharing"})}),u.stream&&u.stream.getTracks&&u.stream.getTracks().forEach(function(F){F&&!F.onended&&(F.onended=K),"video"===F.kind&&y.optimizationMode&&(F.contentHint=y.optimizationMode,F.contentHint===y.optimizationMode&&v.default.debug("[".concat(u.streamId,"] set content hint to"),y.optimizationMode))}),x()},function(ne){var q={type:"error",info:null};switch(ne&&(q.msg=ne.name||ne.code||ne,ne.message&&(q.info=ne.message),ne.code&&(q.info?q.info+=". "+ne.code:q.info=" "+ne.code),ne.constraint&&(q.info?q.info+=". Constraint: "+ne.constraint:q.info="constraint: "+ne.constraint)),q.msg){case"Starting video failed":case"TrackStartError":if(u.videoConstraint&&(delete u.videoConstraint.width,delete u.videoConstraint.height),ee>0)return void setTimeout(function(){u.init(function(te){return x(te)},x,ee-1)},1);q.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":q.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":q.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":q.msg="PERMISSION_DENIED",u.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":u.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":q.msg="CONSTRAINT_NOT_SATISFIED";break;default:q.msg||(q.msg="UNDEFINED")}var F="Media access ".concat(q.msg).concat(q.info?": "+q.info:"");v.default.error("[".concat(u.streamId,"] "),F),x(q)})}else x({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(ne){v.default.error("[".concat(u.streamId,"] Stream init: "),ne),x({type:"error",msg:ne.message||ne})}},u.reloadDeviceName=function(){if(u.stream){if(u.stream.getVideoTracks){var m=u.stream.getVideoTracks()[0];m&&m.label&&(u.videoName=m.label)}if(u.stream.getAudioTracks){var w=u.stream.getAudioTracks()[0];w&&w.label&&(u.audioName=w.label)}}},u.close=function(){var m=E.report.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(v.default.debug("[".concat(u.streamId,"] Close stream with id"),u.streamId),u._originStream)try{u._originStream.getTracks().map(function(ue){return ue.stop()})}catch(ue){}if(void 0!==u.stream){var w=u.stream.getTracks();for(var x in w)w.hasOwnProperty(x)&&(w[x].stop(),w[x].onended=null);!u.isLowStream&&u.local?ie.a.disableVideoEffect(u).then(function(){u.stream=void 0}):(u.stream&&u.stream.clean&&u.stream.clean(),u.stream=void 0)}if(u._originStream){for(var x in console.log("clear _originStream"),w=u._originStream.getTracks())w.hasOwnProperty(x)&&(w[x].stop(),w[x].onended=null,console.log("clear onended"));!u.isLowStream&&u.local?ie.a.disableVideoEffect(u).then(function(){u._originStream=void 0}):(u._originStream&&u._originStream.clean&&u._originStream.clean(),u._originStream=void 0)}if(Object(M.isSafari)()&&u.pc&&u.pc.peerConnection&&u.pc.peerConnection.removeTrack&&u.pc.peerConnection.getSenders){var ee=u.pc.peerConnection.getSenders();ee.forEach(function(ue){ue&&(v.default.debug("[".concat(u.streamId,"] Remove Track"),ue),u.pc.peerConnection.removeTrack(ue))})}u.local&&(u.initialized=!1),u._streamInitID=null,u._onAudioMute=void 0,u._onAudioUnmute=void 0,u._onVideoMute=void 0,u._onVideoUnmute=void 0,u.lowStream&&u.lowStream.close(),u.player&&u.player.video&&u.player.video.srcObject&&(u.player.video.srcObject=null),u.player&&u.player.audio&&u.player.audio.srcObject&&(u.player.audio.srcObject=null),m()},u.enableAudio=function(){var m,w=E.report.reportApiInvoke(u.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return v.default.deprecate("[".concat(u.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),u.userMuteAudio||v.default.warning("[".concat(u.streamId,"] User already enableAudio")),u.userMuteAudio=!1,w(null,m=!u.peerMuteAudio&&u._unmuteAudio()),m},u.disableAudio=function(){var m=E.report.reportApiInvoke(u.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});v.default.deprecate("[".concat(u.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),u.userMuteAudio&&v.default.warning("[".concat(u.streamId,"] User already disableAudio")),u.userMuteAudio=!0;var w=u._muteAudio();return m(null,w),w},u.enableVideo=function(){var m,w=E.report.reportApiInvoke(u.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return v.default.deprecate("[".concat(u.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),u.userMuteVideo||v.default.warning("[".concat(u.streamId,"] User already enableVideo")),u.userMuteVideo=!1,u.lowStream&&(u.lowStream.userMuteVideo=!1),w(null,m=!u.peerMuteVideo&&u._unmuteVideo()),m},u.disableVideo=function(){var m=E.report.reportApiInvoke(u.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});v.default.deprecate("[".concat(u.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),u.userMuteVideo&&v.default.warning("[".concat(u.streamId,"] User already disableVideo")),u.userMuteVideo=!0,u.lowStream&&(u.lowStream.userMuteVideo=!0);var w=u._muteVideo();return m(null,w),w},u.unmuteAudio=function(){var m,w=E.report.reportApiInvoke(u.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return u.userMuteAudio||v.default.warning("[".concat(u.streamId,"] User already unmuteAudio")),u.userMuteAudio=!1,w(null,m=!u.peerMuteAudio&&u._unmuteAudio()),m},u.muteAudio=function(){var m=E.report.reportApiInvoke(u.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});u.userMuteAudio&&v.default.warning("[".concat(u.streamId,"] User already muteAudio")),u.userMuteAudio=!0;var w=u._muteAudio();return m(null,w),w},u.unmuteVideo=function(){var m,w=E.report.reportApiInvoke(u.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return u.userMuteVideo||v.default.warning("[".concat(u.streamId,"] User already unmuteVideo")),u.userMuteVideo=!1,u.lowStream&&(u.lowStream.userMuteVideo=!1),w(null,m=!u.peerMuteVideo&&u._unmuteVideo()),m},u.muteVideo=function(){var m=E.report.reportApiInvoke(u.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});u.userMuteVideo&&v.default.warning("[".concat(u.streamId,"] User already muteVideo")),u.userMuteVideo=!0,u.lowStream&&(u.lowStream.userMuteVideo=!0);var w=u._muteVideo();return m(null,w),w},u._unmuteAudio=function(){return v.default.debug("[".concat(u.streamId,"] Unmuted audio stream with id "),u.streamId),u._flushAudioMixingMuteStatus(!1),!(!u.hasAudio()||!u.initialized||void 0===u.stream||!0===u.stream.getAudioTracks()[0].enabled||(u._onAudioUnmute&&u._onAudioUnmute(),u.pc&&(u.pc.isAudioMute=!1),u.stream.getAudioTracks()[0].enabled=!0,0))},u._isAudioMuted=function(){if(u.stream&&u.hasAudio()){var m=u.stream.getAudioTracks();return m.length>0&&!m[0].enabled}return!1},u._isVideoMuted=function(){if(u.stream&&u.hasVideo()){var m=u.stream.getVideoTracks();return m.length>0&&!m[0].enabled}return!1},u._muteAudio=function(){return v.default.debug("[".concat(u.streamId,"] Muted audio stream with id "),u.streamId),u._flushAudioMixingMuteStatus(!0),!!(u.hasAudio()&&u.initialized&&void 0!==u.stream&&u.stream.getAudioTracks()[0].enabled)&&(u._onAudioMute&&u._onAudioMute(),u.pc&&(u.pc.isAudioMute=!0),u.stream.getAudioTracks()[0].enabled=!1,u.sid&&E.report.audioSendingStopped(u.sid,{succ:!0,reason:"muteAudio"}),!0)},u._unmuteVideo=function(){return v.default.debug("[".concat(u.streamId,"] Unmuted video stream with id"),u.streamId),!(!u.initialized||void 0===u.stream||!u.stream.getVideoTracks().length||!0===u.stream.getVideoTracks()[0].enabled||(u._onVideoUnmute&&u._onVideoUnmute(),u.pc&&(u.pc.isVideoMute=!1),u.stream.getVideoTracks()[0].enabled=!0,u.lowStream&&u.lowStream._unmuteVideo(),0))},u._muteVideo=function(){return v.default.debug("[".concat(u.streamId,"] Muted video stream with id"),u.streamId),!!(u.initialized&&void 0!==u.stream&&u.stream.getVideoTracks().length&&u.stream.getVideoTracks()[0].enabled)&&(u._onVideoMute&&u._onVideoMute(),u.pc&&(u.pc.isVideoMute=!0),u.stream.getVideoTracks()[0].enabled=!1,u.lowStream&&u.lowStream._muteVideo(),u.sid&&E.report.videoSendingStopped(u.sid,{succ:!0,reason:"muteVideo"}),!0)},u.addTrack=function(m){var w=E.report.reportApiInvoke(u.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"});if(u.pc&&u.pc.addTrack(m,u.stream),"audio"==m.kind){u._cleanupAudioMixing();var x=new MediaStream;u.userMuteAudio&&(m.enabled=!1),x.addTrack(m);var ee=u.stream.getVideoTracks()[0];ee&&x.addTrack(ee),u.audio=!0,y.audio=!0,u.stream=x,u.audioLevelHelper=null,u.player&&u.player.video&&(u.player.video.srcObject=u.stream)}else u.userMuteVideo&&(m.enabled=!1),u.stream.addTrack(m),u.video=!0,y.video=!0;m.onended||(m.onended=K),w()},u.removeTrack=function(m){var w=E.report.reportApiInvoke(u.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"});u.pc&&u.pc.removeTrack(m,u.stream),u.stream.removeTrack(m),u._cleanupAudioMixing(),"audio"===m.kind?(u.audio=!1,y.audio=!1):(u.video=!1,y.video=!1),u.audioLevelHelper=null,"live"==m.readyState&&(m.stop(),v.default.debug("[".concat(u.streamId,"] Track ").concat(m.kind," Stopped"))),w()},u.setAudioOutput=function(m,w,x){var ee=E.report.reportApiInvoke(u.sid,{callback:function(ue,ye){if(ue)return x&&x(ue);w&&w(ye)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(G.isValidString)(m,1,255)?(u.audioOutput=m,u.player?void u.player.setAudioOutput(m,function(){return ee()},ee):ee()):(v.default.error("[".concat(u.streamId,"] setAudioOutput Invalid Parameter"),m),ee(p.default.INVALID_PARAMETER))},u.play=function(m,w,x){"function"==typeof w&&(x=w,w=null),v.default.debug("[".concat(u.streamId,"] play()."),m,w);var ee=E.report.reportApiInvoke(u.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:x});if(Object(G.checkValidString)(m,"elementID"),Object(G.isEmpty)(w)||(Object(G.isEmpty)(w.fit)||Object(G.checkValidEnum)(w.fit,"fit",["cover","contain"]),Object(G.isEmpty)(w.muted)||Object(G.checkValidBoolean)(w.muted,"muted")),u.player)v.default.warning("[".concat(u.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),u.resume().then(function(){ee(null)}).catch(ee);else{u.elementID=m,u.playOptions=w,!u.local||u.video||u.screen?(u.player=new H({id:u.getId(),stream:u,elementID:m,options:w}),u.local&&ie.a.applyEffectInPlayer(u)):u.hasAudio()&&(u.player=new H({id:u.getId(),stream:u,elementID:m,options:w}));var ue={video:null,audio:null},ye=function ne(q){if(ue[q.mediaType]=q,ue.video&&ue.audio)if(u.removeEventListener("player-status-change",ne),ue.video.isErrorState||ue.audio.isErrorState){var F=ue.video.isErrorState?ue.video:ue.audio;ee({isErrorState:!0,status:F.status,reason:F.reason,video:ue.video,audio:ue.audio})}else ee("aborted"===ue.video.status&&"aborted"===ue.audio.status?{status:"aborted",reason:"stop",video:ue.video,audio:ue.audio}:null)};u.on("player-status-change",ye),u.audioOutput&&u.player.setAudioOutput(u.audioOutput),void 0!==u.audioLevel&&u.player.setAudioVolume(u.audioLevel),u._flushAudioMixingMuteStatus(!1)}},u.stop=function(){var m=E.report.reportApiInvoke(u.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});v.default.debug("[".concat(u.streamId,"] Stop stream player with id "),u.streamId),u.player?(ie.a.removeEffectFromLocalPlayer(u),u.player.destroy(),delete u.player):v.default.error("[".concat(u.streamId,"] Stream.stop(): Stream is not playing")),u._flushAudioMixingMuteStatus(!0),m()},u.isPlaying=function(){return!!u.player},u.isPaused=function(){return!(!u.player||!(u.player.video&&u.player.video.paused&&u.player.mediaElemExists(u.player.video)||u.player.audio&&u.player.audio.paused&&u.player.mediaElemExists(u.player.audio)))},u.resume=function(){var m,w;return u.player?(u.player.video&&u.player.video.play&&(m=u.player.video.play()),m=m||Promise.resolve(),u.player.audio&&u.player.audio.play&&(w=u.player.audio.play()),w=w||Promise.resolve(),Promise.all([m,w])):Promise.reject("NO_PLAYER_FOUND")},u.getVideoTrack=function(){var m=E.report.reportApiInvoke(u.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(u.stream&&u.stream.getVideoTracks){var w=u.stream.getVideoTracks()[0];if(w)return v.default.info("[".concat(u.streamId,"] getVideoTrack"),w),m(),w}v.default.info("[".concat(u.streamId,"] getVideoTrack None")),m(null,"getVideoTrack None")},u.getAudioTrack=function(){var m=E.report.reportApiInvoke(u.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(u.stream&&u.stream.getAudioTracks){var w=u.stream.getAudioTracks()[0];if(w)return v.default.info("[".concat(u.streamId,"] getAudioTracks"),w),m(),w}v.default.info("[".concat(u.streamId,"] getAudioTracks None")),m(null,"getAudioTracks None")},u._hasVideoTracks=function(){return!!(u.stream&&u.stream.getVideoTracks&&u.stream.getVideoTracks()[0])},u._hasAudioTracks=function(){return!!(u.stream&&u.stream.getAudioTracks&&u.stream.getAudioTracks()[0])},u._replaceMediaStreamTrack=function(m,w,x){if(u.stream){if("video"==m.kind){if(ue=u.stream.getVideoTracks()[0])return u.userMuteVideo&&(m.enabled=!1),u.stream.removeTrack(ue),u.stream.addTrack(m),v.default.debug("[".concat(u.streamId,"] _replaceMediaStreamTrack ").concat(m.kind," SUCCESS")),"live"==ue.readyState&&(ue.stop(),v.default.debug("[".concat(u.streamId,"] Track ").concat(ue.kind," Stopped"))),w&&w();var ee="MEDIASTREAM_TRACK_NOT_FOUND";return v.default.error("[".concat(u.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(m.kind)),x(ee)}if("audio"==m.kind){var ue;if(ue=u.stream.getAudioTracks()[0]){u.userMuteAudio&&(m.enabled=!1);var ye=new MediaStream;ye.addTrack(m);var ne=u.stream&&u.stream.getVideoTracks()[0];return ne&&ye.addTrack(ne),u.stream=ye,u.audioLevelHelper=null,u.player&&u.player.video&&(u.player.video.srcObject=u.stream),v.default.debug("[".concat(u.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==ue.readyState&&(ue.stop(),v.default.debug("[".concat(u.streamId,"] Track ").concat(ue.kind," Stopped"))),w&&w()}return ee="MEDIASTREAM_TRACK_NOT_FOUND",v.default.error("[".concat(u.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(m.kind)),x(ee)}return ee="INVALID_TRACK_TYPE",v.default.error("[".concat(u.streamId,"] _replaceMediaStreamTrack ").concat(ee," ").concat(m.kind)),x&&x(ee)}return ee="NO_STREAM_FOUND",v.default.error("[".concat(u.streamId,"] _replaceMediaStreamTrack ").concat(ee)),x&&x(ee)},u.replaceTrack=function(m,w,x){var ee=E.report.reportApiInvoke(u.sid,{callback:function(ue,ye){if(ue)return x&&x(ue);w&&w(ye)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});return m&&m.kind?(u._cleanupAudioMixing(),m.onended||(m.onended=K),u.pc&&u.pc.hasSender&&u.pc.hasSender(m.kind)?void u.pc.replaceTrack(m,function(){return v.default.debug("[".concat(u.streamId,"] PeerConnection.replaceTrack ").concat(m.kind," SUCCESS")),u._replaceMediaStreamTrack(m,function(ue){return ee(null,ue)},ee)},function(ue){return v.default.error("[".concat(u.streamId,"] PeerConnection.replaceTrack ").concat(m.kind," Failed ").concat(ue)),ee(ue)}):u._replaceMediaStreamTrack(m,function(ue){return ee(null,ue)},ee)):ee("INVALID_TRACK")},u.setAudioVolume=function(m){var w=E.report.reportApiInvoke(u.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(G.checkValidNumber)(m,"level",0,100),u.audioLevel=m,u.player&&u.player.setAudioVolume(m),w()},u.getStats=function(m,w,x){var ee=[];ee.push(u._getPCStats(x)),ee.push(new Promise(function(ue){var ye={};u.pc&&u.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(Object(B.b)(ye,"videoReceiveResolutionHeight",u.videoHeight),Object(B.b)(ye,"videoReceiveResolutionWidth",u.videoWidth)):u.pc&&!u.pc.isSubscriber&&((Object(M.isSafari)()||Object(M.isFireFox)())&&(Object(B.b)(ye,"videoSendResolutionHeight",u.videoHeight),Object(B.b)(ye,"videoSendResolutionWidth",u.videoWidth)),(Object(M.isSafari)()||Object(M.isFireFox)())&&u.uplinkStats&&Object(B.b)(ye,"videoSendPacketsLost",u.uplinkStats.uplink_cumulative_lost)),ue(ye)})),ee.push(new Promise(function(ue){var ye={};return u.traffic_stats&&u.pc&&u.pc.isSubscriber?(Object(B.b)(ye,"accessDelay",u.traffic_stats.access_delay),Object(B.b)(ye,"endToEndDelay",u.traffic_stats.e2e_delay),Object(B.b)(ye,"videoReceiveDelay",u.traffic_stats.video_delay),Object(B.b)(ye,"audioReceiveDelay",u.traffic_stats.audio_delay)):u.traffic_stats&&u.pc&&!u.pc.isSubscriber&&Object(B.b)(ye,"accessDelay",u.traffic_stats.access_delay),ue(ye)})),Promise.all(ee).then(function(ue){for(var ye={},ne=ue.length-1;ne>=0;ne--){var q=ue[ne];R()(ye,q)}m&&setTimeout(m.bind(u,ye),0)}).catch(function(ue){w&&setTimeout(w.bind(u,ue),0)})},u._getPCStats=function(m){return new Promise(function(w,x){if(!u.pc||"established"!==u.pc.state||!u.pc.getStats)return x("PEER_CONNECTION_NOT_ESTABLISHED");u.pc.getStats(function(ee){if(!u.pc||"established"!==u.pc.state||!u.pc.getStats)return x("PEER_CONNECTION_STATE_CHANGE");var ue=u.pc.isSubscriber?Object(B.c)(ee):Object(B.a)(ee);return w(ue)},m)}).then(function(w){return u.pc.isSubscriber?(Object(M.isFireFox)()||Object(M.isSafari)())&&(w.videoReceiveResolutionHeight&&"0"!==w.videoReceiveResolutionHeight||w.videoReceiveResolutionWidth&&"0"!==w.videoReceiveResolutionWidth||(Object(B.b)(w,"videoReceiveResolutionHeight",u.videoHeight),Object(B.b)(w,"videoReceiveResolutionWidth",u.videoWidth))):((Object(M.isSafari)()||Object(M.isFireFox)())&&(w.videoSendResolutionHeight&&"0"!==w.videoSendResolutionHeight||w.videoSendResolutionWidth&&"0"!==w.videoSendResolutionWidth||(Object(B.b)(w,"videoSendResolutionHeight",u.videoHeight),Object(B.b)(w,"videoSendResolutionWidth",u.videoWidth))),(Object(M.isSafari)()||Object(M.isFireFox)())&&u.uplinkStats&&Object(B.b)(w,"videoSendPacketsLost",u.uplinkStats.uplink_cumulative_lost)),Promise.resolve(w)})},u.getAudioLevel=function(){if(u.audioLevelHelper)return u.audioLevelHelper.getAudioLevel();if(u.stream){if(0!==u.stream.getAudioTracks().length)return u.audioLevelHelper=new S.audioLevelHelper(u.stream),u.audioLevelHelper.getAudioLevel();v.default.warning("[".concat(u.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else v.default.warning("[".concat(u.streamId,"] can't get audioLevel beacuse no stream exist"))},u.setVideoProfile("480p_1"),u._switchVideoDevice=function(m,w,x){if(m===u.cameraId)return w&&w();var ee={video:R()({},u.videoConstraint,{deviceId:{exact:m}}),audio:!1};v.default.debug("[".concat(u.streamId,"] ").concat(ee)),Object(I.b)(ee,function(ue){try{var ye=function(){u.isPlaying()&&(u.stop(),u.elementID&&u.play(u.elementID,u.playOptions)),u.cameraId=m,u.videoConstraint.deviceId={exact:m},u.userMuteVideo&&(u.stream.getVideoTracks()[0].enabled=!1),ie.a.restoreVideoEffect(u).then(function(){w&&w()})};ie.a.disableVideoEffect(u).then(function(){var ne=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(ne=!0),ne?u.replaceTrack(ue.getVideoTracks()[0],ye,x):(u.removeTrack(u.stream.getVideoTracks()[0]),u.addTrack(ue.getVideoTracks()[0]),ye())})}catch(ne){return x&&x(ne)}},function(ue){return x&&x(ue)})},u._switchAudioDevice=function(m,w,x){if(m===u.microphoneId)return w&&w();var ee={video:!1,audio:R()({},u.audioConstraint,{deviceId:{exact:m}})};v.default.debug("[".concat(u.streamId,"] "),ee),Object(I.b)(ee,function(ue){var ye=function(){u._cleanupAudioMixing(),u.userMuteAudio&&(u.stream.getAudioTracks()[0].enabled=!1),u.isPlaying()&&(u.stop(),u.elementID&&u.play(u.elementID,u.playOptions)),u.microphoneId=m,u.audioConstraint.deviceId={exact:m},w&&w()};try{var ne=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(ne=!0),ne?u.replaceTrack(ue.getAudioTracks()[0],ye,x):(u.removeTrack(u.stream.getAudioTracks()[0]),u.addTrack(ue.getAudioTracks()[0]),ye())}catch(q){return x&&x(q)}},function(ue){return x&&x(ue)})},u.switchDevice=function(m,w,x,ee){var ue=E.report.reportApiInvoke(u.sid,{callback:function(me,fe){if(me)return ee&&ee(me);x&&x(fe)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(G.checkValidString)(w,"deviceId");var ye=function(){return u.inSwitchDevice=!1,ue()},ne=function(me){u.inSwitchDevice=!1,v.default.error("[".concat(u.streamId,"] "),me),ue(me)};if(u.inSwitchDevice)return ue("Device switch is in process.");if(u.inSwitchDevice=!0,!u.local)return ne("Only the local stream can switch the device.");if(u.screen&&"video"===m)return ne("The device cannot be switched during screen-sharing.");if(!u.video&&"video"===m)return ne("Video track not exist.");if(!u.audio&&"audio"===m)return ne("Audio track not exist.");if(u.videoSource||u.audioSource)return ne("The device cannot be switched when using videoSource or audioSource.");var q=!1;for(var F in u.audioMixing.sounds){var te=u.audioMixing.sounds[F];if(te.state!==u.audioMixing.states.IDLE){q=!0;break}}var Te=u.audioMixing.audioContextInited;if(Te&&q)return ne("The device cannot be switched when using audio Mixing.");P.a.getDeviceById(w,function(){if("video"===m)u._switchVideoDevice(w,ye,ne);else{if("audio"!==m)return ne("Invalid type.");u._switchAudioDevice(w,ye,ne)}},function(){return ne("The device does not exist.")})},u},W=function(y){var u=E.report.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer",getStates:function(){return{audioTrackEnable:y&&y.audioSource?y.audioSource.enabled:null,videoTrackEnable:y&&y.videoSource?y.videoSource.enabled:null}}});Object(G.checkValidObject)(y,"StreamSpec");var K=y.streamID,m=y.audio,w=y.video,x=y.screen,ee=y.screenAudio,ue=y.cameraId,ye=y.facingMode,ne=y.microphoneId,q=y.mirror,F=y.extensionId,te=y.mediaSource,Te=y.audioProcessing,me=y.optimizationMode;if(!Object(G.isEmpty)(K)&&!Object(S.is32Uint)(K)&&!Object(G.isValidString)(K,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(G.checkValidBoolean)(m,"audio"),Object(G.checkValidBoolean)(w,"video"),Object(G.isEmpty)(x)||Object(G.checkValidBoolean)(x,"screen"),Object(G.isEmpty)(ee)||Object(G.checkValidBoolean)(ee,"screenAudio"),Object(G.isEmpty)(ue)||Object(G.checkValidString)(ue,"cameraId",0,255,!1),Object(G.isEmpty)(ye)||Object(G.checkValidEnum)(ye,"facingMode",["user","environment","left","right"]),Object(G.isEmpty)(ne)||Object(G.checkValidString)(ne,"microphoneId",0,255,!1),Object(G.isEmpty)(F)||Object(G.checkValidString)(F,"extensionId"),Object(G.isEmpty)(te)||Object(G.checkValidEnum)(te,"mediaSource",["screen","application","window"]),Object(G.isEmpty)(q)||Object(G.checkValidBoolean)(q,"mirror"),!Object(G.isEmpty)(Te)){var fe=Te.AGC,Ne=Te.AEC,je=Te.ANS;Object(G.isEmpty)(fe)||Object(G.checkValidBoolean)(fe,"AGC"),Object(G.isEmpty)(Ne)||Object(G.checkValidBoolean)(Ne,"AEC"),Object(G.isEmpty)(je)||Object(G.checkValidBoolean)(je,"ANS")}Object(G.isEmpty)(me)||Object(G.checkValidEnum)(me,"optimizationMode",["detail","motion"]),v.default.debug("Create stream"),!0===ee&&!0===m&&v.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time"),y.screen&&!me&&(y.optimizationMode="detail");var Ue=d(y);return u(),Ue}},function(ge,le,U){"use strict";U.d(le,"a",function(){return ae}),U.d(le,"b",function(){return J});var D=U(5),R=U(7),M=U.n(R),T=U(12),N=U.n(T),v=U(17),A=U.n(v),p=U(0),_=U(15),E=U(2);function H(C,d){(null==d||d>C.length)&&(d=C.length);for(var W=0,y=new Array(d);W<d;W++)y[W]=C[W];return y}function B(C){if("undefined"==typeof Symbol||null==C[Symbol.iterator]){if(Array.isArray(C)||(C=function(w,x){if(w){if("string"==typeof w)return P(w,x);var ee=Object.prototype.toString.call(w).slice(8,-1);if("Object"===ee&&w.constructor&&(ee=w.constructor.name),"Map"===ee||"Set"===ee)return Array.from(ee);if("Arguments"===ee||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return P(w,x)}}(C))){var d=0,W=function(){};return{s:W,n:function(){return d>=C.length?{done:!0}:{done:!1,value:C[d++]}},e:function(w){throw w},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var y,u,K=!0,m=!1;return{s:function(){y=C[Symbol.iterator]()},n:function(){var w=y.next();return K=w.done,w},e:function(w){m=!0,u=w},f:function(){try{K||null==y.return||y.return()}finally{if(m)throw u}}}}function P(C,d){(null==d||d>C.length)&&(d=C.length);for(var W=0,y=new Array(d);W<d;W++)y[W]=C[W];return y}var V=U(47),ie=U.n(V),de=U(26),oe=(U(4),103),ae=function(C){var d={};if(d.clientId=C.clientId,C.session_id=oe+=1,"undefined"==typeof window||!window.navigator)throw p.default.error("["+d.streamId+"]["+d.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(d.browser="mozilla",d=function(C){var q,d={},W=(mozRTCPeerConnection,mozRTCSessionDescription),y=!1;d.uid=C.uid,d.isVideoMute=C.isVideoMute,d.isAudioMute=C.isAudioMute,d.isSubscriber=C.isSubscriber,d.clientId=C.clientId,d.filterStatsCache=[],d.originStatsCache=[],d.lastTimeGetStats=null,d.pc_config={iceServers:[]},C.iceServers instanceof Array?C.iceServers.map(function(q){0===q.url.indexOf("stun:")&&d.pc_config.iceServers.push({url:q.url})}):(C.stunServerUrl&&(C.stunServerUrl instanceof Array?C.stunServerUrl.map(function(q){"string"==typeof q&&""!==q&&d.pc_config.iceServers.push({url:q})}):"string"==typeof C.stunServerUrl&&""!==C.stunServerUrl&&d.pc_config.iceServers.push({url:C.stunServerUrl})),C.turnServers&&(C.turnServers instanceof Array?C.turnServers.map(function(q){q.udpport&&d.pc_config.iceServers.push({username:q.username,credential:q.credential,credentialType:"password",urls:(q.useTurns?"turns:":"turn:")+q.url+":"+q.udpport+"?transport=udp"}),"string"==typeof q.tcpport&&""!==q.tcpport&&d.pc_config.iceServers.push({username:q.username,credential:q.credential,credentialType:"password",urls:(q.useTurns?"turns:":"turn:")+q.url+":"+q.tcpport+"?transport=tcp"}),!0===q.forceturn&&(d.pc_config.iceTransportPolicy="relay")}):p.default.error("[".concat(d.clientId,"] turnServers is not a array")))),void 0===C.audio&&(C.audio=!0),void 0===C.video&&(C.video=!0),d.mediaConstraints={offerToReceiveAudio:C.audio,offerToReceiveVideo:C.video,mozDontOfferDataChannel:!0},d.roapSessionId=103,d.peerConnection=new _.RTCPeerConnection(d.pc_config),d.iceCandidateTimer=setTimeout(function(){d.iceCandidateTimer=null,p.default.debug("[".concat(d.clientId,"]Candidates collected: ").concat(d.iceCandidateCount)),d.moreIceComing&&(d.moreIceComing=!1,d.markActionNeeded())},Object(E.getParameter)("CANDIDATE_TIMEOUT")),d.peerConnection.onicecandidate=function(q){var F,te,Te,me;te=(F=d.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),Te=F.match(/a=candidate:.+typ\shost.+\r\n/),me=F.match(/a=candidate:.+typ\srelay.+\r\n/),null===te&&null===Te&&null===me||void 0!==d.ice||!d.iceCandidateTimer||(clearTimeout(d.iceCandidateTimer),d.iceCandidateTimer=null,d.ice=0,d.moreIceComing=!1,d.markActionNeeded()),d.iceCandidateCount=d.iceCandidateCount+1},d.checkMLineReverseInSDP=function(q){return!(!~q.indexOf("m=audio")||!~q.indexOf("m=video"))&&q.indexOf("m=audio")>q.indexOf("m=video")},d.reverseMLineInSDP=function(q){var F=q.split("m=audio"),te=F[1].split("m=video");return F[0]+"m=video"+te[1]+"m=audio"+te[0]},d.processSignalingMessage=function(q){var F,te=JSON.parse(q);d.incomingMessage=te,"new"===d.state?"OFFER"===te.messageType?(te.sdp=ye(te.sdp),d.peerConnection.setRemoteDescription(new W(F={sdp:te.sdp,type:"offer"}),function(){p.default.debug("["+d.clientId+"]setRemoteDescription succeeded")},function(Te){p.default.info("["+d.clientId+"]setRemoteDescription failed: "+Te.name)}),d.state="offer-received",d.markActionNeeded()):d.error("Illegal message for this state: "+te.messageType+" in state "+d.state):"offer-sent"===d.state?"ANSWER"===te.messageType?(te.sdp=ye(te.sdp),te.sdp=te.sdp.replace(/ generation 0/g,""),te.sdp=te.sdp.replace(/ udp /g," UDP "),-1!==te.sdp.indexOf("a=group:BUNDLE")?(te.sdp=te.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),te.sdp=te.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),te.sdp=te.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(te.sdp=te.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),te.sdp=te.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),F={sdp:te.sdp,type:"answer"},C.screen&&"detail"===C.optimizationMode&&(p.default.debug("[".concat(d.client,"] remove screen share abs ext")),te.sdp=ne(F.sdp)),d.peerConnection.setRemoteDescription(new W(F),function(){p.default.debug("["+d.clientId+"]setRemoteDescription succeeded")},function(Te){p.default.info("["+d.clientId+"]setRemoteDescription failed: "+Te)}),d.state="established"):"pr-answer"===te.messageType?d.peerConnection.setRemoteDescription(new W(F={sdp:te.sdp,type:"pr-answer"}),function(){p.default.debug("["+d.clientId+"]setRemoteDescription succeeded")},function(Te){p.default.info("["+d.clientId+"]setRemoteDescription failed: "+Te.name)}):d.error("offer"===te.messageType?"Not written yet":"Illegal message for this state: "+te.messageType+" in state "+d.state):"established"===d.state&&("OFFER"===te.messageType?(d.peerConnection.setRemoteDescription(new W(F={sdp:te.sdp,type:"offer"}),function(){p.default.debug("["+d.clientId+"]setRemoteDescription succeeded")},function(Te){p.default.info("["+d.clientId+"]setRemoteDescription failed: "+Te.name)}),d.state="offer-received",d.markActionNeeded()):d.error("Illegal message for this state: "+te.messageType+" in state "+d.state))},d.setRtpSenderParameters=(q=A()(N.a.mark(function F(te){var Te,me,fe;return N.a.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(Te=d.peerConnection.getSenders(),me=Te.find(function(je){return"video"===je.track.kind})){Ne.next=4;break}return Ne.abrupt("return");case 4:return(fe=me.getParameters()).degradationPreference=te,Ne.prev=6,p.default.debug("[".concat(d.clientId,"] setParameters"),fe),Ne.next=10,me.setParameters(fe);case 10:Ne.next=15;break;case 12:Ne.prev=12,Ne.t0=Ne.catch(6),p.default.debug("[".concat(d.clientId,"] setParameters failed, ignore"));case 15:case"end":return Ne.stop()}},F,null,[[6,12]])})),function(F){return q.apply(this,arguments)});var u={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},K={id:"",type:"",mediaType:"",googCodecName:C.codec?C.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},m={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},w={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},x=0,ee=0,ue=0;d.getVideoRelatedStats=function(q){d.peerConnection.getStats().then(function(F){var te,Te=B(F.values());try{for(Te.s();!(te=Te.n()).done;){var me=te.value;if(d.isSubscriber){if(("inbound-rtp"===me.type||"inboundrtp"===me.type)&&"video"===me.mediaType){if(!d.lastReport)return void(d.lastReport=me);q&&q({browser:"firefox",mediaType:"video",peerId:d.uid,isVideoMute:d.isVideoMute,frameRateReceived:Math.round(me.framerateMean)+"",frameRateDecoded:me.framesDecoded-d.lastReport.framesDecoded+"",bytesReceived:me.bytesReceived+"",packetsReceived:me.packetsReceived+"",packetsLost:me.packetsLost+""}),d.lastReport=me}}else if(("outbound-rtp"===me.type||"outboundrtp"===me.type)&&"video"===me.mediaType){if(!d.lastReport)return void(d.lastReport=me);q&&q({mediaType:"video",isVideoMute:d.isVideoMute,frameRateInput:Math.round(me.framerateMean)+"",frameRateSent:me.framesEncoded-d.lastReport.framesEncoded+""}),d.lastReport=me}}}catch(fe){Te.e(fe)}finally{Te.f()}})},d.getAudioRelatedStats=function(q){d.peerConnection.getStats().then(function(F){var te,Te=B(F.values());try{for(Te.s();!(te=Te.n()).done;){var me=te.value;d.isSubscriber&&("inbound-rtp"!==me.type&&"inboundrtp"!==me.type||"audio"!==me.mediaType||q&&q({browser:"firefox",mediaType:"audio",peerId:d.uid,isAudioMute:d.isAudioMute,frameDropped:me.packetsLost+"",frameReceived:me.packetsReceived+"",googJitterReceived:me.jitter+"",bytesReceived:me.bytesReceived+"",packetsReceived:me.packetsReceived+"",packetsLost:me.packetsLost+""}))}}catch(fe){Te.e(fe)}finally{Te.f()}})},d.getStatsRate=function(q){d.getStats(function(F){F.forEach(function(te){}),q(F)})},d.getStats=function(q,F){F=(F=F||500)>500?500:F,d.lastTimeGetStats&&Date.now()-d.lastTimeGetStats<F?q&&q(d.filterStatsCache,d.originStatsCache):this._getStats(function(te,Te){d.filterStatsCache=te,d.originStatsCache=Te,d.lastTimeGetStats=Date.now(),q&&q(te,Te)})},d._getStats=function(q){d.peerConnection.getStats().then(function(F){var te,Te=[],me=B(F.values());try{for(me.s();!(te=me.n()).done;){var fe=te.value;Te.push(fe),"outbound-rtp"!==fe.type&&"outboundrtp"!==fe.type||"video"!==fe.mediaType||-1!==fe.id.indexOf("rtcp")||(K.id=fe.id,K.type=fe.type,K.mediaType=fe.mediaType,K.bytesSent=fe.bytesSent?fe.bytesSent+"":"0",K.packetsSent=fe.packetsSent?fe.packetsSent+"":"0",K.googPlisReceived=fe.pliCount?fe.pliCount+"":"0",K.googNacksReceived=fe.nackCount?fe.nackCount+"":"0",K.googFirsReceived=fe.firCount?fe.firCount+"":"0",K.googFrameRateSent=fe.framerateMean?Math.round(fe.framerateMean)+"":"0"),"outbound-rtp"!==fe.type&&"outboundrtp"!==fe.type||"audio"!==fe.mediaType||-1!==fe.id.indexOf("rtcp")||(u.id=fe.id,u.type=fe.type,u.mediaType=fe.mediaType,u.bytesSent=fe.bytesSent?fe.bytesSent+"":"0",u.packetsSent=fe.packetsSent?fe.packetsSent+"":"0",C.agoraStream.local&&(u.audioInputLevel=Math.round(32767*C.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==fe.type&&"inboundrtp"!==fe.type||"audio"!==fe.mediaType||fe.isRemote||-1!==fe.id.indexOf("rtcp")||(m.id=fe.id,m.type=fe.type,m.mediaType=fe.mediaType,m.bytesReceived=fe.bytesReceived?fe.bytesReceived+"":"0",m.packetsLost=fe.packetsLost?fe.packetsLost+"":"0",m.packetsReceived=fe.packetsReceived?fe.packetsReceived+"":"0",m.googJitterReceived=fe.jitter?fe.jitter+"":"0",C.agoraStream.local||(m.audioOutputLevel=Math.round(32767*C.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==fe.type&&"inboundrtp"!==fe.type||"video"!==fe.mediaType||fe.isRemote||-1!==fe.id.indexOf("rtcp")||(w.id=fe.id,w.type=fe.type,w.mediaType=fe.mediaType,w.bytesReceived=fe.bytesReceived?fe.bytesReceived+"":"0",w.googFrameRateReceived=fe.framerateMean?Math.round(fe.framerateMean)+"":"0",w.googFramesDecoded=fe.framesDecoded?fe.framesDecoded+"":"0",Date.now()-ue>=1e3?(w.googFrameRateDecoded=(fe.framesDecoded-x)/((Date.now()-ue)/1e3),w.googFrameRateDecoded=Math.round(Math.max(0,w.googFrameRateDecoded)),ue=Date.now(),ee=w.googFrameRateDecoded,x=fe.framesDecoded,w.googFrameRateDecoded=w.googFrameRateDecoded.toString()):w.googFrameRateDecoded=ee.toString(),w.packetsLost=fe.packetsLost?fe.packetsLost+"":"0",w.packetsReceived=fe.packetsReceived?fe.packetsReceived+"":"0",w.googJitterBufferMs=fe.jitter?fe.jitter+"":"0",w.googNacksSent=fe.nackCount?fe.nackCount+"":"0",w.googPlisSent=fe.pliCount?fe.pliCount+"":"0",w.googFirsSent=fe.firCount?fe.firCount+"":"0"),-1!==fe.id.indexOf("outbound_rtcp_video")&&(K.packetsLost=fe.packetsLost?fe.packetsLost+"":"0")}}catch(je){me.e(je)}finally{me.f()}var Ne=[K,u,m,w];Ne.push({id:"time",startTime:d.connectedTime,timestamp:new Date}),q(Ne,Te)},function(F){p.default.error("["+d.clientId+"]"+F)})},d.addStream=function(q){y=!0,d.peerConnection.addStream(q),d.markActionNeeded()},d.removeStream=function(){d.markActionNeeded()},d.close=function(){d.state="closed",d.peerConnection.close()},d.markActionNeeded=function(){d.actionNeeded=!0,d.doLater(function(){d.onstablestate()})},d.doLater=function(q){window.setTimeout(q,1)},d.onstablestate=function(){if(d.actionNeeded){if("new"===d.state||"established"===d.state)y&&(d.mediaConstraints=void 0),d.peerConnection.createOffer(function(F){if(F.sdp=ye(F.sdp),F.sdp=F.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),F.sdp!==d.prevOffer)return d.peerConnection.setLocalDescription(F),d.state="preparing-offer",void d.markActionNeeded();p.default.debug("["+d.clientId+"]Not sending a new offer")},function(F){p.default.debug("["+d.clientId+"]Ups! create offer failed ",F)},d.mediaConstraints);else if("preparing-offer"===d.state){if(d.moreIceComing)return;d.prevOffer=d.peerConnection.localDescription.sdp,d.offerCandidates=d.prevOffer.match(/a=candidate.+\r\n/g)||[],d.offerCandidates.length||(C.isCloudProxy3&&C.onNoIceCandidate&&C.onNoIceCandidate(),p.default.warning("[".concat(d.clientId,"]No Ice Candidate generated")),Object(E.getParameter)("SHIM_CANDIDATE")?(p.default.debug("Shimming fake candidate"),d.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):p.default.error("[".concat(d.clientId,"]None Ice Candidate not allowed"))),d.prevOffer=d.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),d.sendMessage("OFFER",d.prevOffer),d.state="offer-sent"}else if("offer-received"===d.state)d.peerConnection.createAnswer(function(F){if(d.peerConnection.setLocalDescription(F),d.state="offer-received-preparing-answer",d.iceStarted)d.markActionNeeded();else{var te=new Date;p.default.debug("["+d.clientId+"]"+te.getTime()+": Starting ICE in responder"),d.iceStarted=!0}},function(){p.default.debug("["+d.clientId+"]Ups! Something went wrong")});else if("offer-received-preparing-answer"===d.state){if(d.moreIceComing)return;d.sendMessage("ANSWER",d.peerConnection.localDescription.sdp),d.state="established"}else d.debug("Dazed and confused in state "+d.state+", stopping here");d.actionNeeded=!1}},d.sendMessage=function(q,F){var te={};te.messageType=q,te.sdp=F,"OFFER"===q?(te.offererSessionId=d.sessionId,te.answererSessionId=d.otherSessionId,te.seq=d.sequenceNumber+=1,te.tiebreaker=Math.floor(429496723*Math.random()+1)):(te.offererSessionId=d.incomingMessage.offererSessionId,te.answererSessionId=d.sessionId,te.seq=d.incomingMessage.seq),d.onsignalingmessage(JSON.stringify(te))},d._getSender=function(q){if(d.peerConnection&&d.peerConnection.getSenders){var F=d.peerConnection.getSenders().find(function(te){return te.track.kind==q});if(F)return F}return null},d.hasSender=function(q){return!!d._getSender(q)},d.replaceTrack=function(q,F,te){var Te=d._getSender(q.kind);if(!Te)return te("NO_SENDER_FOUND");try{Te.replaceTrack(q)}catch(me){return te&&te(me)}setTimeout(function(){return F&&F()},50)},d.error=function(q){throw"Error in RoapOnJsep: "+q},d.sessionId=d.roapSessionId+=1,d.sequenceNumber=0,d.actionNeeded=!1,d.iceStarted=!1,d.moreIceComing=!0,d.iceCandidateCount=0,d.onsignalingmessage=C.callback,d.peerConnection.ontrack=function(q){d.onaddstream&&d.onaddstream(q,"ontrack")},d.peerConnection.onremovestream=function(q){d.onremovestream&&d.onremovestream(q)},d.peerConnection.oniceconnectionstatechange=function(q){"connected"===q.currentTarget.iceConnectionState&&(d.connectedTime=new Date),d.oniceconnectionstatechange&&d.oniceconnectionstatechange(q.currentTarget.iceConnectionState)};var ye=function(q){var F;if(C.video&&C.maxVideoBW&&(null==(F=q.match(/m=video.*\r\n/))&&(F=q.match(/m=video.*\n/)),F&&F.length>0)){var te=F[0]+"b=TIAS:"+1e3*C.maxVideoBW+"\r\n";q=q.replace(F[0],te)}return C.audio&&C.maxAudioBW&&(null==(F=q.match(/m=audio.*\r\n/))&&(F=q.match(/m=audio.*\n/)),F&&F.length>0)&&(q=q.replace(F[0],te=F[0]+"b=TIAS:"+1e3*C.maxAudioBW+"\r\n")),q},ne=function(q){return(q=q.replace(/a=.*abs-send-time\r\n/g,"")).replace(/a=.*goog-remb\r\n/g,"")};return d.onaddstream=null,d.onremovestream=null,d.state="new",d.markActionNeeded(),d}(C)):"iOS"===D.getBrowserOS()||D.isSafari()?(p.default.debug("["+d.streamId+"]["+d.clientId+"]Safari"),(d=function(C){var d={},W=_.RTCPeerConnection;d.uid=C.uid,d.isVideoMute=C.isVideoMute,d.isAudioMute=C.isAudioMute,d.isSubscriber=C.isSubscriber,d.clientId=C.clientId,d.filterStatsCache=[],d.originStatsCache=[],d.lastTimeGetStats=null,d.pc_config={iceServers:[],bundlePolicy:"max-bundle"},d.con={optional:[{DtlsSrtpKeyAgreement:!0}]},C.iceServers instanceof Array?d.pc_config.iceServers=C.iceServers:(C.stunServerUrl&&(C.stunServerUrl instanceof Array?C.stunServerUrl.map(function(q){"string"==typeof q&&""!==q&&d.pc_config.iceServers.push({url:q})}):"string"==typeof C.stunServerUrl&&""!==C.stunServerUrl&&d.pc_config.iceServers.push({url:C.stunServerUrl})),C.turnServers&&(C.turnServers instanceof Array?C.turnServers.map(function(q){q.udpport&&d.pc_config.iceServers.push({username:q.username,credential:q.credential,credentialType:"password",urls:(q.useTurns?"turns:":"turn:")+q.url+":"+q.udpport+"?transport=udp"}),"string"==typeof q.tcpport&&""!==q.tcpport&&d.pc_config.iceServers.push({username:q.username,credential:q.credential,credentialType:"password",urls:(q.useTurns?"turns:":"turn:")+q.url+":"+q.tcpport+"?transport=tcp"}),!0===q.forceturn&&(d.pc_config.iceTransportPolicy="relay")}):p.default.error("[".concat(d.clientId,"] turnServers is not a array")))),void 0===C.audio&&(C.audio=!0),void 0===C.video&&(C.video=!0),d.mediaConstraints={mandatory:{OfferToReceiveVideo:C.video,OfferToReceiveAudio:C.audio}},d.roapSessionId=103;try{d.pc_config.sdpSemantics=Object(E.getParameter)("PLAN"),d.peerConnection=new W(d.pc_config,d.con)}catch(q){delete d.pc_config.sdpSemantics,d.peerConnection=new W(d.pc_config,d.con)}d.iceCandidateTimer=setTimeout(function(){d.iceCandidateTimer=null,d.moreIceComing&&(d.moreIceComing=!1,d.markActionNeeded())},Object(E.getParameter)("CANDIDATE_TIMEOUT")),d.peerConnection.onicecandidate=function(q){var F,te,Te,me;te=(F=d.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),Te=F.match(/a=candidate:.+typ\shost.+\r\n/),me=F.match(/a=candidate:.+typ\srelay.+\r\n/),0===d.iceCandidateCount&&(d.timeout=setTimeout(function(){d.moreIceComing&&(d.moreIceComing=!1,d.markActionNeeded())},1e3)),null===te&&null===Te&&null===me||void 0!==d.ice||!d.iceCandidateTimer||(clearTimeout(d.iceCandidateTimer),d.iceCandidateTimer=null,d.ice=0,d.moreIceComing=!1,d.markActionNeeded()),d.iceCandidateCount=d.iceCandidateCount+1};var q,y=function(q){return C.screen&&(q=q.replace("a=x-google-flag:conference\r\n","")),q},u=function(q){var F;return(F=q.match(/m=video.*\r\n/))&&C.minVideoBW&&C.maxVideoBW&&(q=q.replace(F[0],F[0]+"b=AS:"+C.maxVideoBW+"\r\n"),p.default.debug("["+d.clientId+"]Set Video Bitrate - min:"+C.minVideoBW+" max:"+C.maxVideoBW)),(F=q.match(/m=audio.*\r\n/))&&C.maxAudioBW&&(q=q.replace(F[0],F[0]+"b=AS:"+C.maxAudioBW+"\r\n")),q};d.processSignalingMessage=function(q){var F,te=JSON.parse(q);d.incomingMessage=te,"new"===d.state?"OFFER"===te.messageType?(F={sdp:te.sdp,type:"offer"},d.peerConnection.setRemoteDescription(new RTCSessionDescription(F)),d.state="offer-received",d.markActionNeeded()):d.error("Illegal message for this state: "+te.messageType+" in state "+d.state):"offer-sent"===d.state?"ANSWER"===te.messageType?((F={sdp:te.sdp,type:"answer"}).sdp=y(F.sdp),F.sdp=u(F.sdp),F.sdp=F.sdp.replace(/a=x-google-flag:conference\r\n/g,""),C.screen&&"detail"===C.optimizationMode&&(p.default.debug("[".concat(d.client,"] remove screen share abs ext")),F.sdp=F.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),d.peerConnection.setRemoteDescription(new RTCSessionDescription(F)),d.state="established"):"pr-answer"===te.messageType?(F={sdp:te.sdp,type:"pr-answer"},d.peerConnection.setRemoteDescription(new RTCSessionDescription(F))):d.error("offer"===te.messageType?"Not written yet":"Illegal message for this state: "+te.messageType+" in state "+d.state):"established"===d.state&&("OFFER"===te.messageType?(F={sdp:te.sdp,type:"offer"},d.peerConnection.setRemoteDescription(new RTCSessionDescription(F)),d.state="offer-received",d.markActionNeeded()):"ANSWER"===te.messageType?((F={sdp:te.sdp,type:"answer"}).sdp=y(F.sdp),F.sdp=u(F.sdp),d.peerConnection.setRemoteDescription(new RTCSessionDescription(F))):d.error("Illegal message for this state: "+te.messageType+" in state "+d.state))},d.setRtpSenderParameters=(q=A()(N.a.mark(function F(te){return N.a.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:d.degradation=te;case 1:case"end":return Te.stop()}},F)})),function(F){return q.apply(this,arguments)}),d._setRtpSenderParameters=function(){var q=A()(N.a.mark(function F(te){var Te,me,fe;return N.a.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(Te=d.peerConnection.getSenders(),me=Te.find(function(je){return"video"===je.track.kind})){Ne.next=4;break}return Ne.abrupt("return");case 4:return(fe=me.getParameters()).degradationPreference=te,Ne.prev=6,p.default.debug("[".concat(d.clientId,"] setParameters"),fe),Ne.next=10,me.setParameters(fe);case 10:Ne.next=15;break;case 12:Ne.prev=12,Ne.t0=Ne.catch(6),p.default.debug("[".concat(d.clientId,"] setParameters failed, ignore"));case 15:case"end":return Ne.stop()}},F,null,[[6,12]])}));return function(F){return q.apply(this,arguments)}}();var K={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},m={id:"",type:"",mediaType:"",googCodecName:C.codec?C.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},w={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},x={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},ee={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},ue=0,ye=0,ne=0;return d.isRemoteVideoStats=function(q){return!!(q.frameHeight&&q.frameWidth&&q.remoteSource)},d.getVideoRelatedStats=function(q){d.peerConnection.getStats().then(function(F){F.forEach(function(te){if(d.isSubscriber){var Te={peerId:d.uid,mediaType:"video",isVideoMute:d.isVideoMute};if("track"===te.type&&(~te.id.indexOf("video")||~te.trackIdentifier.indexOf("v")||d.isRemoteVideoStats(te))){if(!d.lastReport)return void(d.lastReport=te);Te.frameRateReceived=te.framesReceived-d.lastReport.framesReceived+"",Te.frameRateDecoded=te.framesDecoded-d.lastReport.framesDecoded+"",d.lastReport=te}"inbound-rtp"===te.type&&~te.id.indexOf("Video")&&(Te.bytesReceived=te.bytesReceived+"",Te.packetsReceived=te.packetsReceived+"",Te.packetsLost=te.packetsLost+""),q&&q(Te)}else if("outbound-rtp"===te.type&&~te.id.indexOf("Video")){if(!d.lastReport)return void(d.lastReport=te);q&&q({mediaType:"video",isVideoMute:d.isVideoMute,frameRateInput:C.maxFrameRate+"",frameRateSent:te.framesEncoded-d.lastReport.framesEncoded+""}),d.lastReport=te}})})},d.getAudioRelatedStats=function(q){d.peerConnection.getStats().then(function(F){F.forEach(function(te){d.isSubscriber&&"inbound-rtp"===te.type&&~te.id.indexOf("Audio")&&q&&q({peerId:d.uid,mediaType:"audio",isAudioMute:d.isAudioMute,frameDropped:te.packetsLost+"",frameReceived:te.packetsReceived+"",googJitterReceived:te.jitter+"",bytesReceived:te.bytesReceived+"",packetsReceived:te.packetsReceived+"",packetsLost:te.packetsLost+""})})})},d.getStatsRate=function(q){d.getStats(function(F){F.forEach(function(te){"outbound-rtp"===te.type&&"video"===te.mediaType&&te.googFramesEncoded&&(te.googFrameRateSent=Math.ceil((te.googFramesEncoded-ue)/3).toString(),ue=te.googFramesEncoded),"inbound-rtp"===te.type&&-1!=te.id.indexOf("55543")&&(te.googFrameRateReceived&&(te.googFrameRateReceived=Math.ceil((te.googFrameReceived-ne)/3).toString(),ne=te.googFrameReceived),te.googFrameRateDecoded&&(te.googFrameRateDecoded=Math.ceil((te.googFramesDecoded-ye)/3).toString(),ye=te.googFramesDecoded))}),q(F)})},d.getStats=function(q,F){F=(F=F||500)>500?500:F,d.lastTimeGetStats&&Date.now()-d.lastTimeGetStats<F?q&&q(d.filterStatsCache,d.originStatsCache):this._getStats(function(te,Te){d.filterStatsCache=te,d.originStatsCache=Te,d.lastTimeGetStats=Date.now(),q&&q(te,Te)})},d._getStats=function(q){var F=[];d.peerConnection.getStats().then(function(te){te.forEach(function(me){var fe;F.push(me),"outbound-rtp"===me.type&&"audio"===me.mediaType&&(K.id=me.id,K.type=me.type,K.mediaType=me.mediaType,K.bytesSent=me.bytesSent?me.bytesSent+"":"0",K.packetsSent=me.packetsSent?me.packetsSent+"":"0",C.agoraStream.local&&(K.audioInputLevel=Math.round(32767*C.agoraStream.getAudioLevel()).toString())),"outbound-rtp"===me.type&&"video"===me.mediaType&&(m.id=me.id,m.type=me.type,m.mediaType=me.mediaType,m.bytesSent=me.bytesSent?me.bytesSent+"":"0",m.packetsSent=me.packetsSent?me.packetsSent+"":"0",m.googPlisReceived=me.pliCount?me.pliCount+"":"0",m.googNacksReceived=me.nackCount?me.nackCount+"":"0",m.googFirsReceived=me.firCount?me.firCount+"":"0",m.googFramesEncoded=me.framesEncoded?me.framesEncoded+"":"0",(fe=te.get(me.trackId))&&(m.googFrameHeightSent=fe.frameHeight&&fe.frameHeight.toString(),m.googFrameWidthSent=fe.frameWidth&&fe.frameWidth.toString())),"inbound-rtp"!==me.type||-1==me.id.indexOf("44444")&&"audio"!==me.mediaType||(w.id=me.id,w.type=me.type,w.mediaType="audio",w.packetsReceived=me.packetsReceived?me.packetsReceived+"":"0",w.bytesReceived=me.bytesReceived?me.bytesReceived+"":"0",w.packetsLost=me.packetsLost?me.packetsLost+"":"0",w.packetsReceived=me.packetsReceived?me.packetsReceived+"":"0",w.googJitterReceived=me.jitter?me.jitter+"":"0",(fe=te.get(me.trackId))&&(w.audioOutputLevel=fe.audioLevel&&Math.round(32767*fe.audioLevel).toString()),C.agoraStream.local||w.audioOutputLevel||(w.audioOutputLevel=Math.round(32767*C.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==me.type||-1==me.id.indexOf("55543")&&"video"!==me.mediaType||(x.id=me.id,x.type=me.type,x.mediaType="video",x.packetsReceived=me.packetsReceived?me.packetsReceived+"":"0",x.bytesReceived=me.bytesReceived?me.bytesReceived+"":"0",x.packetsLost=me.packetsLost?me.packetsLost+"":"0",x.googJitterBufferMs=me.jitter?me.jitter+"":"0",x.googNacksSent=me.nackCount?me.nackCount+"":"0",x.googPlisSent=me.pliCount?me.pliCount+"":"0",x.googFirsSent=me.firCount?me.firCount+"":"0",(fe=te.get(me.trackId))&&(x.googFrameHeightReceived=fe.frameHeight&&fe.frameHeight.toString(),x.googFrameWidthReceived=fe.frameWidth&&fe.frameWidth.toString(),x.googFrameReceived=fe.framesReceived&&fe.framesReceived.toString(),x.googFramesDecoded=fe.framesDecoded&&fe.framesDecoded.toString())),"candidate-pair"===me.type&&(0==me.availableIncomingBitrate?ee.googAvailableSendBandwidth=me.availableOutgoingBitrate+"":ee.googAvailableReceiveBandwidth=me.availableIncomingBitrate+"")});var Te=[ee,K,m,w,x];Te.push({id:"time",startTime:d.connectedTime,timestamp:new Date}),q(Te,F)}).catch(function(te){p.default.error("["+d.clientId+"] ",te)})},d.addTrack=function(q,F){d.peerConnection.addTrack(q,F)},d.removeTrack=function(q,F){var te=d.peerConnection.getSenders().find(function(Te){return Te.track==q});te.replaceTrack(null),d.peerConnection.removeTrack(te)},d.addStream=function(q){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?q.getTracks().forEach(function(F){return d.peerConnection.addTrack(F,q)}):d.peerConnection.addStream(q),d.markActionNeeded()},d.removeStream=function(){d.markActionNeeded()},d.close=function(){d.state="closed",d.peerConnection.close()},d.markActionNeeded=function(){d.actionNeeded=!0,d.doLater(function(){d.onstablestate()})},d.doLater=function(q){window.setTimeout(q,1)},d.onstablestate=function(){if(d.actionNeeded){if("new"===d.state||"established"===d.state)C.isSubscriber&&(d.peerConnection.addTransceiver("audio",{direction:"recvonly"}),d.peerConnection.addTransceiver("video",{direction:"recvonly"})),d.peerConnection.createOffer(d.mediaConstraints).then(function(F){if(F.sdp=u(F.sdp),C.isSubscriber||(F.sdp=F.sdp.replace(/a=.*video-orientation\r\n/g,"")),F.sdp!==d.prevOffer)return d.peerConnection.setLocalDescription(F),d.state="preparing-offer",void d.markActionNeeded();p.default.debug("["+d.clientId+"]Not sending a new offer")}).catch(function(F){p.default.debug("["+d.clientId+"]peer connection create offer failed ",F)});else if("preparing-offer"===d.state){if(d.moreIceComing)return;d.prevOffer=d.peerConnection.localDescription.sdp,d.offerCandidates=d.prevOffer.match(/a=candidate.+\r\n/g)||[],d.offerCandidates.length||(p.default.warning("[".concat(d.clientId,"]No Ice Candidate generated")),C.isCloudProxy3&&C.onNoIceCandidate&&C.onNoIceCandidate(),Object(E.getParameter)("SHIM_CANDIDATE")?(p.default.debug("Shimming fake candidate"),d.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):p.default.error("[".concat(d.clientId,"]None Ice Candidate not allowed"))),d.prevOffer=d.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),d.sendMessage("OFFER",d.prevOffer),d.state="offer-sent"}else if("offer-received"===d.state)d.peerConnection.createAnswer(function(F){if(d.peerConnection.setLocalDescription(F),d.state="offer-received-preparing-answer",d.iceStarted)d.markActionNeeded();else{var te=new Date;p.default.debug("["+d.clientId+"]"+te.getTime()+": Starting ICE in responder"),d.iceStarted=!0}},function(F){p.default.debug("["+d.clientId+"]peer connection create answer failed ",F)},d.mediaConstraints);else if("offer-received-preparing-answer"===d.state){if(d.moreIceComing)return;d.sendMessage("ANSWER",d.peerConnection.localDescription.sdp),d.state="established"}else d.debug("Dazed and confused in state "+d.state+", stopping here");d.actionNeeded=!1}},d.sendMessage=function(q,F){var te={};te.messageType=q,te.sdp=F,"OFFER"===q?(te.offererSessionId=d.sessionId,te.answererSessionId=d.otherSessionId,te.seq=d.sequenceNumber+=1,te.tiebreaker=Math.floor(429496723*Math.random()+1)):(te.offererSessionId=d.incomingMessage.offererSessionId,te.answererSessionId=d.sessionId,te.seq=d.incomingMessage.seq),d.onsignalingmessage(JSON.stringify(te))},d._getSender=function(q){if(d.peerConnection&&d.peerConnection.getSenders){var F=d.peerConnection.getSenders().find(function(te){return te.track.kind==q});if(F)return F}return null},d.hasSender=function(q){return!!d._getSender(q)},d.replaceTrack=function(q,F,te){var Te=d._getSender(q.kind);if(!Te)return te("NO_SENDER_FOUND");try{Te.replaceTrack(q)}catch(me){return te&&te(me)}setTimeout(function(){return F&&F()},50)},d.error=function(q){throw"Error in RoapOnJsep: "+q},d.sessionId=d.roapSessionId+=1,d.sequenceNumber=0,d.actionNeeded=!1,d.iceStarted=!1,d.moreIceComing=!0,d.iceCandidateCount=0,d.onsignalingmessage=C.callback,d.peerConnection.ontrack=function(q){console.log("!!! ontrack, ",q.track.kind,q.track),d.onaddstream&&d.onaddstream(q,"ontrack")},d.peerConnection.onremovestream=function(q){d.onremovestream&&d.onremovestream(q)},d.peerConnection.oniceconnectionstatechange=function(q){"connected"===q.currentTarget.iceConnectionState&&(d.connectedTime=new Date,d._setRtpSenderParameters(d.degradation)),d.oniceconnectionstatechange&&d.oniceconnectionstatechange(q.currentTarget.iceConnectionState)},d.renegotiate=function(){d.isSubscriber||(p.default.debug("[".concat(d.uid,"]"),"renegotiating"),void 0!==d.prevOffer&&d.peerConnection.createOffer().then(function(q){return q.sdp=q.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),q.sdp=y(q.sdp),q.sdp=u(q.sdp),d.peerConnection.setLocalDescription(q)}).then(function(){d.onnegotiationneeded&&d.onnegotiationneeded(d.peerConnection.localDescription.sdp)}).catch(function(q){console.log("createOffer error: ",q)}))},d.isSubscriber||(d.peerConnection.onnegotiationneeded=d.renegotiate),d.onaddstream=null,d.onremovestream=null,d.state="new",d.markActionNeeded(),d}(C)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?d=new ie.a(C):(d=function(C){var d={},W=_.RTCPeerConnection;d.uid=C.uid,d.isVideoMute=C.isVideoMute,d.isAudioMute=C.isAudioMute,d.isSubscriber=C.isSubscriber,d.clientId=C.clientId,d.filterStatsCache=[],d.originStatsCache=[],d.lastTimeGetStats=null,d.pc_config={iceServers:[]};var y={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},u={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:C.codec?C.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},K={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},m={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},w={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};d.con={optional:[{DtlsSrtpKeyAgreement:!0}]},C.iceServers instanceof Array?d.pc_config.iceServers=C.iceServers:(C.stunServerUrl&&(C.stunServerUrl instanceof Array?C.stunServerUrl.map(function(ne){"string"==typeof ne&&""!==ne&&d.pc_config.iceServers.push({url:ne})}):"string"==typeof C.stunServerUrl&&""!==C.stunServerUrl&&d.pc_config.iceServers.push({url:C.stunServerUrl})),C.turnServers&&(C.turnServers instanceof Array?C.turnServers.map(function(ne){ne.udpport&&d.pc_config.iceServers.push({username:ne.username,credential:ne.credential,credentialType:"password",urls:(ne.useTurns?"turns:":"turn:")+ne.url+":"+ne.udpport+"?transport=udp"}),"string"==typeof ne.tcpport&&""!==ne.tcpport&&d.pc_config.iceServers.push({username:ne.username,credential:ne.credential,credentialType:"password",urls:(ne.useTurns?"turns:":"turn:")+ne.url+":"+ne.tcpport+"?transport=tcp"}),!0===ne.forceturn&&(d.pc_config.iceTransportPolicy="relay")}):p.default.error("[".concat(d.clientId,"] turnServers is not a array")))),void 0===C.audio&&(C.audio=!0),void 0===C.video&&(C.video=!0),d.mediaConstraints={mandatory:{OfferToReceiveVideo:C.video,OfferToReceiveAudio:C.audio}},d.roapSessionId=103;try{d.pc_config.sdpSemantics=Object(E.getParameter)("PLAN"),d.peerConnection=new W(d.pc_config,d.con)}catch(ne){delete d.pc_config.sdpSemantics,d.peerConnection=new W(d.pc_config,d.con)}d.iceCandidateTimer=setTimeout(function(){d.iceCandidateTimer=null,p.default.debug("[".concat(d.clientId,"]Candidates collected: ").concat(d.iceCandidateCount)),d.moreIceComing&&(d.moreIceComing=!1,d.markActionNeeded())},Object(E.getParameter)("CANDIDATE_TIMEOUT")),d.peerConnection.onicecandidate=function(ne){var q,F,te,Te;F=(q=d.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),te=q.match(/a=candidate:.+typ\shost.+\r\n/),Te=q.match(/a=candidate:.+typ\srelay.+\r\n/),null===F&&null===te&&null===Te||void 0!==d.ice||!d.iceCandidateTimer||(clearTimeout(d.iceCandidateTimer),d.iceCandidateTimer=null,d.ice=0,d.moreIceComing=!1,d.markActionNeeded()),d.iceCandidateCount=d.iceCandidateCount+1};var ne,x=function(ne){return ne.replace("a=x-google-flag:conference\r\n","")},ee=function(ne){var q,F;if((q=ne.match(/m=video.*\r\n/))&&C.minVideoBW&&C.maxVideoBW){F=q[0]+"b=AS:"+C.maxVideoBW+"\r\n";var te=0,Te=0;"h264"===C.codec?(te=ne.search(/a=rtpmap:(\d+) H264\/90000\r\n/),Te=ne.search(/H264\/90000\r\n/)):"vp8"===C.codec?(te=ne.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),Te=ne.search(/VP8\/90000\r\n/)):"vp9"===C.codec&&(te=ne.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),Te=ne.search(/VP9\/90000\r\n/)),-1!==te&&-1!==Te&&Te-te>10&&(F=F+"a=fmtp:"+ne.slice(te+9,Te-1)+" x-google-min-bitrate="+C.minVideoBW+"\r\n"),ne=(ne=ne.replace(q[0],F)).replace(/42001f/g,"42e01f"),p.default.debug("["+d.clientId+"]Set Video Bitrate - min:"+C.minVideoBW+" max:"+C.maxVideoBW)}return(q=ne.match(/m=audio.*\r\n/))&&C.maxAudioBW&&(ne=ne.replace(q[0],F=q[0]+"b=AS:"+C.maxAudioBW+"\r\n")),ne};d.processSignalingMessage=function(ne){var q,F=JSON.parse(ne);d.incomingMessage=F,"new"===d.state?"OFFER"===F.messageType?(q={sdp:F.sdp,type:"offer"},d.peerConnection.setRemoteDescription(new RTCSessionDescription(q)).catch(function(te){}),d.state="offer-received",d.markActionNeeded()):d.error("Illegal message for this state: "+F.messageType+" in state "+d.state):"offer-sent"===d.state?"ANSWER"===F.messageType?((q={sdp:F.sdp,type:"answer"}).sdp=x(q.sdp),q.sdp=ee(q.sdp),C.screen&&"detail"===C.optimizationMode&&(p.default.debug("[".concat(d.client,"] remove screen share abs ext")),q.sdp=q.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),C.isSubscriber&&(q.sdp=q.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),d.peerConnection.setRemoteDescription(new RTCSessionDescription(q)).catch(function(te){}),d.state="established"):"pr-answer"===F.messageType?(q={sdp:F.sdp,type:"pr-answer"},d.peerConnection.setRemoteDescription(new RTCSessionDescription(q)).catch(function(te){})):d.error("offer"===F.messageType?"Not written yet":"Illegal message for this state: "+F.messageType+" in state "+d.state):"established"===d.state&&("OFFER"===F.messageType?(q={sdp:F.sdp,type:"offer"},d.peerConnection.setRemoteDescription(new RTCSessionDescription(q)).catch(function(te){}),d.state="offer-received",d.markActionNeeded()):"ANSWER"===F.messageType?((q={sdp:F.sdp,type:"answer"}).sdp=x(q.sdp),q.sdp=ee(q.sdp),d.peerConnection.setRemoteDescription(new RTCSessionDescription(q)).catch(function(te){})):d.error("Illegal message for this state: "+F.messageType+" in state "+d.state))},d.setRtpSenderParameters=(ne=A()(N.a.mark(function q(F){var te,Te,me;return N.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(te=d.peerConnection.getSenders(),console.log("senders",te),Te=te.find(function(Ne){return"video"===Ne.track.kind})){fe.next=5;break}return fe.abrupt("return");case 5:return(me=Te.getParameters()).degradationPreference=F,fe.prev=7,p.default.debug("[".concat(d.clientId,"] setParameters"),me),fe.next=11,Te.setParameters(me);case 11:fe.next=16;break;case 13:fe.prev=13,fe.t0=fe.catch(7),p.default.debug("[".concat(d.clientId,"] setParameters failed, ignore"));case 16:case"end":return fe.stop()}},q,null,[[7,13]])})),function(q){return ne.apply(this,arguments)});var ue=0,ye=0;return d.getVideoRelatedStats=function(ne){d.getStats(function(q){q.forEach(function(F){if(d.isSubscriber){if("video"===F.mediaType&&F.id&&~F.id.indexOf("recv")){if(D.isChromeKernel()&&+D.getBrowserVersion()>=76){var Te=+F.googFramesDecoded-ye;d._setStat(m,"googFrameRateReceived",+F.googFramesReceived-ue),d._setStat(m,"googFrameRateDecoded",Te),d._setStat(m,"googFrameRateOutput",Te),ue=+F.googFramesReceived,ye=+F.googFramesDecoded}ne&&ne({mediaType:"video",peerId:d.uid,isVideoMute:d.isVideoMute,frameRateReceived:F.googFrameRateReceived,frameRateDecoded:F.googFrameRateDecoded,bytesReceived:F.bytesReceived,packetsReceived:F.packetsReceived,packetsLost:F.packetsLost})}}else"video"===F.mediaType&&F.id&&~F.id.indexOf("send")&&ne&&ne({mediaType:"video",isVideoMute:d.isVideoMute,frameRateInput:F.googFrameRateInput,frameRateSent:F.googFrameRateSent,googRtt:F.googRtt})})})},d.getAudioRelatedStats=function(ne){d.getStats(function(q){q.forEach(function(F){d.isSubscriber&&"audio"===F.mediaType&&F.id&&~F.id.indexOf("recv")&&ne&&ne({mediaType:"audio",peerId:d.uid,isAudioMute:d.isAudioMute,frameDropped:parseInt(F.googDecodingPLC)+parseInt(F.googDecodingPLCCNG)+"",frameReceived:F.googDecodingCTN,googJitterReceived:F.googJitterReceived,bytesReceived:F.bytesReceived,packetsReceived:F.packetsReceived,packetsLost:F.packetsLost})})})},d.getStatsRate=function(ne){d.getStats(function(q){ne(q)})},d.getStats=function(ne,q){q=(q=q||500)>500?500:q,d.lastTimeGetStats&&Date.now()-d.lastTimeGetStats<q?ne&&ne(d.filterStatsCache,d.originStatsCache):(d.lastTimeGetStats=Date.now(),this._getStats(function(F,te){d.filterStatsCache=F,d.originStatsCache=te,ne&&ne(F,te)}))},d._setStat=function(ne,q,F){ne.hasOwnProperty(q)&&(null!=F&&F!==1/0&&F==F||(F=0),ne[q]=F+"")},d._processGetStatsAfterChrome76=function(ne){var q=this;d.lastStats||(d.lastStats=new Map),d.peerConnection.getStats().then(function(F){var te,Te=[],me=[],fe=new Map,Ne=new Date,je=function(C){if("undefined"==typeof Symbol||null==C[Symbol.iterator]){if(Array.isArray(C)||(C=function(w,x){if(w){if("string"==typeof w)return H(w,x);var ee=Object.prototype.toString.call(w).slice(8,-1);if("Object"===ee&&w.constructor&&(ee=w.constructor.name),"Map"===ee||"Set"===ee)return Array.from(ee);if("Arguments"===ee||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return H(w,x)}}(C))){var d=0,W=function(){};return{s:W,n:function(){return d>=C.length?{done:!0}:{done:!1,value:C[d++]}},e:function(w){throw w},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var y,u,K=!0,m=!1;return{s:function(){y=C[Symbol.iterator]()},n:function(){var w=y.next();return K=w.done,w},e:function(w){m=!0,u=w},f:function(){try{K||null==y.return||y.return()}finally{if(m)throw u}}}}(F.values());try{for(je.s();!(te=je.n()).done;){var Ue=te.value;"codec"!=Ue.type?"candidate-pair"!=Ue.type?("inbound-rtp"===Ue.type&&"video"===Ue.mediaType&&fe.set("inbound-video",Ue),"inbound-rtp"===Ue.type&&"audio"===Ue.mediaType&&fe.set("inbound-audio",Ue),"outbound-rtp"===Ue.type&&"audio"===Ue.mediaType&&fe.set("outbound-audio",Ue),"outbound-rtp"===Ue.type&&"video"===Ue.mediaType&&fe.set("outbound-video",Ue),"track"===Ue.type&&"video"===Ue.kind&&Ue.remoteSource&&fe.set("remote-video-track",Ue),"track"===Ue.type&&"audio"===Ue.kind&&Ue.remoteSource&&fe.set("remote-audio-track",Ue),"remote-inbound-rtp"===Ue.type&&"video"===Ue.mediaType&&fe.set("remote-inbound-video",Ue),"remote-inbound-rtp"===Ue.type&&"audio"===Ue.mediaType&&fe.set("remote-inbound-audio",Ue),"track"!==Ue.type||"video"!==Ue.kind||Ue.remoteSource||fe.set("local-video-track",Ue),"track"!==Ue.type||"audio"!==Ue.kind||Ue.remoteSource||fe.set("local-audio-track",Ue),"media-source"===Ue.type&&"video"===Ue.kind&&fe.set("media-source-video",Ue),"media-source"===Ue.type&&"audio"===Ue.kind&&fe.set("media-source-audio",Ue)):me.push(Ue):Te.push(Ue)}}catch(ft){je.e(ft)}finally{je.f()}fe.set("codec",Te),fe.set("candidatePairs",me),fe.set("timestamp",+Ne);var ke=null,qe=null;if(m.timestamp=Ne,K.timestamp=Ne,y.timestamp=Ne,y.timestamp=Ne,w.timestamp=Ne,q.isSubscriber)(ke=fe.get("inbound-video"))&&(d._setStat(m,"id","inbound_video_ssrc_recv"),d._setStat(m,"mediaType",ke.mediaType),d._setStat(m,"packetsLost",ke.packetsLost),d._setStat(m,"googDecodeMs",null),d._setStat(m,"googMaxDecodeMs",null),d._setStat(m,"googRenderDelayMs",null),d._setStat(m,"googMinPlayoutDelayMs",null),d._setStat(m,"googNacksSent",ke.nackCount),d._setStat(m,"googPlisSent",ke.pliCount),d._setStat(m,"googFirsSent",ke.firCount),d._setStat(m,"bytesReceived",ke.bytesReceived),d._setStat(m,"packetsReceived",ke.packetsReceived)),(ke=fe.get("inbound-audio"))&&(d._setStat(K,"id","inbound_audio_ssrc_recv"),d._setStat(K,"mediaType",ke.mediaType),d._setStat(K,"bytesReceived",ke.bytesReceived),d._setStat(K,"packetsLost",ke.packetsLost),d._setStat(K,"packetsReceived",ke.packetsReceived),d._setStat(K,"googAccelerateRate",ke.removedSamplesForAcceleration),d._setStat(K,"googCurrentDelayMs",ke.jitterBufferDelay),d._setStat(K,"googDecodingCNG",null),d._setStat(K,"googDecodingCTN",null),d._setStat(K,"googDecodingCTSG",null),d._setStat(K,"googDecodingNormal",null),d._setStat(K,"googDecodingPLC",null),d._setStat(K,"googDecodingPLCCNG",null),d._setStat(K,"googJitterReceived",ke.jitter),d._setStat(K,"googPreferredJitterBufferMs",null),d._setStat(K,"googSecondaryDecodedRate",null)),(ke=fe.get("remote-video-track"))&&(d._setStat(m,"googTargetDelayMs",ke.jitterBufferDelay),d._setStat(m,"googFrameWidthReceived",ke.frameWidth),d._setStat(m,"googFrameHeightReceived",ke.frameHeight),d._setStat(m,"googJitterBufferMs",ke.jitterBufferDelay/ke.jitterBufferEmittedCount*1e3),d._setStat(m,"googCurrentDelayMs",ke.jitterBufferDelay),d._setStat(m,"googFramesDecoded",ke.framesDecoded),d._setStat(m,"googFramesReceived",ke.framesReceived)),(ke=fe.get("remote-audio-track"))&&(d._setStat(K,"audioOutputLevel",32767*ke.audioLevel),d._setStat(K,"googJitterBufferMs",ke.jitterBufferDelay/ke.jitterBufferEmittedCount*1e3),d._setStat(K,"googExpandRate",ke.concealedSamples),d._setStat(K,"googPreemptiveExpandRate",ke.insertedSamplesForDeceleration),d._setStat(K,"googSpeechExpandRate",ke.silentConcealedSamples));else{var et=d.lastStats.get("timestamp"),h=d.lastStats.get("outbound-video");if((ke=fe.get("outbound-audio"))&&(d._setStat(y,"id","outbound_audio_ssrc_send"),d._setStat(y,"mediaType",ke.mediaType),d._setStat(y,"aecDivergentFilterFraction",null),d._setStat(y,"bytesSent",ke.bytesSent),d._setStat(y,"packetsSent",ke.packetsSent),qe=ke.transportId),ke=fe.get("outbound-video")){if(d._setStat(u,"id","outbound_video_ssrc_send"),d._setStat(u,"mediaType",ke.mediaType),d._setStat(u,"bytesSent",ke.bytesSent),d._setStat(u,"packetsSent",ke.packetsSent),d._setStat(u,"googAdaptationChanges",ke.qualityLimitationDurations),d._setStat(u,"googAvgEncodeMs",null),d._setStat(u,"googEncodeUsagePercent",null),qe=ke.transportId,ke.totalEncodedBytesTarget&&h&&h.totalEncodedBytesTarget){var Ce=(ke.totalEncodedBytesTarget-h.totalEncodedBytesTarget)/(+new Date-et);d._setStat(w,"googTargetEncBitrate",Math.floor(8*Ce*1e3))}if(ke.retransmittedBytesSent&&h&&h.retransmittedBytesSent){var L=(ke.retransmittedBytesSent-h.retransmittedBytesSent)/(+new Date-et);d._setStat(w,"googRetransmitBitrate",Math.floor(8*L*1e3))}if(ke.bytesSent&&h&&h.bytesSent){var xe=(ke.bytesSent-h.bytesSent)/(+new Date-et);d._setStat(w,"googTransmitBitrate",Math.floor(8*xe*1e3)),d._setStat(w,"googActualEncBitrate",Math.floor(8*xe*1e3))}if(ke.totalPacketSendDelay&&h&&h.totalPacketSendDelay){var Qe=(ke.totalPacketSendDelay-h.totalPacketSendDelay)/(+new Date-et);d._setStat(w,"googBucketDelay",Math.floor(1e3*Qe))}}if((ke=fe.get("remote-inbound-video"))&&(d._setStat(u,"packetsLost",ke.packetsLost),d._setStat(u,"googRtt",ke.roundTripTime)),(ke=fe.get("local-video-track"))&&(d._setStat(u,"googFrameHeightSent",ke.frameHeight),d._setStat(u,"googFrameWidthSent",ke.frameWidth),void 0!==ke.framesPerSecond&&d._setStat(u,"googFrameRateSent",ke.framesPerSecond)),(ke=fe.get("local-audio-track"))&&(d._setStat(y,"googEchoCancellationReturnLoss",ke.echoReturnLoss),d._setStat(y,"googEchoCancellationReturnLossEnhancement",ke.echoReturnLossEnhancement)),(ke=fe.get("media-source-video"))&&(d._setStat(u,"googFrameHeightInput",ke.height),d._setStat(u,"googFrameWidthInput",ke.width),d._setStat(u,"googFrameRateInput",ke.framesPerSecond)),(ke=fe.get("media-source-audio"))&&d._setStat(y,"audioInputLevel",32767*ke.totalAudioEnergy),(ke=fe.get("inbound-video"))&&(d._setStat(u,"googFirsReceived",ke.firCount),d._setStat(u,"googNacksReceived",ke.nackCount),d._setStat(u,"googPlisReceived",ke.pliCount)),qe)fe.get("candidatePairs").map(function(ft){qe==ft.transportId&&d._setStat(w,"googAvailableSendBandwidth",ft.availableOutgoingBitrate)});else{var ze=fe.get("candidatePairs")[0];ze&&d._setStat(w,"googAvailableSendBandwidth",ze.availableOutgoingBitrate)}}d.lastStats=fe;var st=[M()({},u),M()({},y),M()({},m),M()({},K),M()({},w)];st.push({id:"time",startTime:d.connectedTime,timestamp:new Date}),ne(st)})},d._processGetStatsBeforeChrome76=function(ne){d.peerConnection.getStats(function(q){var F=[],te=[],Te=null;Object.keys(q).forEach(function(me){var fe=q[me];fe&&(te.push(fe),Te=fe.timestamp,"VideoBwe"===fe.type?w=fe:fe.id.indexOf("_send")>-1&&"video"===fe.mediaType?u=fe:fe.id.indexOf("_send")>-1&&"audio"===fe.mediaType?y=fe:fe.id.indexOf("_recv")>-1&&"video"===fe.mediaType?m=fe:fe.id.indexOf("_recv")>-1&&"audio"===fe.mediaType&&(K=fe))}),(F=[M()({},u),M()({},y),M()({},m),M()({},K),M()({},w)]).push({id:"time",startTime:d.connectedTime,timestamp:Te||new Date}),ne(F,te)})},d._getStats=function(ne){Object(E.getParameter)("CHROME_NEW_STATS")&&D.isChromeKernel()&&+D.getBrowserVersion()>=76?d._processGetStatsAfterChrome76(ne):d._processGetStatsBeforeChrome76(ne)},d.addTrack=function(ne,q){d.peerConnection.addTrack(ne,q)},d.removeTrack=function(ne,q){d.peerConnection.removeTrack(d.peerConnection.getSenders().find(function(F){return F.track==ne}))},d.addStream=function(ne){d.peerConnection.addStream(ne),d.markActionNeeded()},d.removeStream=function(){d.markActionNeeded()},d.close=function(){d.state="closed",d.peerConnection.close()},d.markActionNeeded=function(){d.actionNeeded=!0,d.doLater(function(){d.onstablestate()})},d.doLater=function(ne){window.setTimeout(ne,1)},d.onstablestate=function(){if(d.actionNeeded){if("new"===d.state||"established"===d.state)d.peerConnection.createOffer(d.mediaConstraints).then(function(q){return q?q.sdp!==d.prevOffer?(C.isSubscriber&&(q.sdp=q.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),d.peerConnection.setLocalDescription(q),d.state="preparing-offer",void d.markActionNeeded()):void p.default.debug("["+d.clientId+"]Not sending a new offer"):(p.default.debug("["+d.clientId+"]sessionDescription is null"),void d.onsignalingmessage(null))}).catch(function(q){p.default.debug("["+d.clientId+"]peer connection create offer failed ",q)});else if("preparing-offer"===d.state){if(d.moreIceComing)return;d.prevOffer=d.peerConnection.localDescription.sdp,d.offerCandidates=d.prevOffer.match(/a=candidate.+\r\n/g)||[],d.offerCandidates.length||(C.isCloudProxy3&&C.onNoIceCandidate&&C.onNoIceCandidate(),p.default.warning("[".concat(d.clientId,"]No Ice Candidate generated")),Object(E.getParameter)("SHIM_CANDIDATE")?(p.default.debug("Shimming fake candidate"),d.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):p.default.error("[".concat(d.clientId,"]None Ice Candidate not allowed"))),d.prevOffer=d.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),d.sendMessage("OFFER",d.prevOffer),d.state="offer-sent"}else if("offer-received"===d.state)d.peerConnection.createAnswer(function(q){if(d.peerConnection.setLocalDescription(q),d.state="offer-received-preparing-answer",d.iceStarted)d.markActionNeeded();else{var F=new Date;p.default.debug("["+d.clientId+"]"+F.getTime()+": Starting ICE in responder"),d.iceStarted=!0}},function(q){p.default.debug("["+d.clientId+"]peer connection create answer failed ",q)},d.mediaConstraints);else if("offer-received-preparing-answer"===d.state){if(d.moreIceComing)return;d.sendMessage("ANSWER",d.peerConnection.localDescription.sdp),d.state="established"}else p.default.debug("[".concat(d.clientId,"] Dazed and confused in state ' + that.state + ', stopping here'"));d.actionNeeded=!1}},d.sendMessage=function(ne,q){var F={};F.messageType=ne,F.sdp=q,"OFFER"===ne?(F.offererSessionId=d.sessionId,F.answererSessionId=d.otherSessionId,F.seq=d.sequenceNumber+=1,F.tiebreaker=Math.floor(429496723*Math.random()+1)):(F.offererSessionId=d.incomingMessage.offererSessionId,F.answererSessionId=d.sessionId,F.seq=d.incomingMessage.seq),d.onsignalingmessage(JSON.stringify(F))},d._getSender=function(ne){if(d.peerConnection&&d.peerConnection.getSenders){var q=d.peerConnection.getSenders().find(function(F){return F.track.kind==ne});if(q)return q}return null},d.hasSender=function(ne){return!!d._getSender(ne)},d.replaceTrack=function(ne,q,F){var te=d._getSender(ne.kind);if(!te)return F("NO_SENDER_FOUND");try{te.replaceTrack(ne)}catch(Te){return F&&F(Te)}setTimeout(function(){return q&&q()},50)},d.error=function(ne){throw"Error in RoapOnJsep: "+ne},d.sessionId=d.roapSessionId+=1,d.sequenceNumber=0,d.actionNeeded=!1,d.iceStarted=!1,d.moreIceComing=!0,d.iceCandidateCount=0,d.onsignalingmessage=C.callback,d.peerConnection.ontrack=function(ne){d.onaddstream&&(d.onaddstream(ne,"ontrack"),d.peerConnection.onaddstream=null)},d.peerConnection.onaddstream=function(ne){d.onaddstream&&(d.onaddstream(ne,"onaddstream"),d.peerConnection.ontrack=null)},d.peerConnection.onremovestream=function(ne){d.onremovestream&&d.onremovestream(ne)},d.peerConnection.oniceconnectionstatechange=function(ne){console.log(ne),console.log(d.peerConnection.iceConnectionState),"connected"===ne.currentTarget.iceConnectionState&&(d.connectedTime=new Date),d.oniceconnectionstatechange&&d.oniceconnectionstatechange(ne.currentTarget.iceConnectionState)},d.renegotiate=function(){void 0!==d.prevOffer&&d.peerConnection.createOffer().then(function(ne){return ne.sdp=ne.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),ne.sdp=x(ne.sdp),ne.sdp=ee(ne.sdp),d.peerConnection.setLocalDescription(ne)}).then(function(){d.onnegotiationneeded&&d.onnegotiationneeded(d.peerConnection.localDescription.sdp)}).catch(function(ne){console.log("createOffer error: ",ne)})},d.peerConnection.onnegotiationneeded=d.renegotiate,d.onaddstream=null,d.onremovestream=null,d.onnegotiationneeded=null,d.state="new",d.markActionNeeded(),d}(C)).browser="chrome-stable",d},J=function(C,d,W){var y={};y.config=C,y.streamId=C.streamId,delete C.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var u=0,K=1,m=!1,w=null,x=function(ne){if(u++,w)if(w===ne)p.default.debug("Using Video Source/ Audio Source");else{var q=w.getVideoTracks()[0],F=w.getAudioTracks()[0],te=ne.getVideoTracks()[0],Te=ne.getAudioTracks()[0];te&&(q&&w.removeTrack(q),w.addTrack(te)),Te&&(F&&w.removeTrack(F),w.addTrack(Te))}else w=ne;u!==K||m||(m=!0,setTimeout(function(){d(w)},0))},ee=function(ne){p.default.error("Failed to GetUserMedia",ne.name,ne.code,ne.message,ne),u++,m||(m=!0,setTimeout(function(){W&&W(ne)},0))},ue=function(){var ne={video:C.video,audio:C.audio};if(p.default.debug("GetUserMedia",JSON.stringify(ne)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(ne).then(x).catch(ee);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(C,x,ee);else{var q={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};p.default.error("["+y.streamId+"]"+q.message),W&&W(q)}};if((C.videoSource||C.audioSource)&&(w=new MediaStream,C.videoSource&&w.addTrack(C.videoSource),C.audioSource&&w.addTrack(C.audioSource)),C.video||C.audio||C.screen||C.screenAudio){if(!C.screen&&C.screenAudio)return W&&W({code:"Set screen to true before sharing the audio"});if(C.screen){if(de.a.isElectron())return C.screen.sourceId?de.a.getScreenStream(C.screen.sourceId,C.screen,function(ne,q){ne?ee(ne):(C.audio&&(K++,ue()),x(q))}):de.a.shareScreen(C.screen,function(ne,q){ne?ee(ne):(C.audio&&(K++,ue()),x(q))});if(D.isFireFox()){if(p.default.debug("["+y.streamId+"]Screen access requested"),!~["screen","window","application"].indexOf(C.screen.mediaSource))return W&&W({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:C.screen},function(ne){C.audio&&(K++,ue()),x(ne)},ee)}else if(D.isChromeKernel()&&C.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void W({code:"This browser does not support screen sharing"});p.default.debug("["+y.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(C.screen.extensionId,{getStream:!0},function(ne){void 0===ne?(p.default.error("["+y.streamId+"]No response from Chrome Plugin. Plugin not installed properly"),ee({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})):(C.screen.mandatory.chromeMediaSourceId=ne.streamId,navigator.getMedia({video:C.screen},function(q){C.audio&&(K++,ue()),x(q)},ee))})}catch(ne){return p.default.debug("["+y.streamId+"]AgoraRTC screensharing plugin is not accessible"),void W({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var ye={};return ye.video="number"==typeof C.screen.width&&"number"==typeof C.screen.height?{width:{ideal:C.screen.width},height:{ideal:C.screen.height}}:{width:C.screen.width,height:C.screen.height},ye.video.frameRate=C.screen.frameRate&&C.screen.frameRate.min?{ideal:C.screen.frameRate.max,max:C.screen.frameRate.max}:C.screen.frameRate,C.screenAudio&&(ye.audio=C.screenAudio),p.default.debug("use getDisplayMedia, constraints:",ye),window.navigator.mediaDevices.getDisplayMedia(ye).then(function(ne){!C.screenAudio&&C.audio&&(K++,ue()),x(ne)}).catch(ee)}p.default.error("["+y.streamId+"]This browser does not support screenSharing"),W({code:"This browser does not support screen sharing"})}}else ue()}else x(w)}},function(ge,le,U){"use strict";var D=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(le,"__esModule",{value:!0});var T,R=D(U(0)),M=function(){function T(N,v,A){void 0===v&&(v=""),this.name="AgoraRTCException",this.code=N,this.message="AgoraRTCError "+this.code+": "+v,this.data=A}return T.prototype.toString=function(){return this.data?this.message+" data: "+JSON.stringify(this.data):this.message},T.prototype.throw=function(){throw R.default.error(this.toString()),this},T}();le.AgoraRTCError=M,(T=le.AgoraRTCErrorCode||(le.AgoraRTCErrorCode={})).UNEXPECTED_ERROR="UNEXPECTED_ERROR",T.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",T.TIMEOUT="TIMEOUT",T.INVALID_PARAMS="INVALID_PARAMS",T.NOT_SUPPORT="NOT_SUPPORT",T.INVALID_OPERATION="INVALID_OPERATION",T.OPERATION_ABORT="OPERATION_ABORT",T.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",T.NETWORK_ERROR="NETWORK_ERROR",T.NETWORK_TIMEOUT="NETWORK_TIMEOUT",T.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",T.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",T.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",T.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",T.ELECTRON_IS_NULL="ELECTRON_IS_NULL",T.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",T.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",T.STREAM_IS_CLOSED="STREAM_IS_CLOSED",T.ABORT_OTHER_INIT="ABORT_OTHER_INIT",T.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",T.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",T.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",T.PERMISSION_DENIED="PERMISSION_DENIED",T.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",T.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",T.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",T.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",T.TRACK_IS_DISABLED="TRACK_IS_DISABLED",T.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",T.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",T.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",T.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",T.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",T.UID_CONFLICT="UID_CONFLICT",T.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",T.INVALID_TRACK="INVALID_TRACK",T.SENDER_NOT_FOUND="SENDER_NOT_FOUND",T.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",T.SET_ANSWER_FAILED="SET_ANSWER_FAILED",T.ICE_FAILED="ICE_FAILED",T.PC_CLOSED="PC_CLOSED",T.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",T.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",T.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",T.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",T.INVALID_REMOTE_USER="INVALID_REMOTE_USER",T.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",T.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",T.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",T.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",T.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",T.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",T.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",T.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",T.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",T.WS_ABORT="WS_ABORT",T.WS_DISCONNECT="WS_DISCONNECT",T.WS_ERR="WS_ERR",T.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",T.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",T.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",T.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",T.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",T.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT="LIVE_STREAMING_TRANSCODING_NOT_SUPPORT",T.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",T.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",T.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",T.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",T.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",T.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",T.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",T.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",T.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",T.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",T.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",T.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",T.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"},function(ge,le,U){"use strict";U.d(le,"a",function(){return v});var D=U(0),R=window.AudioContext||window.webkitAudioContext,M=U(2),T=M.getParameter,N=M.setParameter,v=function(){return T("AUDIO_CONTEXT")||(console.log("Creating Audio Context"),N("AUDIO_CONTEXT",function(){if(R){var A=new R;return window.ctx=A,new Promise(function(p){document.body?p():window.addEventListener("load",p)}).then(function(){var p=function _(){"suspended"==A.state?(D.default.debug("AudioContext is suspended, auto resume"),A.resume().then(function(){D.default.debug("AudioContext resume success"),document.body.removeEventListener("touchend",_,!0),document.body.removeEventListener("mousedown",_,!0)})):(D.default.debug("AudioContext is running"),document.body.removeEventListener("touchend",_,!0),document.body.removeEventListener("mousedown",_,!0))};D.default.debug(">>> add event listener >>>>"),document.body.addEventListener("touchend",p,!0),document.body.addEventListener("mousedown",p,!0)}),A}throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}())),T("AUDIO_CONTEXT")};v()},function(ge,le,U){"use strict";var D=U(1),R=null,M=function(){try{R=window.require("electron")}catch(v){}return R},T=function(v){var A=D.report.reportApiInvoke(null,{callback:v,name:"getScreenSources",options:arguments,tag:"tracer"}),p=M();if(!p)return A&&A("electron is null");try{var _=p.desktopCapturer.getSources({types:["window","screen"]})}catch(E){console.log(E)}_ instanceof Promise?(console.log("electron.desktopCapturer.getSources return type is Promise"),_.then(function(E){return A&&A(null,E)}).catch(function(E){return A&&A(E)})):_=p.desktopCapturer.getSources({types:["window","screen"]},function(E,k){console.log("electron.desktopCapturer.getSources return type is callback"),A&&A(null,k)})},N=function(v,A,p){A={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:v,maxHeight:A.height,maxWidth:A.width,maxFrameRate:A.frameRate&&A.frameRate.max,minFrameRate:A.frameRate&&A.frameRate.min}}},navigator.webkitGetUserMedia(A,function(E){p&&p(null,E)},function(E){p&&p(E)})};le.a={isElectron:function(){return!!M()},getElectronInstance:M,getScreenSources:T,getScreenStream:N,shareScreen:function(v,A){T(function(p,_){if(p)return A&&A(p);!function(E,k){var H=document.createElement("div");H.innerText="share screen",H.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var I=document.createElement("div");I.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var S=document.createElement("div");S.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",S.setAttribute("style","height: 12%;");var B=document.createElement("div");B.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var P=document.createElement("div");P.setAttribute("style","text-align: right; padding: 16px 0;");var G=document.createElement("button");G.innerHTML="cancel",G.setAttribute("style","width: 85px;"),G.onclick=function(){document.body.removeChild(V),k&&k("NotAllowedError")},P.appendChild(G),I.appendChild(S),I.appendChild(B),I.appendChild(P);var V=document.createElement("div");V.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),V.appendChild(H),V.appendChild(I),document.body.appendChild(V),E.map(function(ie){if(ie.id){var de=document.createElement("div");de.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");var oe=ie.thumbnail;oe.getSize().width>1920&&(oe=oe.resize({width:1920})),de.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+oe.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+ie.name.replace(/[\u00A0-\u9999<>\&]/g,function(ae){return"&#"+ae.charCodeAt(0)+";"})+"</span>",de.onclick=function(){document.body.removeChild(V),k&&k(null,ie.id)},B.appendChild(de)}})}(_,function(E,k){if(E)return A&&A(E);N(k,v,A)})})}}},function(ge,le,U){"use strict";Object.defineProperty(le,"__esModule",{value:!0});var R,D=U(3);(R=le.LiveStreamingServiceMode||(le.LiveStreamingServiceMode={})).TRANSCODE="mix_streaming",R.RAW="raw_streaming",R.INJECT="inject_streaming",le.DEFAULT_LIVE_STREAMING_TRANSCODING_USER={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},le.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},le.isLiveStreamingTranscodingConfig=function(R){return D.isEmpty(R.width)||D.checkValidNumber(R.width,"config.width",0),D.isEmpty(R.height)||D.checkValidNumber(R.height,"config.height",0),D.isEmpty(R.videoBitrate)||D.checkValidNumber(R.videoBitrate,"config.videoBitrate",1,1e6),D.isEmpty(R.videoFramerate)||D.checkValidNumber(R.videoFramerate,"config.videoFramerate"),D.isEmpty(R.lowLatency)||D.checkValidBoolean(R.lowLatency,"config.lowLatency"),D.isEmpty(R.audioSampleRate)||D.checkValidEnum(R.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),D.isEmpty(R.audioBitrate)||D.checkValidNumber(R.audioBitrate,"config.audioBitrate",1,128),D.isEmpty(R.audioChannels)||D.checkValidEnum(R.audioChannels,"config.audioChannels",[1,2,3,4,5]),D.isEmpty(R.videoGop)||D.checkValidNumber(R.videoGop,"config.videoGop"),D.isEmpty(R.videoCodecProfile)||D.checkValidEnum(R.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),D.isEmpty(R.userCount)||D.checkValidNumber(R.userCount,"config.userCount",0,17),D.isEmpty(R.backgroundColor)||D.checkValidNumber(R.backgroundColor,"config.backgroundColor",0,16777215),R.transcodingUsers&&!D.isEmpty(R.transcodingUsers)&&(D.checkValidArray(R.transcodingUsers,"config.transcodingUsers"),R.transcodingUsers.forEach(function(M,T){D.checkValidUID(M.uid),D.isEmpty(M.x)||D.checkValidNumber(M.x,"transcodingUser["+T+"].x",0,1e4),D.isEmpty(M.y)||D.checkValidNumber(M.y,"transcodingUser["+T+"].y",0,1e4),D.isEmpty(M.width)||D.checkValidNumber(M.width,"transcodingUser["+T+"].width",0,1e4),D.isEmpty(M.height)||D.checkValidNumber(M.height,"transcodingUser["+T+"].height",0,1e4),D.isEmpty(M.zOrder)||D.checkValidNumber(M.zOrder-1,"transcodingUser["+T+"].zOrder",0,100),D.isEmpty(M.alpha)||D.checkValidFloatNumber(M.alpha,"transcodingUser["+T+"].alpha",0,1)})),R.images&&!D.isEmpty(R.images)&&(D.checkValidArray(R.images,"config.images"),R.images.forEach(function(M,T){D.checkValidString(M.url,"images["+T+"].url",1,1e3,!1),D.isEmpty(M.x)||D.checkValidNumber(M.x,"images["+T+"].x",0,1e4),D.isEmpty(M.y)||D.checkValidNumber(M.y,"images["+T+"].y",0,1e4),D.isEmpty(M.width)||D.checkValidNumber(M.width,"images["+T+"].width",0,1e4),D.isEmpty(M.height)||D.checkValidNumber(M.height,"images["+T+"].height",0,1e4),D.isEmpty(M.zOrder)||D.checkValidNumber(M.zOrder,"images["+T+"].zOrder",0,255),D.isEmpty(M.alpha)||D.checkValidFloatNumber(M.alpha,"images["+T+"].alpha",0,1)})),!0},le.DEFAULT_TRANSCODING_CONFIG={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},le.isInjectStreamConfig=function(R){return D.isEmpty(R.audioVolume)||D.checkValidNumber(R.audioVolume,"config.audioVolume",0,1e3),D.isEmpty(R.audioBitrate)||D.checkValidNumber(R.audioBitrate,"config.audioBitrate",1,1e4),D.isEmpty(R.audioChannels)||D.checkValidEnum(R.audioChannels,"config.audioChannels",[1,2]),D.isEmpty(R.audioSampleRate)||D.checkValidEnum(R.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),D.isEmpty(R.width)||D.checkValidNumber(R.width,"config.width",0,1e4),D.isEmpty(R.height)||D.checkValidNumber(R.height,"config.height",0,1e4),D.isEmpty(R.videoBitrate)||D.checkValidNumber(R.videoBitrate,"config.videoBitrate",1,1e4),D.isEmpty(R.videoFramerate)||D.checkValidNumber(R.videoFramerate,"config.videoFramerate",1,1e4),D.isEmpty(R.videoGop)||D.checkValidNumber(R.videoGop,"config.videoGop",1,1e4),!0},le.DEFAULT_INJECT_CONFIG={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30},function(R){R.WARNING="@live_uap-warning",R.ERROR="@line_uap-error",R.PUBLISH_STREAM_STATUS="@live_uap-publish-status",R.INJECT_STREAM_STATUS="@live_uap-inject-status",R.WORKER_STATUS="@live_uap-worker-status",R.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(le.LiveStreamingUapSignalEvents||(le.LiveStreamingUapSignalEvents={})),function(R){R.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(le.LiveStreamingInternalEvents||(le.LiveStreamingInternalEvents={})),function(R){R[R.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",R[R.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",R[R.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",R[R.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",R[R.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",R[R.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",R[R.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",R[R.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",R[R.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",R[R.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",R[R.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",R[R.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",R[R.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",R[R.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",R[R.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",R[R.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",R[R.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",R[R.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE=505]="LIVE_STREAM_RESPONSE_INGNORE_MESSAGE",R[R.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",R[R.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",R[R.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",R[R.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(le.LIVE_STREAM_ERROR_CODE||(le.LIVE_STREAM_ERROR_CODE={})),function(R){R.CONNECTED="websocket:connected",R.RECONNECTING="websocket:reconnecting",R.WILL_RECONNECT="websocket:will_reconnect",R.CLOSED="websocket:closed",R.FAILED="websocket:failed",R.ON_MESSAGE="websocket:on_message",R.REQUEST_NEW_URLS="websocket:request_new_urls"}(le.WebSocketManagerEvents||(le.WebSocketManagerEvents={}))},function(ge,le,U){var D=U(54),R=U(55);ge.exports=function(M,T,N){var v=T&&N||0;"string"==typeof M&&(T="binary"===M?new Array(16):null,M=null);var A=(M=M||{}).random||(M.rng||D)();if(A[6]=15&A[6]|64,A[8]=63&A[8]|128,T)for(var p=0;p<16;++p)T[v+p]=A[p];return T||R(A)}},function(ge,le,U){"use strict";var D=this&&this.__assign||function(){return(D=Object.assign||function(P){for(var G,V=1,ie=arguments.length;V<ie;V++)for(var de in G=arguments[V])Object.prototype.hasOwnProperty.call(G,de)&&(P[de]=G[de]);return P}).apply(this,arguments)},R=this&&this.__awaiter||function(P,G,V,ie){return new(V||(V=Promise))(function(de,oe){function ae(d){try{C(ie.next(d))}catch(W){oe(W)}}function J(d){try{C(ie.throw(d))}catch(W){oe(W)}}function C(d){var W;d.done?de(d.value):(W=d.value,W instanceof V?W:new V(function(y){y(W)})).then(ae,J)}C((ie=ie.apply(P,G||[])).next())})},M=this&&this.__generator||function(P,G){var V,ie,de,oe,ae={label:0,sent:function(){if(1&de[0])throw de[1];return de[1]},trys:[],ops:[]};return oe={next:J(0),throw:J(1),return:J(2)},"function"==typeof Symbol&&(oe[Symbol.iterator]=function(){return this}),oe;function J(C){return function(d){return function(W){if(V)throw new TypeError("Generator is already executing.");for(;ae;)try{if(V=1,ie&&(de=2&W[0]?ie.return:W[0]?ie.throw||((de=ie.return)&&de.call(ie),0):ie.next)&&!(de=de.call(ie,W[1])).done)return de;switch(ie=0,de&&(W=[2&W[0],de.value]),W[0]){case 0:case 1:de=W;break;case 4:return ae.label++,{value:W[1],done:!1};case 5:ae.label++,ie=W[1],W=[0];continue;case 7:W=ae.ops.pop(),ae.trys.pop();continue;default:if(!((de=(de=ae.trys).length>0&&de[de.length-1])||6!==W[0]&&2!==W[0])){ae=0;continue}if(3===W[0]&&(!de||W[1]>de[0]&&W[1]<de[3])){ae.label=W[1];break}if(6===W[0]&&ae.label<de[1]){ae.label=de[1],de=W;break}if(de&&ae.label<de[2]){ae.label=de[2],ae.ops.push(W);break}de[2]&&ae.ops.pop(),ae.trys.pop();continue}W=G.call(P,ae)}catch(y){W=[6,y],ie=0}finally{V=de=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([C,d])}}},T=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(le,"__esModule",{value:!0});var N=U(2),v=T(U(34)),A=U(24),p=T(U(0)),_=U(1);function E(P){return new Promise(function(G){window.setTimeout(G,P)})}function k(P,G){return new Promise(function(V,ie){G.timeout=G.timeout||N.getParameter("HTTP_CONNECT_TIMEOUT"),G.responseType=G.responseType||"json",G.data&&(G.data=JSON.stringify(G.data)),G.headers=G.headers||{},G.headers["Content-Type"]="application/json",G.method="POST",G.url=P,v.default.request(G).then(function(de){V(de.data)}).catch(function(de){v.default.isCancel(de)?ie(new A.AgoraRTCError(A.AgoraRTCErrorCode.OPERATION_ABORT,"cancel token canceled")):ie("ECONNABORTED"===de.code?new A.AgoraRTCError(A.AgoraRTCErrorCode.NETWORK_TIMEOUT,de.message):de.response?new A.AgoraRTCError(A.AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR,de.response.status):new A.AgoraRTCError(A.AgoraRTCErrorCode.NETWORK_ERROR,de.message))})})}function H(P,G,V,ie){var de=this,oe=Object.assign({},le.DEFAULT_RETRY_CONFIG,ie),ae=oe.timeout,J=function(){return R(de,void 0,void 0,function(){return M(this,function(W){switch(W.label){case 0:return[4,E(ae)];case 1:return W.sent(),ae*=oe.timeoutFactor,ae=Math.min(oe.maxRetryTimeout,ae),[2]}})})},C=!1,d=new Promise(function(W,y){return R(de,void 0,void 0,function(){var u,K,m;return M(this,function(w){switch(w.label){case 0:G=G||function(){return!1},V=V||function(){return!0},u=0,w.label=1;case 1:if(!(u<oe.maxRetryCount))return[3,12];if(C)return[2,y(new A.AgoraRTCError(A.AgoraRTCErrorCode.OPERATION_ABORT))];w.label=2;case 2:return w.trys.push([2,7,,11]),[4,P()];case 3:return K=w.sent(),G(K,u)?u+1===oe.maxRetryCount?[2,W(K)]:[4,J()]:[3,5];case 4:return w.sent(),[3,6];case 5:return[2,W(K)];case 6:return[3,11];case 7:return m=w.sent(),V(m,u)?u+1===oe.maxRetryCount?[2,y(m)]:[4,J()]:[3,9];case 8:return w.sent(),[3,10];case 9:return[2,y(m)];case 10:return[3,11];case 11:return u+=1,[3,1];case 12:return[2]}})})});return d.cancel=function(){return C=!0},d}function I(P,G){return{addressList:P.servers.map(function(V,ie){return"wss://"+V.address.replace(/\./g,"-")+".edge.agora.io:"+V.wss+"?serviceName="+encodeURIComponent(G)}),workerToken:P.workerToken,vid:P.vid}}le.wait=E,le.post=k,le.DEFAULT_RETRY_CONFIG={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},le.getRetryWaitTime=function(P,G){var V=G.timeout*Math.pow(G.timeoutFactor,P);return Math.min(G.maxRetryTimeout,V)},le.retryable=H,le.liveStreamingServerResponseToResult=I;var S=1;function B(P,G,V,ie,de){var oe=this;void 0===de&&(de=le.DEFAULT_RETRY_CONFIG),S+=1;var ae,J,C={sid:V.sid,command:"convergeAllocateEdge",uid:"666",appId:V.appId,ts:Math.floor(Date.now()/1e3),seq:S,requestId:S,version:N.VERSION,cname:V.cname},d={service_name:G,json_body:JSON.stringify(C)},W=P[0];return H(function(){return R(oe,void 0,void 0,function(){var y,u,K,m,w;return M(this,function(x){switch(x.label){case 0:return ae=Date.now(),[4,k(W,{data:d,cancelToken:ie,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}})];case 1:if(y=x.sent(),J=Date.now()-ae,0!==y.code)throw K=new A.AgoraRTCError(A.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming ap error, code"+y.code,{retry:!0}),p.default.error(K.toString()),K;if(200!==(u=JSON.parse(y.json_body)).code)throw K=new A.AgoraRTCError(A.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center error, code: "+u.code+", reason: "+u.reason),p.default.error(K.toString()),K;if(!u.servers||0===u.servers.length)throw K=new A.AgoraRTCError(A.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center empty server"),p.default.error(K.toString()),K;if(m=I(u,G),N.getParameter("LIVE_STREAMING_ADDRESS"))try{w=JSON.parse(N.getParameter("LIVE_STREAMING_ADDRESS")),m.addressList=w}catch(ee){m.addressList=[N.getParameter("LIVE_STREAMING_ADDRESS")]}return[2,D(D({},m),{responseTime:J})]}})})},function(y,u){return _.report.requestApWorkerEvent(V.sid,{success:!0,sc:200,serviceName:G,responseDetail:JSON.stringify(y.addressList),firstSuccess:0===u,responseTime:J,serverIp:P[u%P.length]}),!1},function(y,u){return _.report.requestApWorkerEvent(V.sid,{success:!1,sc:y.data&&y.data.code||200,serviceName:G,responseTime:J,serverIp:P[u%P.length]}),!!(y.code!==A.AgoraRTCErrorCode.OPERATION_ABORT&&y.code!==A.AgoraRTCErrorCode.UNEXPECTED_RESPONSE||y.data&&y.data.retry)&&(W=P[(u+1)%P.length],!0)},de)}le.requestLiveStreamingWorkerManager=B,le.getLiveStreamingWorkerMangerResult=function(P,G,V){return R(this,void 0,void 0,function(){var ie,de;return M(this,function(oe){switch(oe.label){case 0:ie=N.getParameter("UAP_AP").map(function(ae){return G.proxyServer?"https://"+G.proxyServer+"/ap/?url="+ae+"/api/v1?action=uap":"https://"+ae+"/api/v1?action=uap"}),oe.label=1;case 1:return oe.trys.push([1,3,,4]),[4,B(ie,P,G,V)];case 2:return[2,oe.sent()];case 3:throw de=oe.sent(),_.report.requestApWorkerEvent(G.sid,{success:!1,sc:de.data&&de.data.code||200,serviceName:P,responseTime:de.data&&de.data.responseTime}),de;case 4:return[2]}})})}},function(ge,le,U){var D=U(68),R=U(69),M=U(31),T=U(70);ge.exports=function(N){return D(N)||R(N)||M(N)||T()}},function(ge,le,U){var D=U(32);ge.exports=function(R,M){if(R){if("string"==typeof R)return D(R,M);var T=Object.prototype.toString.call(R).slice(8,-1);return"Object"===T&&R.constructor&&(T=R.constructor.name),"Map"===T||"Set"===T?Array.from(T):"Arguments"===T||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T)?D(R,M):void 0}}},function(ge,le){ge.exports=function(U,D){(null==D||D>U.length)&&(D=U.length);for(var R=0,M=new Array(D);R<D;R++)M[R]=U[R];return M}},function(ge,le,U){"use strict";var D=this&&this.__spreadArrays||function(){for(var N=0,v=0,A=arguments.length;v<A;v++)N+=arguments[v].length;var p=Array(N),_=0;for(v=0;v<A;v++)for(var E=arguments[v],k=0,H=E.length;k<H;k++,_++)p[_]=E[k];return p};Object.defineProperty(le,"__esModule",{value:!0});var R=U(24),M=function(){function N(){this._events={},this.addListener=this.on}return N.prototype.getListeners=function(v){return this._events[v]?this._events[v].map(function(A){return A.listener}):[]},N.prototype.on=function(v,A){this._events[v]||(this._events[v]=[]);var p=this._events[v];-1===this._indexOfListener(p,A)&&p.push({listener:A,once:!1})},N.prototype.once=function(v,A){this._events[v]||(this._events[v]=[]);var p=this._events[v];-1===this._indexOfListener(p,A)&&p.push({listener:A,once:!0})},N.prototype.off=function(v,A){if(this._events[v]){var p=this._events[v],_=this._indexOfListener(p,A);-1!==_&&p.splice(_,1),0===this._events[v].length&&delete this._events[v]}},N.prototype.removeAllListeners=function(v){v?delete this._events[v]:this._events={}},N.prototype.emit=function(v){for(var A=[],p=1;p<arguments.length;p++)A[p-1]=arguments[p];this._events[v]||(this._events[v]=[]);for(var _=this._events[v].map(function(H){return H}),E=0;E<_.length;E+=1){var k=_[E];k.once&&this.off(v,k.listener),k.listener.apply(this,A||[])}},N.prototype._indexOfListener=function(v,A){for(var p=v.length;p--;)if(v[p].listener===A)return p;return-1},N}();function T(N,v){for(var A=[],p=2;p<arguments.length;p++)A[p-2]=arguments[p];var _=null,E=null;if(N.emit.apply(N,D([v],A,[function(k){_=k},function(k){E=k}])),null!==E)throw E;if(null===_)throw new R.AgoraRTCError(R.AgoraRTCErrorCode.UNEXPECTED_ERROR,"handler is not sync");return _}le.EventEmitter=M,le.emitAsPromise=function(N,v){for(var A=[],p=2;p<arguments.length;p++)A[p-2]=arguments[p];return 0===N.getListeners(v).length?Promise.reject(new R.AgoraRTCError(R.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not emit promise")):new Promise(function(_,E){N.emit.apply(N,D([v],A,[_,E]))})},le.emitAsInvokerNoResponse=function(N,v){for(var A=[],p=2;p<arguments.length;p++)A[p-2]=arguments[p];return 0===N.getListeners(v).length?null:T.apply(void 0,D([N,v],A))},le.emitAsInvoker=T},function(ge,le,U){ge.exports=U(74)},function(ge,le,U){"use strict";ge.exports=function(D,R){return function(){for(var M=new Array(arguments.length),T=0;T<M.length;T++)M[T]=arguments[T];return D.apply(R,M)}}},function(ge,le,U){"use strict";var D=U(18);function R(M){return encodeURIComponent(M).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}ge.exports=function(M,T,N){if(!T)return M;var v;if(N)v=N(T);else if(D.isURLSearchParams(T))v=T.toString();else{var A=[];D.forEach(T,function(_,E){null!=_&&(D.isArray(_)?E+="[]":_=[_],D.forEach(_,function(k){D.isDate(k)?k=k.toISOString():D.isObject(k)&&(k=JSON.stringify(k)),A.push(R(E)+"="+R(k))}))}),v=A.join("&")}if(v){var p=M.indexOf("#");-1!==p&&(M=M.slice(0,p)),M+=(-1===M.indexOf("?")?"?":"&")+v}return M}},function(ge,le,U){"use strict";ge.exports=function(D){return!(!D||!D.__CANCEL__)}},function(ge,le,U){"use strict";(function(D){var R=U(18),M=U(80),T={"Content-Type":"application/x-www-form-urlencoded"};function N(p,_){!R.isUndefined(p)&&R.isUndefined(p["Content-Type"])&&(p["Content-Type"]=_)}var v,A={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==D&&"[object process]"===Object.prototype.toString.call(D))&&(v=U(39)),v),transformRequest:[function(p,_){return M(_,"Accept"),M(_,"Content-Type"),R.isFormData(p)||R.isArrayBuffer(p)||R.isBuffer(p)||R.isStream(p)||R.isFile(p)||R.isBlob(p)?p:R.isArrayBufferView(p)?p.buffer:R.isURLSearchParams(p)?(N(_,"application/x-www-form-urlencoded;charset=utf-8"),p.toString()):R.isObject(p)?(N(_,"application/json;charset=utf-8"),JSON.stringify(p)):p}],transformResponse:[function(p){if("string"==typeof p)try{p=JSON.parse(p)}catch(_){}return p}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(p){return p>=200&&p<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};R.forEach(["delete","get","head"],function(p){A.headers[p]={}}),R.forEach(["post","put","patch"],function(p){A.headers[p]=R.merge(T)}),ge.exports=A}).call(this,U(79))},function(ge,le,U){"use strict";var D=U(18),R=U(81),M=U(36),T=U(83),N=U(86),v=U(87),A=U(40);ge.exports=function(p){return new Promise(function(_,E){var k=p.data,H=p.headers;D.isFormData(k)&&delete H["Content-Type"];var I=new XMLHttpRequest;p.auth&&(H.Authorization="Basic "+btoa((p.auth.username||"")+":"+(p.auth.password||"")));var P=T(p.baseURL,p.url);if(I.open(p.method.toUpperCase(),M(P,p.params,p.paramsSerializer),!0),I.timeout=p.timeout,I.onreadystatechange=function(){if(I&&4===I.readyState&&(0!==I.status||I.responseURL&&0===I.responseURL.indexOf("file:"))){var ie="getAllResponseHeaders"in I?N(I.getAllResponseHeaders()):null;R(_,E,{data:p.responseType&&"text"!==p.responseType?I.response:I.responseText,status:I.status,statusText:I.statusText,headers:ie,config:p,request:I}),I=null}},I.onabort=function(){I&&(E(A("Request aborted",p,"ECONNABORTED",I)),I=null)},I.onerror=function(){E(A("Network Error",p,null,I)),I=null},I.ontimeout=function(){var ie="timeout of "+p.timeout+"ms exceeded";p.timeoutErrorMessage&&(ie=p.timeoutErrorMessage),E(A(ie,p,"ECONNABORTED",I)),I=null},D.isStandardBrowserEnv()){var G=U(88),V=(p.withCredentials||v(P))&&p.xsrfCookieName?G.read(p.xsrfCookieName):void 0;V&&(H[p.xsrfHeaderName]=V)}if("setRequestHeader"in I&&D.forEach(H,function(ie,de){void 0===k&&"content-type"===de.toLowerCase()?delete H[de]:I.setRequestHeader(de,ie)}),D.isUndefined(p.withCredentials)||(I.withCredentials=!!p.withCredentials),p.responseType)try{I.responseType=p.responseType}catch(ie){if("json"!==p.responseType)throw ie}"function"==typeof p.onDownloadProgress&&I.addEventListener("progress",p.onDownloadProgress),"function"==typeof p.onUploadProgress&&I.upload&&I.upload.addEventListener("progress",p.onUploadProgress),p.cancelToken&&p.cancelToken.promise.then(function(ie){I&&(I.abort(),E(ie),I=null)}),void 0===k&&(k=null),I.send(k)})}},function(ge,le,U){"use strict";var D=U(82);ge.exports=function(R,M,T,N,v){var A=new Error(R);return D(A,M,T,N,v)}},function(ge,le,U){"use strict";var D=U(18);ge.exports=function(R,M){M=M||{};var T={},N=["url","method","params","data"],v=["headers","auth","proxy"],A=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];D.forEach(N,function(E){void 0!==M[E]&&(T[E]=M[E])}),D.forEach(v,function(E){D.isObject(M[E])?T[E]=D.deepMerge(R[E],M[E]):void 0!==M[E]?T[E]=M[E]:D.isObject(R[E])?T[E]=D.deepMerge(R[E]):void 0!==R[E]&&(T[E]=R[E])}),D.forEach(A,function(E){void 0!==M[E]?T[E]=M[E]:void 0!==R[E]&&(T[E]=R[E])});var p=N.concat(v).concat(A),_=Object.keys(M).filter(function(E){return-1===p.indexOf(E)});return D.forEach(_,function(E){void 0!==M[E]?T[E]=M[E]:void 0!==R[E]&&(T[E]=R[E])}),T}},function(ge,le,U){"use strict";function D(R){this.message=R}D.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},D.prototype.__CANCEL__=!0,ge.exports=D},function(ge,le){ge.exports=function(U,D,R){return D in U?Object.defineProperty(U,D,{value:R,enumerable:!0,configurable:!0,writable:!0}):U[D]=R,U}},function(ge,le,U){"use strict";var D=this&&this.__awaiter||function(I,S,B,P){return new(B||(B=Promise))(function(G,V){function ie(ae){try{oe(P.next(ae))}catch(J){V(J)}}function de(ae){try{oe(P.throw(ae))}catch(J){V(J)}}function oe(ae){var J;ae.done?G(ae.value):(J=ae.value,J instanceof B?J:new B(function(C){C(J)})).then(ie,de)}oe((P=P.apply(I,S||[])).next())})},R=this&&this.__generator||function(I,S){var B,P,G,V,ie={label:0,sent:function(){if(1&G[0])throw G[1];return G[1]},trys:[],ops:[]};return V={next:de(0),throw:de(1),return:de(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function de(oe){return function(ae){return function(J){if(B)throw new TypeError("Generator is already executing.");for(;ie;)try{if(B=1,P&&(G=2&J[0]?P.return:J[0]?P.throw||((G=P.return)&&G.call(P),0):P.next)&&!(G=G.call(P,J[1])).done)return G;switch(P=0,G&&(J=[2&J[0],G.value]),J[0]){case 0:case 1:G=J;break;case 4:return ie.label++,{value:J[1],done:!1};case 5:ie.label++,P=J[1],J=[0];continue;case 7:J=ie.ops.pop(),ie.trys.pop();continue;default:if(!((G=(G=ie.trys).length>0&&G[G.length-1])||6!==J[0]&&2!==J[0])){ie=0;continue}if(3===J[0]&&(!G||J[1]>G[0]&&J[1]<G[3])){ie.label=J[1];break}if(6===J[0]&&ie.label<G[1]){ie.label=G[1],G=J;break}if(G&&ie.label<G[2]){ie.label=G[2],ie.ops.push(J);break}G[2]&&ie.ops.pop(),ie.trys.pop();continue}J=S.call(I,ie)}catch(C){J=[6,C],P=0}finally{B=G=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}([oe,ae])}}},M=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}},T=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var S={};if(null!=I)for(var B in I)Object.hasOwnProperty.call(I,B)&&(S[B]=I[B]);return S.default=I,S};Object.defineProperty(le,"__esModule",{value:!0});var N=M(U(56)),v=T(U(60)),A=T(U(61)),p=M(U(0)),_=U(2),E=N.default.Root.fromJSON(A),k=function(){function I(){this.requestArray=[],this.retryBackoffCount=0,this.state=0}return I.prototype.setProxy=function(S){this.proxyServer=S},I.prototype.sendReportList=function(S,B){var P=this,G=this._dataConvert("ProtoRaws",{vid:B,sendTs:Math.round(Date.now()/1e3),payloads:S.map(function(V){return{id:v[V.type],msg:P._dataConvert(V.type,V.data)}})});this.send(G)},I.prototype._dataConvert=function(S,B){var P;try{P=E.lookupType("protobuf."+S)}catch(V){p.default.error("[send-proto] invalid proto name "+S)}var G=P.create(B);return P.encode(G).finish()},I.prototype.send=function(S){0==this.state?this._send(S):this.requestArray.push(S)},I.prototype._send=function(S){return D(this,void 0,void 0,function(){return R(this,function(B){switch(B.label){case 0:return B.trys.push([0,2,,4]),this.state=1,[4,this.request(S)];case 1:return B.sent(),this.retryBackoffCount=0,0!==this.requestArray.length?this._send(this.requestArray.shift()):this.state=0,[3,4];case 2:return B.sent(),[4,H(this.retryBackoffCount++<2?200:1e4)];case 3:return B.sent(),this._send(S),[3,4];case 4:return[2]}})})},I.prototype.request=function(S){return D(this,void 0,void 0,function(){var B,P;return R(this,function(G){switch(G.label){case 0:B=this._getAddress(),P=this._getBackupAddress(),G.label=1;case 1:return G.trys.push([1,3,,5]),[4,this._request(B,S)];case 2:return G.sent(),[3,5];case 3:return G.sent(),[4,this._request(P,S)];case 4:return G.sent(),[3,5];case 5:return[2]}})})},I.prototype._request=function(S,B){return this._post(S,B)},I.prototype._post=function(S,B){var P=this;return new Promise(function(G,V){var ie=new XMLHttpRequest;ie.timeout=_.getParameter("HTTP_CONNECT_TIMEOUT"),ie.open("POST",S,!0),ie.setRequestHeader("Content-type","application/octet-stream"),P.proxyServer||(ie.setRequestHeader("Cache-Control","no-cache, no-store"),ie.setRequestHeader("Pragma","no-cache"),ie.setRequestHeader("Expires","0")),ie.onload=function(de){G(ie.responseText)},ie.onerror=function(de){V(de)},ie.ontimeout=function(de){V(de)},ie.send(B)})},I.prototype._getAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+_.getParameter("EVENT_REPORT_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+_.getParameter("EVENT_REPORT_DOMAIN")+":6443/events/proto-raws"},I.prototype._getBackupAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+_.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+_.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+":6443/events/proto-raws"},I}();le.default=k;var H=function(I){return new Promise(function(S){window.setTimeout(S,I)})}},function(ge,le){ge.exports=function(U,D){if(!(U instanceof D))throw new TypeError("Cannot call a class as a function")}},function(ge,le){function U(D,R){for(var M=0;M<R.length;M++){var T=R[M];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(D,T.key,T)}}ge.exports=function(D,R,M){return R&&U(D.prototype,R),M&&U(D,M),D}},function(ge,le,U){"use strict";var D=this&&this.__awaiter||function(p,_,E,k){return new(E||(E=Promise))(function(H,I){function S(G){try{P(k.next(G))}catch(V){I(V)}}function B(G){try{P(k.throw(G))}catch(V){I(V)}}function P(G){var V;G.done?H(G.value):(V=G.value,V instanceof E?V:new E(function(ie){ie(V)})).then(S,B)}P((k=k.apply(p,_||[])).next())})},R=this&&this.__generator||function(p,_){var E,k,H,I,S={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]};return I={next:B(0),throw:B(1),return:B(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function B(P){return function(G){return function(V){if(E)throw new TypeError("Generator is already executing.");for(;S;)try{if(E=1,k&&(H=2&V[0]?k.return:V[0]?k.throw||((H=k.return)&&H.call(k),0):k.next)&&!(H=H.call(k,V[1])).done)return H;switch(k=0,H&&(V=[2&V[0],H.value]),V[0]){case 0:case 1:H=V;break;case 4:return S.label++,{value:V[1],done:!1};case 5:S.label++,k=V[1],V=[0];continue;case 7:V=S.ops.pop(),S.trys.pop();continue;default:if(!((H=(H=S.trys).length>0&&H[H.length-1])||6!==V[0]&&2!==V[0])){S=0;continue}if(3===V[0]&&(!H||V[1]>H[0]&&V[1]<H[3])){S.label=V[1];break}if(6===V[0]&&S.label<H[1]){S.label=H[1],H=V;break}if(H&&S.label<H[2]){S.label=H[2],S.ops.push(V);break}H[2]&&S.ops.pop(),S.trys.pop();continue}V=_.call(p,S)}catch(ie){V=[6,ie],k=0}finally{E=H=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([P,G])}}},M=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(le,"__esModule",{value:!0});var T,p,N=M(U(0)),v=U(15);(p=T||(T={})).NEW="new",p.PREPARING_OFFER="preparing-offer",p.OFFER_SENT="offer-sent",p.ESTABLISHED="established",p.CLOSED="closed";var A=function(){function p(_){this.candidate=null,this.state=T.NEW,this.config=_,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(_),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:this.config.codec.toUpperCase(),bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return p.prototype.addStream=function(_){this.peerConnection.addStream(_)},p.prototype.setRtpSenderParameters=function(_){return D(this,void 0,void 0,function(){return R(this,function(E){return[2]})})},p.prototype.setAnswer=function(_){var E=JSON.parse(_);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:E.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},p.prototype.close=function(){this.peerConnection.close()},p.prototype.getStats=function(_,E){if(void 0===E&&(E=500),E=E>500?500:E,Date.now()-this.lastTimeGetStats<E){var k=[];this.config.isSubscriber?(k.push(this.receiveVideoStats),k.push(this.receiveAudioStats)):(k.push(this.sendAudioStats),k.push(this.sendVideoStats)),k.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),_&&_(k)}else this._getStats(_)},p.prototype._getStats=function(_){var E=this,k=[];this.peerConnection.getStats(null).then(function(H){E.lastTimeGetStats=Date.now(),Object.keys(H).map(function(I){var S=H[I];E.config.isSubscriber?S.type&&"inboundrtp"===S.type&&S.mediaType&&"audio"===S.mediaType?(E.receiveAudioStats.id=S.id+"recv",E.receiveAudioStats.type=S.type+"",E.receiveAudioStats.mediaType=S.mediaType+"",E.receiveAudioStats.packetsReceived=S.packetsReceived+"",E.receiveAudioStats.bytesReceived=S.bytesReceived+"",E.receiveAudioStats.packetsLost=S.packetsLost+"",E.receiveAudioStats.googJitterReceived=S.jitter+""):S.type&&"inboundrtp"===S.type&&S.mediaType&&"video"===S.mediaType?(E.receiveVideoStats.id=S.id+"recv",E.receiveVideoStats.type=S.type+"",E.receiveVideoStats.mediaType=S.mediaType+"",E.receiveVideoStats.packetsReceived=S.packetsReceived+"",E.receiveVideoStats.bytesReceived=S.bytesReceived+"",E.receiveVideoStats.packetsLost=S.packetsLost+"",E.receiveVideoStats.googJitterBufferMs=S.jitter+"",E.receiveVideoStats.googPlisSent=S.pliCount+"",E.receiveVideoStats.googFirsSent=S.firCount+"",E.receiveVideoStats.googNacksSent=S.nackCount+""):S.remoteSource&&S.type&&"track"===S.type&&S.trackIdentifier&&-1!==S.trackIdentifier.indexOf("v")?(E.receiveVideoStats.googFrameHeightReceived=S.frameHeight+"",E.receiveVideoStats.googFrameWidthReceived=S.frameWidth+"",E.receiveVideoStats.googFrameRateDecoded=S.framesPerSecond+"",E.receiveVideoStats.googFrameRateOutput=S.framesPerSecond+"",E.receiveVideoStats.googFrameRateReceived=S.framesPerSecond+"",E.receiveVideoStats.googFramesDecoded=S.framesDecoded+"",E.receiveVideoStats.googFrameReceived=S.framesReceived+""):S.remoteSource&&S.type&&"track"===S.type&&S.trackIdentifier&&-1!==S.trackIdentifier.indexOf("a")&&(E.receiveAudioStats.audioOutputLevel=S.audioLevel+""):!S.isRemote&&S.type&&"outboundrtp"===S.type&&S.mediaType&&"audio"===S.mediaType?(E.sendAudioStats.id=S.id+"send",E.sendAudioStats.type=S.type+"",E.sendAudioStats.mediaType=S.mediaType+"",E.sendAudioStats.packetsSent=S.packetsSent+"",E.sendAudioStats.bytesSent=S.bytesSent+""):!S.isRemote&&S.type&&"outboundrtp"===S.type&&S.mediaType&&"video"===S.mediaType?(E.sendVideoStats.id=S.id+"send",E.sendVideoStats.type=S.type+"",E.sendVideoStats.mediaType=S.mediaType+"",E.sendVideoStats.packetsSent=S.packetsSent+"",E.sendVideoStats.bytesSent=S.bytesSent+"",E.sendVideoStats.googRtt=S.roundTripTime+"",E.sendVideoStats.googPlisReceived=S.pliCount+"",E.sendVideoStats.googFirsReceived=S.firCount+"",E.sendVideoStats.googNacksReceived=S.nackCount+""):!S.remoteSource&&S.type&&"track"===S.type&&S.framesSent&&0!==S.framesSent&&(E.sendVideoStats.googFrameHeightSent=S.frameHeight+"",E.sendVideoStats.googFrameHeightInput=S.frameHeight+"",E.sendVideoStats.googFrameWidthSent=S.frameWidth+"",E.sendVideoStats.googFrameWidthInput=S.frameWidth+"",E.sendVideoStats.googFramesEncoded=S.framesSent+"",E.sendVideoStats.googFrameRateSent=S.framesPerSecond+"")}),E.config.isSubscriber?(k.push(E.receiveVideoStats),k.push(E.receiveAudioStats)):(k.push(E.sendAudioStats),k.push(E.sendVideoStats)),k.push({id:"time",startTime:E.connectedTime,timestamp:Date.now()}),_&&_(k)})},p.prototype.getStatsRate=function(_){this.getStats(_)},p.prototype.initPeecConnection=function(_){var E=_.stunServerUrl,k=_.turnServer,H=_.iceServers;return this.pcConfig={iceServers:[]},H instanceof Array?this.pcConfig.iceServers=_.iceServers:E&&(E instanceof Array?E.map(function(I){"string"==typeof I&&""!==I&&this.pcConfig.iceServers.push({urls:I})}):"string"==typeof E&&""!==E&&this.pcConfig.iceServers.push({urls:E})),k&&(k instanceof Array?k.map(function(I){"string"==typeof I.url&&""!==I.url&&this.pcConfig.iceServers.push({username:I.username,credential:I.credential,url:I.url})}):"auto"!==k.mode&&"manual"!==k.mode||(k.udpport&&this.pcConfig.iceServers.push({username:k.username,credential:k.credential,credentialType:"password",urls:"turn:"+k.url+":"+k.udpport+"?transport=udp"}),"string"==typeof k.tcpport&&""!==k.tcpport&&this.pcConfig.iceServers.push({username:k.username,credential:k.credential,credentialType:"password",urls:"turn:"+k.url+":"+k.tcpport+"?transport=tcp"}),!0===k.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new v.RTCPeerConnection(this.pcConfig)},p.prototype._ontrack=function(_){this.onaddstream&&this.onaddstream(_,"ontrack")},p.prototype._onaddstream=function(_){this.onaddstream&&this.onaddstream(_,"onaddstream")},p.prototype._oniceconnectionstatechange=function(_){"connected"===_.currentTarget.iceConnectionState&&(this.state=T.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(_.currentTarget.iceConnectionState)},p.prototype._onicecandidate=function(_){!this.candidate&&_&&(this.candidate=_.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},p.prototype.setLocalSDP=function(_){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:_.sdp,type:"offer"})),this.state=T.PREPARING_OFFER,_},p.prototype.editLocalSDP=function(_){return _.sdp=this.setBandWidth(_.sdp),_.sdp=this.reviseOpus(_.sdp),_.sdp=this.addCandidate(_.sdp),_},p.prototype.setSendRecv=function(_){return(_=(_=_.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},p.prototype.setBandWidth=function(_){var E,k,H=this.config,I=H.codec,S=H.minVideoBW,B=H.maxVideoBW,P=H.maxAudioBW,G=H.clientId;if((E=_.match(/m=video.*\r\n/))&&S&&B){k=E[0]+"b=AS:"+B+"\r\n";var V=0,ie=0;"h264"===I?(V=_.search(/a=rtpmap:(\d+) H264\/90000\r\n/),ie=_.search(/H264\/90000\r\n/)):"vp8"===I?(V=_.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),ie=_.search(/VP8\/90000\r\n/)):"vp9"===I&&(V=_.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),ie=_.search(/VP9\/90000\r\n/)),-1!==V&&-1!==ie&&ie-V>10&&(k=k+"a=fmtp:"+_.slice(V+9,ie-1)+" x-google-min-bitrate="+S+"\r\n"),_=_.replace(E[0],k),N.default.debug("["+G+"]Set Video Bitrate - min:"+S+" max:"+B)}return(E=_.match(/m=audio.*\r\n/))&&P&&(_=_.replace(E[0],k=E[0]+"b=AS:"+P+"\r\n")),_},p.prototype.reviseOpus=function(_){return(_=_.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},p.prototype.addCandidate=function(_){return _+"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},p.prototype.sendOffer=function(_){this.config.callback(JSON.stringify({sdp:_.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=T.OFFER_SENT},p}();le.default=A},function(ge,le,U){var D=U(63),R=U(64),M=U(31),T=U(65);ge.exports=function(N,v){return D(N)||R(N,v)||M(N,v)||T()}},function(ge,le,U){var D,R,M;R=this,M=function(){"use strict";var T,N=this;function v(k){N.console&&(N.console.error?N.console.error(k):N.console.log&&N.console.log(k))}function A(k,H,I,S){var B=S||v,P=k.createShader(I);return k.shaderSource(P,H),k.compileShader(P),k.getShaderParameter(P,k.COMPILE_STATUS)?P:(B("*** Error compiling shader '"+P+"':"+k.getShaderInfoLog(P)),k.deleteShader(P),null)}function p(k,H,I,S,B){var P=B||v,G=k.createProgram();return H.forEach(function(V){k.attachShader(G,V)}),I&&I.forEach(function(V,ie){k.bindAttribLocation(G,S?S[ie]:ie,V)}),k.linkProgram(G),k.getProgramParameter(G,k.LINK_STATUS)?G:(P("Error in program linking:"+k.getProgramInfoLog(G)),k.deleteProgram(G),null)}(T=T||N)===T.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var _,E=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(_=HTMLCanvasElement.prototype.getContext,function(){var k=arguments,H=k[0];return"webgl"===H&&((k=[].slice.call(arguments))[0]="experimental-webgl"),_.apply(this,k)})),{createProgram:p,createProgramFromSources:function(k,H,I,S,B){for(var P=[],G=0;G<H.length;++G)P.push(A(k,H[G],k[E[G]],B));return p(k,P,I,S,B)}}},void 0===(D=function(){return M.call(R)}.apply(le,[]))||(ge.exports=D)},function(ge,le,U){"use strict";var D=this&&this.__awaiter||function(p,_,E,k){return new(E||(E=Promise))(function(H,I){function S(G){try{P(k.next(G))}catch(V){I(V)}}function B(G){try{P(k.throw(G))}catch(V){I(V)}}function P(G){var V;G.done?H(G.value):(V=G.value,V instanceof E?V:new E(function(ie){ie(V)})).then(S,B)}P((k=k.apply(p,_||[])).next())})},R=this&&this.__generator||function(p,_){var E,k,H,I,S={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]};return I={next:B(0),throw:B(1),return:B(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function B(P){return function(G){return function(V){if(E)throw new TypeError("Generator is already executing.");for(;S;)try{if(E=1,k&&(H=2&V[0]?k.return:V[0]?k.throw||((H=k.return)&&H.call(k),0):k.next)&&!(H=H.call(k,V[1])).done)return H;switch(k=0,H&&(V=[2&V[0],H.value]),V[0]){case 0:case 1:H=V;break;case 4:return S.label++,{value:V[1],done:!1};case 5:S.label++,k=V[1],V=[0];continue;case 7:V=S.ops.pop(),S.trys.pop();continue;default:if(!((H=(H=S.trys).length>0&&H[H.length-1])||6!==V[0]&&2!==V[0])){S=0;continue}if(3===V[0]&&(!H||V[1]>H[0]&&V[1]<H[3])){S.label=V[1];break}if(6===V[0]&&S.label<H[1]){S.label=H[1],H=V;break}if(H&&S.label<H[2]){S.label=H[2],S.ops.push(V);break}H[2]&&S.ops.pop(),S.trys.pop();continue}V=_.call(p,S)}catch(ie){V=[6,ie],k=0}finally{E=H=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([P,G])}}},M=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(le,"__esModule",{value:!0});var T=U(66),N=U(5),v=M(U(0));le.getSupportedCodec=function(p){return D(void 0,void 0,void 0,function(){var _,E,k,H;return R(this,function(S){switch(S.label){case 0:return _={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(v.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{E=T.createRTCPeerConnection({iceServers:[]})}catch(B){return v.default.error("Failed to init RTCPeerConnection",B),[2,Promise.reject(B)]}return E?[3,2]:(v.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(_)]);case 2:return p&&p.stream?[3,7]:(k={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},H=void 0,(N.isSafari()||N.isFireFox()||N.isWeChatBrowser())&&E.addTransceiver?(E.addTransceiver("audio"),E.addTransceiver("video"),[4,E.createOffer()]):[3,4]);case 3:return H=S.sent(),[3,6];case 4:return[4,new Promise(function(B,P){var G=setTimeout(function(){P("CREATEOFFER_TIMEOUT")},3e3);E.createOffer(function(V){clearTimeout(G),B(V)},function(V){clearTimeout(G),P(V)},k)})];case 5:H=S.sent(),S.label=6;case 6:return E.close(),[2,A(H.sdp)];case 7:return p.stream.getTracks&&E.addTrack?p.stream.getTracks().forEach(function(B){E.addTrack(B,p.stream)}):E.addStream(p.stream),H=void 0,N.isSafari()||N.isFireFox()?[4,E.createOffer()]:[3,9];case 8:return H=S.sent(),[3,11];case 9:return[4,new Promise(function(B,P){E.createOffer(B,P)})];case 10:H=S.sent(),S.label=11;case 11:return E.close(),[2,A(H.sdp)]}})})};var A=function(p){var _={video:[],audio:[]};return p.match(/ VP8/i)&&_.video.push("VP8"),p.match(/ VP9/i)&&_.video.push("VP9"),p.match(/ H264/i)&&_.video.push("H264"),p.match(/ opus/i)&&_.audio.push("OPUS"),Promise.resolve(_)}},function(ge,le,U){"use strict";var D=this&&this.__awaiter||function(N,v,A,p){return new(A||(A=Promise))(function(_,E){function k(S){try{I(p.next(S))}catch(B){E(B)}}function H(S){try{I(p.throw(S))}catch(B){E(B)}}function I(S){var B;S.done?_(S.value):(B=S.value,B instanceof A?B:new A(function(P){P(B)})).then(k,H)}I((p=p.apply(N,v||[])).next())})},R=this&&this.__generator||function(N,v){var A,p,_,E,k={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return E={next:H(0),throw:H(1),return:H(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function H(I){return function(S){return function(B){if(A)throw new TypeError("Generator is already executing.");for(;k;)try{if(A=1,p&&(_=2&B[0]?p.return:B[0]?p.throw||((_=p.return)&&_.call(p),0):p.next)&&!(_=_.call(p,B[1])).done)return _;switch(p=0,_&&(B=[2&B[0],_.value]),B[0]){case 0:case 1:_=B;break;case 4:return k.label++,{value:B[1],done:!1};case 5:k.label++,p=B[1],B=[0];continue;case 7:B=k.ops.pop(),k.trys.pop();continue;default:if(!((_=(_=k.trys).length>0&&_[_.length-1])||6!==B[0]&&2!==B[0])){k=0;continue}if(3===B[0]&&(!_||B[1]>_[0]&&B[1]<_[3])){k.label=B[1];break}if(6===B[0]&&k.label<_[1]){k.label=_[1],_=B;break}if(_&&k.label<_[2]){k.label=_[2],k.ops.push(B);break}_[2]&&k.ops.pop(),k.trys.pop();continue}B=v.call(N,k)}catch(P){B=[6,P],p=0}finally{A=_=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([I,S])}}};Object.defineProperty(le,"__esModule",{value:!0});var M=U(10);function T(N){for(var v="",A=0;A<N.length;A+=1)v+=String.fromCharCode(N[A]);return window.btoa(v)}le.encryptRSA=function(N){return D(void 0,void 0,void 0,function(){var v,A,p,_;return R(this,function(E){switch(E.label){case 0:return v=M.base64ToUint8Array("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),[4,window.crypto.subtle.importKey("spki",v,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])];case 1:return A=E.sent(),k=N,p=(new TextEncoder).encode(k),[4,window.crypto.subtle.encrypt({name:"RSA-OAEP"},A,p)];case 2:return _=E.sent(),[2,T(new Uint8Array(_))]}var k})})}},function(ge,le,U){"use strict";var D=this&&this.__awaiter||function(_,E,k,H){return new(k||(k=Promise))(function(I,S){function B(V){try{G(H.next(V))}catch(ie){S(ie)}}function P(V){try{G(H.throw(V))}catch(ie){S(ie)}}function G(V){var ie;V.done?I(V.value):(ie=V.value,ie instanceof k?ie:new k(function(de){de(ie)})).then(B,P)}G((H=H.apply(_,E||[])).next())})},R=this&&this.__generator||function(_,E){var k,H,I,S,B={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return S={next:P(0),throw:P(1),return:P(2)},"function"==typeof Symbol&&(S[Symbol.iterator]=function(){return this}),S;function P(G){return function(V){return function(ie){if(k)throw new TypeError("Generator is already executing.");for(;B;)try{if(k=1,H&&(I=2&ie[0]?H.return:ie[0]?H.throw||((I=H.return)&&I.call(H),0):H.next)&&!(I=I.call(H,ie[1])).done)return I;switch(H=0,I&&(ie=[2&ie[0],I.value]),ie[0]){case 0:case 1:I=ie;break;case 4:return B.label++,{value:ie[1],done:!1};case 5:B.label++,H=ie[1],ie=[0];continue;case 7:ie=B.ops.pop(),B.trys.pop();continue;default:if(!((I=(I=B.trys).length>0&&I[I.length-1])||6!==ie[0]&&2!==ie[0])){B=0;continue}if(3===ie[0]&&(!I||ie[1]>I[0]&&ie[1]<I[3])){B.label=ie[1];break}if(6===ie[0]&&B.label<I[1]){B.label=I[1],I=ie;break}if(I&&B.label<I[2]){B.label=I[2],B.ops.push(ie);break}I[2]&&B.ops.pop(),B.trys.pop();continue}ie=E.call(_,B)}catch(de){ie=[6,de],H=0}finally{k=I=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([G,V])}}},M=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(le,"__esModule",{value:!0});var T=M(U(0)),N=U(71),v=U(24),A=U(1),p=U(27);le.addLiveStreamingCapability=function(_,E){var k=this,H=function(I){var S=I.type;if(!_.joinInfo)return new v.AgoraRTCError(v.AgoraRTCErrorCode.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();switch(S){case p.LiveStreamingServiceMode.INJECT:return _._injectStreamingClient||(_._injectStreamingClient=new N.AgoraRTCLiveStreamingClient(_.joinInfo),_._injectStreamingClient.onInjectStatusChange=function(B,P,G){_.gatewayClient.dispatchEvent({type:"streamInjectedStatus",url:G,status:B})}),_._injectStreamingClient;case p.LiveStreamingServiceMode.RAW:return _._liveRawStreamingClient||(_._liveRawStreamingClient=new N.AgoraRTCLiveStreamingClient(_.joinInfo),_._liveRawStreamingClient.setGatewayConnectionState(_.getConnectionState()),_.on("connection-state-change",function(B){_._liveRawStreamingClient.setGatewayConnectionState(B.curState),"CONNECTING"===B.prevState&&"CONNECTED"===B.curState&&_._liveRawStreamingClient&&_._liveRawStreamingClient.resetAllTask()}),_._liveRawStreamingClient.onLiveStreamError=function(B,P){T.default.error("LIVE_STREAMING_ERROR",P.toString()),_.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:B,reason:P.code})},_._liveRawStreamingClient.onLiveStreamWarning=function(B,P){T.default.warning("LIVE_STREAMING_WARNING",P.toString()),_.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:B,reason:P.code})}),_._liveRawStreamingClient;case p.LiveStreamingServiceMode.TRANSCODE:return _._liveTranscodeStreamingClient||(_._liveTranscodeStreamingClient=new N.AgoraRTCLiveStreamingClient(_.joinInfo),_._liveTranscodeStreamingClient.setGatewayConnectionState(_.getConnectionState()),_.on("connection-state-change",function(B){_._liveTranscodeStreamingClient.setGatewayConnectionState(B.curState),"CONNECTING"===B.prevState&&"CONNECTED"===B.curState&&_._liveTranscodeStreamingClient&&_._liveTranscodeStreamingClient.resetAllTask()}),_._liveTranscodeStreamingClient.onLiveStreamError=function(B,P){T.default.error("LIVE_STREAMING_ERROR",P.toString()),_.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:B,reason:P.code})},_._liveTranscodeStreamingClient.onLiveStreamWarning=function(B,P){T.default.warning("LIVE_STREAMING_WARNING",P.toString()),_.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:B,reason:P})}),_._liveTranscodeStreamingClient}};_.gatewayClient.addEventListener("join",function(I){_._injectStreamingClient&&_._injectStreamingClient.resetAllTask()}),_.gatewayClient.addEventListener("stream-unpublished",function(I){I.options&&0===I.options.streamType&&(_._liveRawStreamingClient&&_._liveRawStreamingClient.resetAllTask(),_._liveTranscodeStreamingClient&&_._liveTranscodeStreamingClient.resetAllTask())}),_.gatewayClient.addEventListener("stream-published",function(I){}),_.startLiveStreaming=function(I,S){T.default.debug("startLiveStreaming");var B=A.report.reportApiInvoke(E.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(_.gatewayClient&&"audience"===_.gatewayClient.role){var P={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw B(P),P}var G=_._startLiveStreaming(I,S);return G.then(function(V){B(null,V)}).catch(function(V){T.default.error("LIVE_STREAMING_ERROR",V.toString()),_.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:I,reason:V.code}),B(V)}),G},_._startLiveStreaming=function(I,S){return D(k,void 0,void 0,function(){var B;return R(this,function(P){switch(P.label){case 0:return S||("vp8"===E.codec&&T.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"vp9"===E.codec&&T.default.warning("VP9 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===E.mode&&T.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer")),(_._liveRawStreamingClient&&_._liveRawStreamingClient.haveUrl(I)||_._liveTranscodeStreamingClient&&_._liveTranscodeStreamingClient.haveUrl(I))&&new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw(),[4,H({type:B=S?p.LiveStreamingServiceMode.TRANSCODE:p.LiveStreamingServiceMode.RAW}).startLiveStreamingTask(I,B)];case 1:return P.sent(),_.gatewayClient.dispatchEvent({type:"liveStreamingStarted",url:I}),[2]}})})},_.setLiveTranscoding=function(I){T.default.debug("setLiveTranscoding: "+JSON.stringify(I));var S=A.report.reportApiInvoke(E.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"}),B=H({type:p.LiveStreamingServiceMode.TRANSCODE});return B.setTranscodingConfig(I).then(function(){_.gatewayClient.dispatchEvent({type:"liveTranscodingUpdated"}),S(null)}).catch(function(P){T.default.error("SET_LIVE_TRANSCODING_ERROR",P.toString()),_.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:P.code}),S(P)})},_.stopLiveStreaming=function(I){var S=A.report.reportApiInvoke(E.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),B=_._stopLiveStreaming(I);return B.then(function(P){S(null,P)}).catch(function(P){T.default.error("STOP_LIVE_STREAMING_ERROR",P.toString()),_.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:I,reason:P.code}),S(P)}),B},_._stopLiveStreaming=function(I){return D(this,void 0,void 0,function(){return R(this,function(B){switch(B.label){case 0:return T.default.debug("stopLiveStreaming: "+JSON.stringify(I)),[4,Promise.all([_._liveRawStreamingClient,_._liveTranscodeStreamingClient].map(function(P){return P&&P.haveUrl(I)&&P.stopLiveStreamingTask(I)}))];case 1:return B.sent(),T.default.debug("stopLiveStreaming sucess: "+JSON.stringify(I)),_.gatewayClient.dispatchEvent({type:"liveStreamingStopped",url:I}),[2]}})})},_.addInjectStreamUrl=function(I,S){var B=A.report.reportApiInvoke(E.sessionId,{name:"Client.addInjectStreamUrl",options:[I,S],tag:"tracer"});if("audience"===_.gatewayClient.role){var P={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw B(P),P}var G=_._addInjectStreamUrl(I,S);return G.then(function(V){B(null,V)}).catch(function(V){T.default.error("ADD_INJECT_STREAM_ERROR",V.toString()),B(V)}),G},_._addInjectStreamUrl=function(I,S){return D(k,void 0,void 0,function(){var B;return R(this,function(P){switch(P.label){case 0:return(B=H({type:p.LiveStreamingServiceMode.INJECT})).setInjectStreamConfig(S,0),[4,B.startLiveStreamingTask(I,p.LiveStreamingServiceMode.INJECT)];case 1:return P.sent(),[2]}})})},_.removeInjectStreamUrl=function(I){return D(this,void 0,void 0,function(){var S,B;return R(this,function(P){return S=A.report.reportApiInvoke(E.sessionId,{name:"Client.removeInjectStreamUrl",options:[I],tag:"tracer"}),(B=_._removeInjectStreamUrl(I)).then(function(G){S(null,G)}).catch(function(G){T.default.error("REMOVE_INJECT_STREAM_ERROR",G.toString()),S(G)}),[2,B]})})},_._removeInjectStreamUrl=function(I){return D(k,void 0,void 0,function(){return R(this,function(S){switch(S.label){case 0:return[4,H({type:p.LiveStreamingServiceMode.INJECT}).stopLiveStreamingTask(I)];case 1:return S.sent(),[2]}})})},_._terminateLiveStreaming=function(){return D(k,void 0,void 0,function(){return R(this,function(I){return[_._injectStreamingClient,_._liveRawStreamingClient,_._liveTranscodeStreamingClient].forEach(function(S){S&&S.terminate()}),[2]})})}}},function(ge,le,U){"use strict";var D=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(le,"__esModule",{value:!0});var R=D(U(4)),M=D(U(0)),T=U(10);le.default=function(N,v){void 0===v&&(v={width:160,height:120,framerate:15});var A=v.width,p=v.height,_=v.framerate,E=N.stream;if(!E)throw R.default.INVALID_LOCAL_STREAM;if(!E.getVideoTracks()[0])throw R.default.HIGH_STREAM_NOT_VIDEO_TRACE;var k=E.getVideoTracks()[0];M.default.debug("Start getLowStream");var H=document.createElement("video"),I=document.createElement("canvas");H.setAttribute("style","display:none"),H.setAttribute("muted",""),H.muted=!0,H.setAttribute("autoplay",""),H.autoplay=!0,H.setAttribute("playsinline",""),I.setAttribute("style","display:none"),I.setAttribute("width",A.toString()),I.setAttribute("height",p.toString());var S=I.getContext("2d");if(!S)throw new Error("not get canvas context");H.srcObject=E,document.body.append(H),document.body.append(I),H.play(),M.default.debug("Start render lowStream");var B=T.audioTimerLoop(function(){return function(){if(H.paused&&H.play(),H.videoHeight>2&&H.videoWidth>2){var de=I.width*(H.videoHeight/H.videoWidth);Math.abs(de-I.height)>=2&&(M.default.debug("adjust low stream resolution",I.width+"x"+I.height+" -> "+I.width+"x"+de),I.height=de)}S.drawImage(H,0,0,I.width,I.height);var oe=N.stream;if(oe){var ae=oe.getVideoTracks()[0];k!==ae&&(M.default.debug("adjust low stream track"),H.srcObject=oe,k=ae)}}()},_),P=I.captureStream(_),G=P.getVideoTracks()[0];return G.requestFrame&&G.requestFrame(),P.clean=function(){M.default.debug("Start clean lowStream"),B(),(H||H.parentNode||H.parentNode.removeChild)&&H.parentNode.removeChild(H),(I||I.parentNode||I.parentNode.removeChild)&&I.parentNode.removeChild(I),M.default.debug("Clean lowStream")},P}},function(ge,le){var U="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(U){var D=new Uint8Array(16);ge.exports=function(){return U(D),D}}else{var R=new Array(16);ge.exports=function(){for(var M,T=0;T<16;T++)0==(3&T)&&(M=4294967296*Math.random()),R[T]=M>>>((3&T)<<3)&255;return R}}},function(ge,le){for(var U=[],D=0;D<256;++D)U[D]=(D+256).toString(16).substr(1);ge.exports=function(R,M){var T=M||0;return[U[R[T++]],U[R[T++]],U[R[T++]],U[R[T++]],"-",U[R[T++]],U[R[T++]],"-",U[R[T++]],U[R[T++]],"-",U[R[T++]],U[R[T++]],"-",U[R[T++]],U[R[T++]],U[R[T++]],U[R[T++]],U[R[T++]],U[R[T++]]].join("")}},function(module,exports,__nested_webpack_require_634167__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(undefined){"use strict";var ge,le,D;ge={1:[function(ge,le,U){le.exports=function(D,R){for(var M=new Array(arguments.length-1),T=0,N=2,v=!0;N<arguments.length;)M[T++]=arguments[N++];return new Promise(function(A,p){M[T]=function(_){if(v)if(v=!1,_)p(_);else{for(var E=new Array(arguments.length-1),k=0;k<E.length;)E[k++]=arguments[k];A.apply(null,E)}};try{D.apply(R||null,M)}catch(_){v&&(v=!1,p(_))}})}},{}],2:[function(ge,le,U){var D=U;D.length=function(N){var v=N.length;if(!v)return 0;for(var A=0;--v%4>1&&"="===N.charAt(v);)++A;return Math.ceil(3*N.length)/4-A};for(var R=new Array(64),M=new Array(123),T=0;T<64;)M[R[T]=T<26?T+65:T<52?T+71:T<62?T-4:T-59|43]=T++;D.encode=function(N,v,A){for(var p,_=null,E=[],k=0,H=0;v<A;){var I=N[v++];switch(H){case 0:E[k++]=R[I>>2],p=(3&I)<<4,H=1;break;case 1:E[k++]=R[p|I>>4],p=(15&I)<<2,H=2;break;case 2:E[k++]=R[p|I>>6],E[k++]=R[63&I],H=0}k>8191&&((_||(_=[])).push(String.fromCharCode.apply(String,E)),k=0)}return H&&(E[k++]=R[p],E[k++]=61,1===H&&(E[k++]=61)),_?(k&&_.push(String.fromCharCode.apply(String,E.slice(0,k))),_.join("")):String.fromCharCode.apply(String,E.slice(0,k))},D.decode=function(N,v,A){for(var p,_=A,E=0,k=0;k<N.length;){var H=N.charCodeAt(k++);if(61===H&&E>1)break;if((H=M[H])===undefined)throw Error("invalid encoding");switch(E){case 0:p=H,E=1;break;case 1:v[A++]=p<<2|(48&H)>>4,p=H,E=2;break;case 2:v[A++]=(15&p)<<4|(60&H)>>2,p=H,E=3;break;case 3:v[A++]=(3&p)<<6|H,E=0}}if(1===E)throw Error("invalid encoding");return A-_},D.test=function(N){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(N)}},{}],3:[function(ge,le,U){function D(R,M){"string"==typeof R&&(M=R,R=undefined);var T=[];function N(A){if("string"!=typeof A){var p=v();if(D.verbose&&console.log("codegen: "+p),p="return "+p,A){for(var _=Object.keys(A),E=new Array(_.length+1),k=new Array(_.length),H=0;H<_.length;)E[H]=_[H],k[H]=A[_[H++]];return E[H]=p,Function.apply(null,E).apply(null,k)}return Function(p)()}for(var I=new Array(arguments.length-1),S=0;S<I.length;)I[S]=arguments[++S];if(S=0,A=A.replace(/%([%dfijs])/g,function(B,P){var G=I[S++];switch(P){case"d":case"f":return String(Number(G));case"i":return String(Math.floor(G));case"j":return JSON.stringify(G);case"s":return String(G)}return"%"}),S!==I.length)throw Error("parameter count mismatch");return T.push(A),N}function v(A){return"function "+(A||M||"")+"("+(R&&R.join(",")||"")+"){\n  "+T.join("\n  ")+"\n}"}return N.toString=v,N}le.exports=D,D.verbose=!1},{}],4:[function(ge,le,U){function D(){this._listeners={}}le.exports=D,D.prototype.on=function(R,M,T){return(this._listeners[R]||(this._listeners[R]=[])).push({fn:M,ctx:T||this}),this},D.prototype.off=function(R,M){if(R===undefined)this._listeners={};else if(M===undefined)this._listeners[R]=[];else for(var T=this._listeners[R],N=0;N<T.length;)T[N].fn===M?T.splice(N,1):++N;return this},D.prototype.emit=function(R){var M=this._listeners[R];if(M){for(var T=[],N=1;N<arguments.length;)T.push(arguments[N++]);for(N=0;N<M.length;)M[N].fn.apply(M[N++].ctx,T)}return this}},{}],5:[function(ge,le,U){le.exports=M;var D=ge(1),R=ge(7)("fs");function M(T,N,v){return"function"==typeof N?(v=N,N={}):N||(N={}),v?!N.xhr&&R&&R.readFile?R.readFile(T,function(A,p){return A&&"undefined"!=typeof XMLHttpRequest?M.xhr(T,N,v):A?v(A):v(null,N.binary?p:p.toString("utf8"))}):M.xhr(T,N,v):D(M,this,T,N)}M.xhr=function(T,N,v){var A=new XMLHttpRequest;A.onreadystatechange=function(){if(4!==A.readyState)return undefined;if(0!==A.status&&200!==A.status)return v(Error("status "+A.status));if(N.binary){var p=A.response;if(!p){p=[];for(var _=0;_<A.responseText.length;++_)p.push(255&A.responseText.charCodeAt(_))}return v(null,"undefined"!=typeof Uint8Array?new Uint8Array(p):p)}return v(null,A.responseText)},N.binary&&("overrideMimeType"in A&&A.overrideMimeType("text/plain; charset=x-user-defined"),A.responseType="arraybuffer"),A.open("GET",T),A.send()}},{1:1,7:7}],6:[function(ge,le,U){function D(v){return"undefined"!=typeof Float32Array?function(){var A=new Float32Array([-0]),p=new Uint8Array(A.buffer),_=128===p[3];function E(S,B,P){A[0]=S,B[P]=p[0],B[P+1]=p[1],B[P+2]=p[2],B[P+3]=p[3]}function k(S,B,P){A[0]=S,B[P]=p[3],B[P+1]=p[2],B[P+2]=p[1],B[P+3]=p[0]}function H(S,B){return p[0]=S[B],p[1]=S[B+1],p[2]=S[B+2],p[3]=S[B+3],A[0]}function I(S,B){return p[3]=S[B],p[2]=S[B+1],p[1]=S[B+2],p[0]=S[B+3],A[0]}v.writeFloatLE=_?E:k,v.writeFloatBE=_?k:E,v.readFloatLE=_?H:I,v.readFloatBE=_?I:H}():function(){function A(_,E,k,H){var I=E<0?1:0;if(I&&(E=-E),0===E)_(1/E>0?0:2147483648,k,H);else if(isNaN(E))_(2143289344,k,H);else if(E>34028234663852886e22)_((I<<31|2139095040)>>>0,k,H);else if(E<11754943508222875e-54)_((I<<31|Math.round(E/1401298464324817e-60))>>>0,k,H);else{var S=Math.floor(Math.log(E)/Math.LN2);_((I<<31|S+127<<23|8388607&Math.round(E*Math.pow(2,-S)*8388608))>>>0,k,H)}}function p(_,E,k){var H=_(E,k),I=2*(H>>31)+1,S=H>>>23&255,B=8388607&H;return 255===S?B?NaN:I*(1/0):0===S?1401298464324817e-60*I*B:I*Math.pow(2,S-150)*(B+8388608)}v.writeFloatLE=A.bind(null,R),v.writeFloatBE=A.bind(null,M),v.readFloatLE=p.bind(null,T),v.readFloatBE=p.bind(null,N)}(),"undefined"!=typeof Float64Array?function(){var A=new Float64Array([-0]),p=new Uint8Array(A.buffer),_=128===p[7];function E(S,B,P){A[0]=S,B[P]=p[0],B[P+1]=p[1],B[P+2]=p[2],B[P+3]=p[3],B[P+4]=p[4],B[P+5]=p[5],B[P+6]=p[6],B[P+7]=p[7]}function k(S,B,P){A[0]=S,B[P]=p[7],B[P+1]=p[6],B[P+2]=p[5],B[P+3]=p[4],B[P+4]=p[3],B[P+5]=p[2],B[P+6]=p[1],B[P+7]=p[0]}function H(S,B){return p[0]=S[B],p[1]=S[B+1],p[2]=S[B+2],p[3]=S[B+3],p[4]=S[B+4],p[5]=S[B+5],p[6]=S[B+6],p[7]=S[B+7],A[0]}function I(S,B){return p[7]=S[B],p[6]=S[B+1],p[5]=S[B+2],p[4]=S[B+3],p[3]=S[B+4],p[2]=S[B+5],p[1]=S[B+6],p[0]=S[B+7],A[0]}v.writeDoubleLE=_?E:k,v.writeDoubleBE=_?k:E,v.readDoubleLE=_?H:I,v.readDoubleBE=_?I:H}():function(){function A(_,E,k,H,I,S){var B=H<0?1:0;if(B&&(H=-H),0===H)_(0,I,S+E),_(1/H>0?0:2147483648,I,S+k);else if(isNaN(H))_(0,I,S+E),_(2146959360,I,S+k);else if(H>17976931348623157e292)_(0,I,S+E),_((B<<31|2146435072)>>>0,I,S+k);else{var P;if(H<22250738585072014e-324)_((P=H/5e-324)>>>0,I,S+E),_((B<<31|P/4294967296)>>>0,I,S+k);else{var G=Math.floor(Math.log(H)/Math.LN2);1024===G&&(G=1023),_(4503599627370496*(P=H*Math.pow(2,-G))>>>0,I,S+E),_((B<<31|G+1023<<20|1048576*P&1048575)>>>0,I,S+k)}}}function p(_,E,k,H,I){var S=_(H,I+E),B=_(H,I+k),P=2*(B>>31)+1,G=B>>>20&2047,V=4294967296*(1048575&B)+S;return 2047===G?V?NaN:P*(1/0):0===G?5e-324*P*V:P*Math.pow(2,G-1075)*(V+4503599627370496)}v.writeDoubleLE=A.bind(null,R,0,4),v.writeDoubleBE=A.bind(null,M,4,0),v.readDoubleLE=p.bind(null,T,0,4),v.readDoubleBE=p.bind(null,N,4,0)}(),v}function R(v,A,p){A[p]=255&v,A[p+1]=v>>>8&255,A[p+2]=v>>>16&255,A[p+3]=v>>>24}function M(v,A,p){A[p]=v>>>24,A[p+1]=v>>>16&255,A[p+2]=v>>>8&255,A[p+3]=255&v}function T(v,A){return(v[A]|v[A+1]<<8|v[A+2]<<16|v[A+3]<<24)>>>0}function N(v,A){return(v[A]<<24|v[A+1]<<16|v[A+2]<<8|v[A+3])>>>0}le.exports=D(D)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(ge){}return null}module.exports=inquire},{}],8:[function(ge,le,U){var D=U,R=D.isAbsolute=function(T){return/^(?:\/|\w+:)/.test(T)},M=D.normalize=function(T){var N=(T=T.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),v=R(T),A="";v&&(A=N.shift()+"/");for(var p=0;p<N.length;)".."===N[p]?p>0&&".."!==N[p-1]?N.splice(--p,2):v?N.splice(p,1):++p:"."===N[p]?N.splice(p,1):++p;return A+N.join("/")};D.resolve=function(T,N,v){return v||(N=M(N)),R(N)?N:(v||(T=M(T)),(T=T.replace(/(?:\/|^)[^/]+$/,"")).length?M(T+"/"+N):N)}},{}],9:[function(ge,le,U){le.exports=function(D,R,M){var T=M||8192,N=T>>>1,v=null,A=T;return function(p){if(p<1||p>N)return D(p);A+p>T&&(v=D(T),A=0);var _=R.call(v,A,A+=p);return 7&A&&(A=1+(7|A)),_}}},{}],10:[function(ge,le,U){var D=U;D.length=function(R){for(var M=0,T=0,N=0;N<R.length;++N)(T=R.charCodeAt(N))<128?M+=1:T<2048?M+=2:55296==(64512&T)&&56320==(64512&R.charCodeAt(N+1))?(++N,M+=4):M+=3;return M},D.read=function(R,M,T){if(T-M<1)return"";for(var N,v=null,A=[],p=0;M<T;)(N=R[M++])<128?A[p++]=N:N>191&&N<224?A[p++]=(31&N)<<6|63&R[M++]:N>239&&N<365?(N=((7&N)<<18|(63&R[M++])<<12|(63&R[M++])<<6|63&R[M++])-65536,A[p++]=55296+(N>>10),A[p++]=56320+(1023&N)):A[p++]=(15&N)<<12|(63&R[M++])<<6|63&R[M++],p>8191&&((v||(v=[])).push(String.fromCharCode.apply(String,A)),p=0);return v?(p&&v.push(String.fromCharCode.apply(String,A.slice(0,p))),v.join("")):String.fromCharCode.apply(String,A.slice(0,p))},D.write=function(R,M,T){for(var N,v,A=T,p=0;p<R.length;++p)(N=R.charCodeAt(p))<128?M[T++]=N:N<2048?(M[T++]=N>>6|192,M[T++]=63&N|128):55296==(64512&N)&&56320==(64512&(v=R.charCodeAt(p+1)))?(++p,M[T++]=(N=65536+((1023&N)<<10)+(1023&v))>>18|240,M[T++]=N>>12&63|128,M[T++]=N>>6&63|128,M[T++]=63&N|128):(M[T++]=N>>12|224,M[T++]=N>>6&63|128,M[T++]=63&N|128);return T-A}},{}],11:[function(ge,le,U){var D=U,R=ge(14),M=ge(33);function T(v,A,p,_){if(A.resolvedType)if(A.resolvedType instanceof R){v("switch(d%s){",_);for(var E=A.resolvedType.values,k=Object.keys(E),H=0;H<k.length;++H)A.repeated&&E[k[H]]===A.typeDefault&&v("default:"),v("case%j:",k[H])("case %i:",E[k[H]])("m%s=%j",_,E[k[H]])("break");v("}")}else v('if(typeof d%s!=="object")',_)("throw TypeError(%j)",A.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",_,p,_);else{var I=!1;switch(A.type){case"double":case"float":v("m%s=Number(d%s)",_,_);break;case"uint32":case"fixed32":v("m%s=d%s>>>0",_,_);break;case"int32":case"sint32":case"sfixed32":v("m%s=d%s|0",_,_);break;case"uint64":I=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":v("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",_,_,I)('else if(typeof d%s==="string")',_)("m%s=parseInt(d%s,10)",_,_)('else if(typeof d%s==="number")',_)("m%s=d%s",_,_)('else if(typeof d%s==="object")',_)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",_,_,_,I?"true":"");break;case"bytes":v('if(typeof d%s==="string")',_)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",_,_,_)("else if(d%s.length)",_)("m%s=d%s",_,_);break;case"string":v("m%s=String(d%s)",_,_);break;case"bool":v("m%s=Boolean(d%s)",_,_)}}return v}function N(v,A,p,_){if(A.resolvedType)A.resolvedType instanceof R?v("d%s=o.enums===String?types[%i].values[m%s]:m%s",_,p,_,_):v("d%s=types[%i].toObject(m%s,o)",_,p,_);else{var E=!1;switch(A.type){case"double":case"float":v("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",_,_,_,_);break;case"uint64":E=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":v('if(typeof m%s==="number")',_)("d%s=o.longs===String?String(m%s):m%s",_,_,_)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",_,_,_,_,E?"true":"",_);break;case"bytes":v("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",_,_,_,_,_);break;default:v("d%s=m%s",_,_)}}return v}D.fromObject=function(v){var A=v.fieldsArray,p=M.codegen(["d"],v.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!A.length)return p("return new this.ctor");p("var m=new this.ctor");for(var _=0;_<A.length;++_){var E=A[_].resolve(),k=M.safeProp(E.name);E.map?(p("if(d%s){",k)('if(typeof d%s!=="object")',k)("throw TypeError(%j)",E.fullName+": object expected")("m%s={}",k)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",k),T(p,E,_,k+"[ks[i]]")("}")("}")):E.repeated?(p("if(d%s){",k)("if(!Array.isArray(d%s))",k)("throw TypeError(%j)",E.fullName+": array expected")("m%s=[]",k)("for(var i=0;i<d%s.length;++i){",k),T(p,E,_,k+"[i]")("}")("}")):(E.resolvedType instanceof R||p("if(d%s!=null){",k),T(p,E,_,k),E.resolvedType instanceof R||p("}"))}return p("return m")},D.toObject=function(v){var A=v.fieldsArray.slice().sort(M.compareFieldsById);if(!A.length)return M.codegen()("return {}");for(var p=M.codegen(["m","o"],v.name+"$toObject")("if(!o)")("o={}")("var d={}"),_=[],E=[],k=[],H=0;H<A.length;++H)A[H].partOf||(A[H].resolve().repeated?_:A[H].map?E:k).push(A[H]);if(_.length){for(p("if(o.arrays||o.defaults){"),H=0;H<_.length;++H)p("d%s=[]",M.safeProp(_[H].name));p("}")}if(E.length){for(p("if(o.objects||o.defaults){"),H=0;H<E.length;++H)p("d%s={}",M.safeProp(E[H].name));p("}")}if(k.length){for(p("if(o.defaults){"),H=0;H<k.length;++H){var I=k[H],S=M.safeProp(I.name);if(I.resolvedType instanceof R)p("d%s=o.enums===String?%j:%j",S,I.resolvedType.valuesById[I.typeDefault],I.typeDefault);else if(I.long)p("if(util.Long){")("var n=new util.Long(%i,%i,%j)",I.typeDefault.low,I.typeDefault.high,I.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",S)("}else")("d%s=o.longs===String?%j:%i",S,I.typeDefault.toString(),I.typeDefault.toNumber());else if(I.bytes){var B="["+Array.prototype.slice.call(I.typeDefault).join(",")+"]";p("if(o.bytes===String)d%s=%j",S,String.fromCharCode.apply(String,I.typeDefault))("else{")("d%s=%s",S,B)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",S,S)("}")}else p("d%s=%j",S,I.typeDefault)}p("}")}var P=!1;for(H=0;H<A.length;++H){var G=v._fieldsArray.indexOf(I=A[H]);S=M.safeProp(I.name),I.map?(P||(P=!0,p("var ks2")),p("if(m%s&&(ks2=Object.keys(m%s)).length){",S,S)("d%s={}",S)("for(var j=0;j<ks2.length;++j){"),N(p,I,G,S+"[ks2[j]]")("}")):I.repeated?(p("if(m%s&&m%s.length){",S,S)("d%s=[]",S)("for(var j=0;j<m%s.length;++j){",S),N(p,I,G,S+"[j]")("}")):(p("if(m%s!=null&&m.hasOwnProperty(%j)){",S,I.name),N(p,I,G,S),I.partOf&&p("if(o.oneofs)")("d%s=%j",M.safeProp(I.partOf.name),I.name)),p("}")}return p("return d")}},{14:14,33:33}],12:[function(ge,le,U){le.exports=function(N){var v=M.codegen(["r","l"],N.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(N.fieldsArray.filter(function(H){return H.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");N.group&&v("if((t&7)===4)")("break"),v("switch(t>>>3){");for(var A=0;A<N.fieldsArray.length;++A){var p=N._fieldsArray[A].resolve(),_=p.resolvedType instanceof D?"int32":p.type,E="m"+M.safeProp(p.name);v("case %i:",p.id),p.map?(v("if(%s===util.emptyObject)",E)("%s={}",E)("var c2 = r.uint32()+r.pos"),R.defaults[p.keyType]!==undefined?v("k=%j",R.defaults[p.keyType]):v("k=null"),R.defaults[_]!==undefined?v("value=%j",R.defaults[_]):v("value=null"),v("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",p.keyType)("case 2:"),R.basic[_]===undefined?v("value=types[%i].decode(r,r.uint32())",A):v("value=r.%s()",_),v("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),v(R.long[p.keyType]!==undefined?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",E)):p.repeated?(v("if(!(%s&&%s.length))",E,E)("%s=[]",E),R.packed[_]!==undefined&&v("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",E,_)("}else"),R.basic[_]===undefined?v(p.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",E,A):v("%s.push(r.%s())",E,_)):R.basic[_]===undefined?v(p.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",E,A):v("%s=r.%s()",E,_),v("break")}for(v("default:")("r.skipType(t&7)")("break")("}")("}"),A=0;A<N._fieldsArray.length;++A){var k=N._fieldsArray[A];k.required&&v("if(!m.hasOwnProperty(%j))",k.name)("throw util.ProtocolError(%j,{instance:m})",T(k))}return v("return m")};var D=ge(14),R=ge(32),M=ge(33);function T(N){return"missing required '"+N.name+"'"}},{14:14,32:32,33:33}],13:[function(ge,le,U){le.exports=function(N){for(var v,A=M.codegen(["m","w"],N.name+"$encode")("if(!w)")("w=Writer.create()"),p=N.fieldsArray.slice().sort(M.compareFieldsById),_=0;_<p.length;++_){var E=p[_].resolve(),k=N._fieldsArray.indexOf(E),H=E.resolvedType instanceof D?"int32":E.type,I=R.basic[H];v="m"+M.safeProp(E.name),E.map?(A("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",v,E.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",v)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(E.id<<3|2)>>>0,8|R.mapKey[E.keyType],E.keyType),I===undefined?A("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",k,v):A(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|I,H,v),A("}")("}")):E.repeated?(A("if(%s!=null&&%s.length){",v,v),E.packed&&R.packed[H]!==undefined?A("w.uint32(%i).fork()",(E.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",v)("w.%s(%s[i])",H,v)("w.ldelim()"):(A("for(var i=0;i<%s.length;++i)",v),I===undefined?T(A,E,k,v+"[i]"):A("w.uint32(%i).%s(%s[i])",(E.id<<3|I)>>>0,H,v)),A("}")):(E.optional&&A("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",v,E.name),I===undefined?T(A,E,k,v):A("w.uint32(%i).%s(%s)",(E.id<<3|I)>>>0,H,v))}return A("return w")};var D=ge(14),R=ge(32),M=ge(33);function T(N,v,A,p){return v.resolvedType.group?N("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",A,p,(v.id<<3|3)>>>0,(v.id<<3|4)>>>0):N("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",A,p,(v.id<<3|2)>>>0)}},{14:14,32:32,33:33}],14:[function(ge,le,U){le.exports=T;var D=ge(22);((T.prototype=Object.create(D.prototype)).constructor=T).className="Enum";var R=ge(21),M=ge(33);function T(N,v,A,p,_){if(D.call(this,N,A),v&&"object"!=typeof v)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=p,this.comments=_||{},this.reserved=undefined,v)for(var E=Object.keys(v),k=0;k<E.length;++k)"number"==typeof v[E[k]]&&(this.valuesById[this.values[E[k]]=v[E[k]]]=E[k])}T.fromJSON=function(N,v){var A=new T(N,v.values,v.options,v.comment,v.comments);return A.reserved=v.reserved,A},T.prototype.toJSON=function(N){var v=!!N&&Boolean(N.keepComments);return M.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",v?this.comment:undefined,"comments",v?this.comments:undefined])},T.prototype.add=function(N,v,A){if(!M.isString(N))throw TypeError("name must be a string");if(!M.isInteger(v))throw TypeError("id must be an integer");if(this.values[N]!==undefined)throw Error("duplicate name '"+N+"' in "+this);if(this.isReservedId(v))throw Error("id "+v+" is reserved in "+this);if(this.isReservedName(N))throw Error("name '"+N+"' is reserved in "+this);if(this.valuesById[v]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+v+" in "+this);this.values[N]=v}else this.valuesById[this.values[N]=v]=N;return this.comments[N]=A||null,this},T.prototype.remove=function(N){if(!M.isString(N))throw TypeError("name must be a string");var v=this.values[N];if(null==v)throw Error("name '"+N+"' does not exist in "+this);return delete this.valuesById[v],delete this.values[N],delete this.comments[N],this},T.prototype.isReservedId=function(N){return R.isReservedId(this.reserved,N)},T.prototype.isReservedName=function(N){return R.isReservedName(this.reserved,N)}},{21:21,22:22,33:33}],15:[function(ge,le,U){le.exports=A;var D=ge(22);((A.prototype=Object.create(D.prototype)).constructor=A).className="Field";var R,M=ge(14),T=ge(32),N=ge(33),v=/^required|optional|repeated$/;function A(p,_,E,k,H,I,S){if(N.isObject(k)?(S=H,I=k,k=H=undefined):N.isObject(H)&&(S=I,I=H,H=undefined),D.call(this,p,I),!N.isInteger(_)||_<0)throw TypeError("id must be a non-negative integer");if(!N.isString(E))throw TypeError("type must be a string");if(k!==undefined&&!v.test(k=k.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(H!==undefined&&!N.isString(H))throw TypeError("extend must be a string");this.rule=k&&"optional"!==k?k:undefined,this.type=E,this.id=_,this.extend=H||undefined,this.required="required"===k,this.optional=!this.required,this.repeated="repeated"===k,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!N.Long&&T.long[E]!==undefined,this.bytes="bytes"===E,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=S}A.fromJSON=function(p,_){return new A(p,_.id,_.type,_.rule,_.extend,_.options,_.comment)},Object.defineProperty(A.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),A.prototype.setOption=function(p,_,E){return"packed"===p&&(this._packed=null),D.prototype.setOption.call(this,p,_,E)},A.prototype.toJSON=function(p){var _=!!p&&Boolean(p.keepComments);return N.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",_?this.comment:undefined])},A.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=T.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof R?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof M&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof M)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=N.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var p;N.base64.test(this.typeDefault)?N.base64.decode(this.typeDefault,p=N.newBuffer(N.base64.length(this.typeDefault)),0):N.utf8.write(this.typeDefault,p=N.newBuffer(N.utf8.length(this.typeDefault)),0),this.typeDefault=p}return this.defaultValue=this.map?N.emptyObject:this.repeated?N.emptyArray:this.typeDefault,this.parent instanceof R&&(this.parent.ctor.prototype[this.name]=this.defaultValue),D.prototype.resolve.call(this)},A.d=function(p,_,E,k){return"function"==typeof _?_=N.decorateType(_).name:_&&"object"==typeof _&&(_=N.decorateEnum(_).name),function(H,I){N.decorateType(H.constructor).add(new A(I,p,_,E,{default:k}))}},A._configure=function(p){R=p}},{14:14,22:22,32:32,33:33}],16:[function(ge,le,U){var D=le.exports=ge(17);D.build="light",D.load=function(R,M,T){return"function"==typeof M?(T=M,M=new D.Root):M||(M=new D.Root),M.load(R,T)},D.loadSync=function(R,M){return M||(M=new D.Root),M.loadSync(R)},D.encoder=ge(13),D.decoder=ge(12),D.verifier=ge(36),D.converter=ge(11),D.ReflectionObject=ge(22),D.Namespace=ge(21),D.Root=ge(26),D.Enum=ge(14),D.Type=ge(31),D.Field=ge(15),D.OneOf=ge(23),D.MapField=ge(18),D.Service=ge(30),D.Method=ge(20),D.Message=ge(19),D.wrappers=ge(37),D.types=ge(32),D.util=ge(33),D.ReflectionObject._configure(D.Root),D.Namespace._configure(D.Type,D.Service,D.Enum),D.Root._configure(D.Type),D.Field._configure(D.Type)},{11:11,12:12,13:13,14:14,15:15,17:17,18:18,19:19,20:20,21:21,22:22,23:23,26:26,30:30,31:31,32:32,33:33,36:36,37:37}],17:[function(ge,le,U){var D=U;function R(){D.util._configure(),D.Writer._configure(D.BufferWriter),D.Reader._configure(D.BufferReader)}D.build="minimal",D.Writer=ge(38),D.BufferWriter=ge(39),D.Reader=ge(24),D.BufferReader=ge(25),D.util=ge(35),D.rpc=ge(28),D.roots=ge(27),D.configure=R,R()},{24:24,25:25,27:27,28:28,35:35,38:38,39:39}],18:[function(ge,le,U){le.exports=T;var D=ge(15);((T.prototype=Object.create(D.prototype)).constructor=T).className="MapField";var R=ge(32),M=ge(33);function T(N,v,A,p,_,E){if(D.call(this,N,v,p,undefined,undefined,_,E),!M.isString(A))throw TypeError("keyType must be a string");this.keyType=A,this.resolvedKeyType=null,this.map=!0}T.fromJSON=function(N,v){return new T(N,v.id,v.keyType,v.type,v.options,v.comment)},T.prototype.toJSON=function(N){var v=!!N&&Boolean(N.keepComments);return M.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",v?this.comment:undefined])},T.prototype.resolve=function(){if(this.resolved)return this;if(R.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return D.prototype.resolve.call(this)},T.d=function(N,v,A){return"function"==typeof A?A=M.decorateType(A).name:A&&"object"==typeof A&&(A=M.decorateEnum(A).name),function(p,_){M.decorateType(p.constructor).add(new T(_,N,v,A))}}},{15:15,32:32,33:33}],19:[function(ge,le,U){le.exports=R;var D=ge(35);function R(M){if(M)for(var T=Object.keys(M),N=0;N<T.length;++N)this[T[N]]=M[T[N]]}R.create=function(M){return this.$type.create(M)},R.encode=function(M,T){return this.$type.encode(M,T)},R.encodeDelimited=function(M,T){return this.$type.encodeDelimited(M,T)},R.decode=function(M){return this.$type.decode(M)},R.decodeDelimited=function(M){return this.$type.decodeDelimited(M)},R.verify=function(M){return this.$type.verify(M)},R.fromObject=function(M){return this.$type.fromObject(M)},R.toObject=function(M,T){return this.$type.toObject(M,T)},R.prototype.toJSON=function(){return this.$type.toObject(this,D.toJSONOptions)}},{35:35}],20:[function(ge,le,U){le.exports=M;var D=ge(22);((M.prototype=Object.create(D.prototype)).constructor=M).className="Method";var R=ge(33);function M(T,N,v,A,p,_,E,k){if(R.isObject(p)?(E=p,p=_=undefined):R.isObject(_)&&(E=_,_=undefined),N!==undefined&&!R.isString(N))throw TypeError("type must be a string");if(!R.isString(v))throw TypeError("requestType must be a string");if(!R.isString(A))throw TypeError("responseType must be a string");D.call(this,T,E),this.type=N||"rpc",this.requestType=v,this.requestStream=!!p||undefined,this.responseType=A,this.responseStream=!!_||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=k}M.fromJSON=function(T,N){return new M(T,N.type,N.requestType,N.responseType,N.requestStream,N.responseStream,N.options,N.comment)},M.prototype.toJSON=function(T){var N=!!T&&Boolean(T.keepComments);return R.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",N?this.comment:undefined])},M.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),D.prototype.resolve.call(this))}},{22:22,33:33}],21:[function(ge,le,U){le.exports=p;var D=ge(22);((p.prototype=Object.create(D.prototype)).constructor=p).className="Namespace";var R,M,T,N=ge(15),v=ge(33);function A(E,k){if(!E||!E.length)return undefined;for(var H={},I=0;I<E.length;++I)H[E[I].name]=E[I].toJSON(k);return H}function p(E,k){D.call(this,E,k),this.nested=undefined,this._nestedArray=null}function _(E){return E._nestedArray=null,E}p.fromJSON=function(E,k){return new p(E,k.options).addJSON(k.nested)},p.arrayToJSON=A,p.isReservedId=function(E,k){if(E)for(var H=0;H<E.length;++H)if("string"!=typeof E[H]&&E[H][0]<=k&&E[H][1]>k)return!0;return!1},p.isReservedName=function(E,k){if(E)for(var H=0;H<E.length;++H)if(E[H]===k)return!0;return!1},Object.defineProperty(p.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=v.toArray(this.nested))}}),p.prototype.toJSON=function(E){return v.toObject(["options",this.options,"nested",A(this.nestedArray,E)])},p.prototype.addJSON=function(E){if(E)for(var k,H=Object.keys(E),I=0;I<H.length;++I)this.add(((k=E[H[I]]).fields!==undefined?R.fromJSON:k.values!==undefined?T.fromJSON:k.methods!==undefined?M.fromJSON:k.id!==undefined?N.fromJSON:p.fromJSON)(H[I],k));return this},p.prototype.get=function(E){return this.nested&&this.nested[E]||null},p.prototype.getEnum=function(E){if(this.nested&&this.nested[E]instanceof T)return this.nested[E].values;throw Error("no such enum: "+E)},p.prototype.add=function(E){if(!(E instanceof N&&E.extend!==undefined||E instanceof R||E instanceof T||E instanceof M||E instanceof p))throw TypeError("object must be a valid nested object");if(this.nested){var k=this.get(E.name);if(k){if(!(k instanceof p&&E instanceof p)||k instanceof R||k instanceof M)throw Error("duplicate name '"+E.name+"' in "+this);for(var H=k.nestedArray,I=0;I<H.length;++I)E.add(H[I]);this.remove(k),this.nested||(this.nested={}),E.setOptions(k.options,!0)}}else this.nested={};return this.nested[E.name]=E,E.onAdd(this),_(this)},p.prototype.remove=function(E){if(!(E instanceof D))throw TypeError("object must be a ReflectionObject");if(E.parent!==this)throw Error(E+" is not a member of "+this);return delete this.nested[E.name],Object.keys(this.nested).length||(this.nested=undefined),E.onRemove(this),_(this)},p.prototype.define=function(E,k){if(v.isString(E))E=E.split(".");else if(!Array.isArray(E))throw TypeError("illegal path");if(E&&E.length&&""===E[0])throw Error("path must be relative");for(var H=this;E.length>0;){var I=E.shift();if(H.nested&&H.nested[I]){if(!((H=H.nested[I])instanceof p))throw Error("path conflicts with non-namespace objects")}else H.add(H=new p(I))}return k&&H.addJSON(k),H},p.prototype.resolveAll=function(){for(var E=this.nestedArray,k=0;k<E.length;)E[k]instanceof p?E[k++].resolveAll():E[k++].resolve();return this.resolve()},p.prototype.lookup=function(E,k,H){if("boolean"==typeof k?(H=k,k=undefined):k&&!Array.isArray(k)&&(k=[k]),v.isString(E)&&E.length){if("."===E)return this.root;E=E.split(".")}else if(!E.length)return this;if(""===E[0])return this.root.lookup(E.slice(1),k);var I=this.get(E[0]);if(I){if(1===E.length){if(!k||k.indexOf(I.constructor)>-1)return I}else if(I instanceof p&&(I=I.lookup(E.slice(1),k,!0)))return I}else for(var S=0;S<this.nestedArray.length;++S)if(this._nestedArray[S]instanceof p&&(I=this._nestedArray[S].lookup(E,k,!0)))return I;return null===this.parent||H?null:this.parent.lookup(E,k)},p.prototype.lookupType=function(E){var k=this.lookup(E,[R]);if(!k)throw Error("no such type: "+E);return k},p.prototype.lookupEnum=function(E){var k=this.lookup(E,[T]);if(!k)throw Error("no such Enum '"+E+"' in "+this);return k},p.prototype.lookupTypeOrEnum=function(E){var k=this.lookup(E,[R,T]);if(!k)throw Error("no such Type or Enum '"+E+"' in "+this);return k},p.prototype.lookupService=function(E){var k=this.lookup(E,[M]);if(!k)throw Error("no such Service '"+E+"' in "+this);return k},p._configure=function(E,k,H){R=E,M=k,T=H}},{15:15,22:22,33:33}],22:[function(ge,le,U){le.exports=M,M.className="ReflectionObject";var D,R=ge(33);function M(T,N){if(!R.isString(T))throw TypeError("name must be a string");if(N&&!R.isObject(N))throw TypeError("options must be an object");this.options=N,this.parsedOptions=null,this.name=T,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(M.prototype,{root:{get:function(){for(var T=this;null!==T.parent;)T=T.parent;return T}},fullName:{get:function(){for(var T=[this.name],N=this.parent;N;)T.unshift(N.name),N=N.parent;return T.join(".")}}}),M.prototype.toJSON=function(){throw Error()},M.prototype.onAdd=function(T){this.parent&&this.parent!==T&&this.parent.remove(this),this.parent=T,this.resolved=!1;var N=T.root;N instanceof D&&N._handleAdd(this)},M.prototype.onRemove=function(T){var N=T.root;N instanceof D&&N._handleRemove(this),this.parent=null,this.resolved=!1},M.prototype.resolve=function(){return this.resolved||this.root instanceof D&&(this.resolved=!0),this},M.prototype.getOption=function(T){return this.options?this.options[T]:undefined},M.prototype.setOption=function(T,N,v){return v&&this.options&&this.options[T]!==undefined||((this.options||(this.options={}))[T]=N),this},M.prototype.setParsedOption=function(T,N,v){this.parsedOptions||(this.parsedOptions=[]);var A=this.parsedOptions;if(v){var p=A.find(function(k){return Object.prototype.hasOwnProperty.call(k,T)});p?R.setProperty(p[T],v,N):((p={})[T]=R.setProperty({},v,N),A.push(p))}else{var E={};E[T]=N,A.push(E)}return this},M.prototype.setOptions=function(T,N){if(T)for(var v=Object.keys(T),A=0;A<v.length;++A)this.setOption(v[A],T[v[A]],N);return this},M.prototype.toString=function(){var T=this.constructor.className,N=this.fullName;return N.length?T+" "+N:T},M._configure=function(T){D=T}},{33:33}],23:[function(ge,le,U){le.exports=T;var D=ge(22);((T.prototype=Object.create(D.prototype)).constructor=T).className="OneOf";var R=ge(15),M=ge(33);function T(v,A,p,_){if(Array.isArray(A)||(p=A,A=undefined),D.call(this,v,p),A!==undefined&&!Array.isArray(A))throw TypeError("fieldNames must be an Array");this.oneof=A||[],this.fieldsArray=[],this.comment=_}function N(v){if(v.parent)for(var A=0;A<v.fieldsArray.length;++A)v.fieldsArray[A].parent||v.parent.add(v.fieldsArray[A])}T.fromJSON=function(v,A){return new T(v,A.oneof,A.options,A.comment)},T.prototype.toJSON=function(v){var A=!!v&&Boolean(v.keepComments);return M.toObject(["options",this.options,"oneof",this.oneof,"comment",A?this.comment:undefined])},T.prototype.add=function(v){if(!(v instanceof R))throw TypeError("field must be a Field");return v.parent&&v.parent!==this.parent&&v.parent.remove(v),this.oneof.push(v.name),this.fieldsArray.push(v),v.partOf=this,N(this),this},T.prototype.remove=function(v){if(!(v instanceof R))throw TypeError("field must be a Field");var A=this.fieldsArray.indexOf(v);if(A<0)throw Error(v+" is not a member of "+this);return this.fieldsArray.splice(A,1),(A=this.oneof.indexOf(v.name))>-1&&this.oneof.splice(A,1),v.partOf=null,this},T.prototype.onAdd=function(v){D.prototype.onAdd.call(this,v);for(var A=0;A<this.oneof.length;++A){var p=v.get(this.oneof[A]);p&&!p.partOf&&(p.partOf=this,this.fieldsArray.push(p))}N(this)},T.prototype.onRemove=function(v){for(var A,p=0;p<this.fieldsArray.length;++p)(A=this.fieldsArray[p]).parent&&A.parent.remove(A);D.prototype.onRemove.call(this,v)},T.d=function(){for(var v=new Array(arguments.length),A=0;A<arguments.length;)v[A]=arguments[A++];return function(p,_){M.decorateType(p.constructor).add(new T(_,v)),Object.defineProperty(p,_,{get:M.oneOfGetter(v),set:M.oneOfSetter(v)})}}},{15:15,22:22,33:33}],24:[function(ge,le,U){le.exports=v;var D,R=ge(35),M=R.LongBits,T=R.utf8;function N(I,S){return RangeError("index out of range: "+I.pos+" + "+(S||1)+" > "+I.len)}function v(I){this.buf=I,this.pos=0,this.len=I.length}var A,p="undefined"!=typeof Uint8Array?function(I){if(I instanceof Uint8Array||Array.isArray(I))return new v(I);throw Error("illegal buffer")}:function(I){if(Array.isArray(I))return new v(I);throw Error("illegal buffer")},_=function(){return R.Buffer?function(I){return(v.create=function(S){return R.Buffer.isBuffer(S)?new D(S):p(S)})(I)}:p};function E(){var I=new M(0,0),S=0;if(!(this.len-this.pos>4)){for(;S<3;++S){if(this.pos>=this.len)throw N(this);if(I.lo=(I.lo|(127&this.buf[this.pos])<<7*S)>>>0,this.buf[this.pos++]<128)return I}return I.lo=(I.lo|(127&this.buf[this.pos++])<<7*S)>>>0,I}for(;S<4;++S)if(I.lo=(I.lo|(127&this.buf[this.pos])<<7*S)>>>0,this.buf[this.pos++]<128)return I;if(I.lo=(I.lo|(127&this.buf[this.pos])<<28)>>>0,I.hi=(I.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return I;if(S=0,this.len-this.pos>4){for(;S<5;++S)if(I.hi=(I.hi|(127&this.buf[this.pos])<<7*S+3)>>>0,this.buf[this.pos++]<128)return I}else for(;S<5;++S){if(this.pos>=this.len)throw N(this);if(I.hi=(I.hi|(127&this.buf[this.pos])<<7*S+3)>>>0,this.buf[this.pos++]<128)return I}throw Error("invalid varint encoding")}function k(I,S){return(I[S-4]|I[S-3]<<8|I[S-2]<<16|I[S-1]<<24)>>>0}function H(){if(this.pos+8>this.len)throw N(this,8);return new M(k(this.buf,this.pos+=4),k(this.buf,this.pos+=4))}v.create=_(),v.prototype._slice=R.Array.prototype.subarray||R.Array.prototype.slice,v.prototype.uint32=(A=4294967295,function(){if(A=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(A=(A|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(A=(A|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(A=(A|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(A=(A|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return A;if((this.pos+=5)>this.len)throw this.pos=this.len,N(this,10);return A}),v.prototype.int32=function(){return 0|this.uint32()},v.prototype.sint32=function(){var I=this.uint32();return I>>>1^-(1&I)|0},v.prototype.bool=function(){return 0!==this.uint32()},v.prototype.fixed32=function(){if(this.pos+4>this.len)throw N(this,4);return k(this.buf,this.pos+=4)},v.prototype.sfixed32=function(){if(this.pos+4>this.len)throw N(this,4);return 0|k(this.buf,this.pos+=4)},v.prototype.float=function(){if(this.pos+4>this.len)throw N(this,4);var I=R.float.readFloatLE(this.buf,this.pos);return this.pos+=4,I},v.prototype.double=function(){if(this.pos+8>this.len)throw N(this,4);var I=R.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,I},v.prototype.bytes=function(){var I=this.uint32(),S=this.pos,B=this.pos+I;if(B>this.len)throw N(this,I);return this.pos+=I,Array.isArray(this.buf)?this.buf.slice(S,B):S===B?new this.buf.constructor(0):this._slice.call(this.buf,S,B)},v.prototype.string=function(){var I=this.bytes();return T.read(I,0,I.length)},v.prototype.skip=function(I){if("number"==typeof I){if(this.pos+I>this.len)throw N(this,I);this.pos+=I}else do{if(this.pos>=this.len)throw N(this)}while(128&this.buf[this.pos++]);return this},v.prototype.skipType=function(I){switch(I){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(I=7&this.uint32());)this.skipType(I);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+I+" at offset "+this.pos)}return this},v._configure=function(I){D=I,v.create=_(),D._configure();var S=R.Long?"toLong":"toNumber";R.merge(v.prototype,{int64:function(){return E.call(this)[S](!1)},uint64:function(){return E.call(this)[S](!0)},sint64:function(){return E.call(this).zzDecode()[S](!1)},fixed64:function(){return H.call(this)[S](!0)},sfixed64:function(){return H.call(this)[S](!1)}})}},{35:35}],25:[function(ge,le,U){le.exports=M;var D=ge(24);(M.prototype=Object.create(D.prototype)).constructor=M;var R=ge(35);function M(T){D.call(this,T)}M._configure=function(){R.Buffer&&(M.prototype._slice=R.Buffer.prototype.slice)},M.prototype.string=function(){var T=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+T,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+T,this.len))},M._configure()},{24:24,35:35}],26:[function(ge,le,U){le.exports=_;var D=ge(21);((_.prototype=Object.create(D.prototype)).constructor=_).className="Root";var R,M,T,N=ge(15),v=ge(14),A=ge(23),p=ge(33);function _(I){D.call(this,"",I),this.deferred=[],this.files=[]}function E(){}_.fromJSON=function(I,S){return S||(S=new _),I.options&&S.setOptions(I.options),S.addJSON(I.nested)},_.prototype.resolvePath=p.path.resolve,_.prototype.fetch=p.fetch,_.prototype.load=function I(S,B,P){"function"==typeof B&&(P=B,B=undefined);var G=this;if(!P)return p.asPromise(I,G,S,B);var V=P===E;function ie(W,y){if(P){var u=P;if(P=null,V)throw W;u(W,y)}}function de(W){var y=W.lastIndexOf("google/protobuf/");if(y>-1){var u=W.substring(y);if(u in T)return u}return null}function oe(W,y){try{if(p.isString(y)&&"{"===y.charAt(0)&&(y=JSON.parse(y)),p.isString(y)){M.filename=W;var u,K=M(y,G,B),m=0;if(K.imports)for(;m<K.imports.length;++m)(u=de(K.imports[m])||G.resolvePath(W,K.imports[m]))&&ae(u);if(K.weakImports)for(m=0;m<K.weakImports.length;++m)(u=de(K.weakImports[m])||G.resolvePath(W,K.weakImports[m]))&&ae(u,!0)}else G.setOptions(y.options).addJSON(y.nested)}catch(w){ie(w)}V||J||ie(null,G)}function ae(W,y){if(!(G.files.indexOf(W)>-1))if(G.files.push(W),W in T)V?oe(W,T[W]):(++J,setTimeout(function(){--J,oe(W,T[W])}));else if(V){var u;try{u=p.fs.readFileSync(W).toString("utf8")}catch(K){return void(y||ie(K))}oe(W,u)}else++J,G.fetch(W,function(K,m){--J,P&&(K?y?J||ie(null,G):ie(K):oe(W,m))})}var J=0;p.isString(S)&&(S=[S]);for(var C,d=0;d<S.length;++d)(C=G.resolvePath("",S[d]))&&ae(C);return V?G:(J||ie(null,G),undefined)},_.prototype.loadSync=function(I,S){if(!p.isNode)throw Error("not supported");return this.load(I,S,E)},_.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(I){return"'extend "+I.extend+"' in "+I.parent.fullName}).join(", "));return D.prototype.resolveAll.call(this)};var k=/^[A-Z]/;function H(I,S){var B=S.parent.lookup(S.extend);if(B){var P=new N(S.fullName,S.id,S.type,S.rule,undefined,S.options);return P.declaringField=S,S.extensionField=P,B.add(P),!0}return!1}_.prototype._handleAdd=function(I){if(I instanceof N)I.extend===undefined||I.extensionField||H(0,I)||this.deferred.push(I);else if(I instanceof v)k.test(I.name)&&(I.parent[I.name]=I.values);else if(!(I instanceof A)){if(I instanceof R)for(var S=0;S<this.deferred.length;)H(0,this.deferred[S])?this.deferred.splice(S,1):++S;for(var B=0;B<I.nestedArray.length;++B)this._handleAdd(I._nestedArray[B]);k.test(I.name)&&(I.parent[I.name]=I)}},_.prototype._handleRemove=function(I){if(I instanceof N){if(I.extend!==undefined)if(I.extensionField)I.extensionField.parent.remove(I.extensionField),I.extensionField=null;else{var S=this.deferred.indexOf(I);S>-1&&this.deferred.splice(S,1)}}else if(I instanceof v)k.test(I.name)&&delete I.parent[I.name];else if(I instanceof D){for(var B=0;B<I.nestedArray.length;++B)this._handleRemove(I._nestedArray[B]);k.test(I.name)&&delete I.parent[I.name]}},_._configure=function(I,S,B){R=I,M=S,T=B}},{14:14,15:15,21:21,23:23,33:33}],27:[function(ge,le,U){le.exports={}},{}],28:[function(ge,le,U){U.Service=ge(29)},{29:29}],29:[function(ge,le,U){le.exports=R;var D=ge(35);function R(M,T,N){if("function"!=typeof M)throw TypeError("rpcImpl must be a function");D.EventEmitter.call(this),this.rpcImpl=M,this.requestDelimited=Boolean(T),this.responseDelimited=Boolean(N)}(R.prototype=Object.create(D.EventEmitter.prototype)).constructor=R,R.prototype.rpcCall=function M(T,N,v,A,p){if(!A)throw TypeError("request must be specified");var _=this;if(!p)return D.asPromise(M,_,T,N,v,A);if(!_.rpcImpl)return setTimeout(function(){p(Error("already ended"))},0),undefined;try{return _.rpcImpl(T,N[_.requestDelimited?"encodeDelimited":"encode"](A).finish(),function(E,k){if(E)return _.emit("error",E,T),p(E);if(null===k)return _.end(!0),undefined;if(!(k instanceof v))try{k=v[_.responseDelimited?"decodeDelimited":"decode"](k)}catch(H){return _.emit("error",H,T),p(H)}return _.emit("data",k,T),p(null,k)})}catch(E){return _.emit("error",E,T),setTimeout(function(){p(E)},0),undefined}},R.prototype.end=function(M){return this.rpcImpl&&(M||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{35:35}],30:[function(ge,le,U){le.exports=N;var D=ge(21);((N.prototype=Object.create(D.prototype)).constructor=N).className="Service";var R=ge(20),M=ge(33),T=ge(28);function N(A,p){D.call(this,A,p),this.methods={},this._methodsArray=null}function v(A){return A._methodsArray=null,A}N.fromJSON=function(A,p){var _=new N(A,p.options);if(p.methods)for(var E=Object.keys(p.methods),k=0;k<E.length;++k)_.add(R.fromJSON(E[k],p.methods[E[k]]));return p.nested&&_.addJSON(p.nested),_.comment=p.comment,_},N.prototype.toJSON=function(A){var p=D.prototype.toJSON.call(this,A),_=!!A&&Boolean(A.keepComments);return M.toObject(["options",p&&p.options||undefined,"methods",D.arrayToJSON(this.methodsArray,A)||{},"nested",p&&p.nested||undefined,"comment",_?this.comment:undefined])},Object.defineProperty(N.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=M.toArray(this.methods))}}),N.prototype.get=function(A){return this.methods[A]||D.prototype.get.call(this,A)},N.prototype.resolveAll=function(){for(var A=this.methodsArray,p=0;p<A.length;++p)A[p].resolve();return D.prototype.resolve.call(this)},N.prototype.add=function(A){if(this.get(A.name))throw Error("duplicate name '"+A.name+"' in "+this);return A instanceof R?(this.methods[A.name]=A,A.parent=this,v(this)):D.prototype.add.call(this,A)},N.prototype.remove=function(A){if(A instanceof R){if(this.methods[A.name]!==A)throw Error(A+" is not a member of "+this);return delete this.methods[A.name],A.parent=null,v(this)}return D.prototype.remove.call(this,A)},N.prototype.create=function(A,p,_){for(var E,k=new T.Service(A,p,_),H=0;H<this.methodsArray.length;++H){var I=M.lcFirst((E=this._methodsArray[H]).resolve().name).replace(/[^$\w_]/g,"");k[I]=M.codegen(["r","c"],M.isReserved(I)?I+"_":I)("return this.rpcCall(m,q,s,r,c)")({m:E,q:E.resolvedRequestType.ctor,s:E.resolvedResponseType.ctor})}return k}},{20:20,21:21,28:28,33:33}],31:[function(ge,le,U){le.exports=P;var D=ge(21);((P.prototype=Object.create(D.prototype)).constructor=P).className="Type";var R=ge(14),M=ge(23),T=ge(15),N=ge(18),v=ge(30),A=ge(19),p=ge(24),_=ge(38),E=ge(33),k=ge(13),H=ge(12),I=ge(36),S=ge(11),B=ge(37);function P(V,ie){D.call(this,V,ie),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function G(V){return V._fieldsById=V._fieldsArray=V._oneofsArray=null,delete V.encode,delete V.decode,delete V.verify,V}Object.defineProperties(P.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var V=Object.keys(this.fields),ie=0;ie<V.length;++ie){var de=this.fields[V[ie]],oe=de.id;if(this._fieldsById[oe])throw Error("duplicate id "+oe+" in "+this);this._fieldsById[oe]=de}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=E.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=E.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=P.generateConstructor(this)())},set:function(V){var ie=V.prototype;ie instanceof A||((V.prototype=new A).constructor=V,E.merge(V.prototype,ie)),V.$type=V.prototype.$type=this,E.merge(V,A,!0),this._ctor=V;for(var de=0;de<this.fieldsArray.length;++de)this._fieldsArray[de].resolve();var oe={};for(de=0;de<this.oneofsArray.length;++de)oe[this._oneofsArray[de].resolve().name]={get:E.oneOfGetter(this._oneofsArray[de].oneof),set:E.oneOfSetter(this._oneofsArray[de].oneof)};de&&Object.defineProperties(V.prototype,oe)}}}),P.generateConstructor=function(V){for(var ie,de=E.codegen(["p"],V.name),oe=0;oe<V.fieldsArray.length;++oe)(ie=V._fieldsArray[oe]).map?de("this%s={}",E.safeProp(ie.name)):ie.repeated&&de("this%s=[]",E.safeProp(ie.name));return de("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},P.fromJSON=function(V,ie){var de=new P(V,ie.options);de.extensions=ie.extensions,de.reserved=ie.reserved;for(var oe=Object.keys(ie.fields),ae=0;ae<oe.length;++ae)de.add((void 0!==ie.fields[oe[ae]].keyType?N.fromJSON:T.fromJSON)(oe[ae],ie.fields[oe[ae]]));if(ie.oneofs)for(oe=Object.keys(ie.oneofs),ae=0;ae<oe.length;++ae)de.add(M.fromJSON(oe[ae],ie.oneofs[oe[ae]]));if(ie.nested)for(oe=Object.keys(ie.nested),ae=0;ae<oe.length;++ae){var J=ie.nested[oe[ae]];de.add((J.id!==undefined?T.fromJSON:J.fields!==undefined?P.fromJSON:J.values!==undefined?R.fromJSON:J.methods!==undefined?v.fromJSON:D.fromJSON)(oe[ae],J))}return ie.extensions&&ie.extensions.length&&(de.extensions=ie.extensions),ie.reserved&&ie.reserved.length&&(de.reserved=ie.reserved),ie.group&&(de.group=!0),ie.comment&&(de.comment=ie.comment),de},P.prototype.toJSON=function(V){var ie=D.prototype.toJSON.call(this,V),de=!!V&&Boolean(V.keepComments);return E.toObject(["options",ie&&ie.options||undefined,"oneofs",D.arrayToJSON(this.oneofsArray,V),"fields",D.arrayToJSON(this.fieldsArray.filter(function(oe){return!oe.declaringField}),V)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",ie&&ie.nested||undefined,"comment",de?this.comment:undefined])},P.prototype.resolveAll=function(){for(var V=this.fieldsArray,ie=0;ie<V.length;)V[ie++].resolve();var de=this.oneofsArray;for(ie=0;ie<de.length;)de[ie++].resolve();return D.prototype.resolveAll.call(this)},P.prototype.get=function(V){return this.fields[V]||this.oneofs&&this.oneofs[V]||this.nested&&this.nested[V]||null},P.prototype.add=function(V){if(this.get(V.name))throw Error("duplicate name '"+V.name+"' in "+this);if(V instanceof T&&V.extend===undefined){if(this._fieldsById?this._fieldsById[V.id]:this.fieldsById[V.id])throw Error("duplicate id "+V.id+" in "+this);if(this.isReservedId(V.id))throw Error("id "+V.id+" is reserved in "+this);if(this.isReservedName(V.name))throw Error("name '"+V.name+"' is reserved in "+this);return V.parent&&V.parent.remove(V),this.fields[V.name]=V,V.message=this,V.onAdd(this),G(this)}return V instanceof M?(this.oneofs||(this.oneofs={}),this.oneofs[V.name]=V,V.onAdd(this),G(this)):D.prototype.add.call(this,V)},P.prototype.remove=function(V){if(V instanceof T&&V.extend===undefined){if(!this.fields||this.fields[V.name]!==V)throw Error(V+" is not a member of "+this);return delete this.fields[V.name],V.parent=null,V.onRemove(this),G(this)}if(V instanceof M){if(!this.oneofs||this.oneofs[V.name]!==V)throw Error(V+" is not a member of "+this);return delete this.oneofs[V.name],V.parent=null,V.onRemove(this),G(this)}return D.prototype.remove.call(this,V)},P.prototype.isReservedId=function(V){return D.isReservedId(this.reserved,V)},P.prototype.isReservedName=function(V){return D.isReservedName(this.reserved,V)},P.prototype.create=function(V){return new this.ctor(V)},P.prototype.setup=function(){for(var V=this.fullName,ie=[],de=0;de<this.fieldsArray.length;++de)ie.push(this._fieldsArray[de].resolve().resolvedType);this.encode=k(this)({Writer:_,types:ie,util:E}),this.decode=H(this)({Reader:p,types:ie,util:E}),this.verify=I(this)({types:ie,util:E}),this.fromObject=S.fromObject(this)({types:ie,util:E}),this.toObject=S.toObject(this)({types:ie,util:E});var oe=B[V];if(oe){var ae=Object.create(this);ae.fromObject=this.fromObject,this.fromObject=oe.fromObject.bind(ae),ae.toObject=this.toObject,this.toObject=oe.toObject.bind(ae)}return this},P.prototype.encode=function(V,ie){return this.setup().encode(V,ie)},P.prototype.encodeDelimited=function(V,ie){return this.encode(V,ie&&ie.len?ie.fork():ie).ldelim()},P.prototype.decode=function(V,ie){return this.setup().decode(V,ie)},P.prototype.decodeDelimited=function(V){return V instanceof p||(V=p.create(V)),this.decode(V,V.uint32())},P.prototype.verify=function(V){return this.setup().verify(V)},P.prototype.fromObject=function(V){return this.setup().fromObject(V)},P.prototype.toObject=function(V,ie){return this.setup().toObject(V,ie)},P.d=function(V){return function(ie){E.decorateType(ie,V)}}},{11:11,12:12,13:13,14:14,15:15,18:18,19:19,21:21,23:23,24:24,30:30,33:33,36:36,37:37,38:38}],32:[function(ge,le,U){var D=U,R=ge(33),M=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function T(N,v){var A=0,p={};for(v|=0;A<N.length;)p[M[A+v]]=N[A++];return p}D.basic=T([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),D.defaults=T([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",R.emptyArray,null]),D.long=T([0,0,0,1,1],7),D.mapKey=T([0,0,0,5,5,0,0,0,1,1,0,2],2),D.packed=T([1,5,0,0,0,5,5,0,0,0,1,1,0])},{33:33}],33:[function(ge,le,U){var D,R,M=le.exports=ge(35),T=ge(27);M.codegen=ge(3),M.fetch=ge(5),M.path=ge(8),M.fs=M.inquire("fs"),M.toArray=function(_){if(_){for(var E=Object.keys(_),k=new Array(E.length),H=0;H<E.length;)k[H]=_[E[H++]];return k}return[]},M.toObject=function(_){for(var E={},k=0;k<_.length;){var H=_[k++],I=_[k++];I!==undefined&&(E[H]=I)}return E};var N=/\\/g,v=/"/g;M.isReserved=function(_){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(_)},M.safeProp=function(_){return!/^[$\w_]+$/.test(_)||M.isReserved(_)?'["'+_.replace(N,"\\\\").replace(v,'\\"')+'"]':"."+_},M.ucFirst=function(_){return _.charAt(0).toUpperCase()+_.substring(1)};var A=/_([a-z])/g;M.camelCase=function(_){return _.substring(0,1)+_.substring(1).replace(A,function(E,k){return k.toUpperCase()})},M.compareFieldsById=function(_,E){return _.id-E.id},M.decorateType=function(_,E){if(_.$type)return E&&_.$type.name!==E&&(M.decorateRoot.remove(_.$type),_.$type.name=E,M.decorateRoot.add(_.$type)),_.$type;D||(D=ge(31));var k=new D(E||_.name);return M.decorateRoot.add(k),k.ctor=_,Object.defineProperty(_,"$type",{value:k,enumerable:!1}),Object.defineProperty(_.prototype,"$type",{value:k,enumerable:!1}),k};var p=0;M.decorateEnum=function(_){if(_.$type)return _.$type;R||(R=ge(14));var E=new R("Enum"+p++,_);return M.decorateRoot.add(E),Object.defineProperty(_,"$type",{value:E,enumerable:!1}),E},M.setProperty=function(_,E,k){if("object"!=typeof _)throw TypeError("dst must be an object");if(!E)throw TypeError("path must be specified");return function H(I,S,B){var P=S.shift();if(S.length>0)I[P]=H(I[P]||{},S,B);else{var G=I[P];G&&(B=[].concat(G).concat(B)),I[P]=B}return I}(_,E=E.split("."),k)},Object.defineProperty(M,"decorateRoot",{get:function(){return T.decorated||(T.decorated=new(ge(26)))}})},{14:14,26:26,27:27,3:3,31:31,35:35,5:5,8:8}],34:[function(ge,le,U){le.exports=R;var D=ge(35);function R(v,A){this.lo=v>>>0,this.hi=A>>>0}var M=R.zero=new R(0,0);M.toNumber=function(){return 0},M.zzEncode=M.zzDecode=function(){return this},M.length=function(){return 1};var T=R.zeroHash="\0\0\0\0\0\0\0\0";R.fromNumber=function(v){if(0===v)return M;var A=v<0;A&&(v=-v);var p=v>>>0,_=(v-p)/4294967296>>>0;return A&&(_=~_>>>0,p=~p>>>0,++p>4294967295&&(p=0,++_>4294967295&&(_=0))),new R(p,_)},R.from=function(v){if("number"==typeof v)return R.fromNumber(v);if(D.isString(v)){if(!D.Long)return R.fromNumber(parseInt(v,10));v=D.Long.fromString(v)}return v.low||v.high?new R(v.low>>>0,v.high>>>0):M},R.prototype.toNumber=function(v){if(!v&&this.hi>>>31){var A=1+~this.lo>>>0,p=~this.hi>>>0;return A||(p=p+1>>>0),-(A+4294967296*p)}return this.lo+4294967296*this.hi},R.prototype.toLong=function(v){return D.Long?new D.Long(0|this.lo,0|this.hi,Boolean(v)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(v)}};var N=String.prototype.charCodeAt;R.fromHash=function(v){return v===T?M:new R((N.call(v,0)|N.call(v,1)<<8|N.call(v,2)<<16|N.call(v,3)<<24)>>>0,(N.call(v,4)|N.call(v,5)<<8|N.call(v,6)<<16|N.call(v,7)<<24)>>>0)},R.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},R.prototype.zzEncode=function(){var v=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^v)>>>0,this.lo=(this.lo<<1^v)>>>0,this},R.prototype.zzDecode=function(){var v=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^v)>>>0,this.hi=(this.hi>>>1^v)>>>0,this},R.prototype.length=function(){var v=this.lo,A=(this.lo>>>28|this.hi<<4)>>>0,p=this.hi>>>24;return 0===p?0===A?v<16384?v<128?1:2:v<2097152?3:4:A<16384?A<128?5:6:A<2097152?7:8:p<128?9:10}},{35:35}],35:[function(ge,le,U){var D=U;function R(T,N,v){for(var A=Object.keys(N),p=0;p<A.length;++p)T[A[p]]!==undefined&&v||(T[A[p]]=N[A[p]]);return T}function M(T){function N(v,A){if(!(this instanceof N))return new N(v,A);Object.defineProperty(this,"message",{get:function(){return v}}),Error.captureStackTrace?Error.captureStackTrace(this,N):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),A&&R(this,A)}return(N.prototype=Object.create(Error.prototype)).constructor=N,Object.defineProperty(N.prototype,"name",{get:function(){return T}}),N.prototype.toString=function(){return this.name+": "+this.message},N}D.asPromise=ge(1),D.base64=ge(2),D.EventEmitter=ge(4),D.float=ge(6),D.inquire=ge(7),D.utf8=ge(10),D.pool=ge(9),D.LongBits=ge(34),D.isNode=Boolean(void 0!==global&&global&&global.process&&global.process.versions&&global.process.versions.node),D.global=D.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,D.emptyArray=Object.freeze?Object.freeze([]):[],D.emptyObject=Object.freeze?Object.freeze({}):{},D.isInteger=Number.isInteger||function(T){return"number"==typeof T&&isFinite(T)&&Math.floor(T)===T},D.isString=function(T){return"string"==typeof T||T instanceof String},D.isObject=function(T){return T&&"object"==typeof T},D.isset=D.isSet=function(T,N){var v=T[N];return!(null==v||!T.hasOwnProperty(N))&&("object"!=typeof v||(Array.isArray(v)?v.length:Object.keys(v).length)>0)},D.Buffer=function(){try{var T=D.inquire("buffer").Buffer;return T.prototype.utf8Write?T:null}catch(N){return null}}(),D._Buffer_from=null,D._Buffer_allocUnsafe=null,D.newBuffer=function(T){return"number"==typeof T?D.Buffer?D._Buffer_allocUnsafe(T):new D.Array(T):D.Buffer?D._Buffer_from(T):"undefined"==typeof Uint8Array?T:new Uint8Array(T)},D.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,D.Long=D.global.dcodeIO&&D.global.dcodeIO.Long||D.global.Long||D.inquire("long"),D.key2Re=/^true|false|0|1$/,D.key32Re=/^-?(?:0|[1-9][0-9]*)$/,D.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,D.longToHash=function(T){return T?D.LongBits.from(T).toHash():D.LongBits.zeroHash},D.longFromHash=function(T,N){var v=D.LongBits.fromHash(T);return D.Long?D.Long.fromBits(v.lo,v.hi,N):v.toNumber(Boolean(N))},D.merge=R,D.lcFirst=function(T){return T.charAt(0).toLowerCase()+T.substring(1)},D.newError=M,D.ProtocolError=M("ProtocolError"),D.oneOfGetter=function(T){for(var N={},v=0;v<T.length;++v)N[T[v]]=1;return function(){for(var A=Object.keys(this),p=A.length-1;p>-1;--p)if(1===N[A[p]]&&this[A[p]]!==undefined&&null!==this[A[p]])return A[p]}},D.oneOfSetter=function(T){return function(N){for(var v=0;v<T.length;++v)T[v]!==N&&delete this[T[v]]}},D.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},D._configure=function(){var T=D.Buffer;T?(D._Buffer_from=T.from!==Uint8Array.from&&T.from||function(N,v){return new T(N,v)},D._Buffer_allocUnsafe=T.allocUnsafe||function(N){return new T(N)}):D._Buffer_from=D._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,34:34,4:4,6:6,7:7,9:9}],36:[function(ge,le,U){le.exports=function(v){var A=R.codegen(["m"],v.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),_={};v.oneofsArray.length&&A("var p={}");for(var E=0;E<v.fieldsArray.length;++E){var k=v._fieldsArray[E].resolve(),H="m"+R.safeProp(k.name);if(k.optional&&A("if(%s!=null&&m.hasOwnProperty(%j)){",H,k.name),k.map)A("if(!util.isObject(%s))",H)("return%j",M(k,"object"))("var k=Object.keys(%s)",H)("for(var i=0;i<k.length;++i){"),N(A,k,"k[i]"),T(A,k,E,H+"[k[i]]")("}");else if(k.repeated)A("if(!Array.isArray(%s))",H)("return%j",M(k,"array"))("for(var i=0;i<%s.length;++i){",H),T(A,k,E,H+"[i]")("}");else{if(k.partOf){var I=R.safeProp(k.partOf.name);1===_[k.partOf.name]&&A("if(p%s===1)",I)("return%j",k.partOf.name+": multiple values"),_[k.partOf.name]=1,A("p%s=1",I)}T(A,k,E,H)}k.optional&&A("}")}return A("return null")};var D=ge(14),R=ge(33);function M(v,A){return v.name+": "+A+(v.repeated&&"array"!==A?"[]":v.map&&"object"!==A?"{k:"+v.keyType+"}":"")+" expected"}function T(v,A,p,_){if(A.resolvedType)if(A.resolvedType instanceof D){v("switch(%s){",_)("default:")("return%j",M(A,"enum value"));for(var E=Object.keys(A.resolvedType.values),k=0;k<E.length;++k)v("case %i:",A.resolvedType.values[E[k]]);v("break")("}")}else v("{")("var e=types[%i].verify(%s);",p,_)("if(e)")("return%j+e",A.name+".")("}");else switch(A.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":v("if(!util.isInteger(%s))",_)("return%j",M(A,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":v("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",_,_,_,_)("return%j",M(A,"integer|Long"));break;case"float":case"double":v('if(typeof %s!=="number")',_)("return%j",M(A,"number"));break;case"bool":v('if(typeof %s!=="boolean")',_)("return%j",M(A,"boolean"));break;case"string":v("if(!util.isString(%s))",_)("return%j",M(A,"string"));break;case"bytes":v('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',_,_,_)("return%j",M(A,"buffer"))}return v}function N(v,A,p){switch(A.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":v("if(!util.key32Re.test(%s))",p)("return%j",M(A,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":v("if(!util.key64Re.test(%s))",p)("return%j",M(A,"integer|Long key"));break;case"bool":v("if(!util.key2Re.test(%s))",p)("return%j",M(A,"boolean key"))}return v}},{14:14,33:33}],37:[function(ge,le,U){var D=U,R=ge(19);D[".google.protobuf.Any"]={fromObject:function(M){if(M&&M["@type"]){var T=M["@type"].substring(M["@type"].lastIndexOf("/")+1),N=this.lookup(T);if(N){var v="."===M["@type"].charAt(0)?M["@type"].substr(1):M["@type"];return-1===v.indexOf("/")&&(v="/"+v),this.create({type_url:v,value:N.encode(N.fromObject(M)).finish()})}}return this.fromObject(M)},toObject:function(M,T){var N="",v="";if(T&&T.json&&M.type_url&&M.value){v=M.type_url.substring(M.type_url.lastIndexOf("/")+1),N=M.type_url.substring(0,M.type_url.lastIndexOf("/")+1);var A=this.lookup(v);A&&(M=A.decode(M.value))}if(!(M instanceof this.ctor)&&M instanceof R){var p=M.$type.toObject(M,T);return""===N&&(N="type.googleapis.com/"),v=N+("."===M.$type.fullName[0]?M.$type.fullName.substr(1):M.$type.fullName),p["@type"]=v,p}return this.toObject(M,T)}}},{19:19}],38:[function(ge,le,U){le.exports=_;var D,R=ge(35),M=R.LongBits,T=R.base64,N=R.utf8;function v(P,G,V){this.fn=P,this.len=G,this.next=undefined,this.val=V}function A(){}function p(P){this.head=P.head,this.tail=P.tail,this.len=P.len,this.next=P.states}function _(){this.len=0,this.head=new v(A,0,0),this.tail=this.head,this.states=null}var E=function(){return R.Buffer?function(){return(_.create=function(){return new D})()}:function(){return new _}};function k(P,G,V){G[V]=255&P}function H(P,G){this.len=P,this.next=undefined,this.val=G}function I(P,G,V){for(;P.hi;)G[V++]=127&P.lo|128,P.lo=(P.lo>>>7|P.hi<<25)>>>0,P.hi>>>=7;for(;P.lo>127;)G[V++]=127&P.lo|128,P.lo=P.lo>>>7;G[V++]=P.lo}function S(P,G,V){G[V]=255&P,G[V+1]=P>>>8&255,G[V+2]=P>>>16&255,G[V+3]=P>>>24}_.create=E(),_.alloc=function(P){return new R.Array(P)},R.Array!==Array&&(_.alloc=R.pool(_.alloc,R.Array.prototype.subarray)),_.prototype._push=function(P,G,V){return this.tail=this.tail.next=new v(P,G,V),this.len+=G,this},(H.prototype=Object.create(v.prototype)).fn=function(P,G,V){for(;P>127;)G[V++]=127&P|128,P>>>=7;G[V]=P},_.prototype.uint32=function(P){return this.len+=(this.tail=this.tail.next=new H((P>>>=0)<128?1:P<16384?2:P<2097152?3:P<268435456?4:5,P)).len,this},_.prototype.int32=function(P){return P<0?this._push(I,10,M.fromNumber(P)):this.uint32(P)},_.prototype.sint32=function(P){return this.uint32((P<<1^P>>31)>>>0)},_.prototype.int64=_.prototype.uint64=function(P){var G=M.from(P);return this._push(I,G.length(),G)},_.prototype.sint64=function(P){var G=M.from(P).zzEncode();return this._push(I,G.length(),G)},_.prototype.bool=function(P){return this._push(k,1,P?1:0)},_.prototype.sfixed32=_.prototype.fixed32=function(P){return this._push(S,4,P>>>0)},_.prototype.sfixed64=_.prototype.fixed64=function(P){var G=M.from(P);return this._push(S,4,G.lo)._push(S,4,G.hi)},_.prototype.float=function(P){return this._push(R.float.writeFloatLE,4,P)},_.prototype.double=function(P){return this._push(R.float.writeDoubleLE,8,P)};var B=R.Array.prototype.set?function(P,G,V){G.set(P,V)}:function(P,G,V){for(var ie=0;ie<P.length;++ie)G[V+ie]=P[ie]};_.prototype.bytes=function(P){var G=P.length>>>0;if(!G)return this._push(k,1,0);if(R.isString(P)){var V=_.alloc(G=T.length(P));T.decode(P,V,0),P=V}return this.uint32(G)._push(B,G,P)},_.prototype.string=function(P){var G=N.length(P);return G?this.uint32(G)._push(N.write,G,P):this._push(k,1,0)},_.prototype.fork=function(){return this.states=new p(this),this.head=this.tail=new v(A,0,0),this.len=0,this},_.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new v(A,0,0),this.len=0),this},_.prototype.ldelim=function(){var P=this.head,G=this.tail,V=this.len;return this.reset().uint32(V),V&&(this.tail.next=P.next,this.tail=G,this.len+=V),this},_.prototype.finish=function(){for(var P=this.head.next,G=this.constructor.alloc(this.len),V=0;P;)P.fn(P.val,G,V),V+=P.len,P=P.next;return G},_._configure=function(P){D=P,_.create=E(),D._configure()}},{35:35}],39:[function(ge,le,U){le.exports=M;var D=ge(38);(M.prototype=Object.create(D.prototype)).constructor=M;var R=ge(35);function M(){D.call(this)}function T(N,v,A){N.length<40?R.utf8.write(N,v,A):v.utf8Write?v.utf8Write(N,A):v.write(N,A)}M._configure=function(){M.alloc=R._Buffer_allocUnsafe,M.writeBytesBuffer=R.Buffer&&R.Buffer.prototype instanceof Uint8Array&&"set"===R.Buffer.prototype.set.name?function(N,v,A){v.set(N,A)}:function(N,v,A){if(N.copy)N.copy(v,A,0,N.length);else for(var p=0;p<N.length;)v[A++]=N[p++]}},M.prototype.bytes=function(N){R.isString(N)&&(N=R._Buffer_from(N,"base64"));var v=N.length>>>0;return this.uint32(v),v&&this._push(M.writeBytesBuffer,v,N),this},M.prototype.string=function(N){var v=R.Buffer.byteLength(N);return this.uint32(v),v&&this._push(T,v,N),this},M._configure()},{35:35,38:38}]},le={},D=function R(M){var T=le[M];return T||ge[M][0].call(T=le[M]={exports:{}},R,T,T.exports),T.exports}(16),D.util.global.protobuf=D,__WEBPACK_AMD_DEFINE_ARRAY__=[__nested_webpack_require_634167__(59)],(__WEBPACK_AMD_DEFINE_RESULT__=function(R){return R&&R.isLong&&(D.util.Long=R,D.configure()),D}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=D)})()}).call(this,__nested_webpack_require_634167__(57),__nested_webpack_require_634167__(58)(module))},function(ge,le){var U;U=function(){return this}();try{U=U||new Function("return this")()}catch(D){"object"==typeof window&&(U=window)}ge.exports=U},function(ge,le){ge.exports=function(U){return U.webpackPolyfill||(U.deprecate=function(){},U.paths=[],U.children||(U.children=[]),Object.defineProperty(U,"loaded",{enumerable:!0,get:function(){return U.l}}),Object.defineProperty(U,"id",{enumerable:!0,get:function(){return U.i}}),U.webpackPolyfill=1),U}},function(ge,le){ge.exports=D;var U=null;try{U=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(C){}function D(C,d,W){this.low=0|C,this.high=0|d,this.unsigned=!!W}function R(C){return!0===(C&&C.__isLong__)}Object.defineProperty(D.prototype,"__isLong__",{value:!0}),D.isLong=R;var M={},T={};function N(C,d){var W,y,u;return d?(u=0<=(C>>>=0)&&C<256)&&(y=T[C])?y:(W=A(C,(0|C)<0?-1:0,!0),u&&(T[C]=W),W):(u=-128<=(C|=0)&&C<128)&&(y=M[C])?y:(W=A(C,C<0?-1:0,!1),u&&(M[C]=W),W)}function v(C,d){if(isNaN(C))return d?P:B;if(d){if(C<0)return P;if(C>=H)return oe}else{if(C<=-I)return ae;if(C+1>=I)return de}return C<0?v(-C,d).neg():A(C%k|0,C/k|0,d)}function A(C,d,W){return new D(C,d,W)}D.fromInt=N,D.fromNumber=v,D.fromBits=A;var p=Math.pow;function _(C,d,W){if(0===C.length)throw Error("empty string");if("NaN"===C||"Infinity"===C||"+Infinity"===C||"-Infinity"===C)return B;if("number"==typeof d?(W=d,d=!1):d=!!d,(W=W||10)<2||36<W)throw RangeError("radix");var y;if((y=C.indexOf("-"))>0)throw Error("interior hyphen");if(0===y)return _(C.substring(1),d,W).neg();for(var u=v(p(W,8)),K=B,m=0;m<C.length;m+=8){var w=Math.min(8,C.length-m),x=parseInt(C.substring(m,m+w),W);if(w<8){var ee=v(p(W,w));K=K.mul(ee).add(v(x))}else K=(K=K.mul(u)).add(v(x))}return K.unsigned=d,K}function E(C,d){return"number"==typeof C?v(C,d):"string"==typeof C?_(C,d):A(C.low,C.high,"boolean"==typeof d?d:C.unsigned)}D.fromString=_,D.fromValue=E;var k=4294967296,H=k*k,I=H/2,S=N(1<<24),B=N(0);D.ZERO=B;var P=N(0,!0);D.UZERO=P;var G=N(1);D.ONE=G;var V=N(1,!0);D.UONE=V;var ie=N(-1);D.NEG_ONE=ie;var de=A(-1,2147483647,!1);D.MAX_VALUE=de;var oe=A(-1,-1,!0);D.MAX_UNSIGNED_VALUE=oe;var ae=A(0,-2147483648,!1);D.MIN_VALUE=ae;var J=D.prototype;J.toInt=function(){return this.unsigned?this.low>>>0:this.low},J.toNumber=function(){return this.unsigned?(this.high>>>0)*k+(this.low>>>0):this.high*k+(this.low>>>0)},J.toString=function(C){if((C=C||10)<2||36<C)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(ae)){var d=v(C),W=this.div(d),y=W.mul(d).sub(this);return W.toString(C)+y.toInt().toString(C)}return"-"+this.neg().toString(C)}for(var u=v(p(C,6),this.unsigned),K=this,m="";;){var w=K.div(u),x=(K.sub(w.mul(u)).toInt()>>>0).toString(C);if((K=w).isZero())return x+m;for(;x.length<6;)x="0"+x;m=""+x+m}},J.getHighBits=function(){return this.high},J.getHighBitsUnsigned=function(){return this.high>>>0},J.getLowBits=function(){return this.low},J.getLowBitsUnsigned=function(){return this.low>>>0},J.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ae)?64:this.neg().getNumBitsAbs();for(var C=0!=this.high?this.high:this.low,d=31;d>0&&0==(C&1<<d);d--);return 0!=this.high?d+33:d+1},J.isZero=function(){return 0===this.high&&0===this.low},J.eqz=J.isZero,J.isNegative=function(){return!this.unsigned&&this.high<0},J.isPositive=function(){return this.unsigned||this.high>=0},J.isOdd=function(){return 1==(1&this.low)},J.isEven=function(){return 0==(1&this.low)},J.equals=function(C){return R(C)||(C=E(C)),(this.unsigned===C.unsigned||this.high>>>31!=1||C.high>>>31!=1)&&this.high===C.high&&this.low===C.low},J.eq=J.equals,J.notEquals=function(C){return!this.eq(C)},J.neq=J.notEquals,J.ne=J.notEquals,J.lessThan=function(C){return this.comp(C)<0},J.lt=J.lessThan,J.lessThanOrEqual=function(C){return this.comp(C)<=0},J.lte=J.lessThanOrEqual,J.le=J.lessThanOrEqual,J.greaterThan=function(C){return this.comp(C)>0},J.gt=J.greaterThan,J.greaterThanOrEqual=function(C){return this.comp(C)>=0},J.gte=J.greaterThanOrEqual,J.ge=J.greaterThanOrEqual,J.compare=function(C){if(R(C)||(C=E(C)),this.eq(C))return 0;var d=this.isNegative(),W=C.isNegative();return d&&!W?-1:!d&&W?1:this.unsigned?C.high>>>0>this.high>>>0||C.high===this.high&&C.low>>>0>this.low>>>0?-1:1:this.sub(C).isNegative()?-1:1},J.comp=J.compare,J.negate=function(){return!this.unsigned&&this.eq(ae)?ae:this.not().add(G)},J.neg=J.negate,J.add=function(C){R(C)||(C=E(C));var x=0,ee=0,ue=0,ye=0;return ue+=(ye+=(65535&this.low)+(65535&C.low))>>>16,ee+=(ue+=(this.low>>>16)+(C.low>>>16))>>>16,x+=(ee+=(65535&this.high)+(65535&C.high))>>>16,x+=(this.high>>>16)+(C.high>>>16),A((ue&=65535)<<16|(ye&=65535),(x&=65535)<<16|(ee&=65535),this.unsigned)},J.subtract=function(C){return R(C)||(C=E(C)),this.add(C.neg())},J.sub=J.subtract,J.multiply=function(C){if(this.isZero())return B;if(R(C)||(C=E(C)),U)return A(U.mul(this.low,this.high,C.low,C.high),U.get_high(),this.unsigned);if(C.isZero())return B;if(this.eq(ae))return C.isOdd()?ae:B;if(C.eq(ae))return this.isOdd()?ae:B;if(this.isNegative())return C.isNegative()?this.neg().mul(C.neg()):this.neg().mul(C).neg();if(C.isNegative())return this.mul(C.neg()).neg();if(this.lt(S)&&C.lt(S))return v(this.toNumber()*C.toNumber(),this.unsigned);var W=65535&this.high,y=this.low>>>16,u=65535&this.low,m=65535&C.high,w=C.low>>>16,x=65535&C.low,ee=0,ue=0,ye=0,ne=0;return ye+=(ne+=u*x)>>>16,ue+=(ye+=y*x)>>>16,ye&=65535,ue+=(ye+=u*w)>>>16,ee+=(ue+=W*x)>>>16,ue&=65535,ee+=(ue+=y*w)>>>16,ue&=65535,ee+=(ue+=u*m)>>>16,ee+=(this.high>>>16)*x+W*w+y*m+u*(C.high>>>16),A((ye&=65535)<<16|(ne&=65535),(ee&=65535)<<16|(ue&=65535),this.unsigned)},J.mul=J.multiply,J.divide=function(C){if(R(C)||(C=E(C)),C.isZero())throw Error("division by zero");var d,W,y;if(U)return this.unsigned||-2147483648!==this.high||-1!==C.low||-1!==C.high?A((this.unsigned?U.div_u:U.div_s)(this.low,this.high,C.low,C.high),U.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?P:B;if(this.unsigned){if(C.unsigned||(C=C.toUnsigned()),C.gt(this))return P;if(C.gt(this.shru(1)))return V;y=P}else{if(this.eq(ae))return C.eq(G)||C.eq(ie)?ae:C.eq(ae)?G:(d=this.shr(1).div(C).shl(1)).eq(B)?C.isNegative()?G:ie:(W=this.sub(C.mul(d)),y=d.add(W.div(C)));if(C.eq(ae))return this.unsigned?P:B;if(this.isNegative())return C.isNegative()?this.neg().div(C.neg()):this.neg().div(C).neg();if(C.isNegative())return this.div(C.neg()).neg();y=B}for(W=this;W.gte(C);){d=Math.max(1,Math.floor(W.toNumber()/C.toNumber()));for(var u=Math.ceil(Math.log(d)/Math.LN2),K=u<=48?1:p(2,u-48),m=v(d),w=m.mul(C);w.isNegative()||w.gt(W);)w=(m=v(d-=K,this.unsigned)).mul(C);m.isZero()&&(m=G),y=y.add(m),W=W.sub(w)}return y},J.div=J.divide,J.modulo=function(C){return R(C)||(C=E(C)),U?A((this.unsigned?U.rem_u:U.rem_s)(this.low,this.high,C.low,C.high),U.get_high(),this.unsigned):this.sub(this.div(C).mul(C))},J.mod=J.modulo,J.rem=J.modulo,J.not=function(){return A(~this.low,~this.high,this.unsigned)},J.and=function(C){return R(C)||(C=E(C)),A(this.low&C.low,this.high&C.high,this.unsigned)},J.or=function(C){return R(C)||(C=E(C)),A(this.low|C.low,this.high|C.high,this.unsigned)},J.xor=function(C){return R(C)||(C=E(C)),A(this.low^C.low,this.high^C.high,this.unsigned)},J.shiftLeft=function(C){return R(C)&&(C=C.toInt()),0==(C&=63)?this:C<32?A(this.low<<C,this.high<<C|this.low>>>32-C,this.unsigned):A(0,this.low<<C-32,this.unsigned)},J.shl=J.shiftLeft,J.shiftRight=function(C){return R(C)&&(C=C.toInt()),0==(C&=63)?this:C<32?A(this.low>>>C|this.high<<32-C,this.high>>C,this.unsigned):A(this.high>>C-32,this.high>=0?0:-1,this.unsigned)},J.shr=J.shiftRight,J.shiftRightUnsigned=function(C){if(R(C)&&(C=C.toInt()),0==(C&=63))return this;var d=this.high;return C<32?A(this.low>>>C|d<<32-C,d>>>C,this.unsigned):A(32===C?d:d>>>C-32,0,this.unsigned)},J.shru=J.shiftRightUnsigned,J.shr_u=J.shiftRightUnsigned,J.toSigned=function(){return this.unsigned?A(this.low,this.high,!1):this},J.toUnsigned=function(){return this.unsigned?this:A(this.low,this.high,!0)},J.toBytes=function(C){return C?this.toBytesLE():this.toBytesBE()},J.toBytesLE=function(){var C=this.high,d=this.low;return[255&d,d>>>8&255,d>>>16&255,d>>>24,255&C,C>>>8&255,C>>>16&255,C>>>24]},J.toBytesBE=function(){var C=this.high,d=this.low;return[C>>>24,C>>>16&255,C>>>8&255,255&C,d>>>24,d>>>16&255,d>>>8&255,255&d]},D.fromBytes=function(C,d,W){return W?D.fromBytesLE(C,d):D.fromBytesBE(C,d)},D.fromBytesLE=function(C,d){return new D(C[0]|C[1]<<8|C[2]<<16|C[3]<<24,C[4]|C[5]<<8|C[6]<<16|C[7]<<24,d)},D.fromBytesBE=function(C,d){return new D(C[4]<<24|C[5]<<16|C[6]<<8|C[7],C[0]<<24|C[1]<<16|C[2]<<8|C[3],d)}},function(ge){ge.exports=JSON.parse('{"PeerPublishStatus":408,"JoinChannelTimeout":407,"OnUpdateStream":356,"OnRemoveStream":355,"OnAddVideoStream":353,"OnAddAudioStream":352,"FirstAudioDecode":351,"FirstVideoDecode":350,"FirstAudioReceived":349,"FirstVideoReceived":348,"ReqUserAccount":196,"ApiInvoke":41,"RequestProxyWorkerManager":36,"RequestProxyAppCenter":35,"VideoSendingStopped":34,"AudioSendingStopped":33,"StreamSwitch":32,"FirstFrame":31,"Publish":30,"Subscribe":29,"JoinGateway":28,"JoinChooseServer":27,"Session":26,"APWorkerEvent":160,"WorkerEvent":156,"JoinWebProxyAP":700,"WebSocketQuit":671}')},function(ge){ge.exports=JSON.parse('{"nested":{"protobuf":{"nested":{"Session":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"version":{"type":"string","id":11},"browser":{"type":"string","id":12},"appid":{"type":"string","id":13},"mode":{"type":"string","id":14},"extend":{"type":"string","id":15},"process":{"type":"string","id":16},"build":{"type":"string","id":17},"ipv6":{"type":"string","id":18},"sourceHost":{"type":"string","id":19},"sourcePath":{"type":"string","id":20},"collectorHost":{"type":"string","id":21},"collectorName":{"type":"string","id":22}}},"JoinChooseServer":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"chooseServerAddr":{"type":"string","id":11},"chooseServerAddrList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"chooseServerIp":{"type":"string","id":15}}},"JoinGateway":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"gatewayAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"firstSuccess":{"type":"bool","id":14}}},"Subscribe":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"video":{"type":"bool","id":16},"audio":{"type":"bool","id":17},"subscribeRequestid":{"type":"int32","id":18},"p2pid":{"type":"int32","id":19}}},"Publish":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"videoName":{"type":"string","id":16},"audioName":{"type":"string","id":17},"screenName":{"type":"string","id":18},"video":{"type":"bool","id":19},"audio":{"type":"bool","id":20},"publishRequestid":{"type":"int32","id":21},"p2pid":{"type":"int32","id":22},"screenshare":{"type":"bool","id":23}}},"FirstFrame":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"extend":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"width":{"type":"int64","id":13},"height":{"type":"int64","id":14}}},"StreamSwitch":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"isDual":{"type":"bool","id":11}}},"AudioSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"VideoSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"RequestProxyAppCenter":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"APAddr":{"type":"string","id":11},"workerManagerList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"extend":{"type":"string","id":15},"response":{"type":"string","id":16}}},"RequestProxyWorkerManager":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"workerManagerAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"extend":{"type":"string","id":14},"response":{"type":"string","id":15}}},"ApiInvoke":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"apiName":{"type":"string","id":9},"errorCode":{"type":"string","id":10},"options":{"type":"string","id":11},"execElapse":{"type":"int64","id":12},"execStates":{"type":"string","id":13},"execResult":{"type":"string","id":14},"invokeId":{"type":"int64","id":15}}},"ReqUserAccount":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"serverAddress":{"type":"string","id":10},"stringUid":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"extend":{"type":"string","id":13}}},"FirstVideoReceived":{"fields":{"lts":{"type":"int64","id":1},"peer":{"type":"int64","id":2},"elapse":{"type":"int64","id":3},"sid":{"type":"string","id":4},"cname":{"type":"string","id":5},"cid":{"type":"int64","id":6},"uid":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstAudioReceived":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstVideoDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"videowidth":{"type":"int32","id":9},"videoheight":{"type":"int32","id":10},"subscribeRequestid":{"type":"int32","id":11},"p2pid":{"type":"int32","id":12},"subscribeElapse":{"type":"int64","id":13}}},"FirstAudioDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"OnAddAudioStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnAddVideoStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnRemoveStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnUpdateStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"audio":{"type":"bool","id":8},"video":{"type":"bool","id":9}}},"JoinChannelTimeout":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"timeout":{"type":"int32","id":7}}},"PeerPublishStatus":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"peer":{"type":"int64","id":6},"elapse":{"type":"int64","id":7},"peerPublishDuration":{"type":"int64","id":8},"joinChannelSuccessElapse":{"type":"int64","id":9},"subscribeElapse":{"type":"int64","id":10},"audiotag":{"type":"int32","id":11},"videotag":{"type":"int32","id":12},"screensharetag":{"type":"int32","id":13},"firsttimetag":{"type":"int32","id":14}}},"WebSocketQuit":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"succ":{"type":"int32","id":7},"errorCode":{"type":"string","id":8},"ip":{"type":"string","id":9}}},"Message":{"fields":{"id":{"type":"int64","id":1},"msg":{"type":"bytes","id":2}}},"ProtoRaws":{"fields":{"sendTs":{"type":"int64","id":1},"payloads":{"rule":"repeated","type":"Message","id":2},"vid":{"type":"int32","id":3}}},"APWorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"ec":{"type":"int32","id":10},"sc":{"type":"int32","id":11},"serverIp":{"type":"string","id":12},"firstSuccess":{"type":"bool","id":13},"responseTime":{"type":"int32","id":14},"serviceName":{"type":"string","id":15},"responseDetail":{"type":"string","id":16}}},"WorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"command":{"type":"string","id":10},"actionType":{"type":"string","id":11},"url":{"type":"string","id":12},"payload":{"type":"string","id":13},"serverCode":{"type":"int32","id":14},"code":{"type":"int32","id":15},"traceId":{"type":"string","id":16},"workerType":{"type":"int32","id":17},"responseTime":{"type":"int32","id":18},"requestId":{"type":"int64","id":19},"packIndex":{"type":"int32","id":20},"requestByUser":{"type":"bool","id":21},"tid":{"type":"string","id":22}}},"JoinWebProxyAP":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"sucess":{"type":"int32","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"apServerAddr":{"type":"string","id":10},"turnServerAddrList":{"type":"string","id":11},"errorCode":{"type":"string","id":12}}}}}}}')},function(ge,le,U){var D=function(R){"use strict";var M=Object.prototype,T=M.hasOwnProperty,N="function"==typeof Symbol?Symbol:{},v=N.iterator||"@@iterator",A=N.asyncIterator||"@@asyncIterator",p=N.toStringTag||"@@toStringTag";function _(y,u,K,m){var ue,ye,ne,q,x=Object.create((u&&u.prototype instanceof H?u:H).prototype),ee=new C(m||[]);return x._invoke=(ue=y,ye=K,ne=ee,q="suspendedStart",function(F,te){if("executing"===q)throw new Error("Generator is already running");if("completed"===q){if("throw"===F)throw te;return{value:void 0,done:!0}}for(ne.method=F,ne.arg=te;;){var Te=ne.delegate;if(Te){var me=oe(Te,ne);if(me){if(me===k)continue;return me}}if("next"===ne.method)ne.sent=ne._sent=ne.arg;else if("throw"===ne.method){if("suspendedStart"===q)throw q="completed",ne.arg;ne.dispatchException(ne.arg)}else"return"===ne.method&&ne.abrupt("return",ne.arg);q="executing";var fe=E(ue,ye,ne);if("normal"===fe.type){if(q=ne.done?"completed":"suspendedYield",fe.arg===k)continue;return{value:fe.arg,done:ne.done}}"throw"===fe.type&&(q="completed",ne.method="throw",ne.arg=fe.arg)}}),x}function E(y,u,K){try{return{type:"normal",arg:y.call(u,K)}}catch(m){return{type:"throw",arg:m}}}R.wrap=_;var k={};function H(){}function I(){}function S(){}var B={};B[v]=function(){return this};var P=Object.getPrototypeOf,G=P&&P(P(d([])));G&&G!==M&&T.call(G,v)&&(B=G);var V=S.prototype=H.prototype=Object.create(B);function ie(y){["next","throw","return"].forEach(function(u){y[u]=function(K){return this._invoke(u,K)}})}function de(y,u){var K;this._invoke=function(m,w){function x(){return new u(function(ee,ue){!function ye(ne,q,F,te){var Te=E(y[ne],y,q);if("throw"!==Te.type){var me=Te.arg,fe=me.value;return fe&&"object"==typeof fe&&T.call(fe,"__await")?u.resolve(fe.__await).then(function(Ne){ye("next",Ne,F,te)},function(Ne){ye("throw",Ne,F,te)}):u.resolve(fe).then(function(Ne){me.value=Ne,F(me)},function(Ne){return ye("throw",Ne,F,te)})}te(Te.arg)}(m,w,ee,ue)})}return K=K?K.then(x,x):x()}}function oe(y,u){var K=y.iterator[u.method];if(void 0===K){if(u.delegate=null,"throw"===u.method){if(y.iterator.return&&(u.method="return",u.arg=void 0,oe(y,u),"throw"===u.method))return k;u.method="throw",u.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var m=E(K,y.iterator,u.arg);if("throw"===m.type)return u.method="throw",u.arg=m.arg,u.delegate=null,k;var w=m.arg;return w?w.done?(u[y.resultName]=w.value,u.next=y.nextLoc,"return"!==u.method&&(u.method="next",u.arg=void 0),u.delegate=null,k):w:(u.method="throw",u.arg=new TypeError("iterator result is not an object"),u.delegate=null,k)}function ae(y){var u={tryLoc:y[0]};1 in y&&(u.catchLoc=y[1]),2 in y&&(u.finallyLoc=y[2],u.afterLoc=y[3]),this.tryEntries.push(u)}function J(y){var u=y.completion||{};u.type="normal",delete u.arg,y.completion=u}function C(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(ae,this),this.reset(!0)}function d(y){if(y){var u=y[v];if(u)return u.call(y);if("function"==typeof y.next)return y;if(!isNaN(y.length)){var K=-1,m=function w(){for(;++K<y.length;)if(T.call(y,K))return w.value=y[K],w.done=!1,w;return w.value=void 0,w.done=!0,w};return m.next=m}}return{next:W}}function W(){return{value:void 0,done:!0}}return I.prototype=V.constructor=S,S.constructor=I,S[p]=I.displayName="GeneratorFunction",R.isGeneratorFunction=function(y){var u="function"==typeof y&&y.constructor;return!!u&&(u===I||"GeneratorFunction"===(u.displayName||u.name))},R.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,S):(y.__proto__=S,p in y||(y[p]="GeneratorFunction")),y.prototype=Object.create(V),y},R.awrap=function(y){return{__await:y}},ie(de.prototype),de.prototype[A]=function(){return this},R.AsyncIterator=de,R.async=function(y,u,K,m,w){void 0===w&&(w=Promise);var x=new de(_(y,u,K,m),w);return R.isGeneratorFunction(u)?x:x.next().then(function(ee){return ee.done?ee.value:x.next()})},ie(V),V[p]="Generator",V[v]=function(){return this},V.toString=function(){return"[object Generator]"},R.keys=function(y){var u=[];for(var K in y)u.push(K);return u.reverse(),function m(){for(;u.length;){var w=u.pop();if(w in y)return m.value=w,m.done=!1,m}return m.done=!0,m}},R.values=d,C.prototype={constructor:C,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(J),!y)for(var u in this)"t"===u.charAt(0)&&T.call(this,u)&&!isNaN(+u.slice(1))&&(this[u]=void 0)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if("throw"===y.type)throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var u=this;function K(ye,ne){return x.type="throw",x.arg=y,u.next=ye,ne&&(u.method="next",u.arg=void 0),!!ne}for(var m=this.tryEntries.length-1;m>=0;--m){var w=this.tryEntries[m],x=w.completion;if("root"===w.tryLoc)return K("end");if(w.tryLoc<=this.prev){var ee=T.call(w,"catchLoc"),ue=T.call(w,"finallyLoc");if(ee&&ue){if(this.prev<w.catchLoc)return K(w.catchLoc,!0);if(this.prev<w.finallyLoc)return K(w.finallyLoc)}else if(ee){if(this.prev<w.catchLoc)return K(w.catchLoc,!0)}else{if(!ue)throw new Error("try statement without catch or finally");if(this.prev<w.finallyLoc)return K(w.finallyLoc)}}}},abrupt:function(y,u){for(var K=this.tryEntries.length-1;K>=0;--K){var m=this.tryEntries[K];if(m.tryLoc<=this.prev&&T.call(m,"finallyLoc")&&this.prev<m.finallyLoc){var w=m;break}}w&&("break"===y||"continue"===y)&&w.tryLoc<=u&&u<=w.finallyLoc&&(w=null);var x=w?w.completion:{};return x.type=y,x.arg=u,w?(this.method="next",this.next=w.finallyLoc,k):this.complete(x)},complete:function(y,u){if("throw"===y.type)throw y.arg;return"break"===y.type||"continue"===y.type?this.next=y.arg:"return"===y.type?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):"normal"===y.type&&u&&(this.next=u),k},finish:function(y){for(var u=this.tryEntries.length-1;u>=0;--u){var K=this.tryEntries[u];if(K.finallyLoc===y)return this.complete(K.completion,K.afterLoc),J(K),k}},catch:function(y){for(var u=this.tryEntries.length-1;u>=0;--u){var K=this.tryEntries[u];if(K.tryLoc===y){var m=K.completion;if("throw"===m.type){var w=m.arg;J(K)}return w}}throw new Error("illegal catch attempt")},delegateYield:function(y,u,K){return this.delegate={iterator:d(y),resultName:u,nextLoc:K},"next"===this.method&&(this.arg=void 0),k}},R}(ge.exports);try{regeneratorRuntime=D}catch(R){Function("r","regeneratorRuntime = r")(D)}},function(ge,le){ge.exports=function(U){if(Array.isArray(U))return U}},function(ge,le){ge.exports=function(U,D){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(U)){var R=[],M=!0,T=!1,N=void 0;try{for(var v,A=U[Symbol.iterator]();!(M=(v=A.next()).done)&&(R.push(v.value),!D||R.length!==D);M=!0);}catch(p){T=!0,N=p}finally{try{M||null==A.return||A.return()}finally{if(T)throw N}}return R}}},function(ge,le){ge.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(ge,le,U){"use strict";Object.defineProperty(le,"__esModule",{value:!0});var D="object"==typeof window&&window.RTCPeerConnection,R="object"==typeof window&&window.webkitRTCPeerConnection,M="object"==typeof window&&window.mozRTCPeerConnection;le.createRTCPeerConnection=function(T){var N=D||R||M;return N?new N(T):null}},function(ge,le,U){var D;!function(R){"use strict";function M(){}var T=M.prototype,N=R.EventEmitter;function v(p,_){for(var E=p.length;E--;)if(p[E].listener===_)return E;return-1}function A(p){return function(){return this[p].apply(this,arguments)}}T.getListeners=function(p){var _,E,k=this._getEvents();if(p instanceof RegExp)for(E in _={},k)k.hasOwnProperty(E)&&p.test(E)&&(_[E]=k[E]);else _=k[p]||(k[p]=[]);return _},T.flattenListeners=function(p){var _,E=[];for(_=0;_<p.length;_+=1)E.push(p[_].listener);return E},T.getListenersAsObject=function(p){var _,E=this.getListeners(p);return E instanceof Array&&((_={})[p]=E),_||E},T.addListener=function(p,_){if(!function I(S){return"function"==typeof S||S instanceof RegExp||!(!S||"object"!=typeof S)&&I(S.listener)}(_))throw new TypeError("listener must be a function");var E,k=this.getListenersAsObject(p),H="object"==typeof _;for(E in k)k.hasOwnProperty(E)&&-1===v(k[E],_)&&k[E].push(H?_:{listener:_,once:!1});return this},T.on=A("addListener"),T.addOnceListener=function(p,_){return this.addListener(p,{listener:_,once:!0})},T.once=A("addOnceListener"),T.defineEvent=function(p){return this.getListeners(p),this},T.defineEvents=function(p){for(var _=0;_<p.length;_+=1)this.defineEvent(p[_]);return this},T.removeListener=function(p,_){var E,k,H=this.getListenersAsObject(p);for(k in H)H.hasOwnProperty(k)&&-1!==(E=v(H[k],_))&&H[k].splice(E,1);return this},T.off=A("removeListener"),T.addListeners=function(p,_){return this.manipulateListeners(!1,p,_)},T.removeListeners=function(p,_){return this.manipulateListeners(!0,p,_)},T.manipulateListeners=function(p,_,E){var k,H,I=p?this.removeListener:this.addListener,S=p?this.removeListeners:this.addListeners;if("object"!=typeof _||_ instanceof RegExp)for(k=E.length;k--;)I.call(this,_,E[k]);else for(k in _)_.hasOwnProperty(k)&&(H=_[k])&&("function"==typeof H?I.call(this,k,H):S.call(this,k,H));return this},T.removeEvent=function(p){var _,E=typeof p,k=this._getEvents();if("string"===E)delete k[p];else if(p instanceof RegExp)for(_ in k)k.hasOwnProperty(_)&&p.test(_)&&delete k[_];else delete this._events;return this},T.removeAllListeners=A("removeEvent"),T.emitEvent=function(p,_){var E,k,H,I,S=this.getListenersAsObject(p);for(I in S)if(S.hasOwnProperty(I))for(E=S[I].slice(0),H=0;H<E.length;H++)!0===(k=E[H]).once&&this.removeListener(p,k.listener),k.listener.apply(this,_||[])===this._getOnceReturnValue()&&this.removeListener(p,k.listener);return this},T.trigger=A("emitEvent"),T.emit=function(p){var _=Array.prototype.slice.call(arguments,1);return this.emitEvent(p,_)},T.setOnceReturnValue=function(p){return this._onceReturnValue=p,this},T._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},T._getEvents=function(){return this._events||(this._events={})},M.noConflict=function(){return R.EventEmitter=N,M},void 0===(D=function(){return M}.call(R,U,R,ge))||(ge.exports=D)}("undefined"!=typeof window?window:this||{})},function(ge,le,U){var D=U(32);ge.exports=function(R){if(Array.isArray(R))return D(R)}},function(ge,le){ge.exports=function(U){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(U))return Array.from(U)}},function(ge,le){ge.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(ge,le,U){"use strict";var D=this&&this.__assign||function(){return(D=Object.assign||function(S){for(var B,P=1,G=arguments.length;P<G;P++)for(var V in B=arguments[P])Object.prototype.hasOwnProperty.call(B,V)&&(S[V]=B[V]);return S}).apply(this,arguments)},R=this&&this.__awaiter||function(S,B,P,G){return new(P||(P=Promise))(function(V,ie){function de(J){try{ae(G.next(J))}catch(C){ie(C)}}function oe(J){try{ae(G.throw(J))}catch(C){ie(C)}}function ae(J){var C;J.done?V(J.value):(C=J.value,C instanceof P?C:new P(function(d){d(C)})).then(de,oe)}ae((G=G.apply(S,B||[])).next())})},M=this&&this.__generator||function(S,B){var P,G,V,ie,de={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]};return ie={next:oe(0),throw:oe(1),return:oe(2)},"function"==typeof Symbol&&(ie[Symbol.iterator]=function(){return this}),ie;function oe(ae){return function(J){return function(C){if(P)throw new TypeError("Generator is already executing.");for(;de;)try{if(P=1,G&&(V=2&C[0]?G.return:C[0]?G.throw||((V=G.return)&&V.call(G),0):G.next)&&!(V=V.call(G,C[1])).done)return V;switch(G=0,V&&(C=[2&C[0],V.value]),C[0]){case 0:case 1:V=C;break;case 4:return de.label++,{value:C[1],done:!1};case 5:de.label++,G=C[1],C=[0];continue;case 7:C=de.ops.pop(),de.trys.pop();continue;default:if(!((V=(V=de.trys).length>0&&V[V.length-1])||6!==C[0]&&2!==C[0])){de=0;continue}if(3===C[0]&&(!V||C[1]>V[0]&&C[1]<V[3])){de.label=C[1];break}if(6===C[0]&&de.label<V[1]){de.label=V[1],V=C;break}if(V&&de.label<V[2]){de.label=V[2],de.ops.push(C);break}V[2]&&de.ops.pop(),de.trys.pop();continue}C=B.call(S,de)}catch(d){C=[6,d],G=0}finally{P=V=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([ae,J])}}},T=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(le,"__esModule",{value:!0});var N=U(72),v=U(27),A=U(91),p=U(20),_=U(24),E=U(29),k=T(U(0)),H=T(U(34)),I=function(){function S(B){this.retryTimeout=1e4,this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.taskMutex=new A.PromiseMutex("LS"),this.cancelToken=H.default.CancelToken.source(),this.injectConfig=D({},v.DEFAULT_INJECT_CONFIG),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Map,this.spec=B}return Object.defineProperty(S.prototype,"isNeedReset",{get:function(){for(var B=this,P=0,G=Array.from(this.streamingTasks.values());P<G.length;P++){var V=G[P];if(V.mode===v.LiveStreamingServiceMode.INJECT||V.mode===v.LiveStreamingServiceMode.TRANSCODE&&(this.transcodingConfig&&(this.transcodingConfig.userConfigs||this.transcodingConfig.transcodingUsers)||[]).find(function(ie){return ie.uid===B.spec.uid}))return!0}return!1},enumerable:!0,configurable:!0}),S.prototype.setTranscodingConfig=function(B){return R(this,void 0,void 0,function(){var P,G,V,ie,de,oe=this;return M(this,function(ae){switch(ae.label){case 0:(P=D(D({},v.DEFAULT_TRANSCODING_CONFIG),B)).transcodingUsers||(P.transcodingUsers=P.userConfigs),66!==P.videoCodecProfile&&77!==P.videoCodecProfile&&100!==P.videoCodecProfile&&(k.default.debug("["+this.spec.clientId+"] set transcoding config, fix video codec profile: "+P.videoCodecProfile+" -> 100"),P.videoCodecProfile=100),P.transcodingUsers&&(P.transcodingUsers=P.transcodingUsers.map(function(J){return D(D(D({},v.DEFAULT_LIVE_STREAMING_TRANSCODING_USER),J),{zOrder:J.zOrder?J.zOrder+1:1})})),P.images&&(P.images=P.images.map(function(J){return D(D({},v.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK),J)}));try{v.isLiveStreamingTranscodingConfig(P)}catch(J){throw J}return P.transcodingUsers&&(P.userConfigs=P.transcodingUsers.map(function(J){return D({},J)}),P.userCount=P.transcodingUsers.length,delete P.transcodingUsers),G=(P.userConfigs||[]).map(function(J){return"number"==typeof J.uid?Promise.resolve(J.uid):p.getUserAccount(oe.spec,null,J.uid)}),[4,this.taskMutex.lock()];case 1:return V=ae.sent(),[4,Promise.all(G)];case 2:if(ae.sent().forEach(function(J,C){P.userConfigs&&P.userConfigs[C]&&(P.userConfigs[C].uid=J&&J.uid||J)}),this.transcodingConfig=P,!this.connection)return V(),[2];ae.label=3;case 3:return ae.trys.push([3,5,,6]),[4,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(this.streamingTasks.values()).map(function(J){return J.taskId}).join("#")})];case 4:return ie=ae.sent(),V(),k.default.debug("["+this.spec.clientId+"] update live transcoding config success, code: "+ie.code+", config:",JSON.stringify(this.transcodingConfig)),[3,6];case 5:if(de=ae.sent(),V(),!de.data||!de.data.retry)throw de;return de.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(function(J){k.default.warning("["+oe.spec.clientId+"] live streaming receive error",de.toString(),"try to republish",J.url),oe.startLiveStreamingTask(J.url,J.mode,de).then(function(){k.default.debug("["+oe.spec.clientId+"] live streaming republish "+J.url+" success")}).catch(function(C){k.default.error("["+oe.spec.clientId+"] live streaming republish failed",J.url,C.toString()),oe.onLiveStreamError&&oe.onLiveStreamError(J.url,C)})}),[3,6];case 6:return[2]}})})},S.prototype.setInjectStreamConfig=function(B,P){this.injectConfig=Object.assign({},this.injectConfig,B),this.injectLoopTimes=P},S.prototype.startLiveStreamingTask=function(B,P,G){return R(this,void 0,void 0,function(){var V,ie,de,oe,ae,J,C,d,W=this;return M(this,function(y){switch(y.label){case 0:return Array.from(this.streamingTasks.values()).find(function(u){return u.mode===v.LiveStreamingServiceMode.INJECT})&&P===v.LiveStreamingServiceMode.INJECT?[2,new _.AgoraRTCError(_.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw()]:(V={command:"PublishStream",ts:Date.now(),url:B,uid:this.spec.uid.toString(),autoDestroyTime:30},k.default.debug("["+this.spec.clientId+"] start live streaming "+B+", mode: "+P),[4,this.taskMutex.lock()]);case 1:if(ie=y.sent(),!this.transcodingConfig&&P===v.LiveStreamingServiceMode.TRANSCODE)throw ie(),new _.AgoraRTCError(_.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");if(!this.connection&&G)return ie(),[2];if(this.streamingTasks.get(B)&&!G)return ie(),[2,new _.AgoraRTCError(_.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw()];if(!this.transcodingConfig&&P===v.LiveStreamingServiceMode.TRANSCODE)throw ie(),new _.AgoraRTCError(_.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");y.label=2;case 2:return y.trys.push([2,5,,6]),this.connection?[3,4]:(de=this,[4,this.connect(P)]);case 3:de.connection=y.sent(),y.label=4;case 4:return[3,6];case 5:throw oe=y.sent(),ie(),oe;case 6:switch(P){case v.LiveStreamingServiceMode.TRANSCODE:V.transcodingConfig=D({},this.transcodingConfig);break;case v.LiveStreamingServiceMode.RAW:break;case v.LiveStreamingServiceMode.INJECT:V={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:B,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(V.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,ae=this.lastTaskId++,y.label=7;case 7:return y.trys.push([7,9,,14]),J=new Promise(function(u,K){E.wait(W.retryTimeout).then(function(){if(G)return K(G);var m=W.statusError.get(B);return m?(W.statusError.delete(B),K(m)):void 0})}),[4,Promise.race([this.connection.request("request",{clientRequest:V},!0,{url:B,command:"PublishStream",workerType:P===v.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!G,tid:ae.toString()}),J])];case 8:return C=y.sent(),this.isStartingStreamingTask=!1,k.default.debug("["+this.spec.clientId+"] live streaming started, code: "+C.code),this.streamingTasks.set(B,{clientRequest:V,mode:P,url:B,taskId:ae}),ie(),[3,14];case 9:if(d=y.sent(),ie(),this.isStartingStreamingTask=!1,!d.data||!d.data.retry||G)throw d;return d.data.changeAddress?[3,11]:[4,this.startLiveStreamingTask(B,P,d)];case 10:return[2,y.sent()];case 11:return this.connection.tryNextAddress(),[4,this.startLiveStreamingTask(B,P,d)];case 12:return[2,y.sent()];case 13:return[3,14];case 14:return[2]}})})},S.prototype.stopLiveStreamingTask=function(B){var P=this;return new Promise(function(G,V){var ie=P.streamingTasks.get(B);if(!ie||!P.connection)return new _.AgoraRTCError(_.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var de=ie.mode;ie.abortTask=function(){k.default.debug("["+P.spec.clientId+"] stop live streaming success(worker exception)"),P.streamingTasks.delete(B),G()},k.default.debug("stop live streaming task request: "+JSON.stringify(B)),P.connection.request("request",{clientRequest:{command:de===v.LiveStreamingServiceMode.INJECT?"UninjectStream":"UnpublishStream",url:ie.url}},!1,{url:B,command:"UnPublishStream",workerType:de===v.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!0,tid:(P.lastTaskId++).toString()}).then(function(oe){k.default.debug("["+P.spec.clientId+"] stop live streaming success, code: "+oe.code),P.streamingTasks.delete(B),0===P.streamingTasks.size&&de!==v.LiveStreamingServiceMode.INJECT&&(P.connection.close(),P.connection=void 0),G()}).catch(V)})},S.prototype.controlInjectStream=function(B,P,G,V){return R(this,void 0,void 0,function(){var ie;return M(this,function(de){switch(de.label){case 0:if(!(ie=this.streamingTasks.get(B))||!this.connection||ie.mode!==v.LiveStreamingServiceMode.INJECT)throw new _.AgoraRTCError(_.AgoraRTCErrorCode.INVALID_OPERATION,"can not find inject stream task to control");return[4,this.connection.request("request",{clientRequest:{command:"ControlStream",url:B,control:P,audioVolume:G,position:V}})];case 1:return[2,de.sent().serverResponse]}})})},S.prototype.resetAllTask=function(){var B=this,P=Array.from(this.streamingTasks.values());this.terminate();for(var G=function(oe){V.startLiveStreamingTask(oe.url,oe.mode).catch(function(ae){B.onLiveStreamError&&B.onLiveStreamError(oe.url,ae)})},V=this,ie=0,de=P;ie<de.length;ie++)G(de[ie])},S.prototype.setGatewayConnectionState=function(B){this.connection&&(this.connection.gatewayConnectionState=B)},S.prototype.terminate=function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=H.default.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0},S.prototype.connect=function(B){return R(this,void 0,void 0,function(){var P,G=this;return M(this,function(V){switch(V.label){case 0:if(this.connection)throw new _.AgoraRTCError(_.AgoraRTCErrorCode.UNEXPECTED_ERROR,"live streaming connection has already connected");return[4,E.getLiveStreamingWorkerMangerResult(B,this.spec,this.cancelToken.token)];case 1:return P=V.sent(),this.uapResponse=P,this.connection=new N.AgoraLiveStreamingUapSignal(P.workerToken,this.spec,B),this.connection.on(v.LiveStreamingUapSignalEvents.WARNING,function(ie,de){return G.onLiveStreamWarning&&G.onLiveStreamWarning(de,ie)}),this.connection.on(v.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,function(ie){return G.handlePublishStreamServer(ie)}),this.connection.on(v.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,function(ie){return G.handleInjectStreamServerStatus(ie)}),this.connection.on(v.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS,function(ie,de){if(!G.connection)return de(new _.AgoraRTCError(_.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not get new live streaming address list"));E.getLiveStreamingWorkerMangerResult(B,G.spec,G.cancelToken.token).then(function(oe){G.uapResponse=oe,ie(oe.addressList)}).catch(de)}),[4,this.connection.init(P.addressList)];case 2:return V.sent(),[2,this.connection]}})})},S.prototype.handlePublishStreamServer=function(B){var P=this,G=B.serverStatus&&B.serverStatus.url;if(!G)throw new _.AgoraRTCError(_.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"empty url",{code:B.code});var V=this.streamingTasks.get(G);switch(B.code){case v.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case v.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case v.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case v.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var ie=new _.AgoraRTCError(_.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:B.code});if(V)return k.default.error(ie.toString()),this.onLiveStreamError&&this.onLiveStreamError(G,ie);if(!this.isStartingStreamingTask)return;this.statusError.set(G,ie);case v.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case v.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(!this.connection||0===this.streamingTasks.size)return;this.connection.tryNextAddress();for(var de=Array.from(this.streamingTasks.values()),oe=function(d){if(d.abortTask)return d.abortTask(),"continue";k.default.warning("["+ae.spec.clientId+"] publish stream status code",B.code,"try to republish",d.url),ae.startLiveStreamingTask(d.url,d.mode,new _.AgoraRTCError(_.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:B.code})).then(function(){k.default.debug("["+P.spec.clientId+"] republish live stream success",d.url)}).catch(function(W){k.default.error(W.toString()),P.onLiveStreamError&&P.onLiveStreamError(d.url,W)})},ae=this,J=0,C=de;J<C.length;J++)oe(C[J]);return}},S.prototype.handleInjectStreamServerStatus=function(B){var P=Number(B.uid),G=B.serverStatus&&B.serverStatus.url;switch(B.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,P,G));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,P,G),void this.streamingTasks.delete(G);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,P,G),void this.streamingTasks.delete(G);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,P,G),void this.streamingTasks.delete(G);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,P,G),void this.streamingTasks.delete(G);default:return void k.default.debug("inject stream server status",B)}},S.prototype.haveUrl=function(B){return this.streamingTasks.has(B)||void 0},S}();le.AgoraRTCLiveStreamingClient=I},function(ge,le,U){"use strict";var D,R=this&&this.__extends||(D=function(P,G){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,ie){V.__proto__=ie}||function(V,ie){for(var de in ie)ie.hasOwnProperty(de)&&(V[de]=ie[de])})(P,G)},function(P,G){function V(){this.constructor=P}D(P,G),P.prototype=null===G?Object.create(G):(V.prototype=G.prototype,new V)}),M=this&&this.__assign||function(){return(M=Object.assign||function(P){for(var G,V=1,ie=arguments.length;V<ie;V++)for(var de in G=arguments[V])Object.prototype.hasOwnProperty.call(G,de)&&(P[de]=G[de]);return P}).apply(this,arguments)},T=this&&this.__awaiter||function(P,G,V,ie){return new(V||(V=Promise))(function(de,oe){function ae(d){try{C(ie.next(d))}catch(W){oe(W)}}function J(d){try{C(ie.throw(d))}catch(W){oe(W)}}function C(d){var W;d.done?de(d.value):(W=d.value,W instanceof V?W:new V(function(y){y(W)})).then(ae,J)}C((ie=ie.apply(P,G||[])).next())})},N=this&&this.__generator||function(P,G){var V,ie,de,oe,ae={label:0,sent:function(){if(1&de[0])throw de[1];return de[1]},trys:[],ops:[]};return oe={next:J(0),throw:J(1),return:J(2)},"function"==typeof Symbol&&(oe[Symbol.iterator]=function(){return this}),oe;function J(C){return function(d){return function(W){if(V)throw new TypeError("Generator is already executing.");for(;ae;)try{if(V=1,ie&&(de=2&W[0]?ie.return:W[0]?ie.throw||((de=ie.return)&&de.call(ie),0):ie.next)&&!(de=de.call(ie,W[1])).done)return de;switch(ie=0,de&&(W=[2&W[0],de.value]),W[0]){case 0:case 1:de=W;break;case 4:return ae.label++,{value:W[1],done:!1};case 5:ae.label++,ie=W[1],W=[0];continue;case 7:W=ae.ops.pop(),ae.trys.pop();continue;default:if(!((de=(de=ae.trys).length>0&&de[de.length-1])||6!==W[0]&&2!==W[0])){ae=0;continue}if(3===W[0]&&(!de||W[1]>de[0]&&W[1]<de[3])){ae.label=W[1];break}if(6===W[0]&&ae.label<de[1]){ae.label=de[1],de=W;break}if(de&&ae.label<de[2]){ae.label=de[2],ae.ops.push(W);break}de[2]&&ae.ops.pop(),ae.trys.pop();continue}W=G.call(P,ae)}catch(y){W=[6,y],ie=0}finally{V=de=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([C,d])}}},v=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(le,"__esModule",{value:!0});var A=U(27),p=U(73),_=U(33),E=U(24),k=U(2),H=v(U(0)),I=U(1),S=U(29),B=function(P){function G(V,ie,de){var oe=P.call(this)||this;return oe._gatewayConnectionState="CONNECTED",oe.reconnectMode="retry",oe.reqId=0,oe.commandReqId=0,oe.waitingResponseList=[],oe.handleWebSocketOpen=function(){oe.reconnectMode="retry",oe.startPingPong()},oe.handleWebSocketMessage=function(ae){if(ae.data){var J=JSON.parse(ae.data);if(J.requestId)oe.emit("@"+J.requestId,J);else if(oe.serviceMode===A.LiveStreamingServiceMode.INJECT)oe.emit(A.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,J);else{I.report.requestWorkerEvent(oe.spec.sid,{actionType:"status",serverCode:J.code,workerType:oe.serviceMode===A.LiveStreamingServiceMode.TRANSCODE?1:2});var C=J.serverStatus&&J.serverStatus.url;C&&oe.waitingResponseList.includes(C)&&200===J.code&&oe.emit(C),oe.emit(A.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,J)}}},oe.spec=ie,oe.token=V,oe.serviceMode=de,oe.websocket=new p.AgoraWebSocketManager("live-streaming"),oe.websocket.on(A.WebSocketManagerEvents.CONNECTED,oe.handleWebSocketOpen),oe.websocket.on(A.WebSocketManagerEvents.ON_MESSAGE,oe.handleWebSocketMessage),oe.websocket.on(A.WebSocketManagerEvents.REQUEST_NEW_URLS,function(ae,J){_.emitAsPromise(oe,A.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS).then(ae).catch(J)}),oe.websocket.on(A.WebSocketManagerEvents.RECONNECTING,function(){oe.websocket.reconnectMode=oe.reconnectMode}),oe}return R(G,P),Object.defineProperty(G.prototype,"gatewayConnectionState",{get:function(){return this._gatewayConnectionState},set:function(V){this._gatewayConnectionState=V,"CONNECTED"===V&&this.emit("gateway-connected",V)},enumerable:!0,configurable:!0}),G.prototype.init=function(V){return this.websocket.init(V)},G.prototype.request=function(V,ie,de,oe){return T(this,void 0,void 0,function(){var ae,J,C,d,W,y,u,K,m,w,x=this;return N(this,function(ee){switch(ee.label){case 0:if(this.reqId+=1,ae=this.reqId,"request"===V&&(this.commandReqId+=1),J=this.commandReqId,!ae||!this.websocket)throw new E.AgoraRTCError(E.AgoraRTCErrorCode.UNEXPECTED_ERROR);if(C=k.VERSION,"closed"===this.websocket.state)throw new E.AgoraRTCError(E.AgoraRTCErrorCode.WS_DISCONNECT);return d=function(){return new Promise(function(ue,ye){var ne=function(){"CONNECTED"===x.gatewayConnectionState&&"connected"===x.websocket.state&&(x.off("gateway-connected",ne),x.websocket.off(A.WebSocketManagerEvents.CONNECTED,ne),ue(void 0))};x.on("gateway-connected",ne),x.websocket.once(A.WebSocketManagerEvents.CLOSED,function(){return ye(new E.AgoraRTCError(E.AgoraRTCErrorCode.WS_ABORT))}),x.websocket.on(A.WebSocketManagerEvents.CONNECTED,ne)})},"connected"===this.websocket.state&&"CONNECTED"===this.gatewayConnectionState?[3,2]:[4,d()];case 1:ee.sent(),ee.label=2;case 2:W=Promise.race([new Promise(function(ue,ye){var ne=function(){ye(new E.AgoraRTCError(E.AgoraRTCErrorCode.WS_ABORT))};x.websocket.once(A.WebSocketManagerEvents.RECONNECTING,ne),x.websocket.once(A.WebSocketManagerEvents.CLOSED,ne),x.once("@"+ae,function(q){ue(q)})}),S.wait(k.getParameter("LIVE_STREAMING_TIMEOUT")).then(function(){return!1})]),(y=M({command:V,sdkVersion:C,seq:ae,requestId:ae,allocate:de,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},ie)).clientRequest&&(y.clientRequest.workerToken=this.token),oe&&I.report.requestWorkerEvent(this.spec.sid,M(M({},oe),{requestId:J,actionType:"request",payload:JSON.stringify(ie.clientRequest),serverCode:0,code:0})),u=Date.now(),this.websocket.sendMessage(y),K=null,ee.label=3;case 3:return ee.trys.push([3,5,,8]),[4,W];case 4:return K=ee.sent(),[3,8];case 5:if(m=ee.sent(),"closed"===this.websocket.state)throw m;return[4,d()];case 6:return ee.sent(),[4,this.request(V,ie,de,oe)];case 7:return[2,ee.sent()];case 8:if(!1===K)throw w=new E.AgoraRTCError(E.AgoraRTCErrorCode.NETWORK_TIMEOUT,(ie&&ie.clientRequest&&ie.clientRequest.command)+" timeout",{changeAddress:!0,retry:!0}),this.emit(A.LiveStreamingUapSignalEvents.WARNING,w,oe&&oe.url||"unknown url"),oe&&I.report.requestWorkerEvent(this.spec.sid,M(M({},oe),{requestId:J,actionType:"response",payload:"TIMEOUT",serverCode:0,success:0,responseTime:Date.now()-u})),w;return oe&&I.report.requestWorkerEvent(this.spec.sid,M(M({},oe),{requestId:J,actionType:"response",payload:JSON.stringify(K.serverResponse),serverCode:K.code,success:200===K.code,responseTime:Date.now()-u})),200===K.code?[3,10]:[4,this.handleResponseError(K)];case 9:ee.sent(),ee.label=10;case 10:return[2,K]}})})},G.prototype.tryNextAddress=function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")},G.prototype.close=function(){var V="__VERSION__"===k.VERSION?"0.0.1":k.VERSION;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:V,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)},G.prototype.handleResponseError=function(V){return T(this,void 0,void 0,function(){var ie,de,oe,ae,J=this;return N(this,function(C){switch(H.default.debug("[live-streaming] receive response error "+V.code),V.code){case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return H.default.warning("live stream response already exists stream"),this.emit(A.LiveStreamingUapSignalEvents.WARNING,"live stream response already exists stream, code 454",ie=V.serverResponse.url),this.waitingResponseList.includes(ie)||this.waitingResponseList.push(ie),[2,new Promise(function(d,W){J.once(ie,function(){J.waitingResponseList.splice(J.waitingResponseList.indexOf(ie),1),d()}),setTimeout(function(){J.waitingResponseList.splice(J.waitingResponseList.indexOf(ie),1),W(new E.AgoraRTCError(E.AgoraRTCErrorCode.TIMEOUT,"live stream timeout waiting 454",{code:V.code}))},1e4)})];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_BAD_STREAM:case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return[2,new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:V.code}).throw()];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE:throw new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{retry:!0,changeAddress:!0});case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===V.serverResponse.command||"UninjectStream"===V.serverResponse.command)return[2];throw new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return[2,new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:V.code}).throw()];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:return de=new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE),[2,this.emit(A.LiveStreamingUapSignalEvents.WARNING,de,V.serverResponse.url)];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return de=new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST),[2,this.emit(A.LiveStreamingUapSignalEvents.WARNING,de,V.serverResponse.url)];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return[2,new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT,"",{code:V.code}).throw()];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return de=new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),[2,this.emit(A.LiveStreamingUapSignalEvents.WARNING,de,V.serverResponse.url)];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return[2,new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:V.code}).throw()];case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case A.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===V.serverResponse.command||"UninjectStream"===V.serverResponse.command)return[2];throw new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case A.LIVE_STREAM_ERROR_CODE.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===V.serverResponse.command||"UninjectStream"===V.serverResponse.command)return[2];if("UpdateTranscoding"===V.serverResponse.command||"ControlStream"===V.serverResponse.command)return[2,new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:V.code}).throw()];throw new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case A.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case A.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case A.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case A.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return this.waitingResponseList.includes(oe=V.serverResponse.url)||this.waitingResponseList.push(oe),ae=new E.AgoraRTCError(E.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:V.code}),this.emit(A.LiveStreamingUapSignalEvents.WARNING,ae,oe),[2,new Promise(function(d,W){J.once(oe,function(){J.waitingResponseList.splice(J.waitingResponseList.indexOf(oe),1),d()}),setTimeout(function(){J.waitingResponseList.splice(J.waitingResponseList.indexOf(oe),1),W(ae)},1e4)})]}return[2]})})},G.prototype.startPingPong=function(){var V=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(function(){"connected"===V.websocket.state&&V.request("ping",{}).catch(function(){})},6e3)},G}(_.EventEmitter);le.AgoraLiveStreamingUapSignal=B},function(ge,le,U){"use strict";var D,R=this&&this.__extends||(D=function(H,I){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,B){S.__proto__=B}||function(S,B){for(var P in B)B.hasOwnProperty(P)&&(S[P]=B[P])})(H,I)},function(H,I){function S(){this.constructor=H}D(H,I),H.prototype=null===I?Object.create(I):(S.prototype=I.prototype,new S)}),M=this&&this.__awaiter||function(H,I,S,B){return new(S||(S=Promise))(function(P,G){function V(oe){try{de(B.next(oe))}catch(ae){G(ae)}}function ie(oe){try{de(B.throw(oe))}catch(ae){G(ae)}}function de(oe){var ae;oe.done?P(oe.value):(ae=oe.value,ae instanceof S?ae:new S(function(J){J(ae)})).then(V,ie)}de((B=B.apply(H,I||[])).next())})},T=this&&this.__generator||function(H,I){var S,B,P,G,V={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return G={next:ie(0),throw:ie(1),return:ie(2)},"function"==typeof Symbol&&(G[Symbol.iterator]=function(){return this}),G;function ie(de){return function(oe){return function(ae){if(S)throw new TypeError("Generator is already executing.");for(;V;)try{if(S=1,B&&(P=2&ae[0]?B.return:ae[0]?B.throw||((P=B.return)&&P.call(B),0):B.next)&&!(P=P.call(B,ae[1])).done)return P;switch(B=0,P&&(ae=[2&ae[0],P.value]),ae[0]){case 0:case 1:P=ae;break;case 4:return V.label++,{value:ae[1],done:!1};case 5:V.label++,B=ae[1],ae=[0];continue;case 7:ae=V.ops.pop(),V.trys.pop();continue;default:if(!((P=(P=V.trys).length>0&&P[P.length-1])||6!==ae[0]&&2!==ae[0])){V=0;continue}if(3===ae[0]&&(!P||ae[1]>P[0]&&ae[1]<P[3])){V.label=ae[1];break}if(6===ae[0]&&V.label<P[1]){V.label=P[1],P=ae;break}if(P&&V.label<P[2]){V.label=P[2],V.ops.push(ae);break}P[2]&&V.ops.pop(),V.trys.pop();continue}ae=I.call(H,V)}catch(J){ae=[6,J],B=0}finally{S=P=0}if(5&ae[0])throw ae[1];return{value:ae[0]?ae[1]:void 0,done:!0}}([de,oe])}}},N=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(le,"__esModule",{value:!0});var v=U(24),A=U(33),p=U(29),_=U(27),E=N(U(0)),k=function(H){function I(S){var B=H.call(this)||this;return B.connectionID=0,B.currentURLIndex=0,B.reconnectMode="tryNext",B._state="closed",B.retryConfig=p.DEFAULT_RETRY_CONFIG,B.reconnectCount=0,B.name=S,B}return R(I,H),Object.defineProperty(I.prototype,"url",{get:function(){return this.websocket?this.websocket.url:null},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"state",{get:function(){return this._state},set:function(S){S!==this._state&&(this._state=S,"reconnecting"===this._state?this.emit(_.WebSocketManagerEvents.RECONNECTING,this.reconnectMode):"connected"===this._state?this.emit(_.WebSocketManagerEvents.CONNECTED):"closed"===this._state?this.emit(_.WebSocketManagerEvents.CLOSED):"failed"===this._state&&this.emit(_.WebSocketManagerEvents.FAILED))},enumerable:!0,configurable:!0}),I.prototype.init=function(S){var B=this;return new Promise(function(P,G){B.urls=S;var V=B.urls[B.currentURLIndex];B.state="connecting",B.createWebSocketConnection(V).then(P).catch(G),B.once(_.WebSocketManagerEvents.CLOSED,function(){return G(new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_DISCONNECT))}),B.once(_.WebSocketManagerEvents.CONNECTED,function(){return P()})})},I.prototype.close=function(S,B){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var P=this.websocket;B?setTimeout(function(){return P.close()},500):P.close(),this.websocket=void 0}this.state=S?"failed":"closed"},I.prototype.reconnect=function(S){if(this.websocket){void 0!==S&&(this.reconnectMode=S);var B=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),B&&B.bind(this.websocket)({code:9999})}else E.default.warning("["+this.name+"] can not reconnect, no websocket")},I.prototype.sendMessage=function(S){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_ABORT,"websocket is not ready");var B=JSON.stringify(S);try{this.websocket.send(B)}catch(P){throw new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_ERR,"send websocket message error"+P.toString())}},I.prototype.createWebSocketConnection=function(S){return M(this,void 0,void 0,function(){var B,P=this;return T(this,function(G){return this.connectionID+=1,B=this.connectionID,[2,new Promise(function(V,ie){P.websocket&&(P.websocket.onclose=null,P.websocket.close()),E.default.debug("["+P.name+"] start connect, url: "+S);try{P.websocket=new WebSocket(S),P.websocket.binaryType="arraybuffer"}catch(oe){var de=new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_ERR,"init websocket failed! Error: "+oe.toString());return E.default.error("["+P.name+"]"+de),void ie(de)}p.wait(5e3).then(function(){B===P.connectionID&&P.websocket&&P.websocket.readyState!==WebSocket.OPEN&&P.websocket&&P.websocket.close()}),P.websocket.onopen=function(){E.default.debug("["+P.name+"] websockect opened:",S),P.reconnectMode="retry",P.state="connected",P.reconnectCount=0,V()},P.websocket.onclose=function(oe){return M(P,void 0,void 0,function(){var ae,J;return T(this,function(C){switch(C.label){case 0:return E.default.debug("["+this.name+"] websocket close "+(this.websocket&&this.websocket.url)+", code: "+oe.code+", reason: "+oe.reason+", current mode: "+this.reconnectMode),this.reconnectCount<this.retryConfig.maxRetryCount?("connected"===this.state&&(this.state="reconnecting"),ae=A.emitAsInvokerNoResponse(this,_.WebSocketManagerEvents.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,[4,this.reconnectWithAction(ae)]):[3,2];case 1:return J=C.sent(),"closed"===this.state?(E.default.debug("["+this.connectionID+"] ws is closed, no need to reconnect"),[2]):J?(V(),[3,3]):(ie(new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_DISCONNECT,"websocket reconnect failed: "+oe.code)),this.close(!0),[2]);case 2:ie(new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_DISCONNECT,"websocket close: "+oe.code)),this.close(),C.label=3;case 3:return[2]}})})},P.websocket.onmessage=function(oe){P.emit(_.WebSocketManagerEvents.ON_MESSAGE,oe)}})]})})},I.prototype.reconnectWithAction=function(S,B){return M(this,void 0,void 0,function(){var P,G,ie;return T(this,function(de){switch(de.label){case 0:return!B&&this.reconnectCount>=this.retryConfig.maxRetryCount?[2,!1]:this.urls?"closed"===this.state?[2,!1]:(P=p.getRetryWaitTime(this.reconnectCount,this.retryConfig),E.default.debug("["+this.name+"] wait "+P+"ms to reconnect websocket, mode: "+S),[4,p.wait(P)]):[2,!1];case 1:if(de.sent(),"closed"===this.state)return[2,!1];this.reconnectCount+=1,de.label=2;case 2:return de.trys.push([2,12,,14]),"retry"!==S?[3,4]:[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 3:return de.sent(),[3,11];case 4:return"tryNext"!==S?[3,8]:(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length?[4,this.reconnectWithAction("recover")]:[3,6]);case 5:return[2,de.sent()];case 6:return E.default.debug("["+this.name+"] websocket url length: "+this.urls.length+" current index: "+this.currentURLIndex),[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 7:return de.sent(),[3,11];case 8:return"recover"!==S?[3,11]:(E.default.debug("["+this.name+"] request new urls"),G=this,[4,A.emitAsPromise(this,_.WebSocketManagerEvents.REQUEST_NEW_URLS)]);case 9:return G.urls=de.sent(),this.currentURLIndex=0,[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 10:de.sent(),de.label=11;case 11:return[2,!0];case 12:return ie=de.sent(),E.default.error("["+this.name+"] reconnect failed",ie.toString()),[4,this.reconnectWithAction(S)];case 13:return[2,de.sent()];case 14:return[2]}})})},I}(A.EventEmitter);le.AgoraWebSocketManager=k},function(ge,le,U){"use strict";var D=U(18),R=U(35),M=U(75),T=U(41);function N(A){var p=new M(A),_=R(M.prototype.request,p);return D.extend(_,M.prototype,p),D.extend(_,p),_}var v=N(U(38));v.Axios=M,v.create=function(A){return N(T(v.defaults,A))},v.Cancel=U(42),v.CancelToken=U(89),v.isCancel=U(37),v.all=function(A){return Promise.all(A)},v.spread=U(90),ge.exports=v,ge.exports.default=v},function(ge,le,U){"use strict";var D=U(18),R=U(36),M=U(76),T=U(77),N=U(41);function v(A){this.defaults=A,this.interceptors={request:new M,response:new M}}v.prototype.request=function(A){"string"==typeof A?(A=arguments[1]||{}).url=arguments[0]:A=A||{},A.method=(A=N(this.defaults,A)).method?A.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var p=[T,void 0],_=Promise.resolve(A);for(this.interceptors.request.forEach(function(E){p.unshift(E.fulfilled,E.rejected)}),this.interceptors.response.forEach(function(E){p.push(E.fulfilled,E.rejected)});p.length;)_=_.then(p.shift(),p.shift());return _},v.prototype.getUri=function(A){return A=N(this.defaults,A),R(A.url,A.params,A.paramsSerializer).replace(/^\?/,"")},D.forEach(["delete","get","head","options"],function(A){v.prototype[A]=function(p,_){return this.request(D.merge(_||{},{method:A,url:p}))}}),D.forEach(["post","put","patch"],function(A){v.prototype[A]=function(p,_,E){return this.request(D.merge(E||{},{method:A,url:p,data:_}))}}),ge.exports=v},function(ge,le,U){"use strict";var D=U(18);function R(){this.handlers=[]}R.prototype.use=function(M,T){return this.handlers.push({fulfilled:M,rejected:T}),this.handlers.length-1},R.prototype.eject=function(M){this.handlers[M]&&(this.handlers[M]=null)},R.prototype.forEach=function(M){D.forEach(this.handlers,function(T){null!==T&&M(T)})},ge.exports=R},function(ge,le,U){"use strict";var D=U(18),R=U(78),M=U(37),T=U(38);function N(v){v.cancelToken&&v.cancelToken.throwIfRequested()}ge.exports=function(v){return N(v),v.headers=v.headers||{},v.data=R(v.data,v.headers,v.transformRequest),v.headers=D.merge(v.headers.common||{},v.headers[v.method]||{},v.headers),D.forEach(["delete","get","head","post","put","patch","common"],function(A){delete v.headers[A]}),(v.adapter||T.adapter)(v).then(function(A){return N(v),A.data=R(A.data,A.headers,v.transformResponse),A},function(A){return M(A)||(N(v),A&&A.response&&(A.response.data=R(A.response.data,A.response.headers,v.transformResponse))),Promise.reject(A)})}},function(ge,le,U){"use strict";var D=U(18);ge.exports=function(R,M,T){return D.forEach(T,function(N){R=N(R,M)}),R}},function(ge,le){var U,D,R=ge.exports={};function M(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}function N(S){if(U===setTimeout)return setTimeout(S,0);if((U===M||!U)&&setTimeout)return U=setTimeout,setTimeout(S,0);try{return U(S,0)}catch(B){try{return U.call(null,S,0)}catch(P){return U.call(this,S,0)}}}!function(){try{U="function"==typeof setTimeout?setTimeout:M}catch(S){U=M}try{D="function"==typeof clearTimeout?clearTimeout:T}catch(S){D=T}}();var v,A=[],p=!1,_=-1;function E(){p&&v&&(p=!1,v.length?A=v.concat(A):_=-1,A.length&&k())}function k(){if(!p){var S=N(E);p=!0;for(var B=A.length;B;){for(v=A,A=[];++_<B;)v&&v[_].run();_=-1,B=A.length}v=null,p=!1,function(P){if(D===clearTimeout)return clearTimeout(P);if((D===T||!D)&&clearTimeout)return D=clearTimeout,clearTimeout(P);try{D(P)}catch(G){try{return D.call(null,P)}catch(V){return D.call(this,P)}}}(S)}}function H(S,B){this.fun=S,this.array=B}function I(){}R.nextTick=function(S){var B=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)B[P-1]=arguments[P];A.push(new H(S,B)),1!==A.length||p||N(k)},H.prototype.run=function(){this.fun.apply(null,this.array)},R.title="browser",R.browser=!0,R.env={},R.argv=[],R.version="",R.versions={},R.on=I,R.addListener=I,R.once=I,R.off=I,R.removeListener=I,R.removeAllListeners=I,R.emit=I,R.prependListener=I,R.prependOnceListener=I,R.listeners=function(S){return[]},R.binding=function(S){throw new Error("process.binding is not supported")},R.cwd=function(){return"/"},R.chdir=function(S){throw new Error("process.chdir is not supported")},R.umask=function(){return 0}},function(ge,le,U){"use strict";var D=U(18);ge.exports=function(R,M){D.forEach(R,function(T,N){N!==M&&N.toUpperCase()===M.toUpperCase()&&(R[M]=T,delete R[N])})}},function(ge,le,U){"use strict";var D=U(40);ge.exports=function(R,M,T){var N=T.config.validateStatus;!N||N(T.status)?R(T):M(D("Request failed with status code "+T.status,T.config,null,T.request,T))}},function(ge,le,U){"use strict";ge.exports=function(D,R,M,T,N){return D.config=R,M&&(D.code=M),D.request=T,D.response=N,D.isAxiosError=!0,D.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},D}},function(ge,le,U){"use strict";var D=U(84),R=U(85);ge.exports=function(M,T){return M&&!D(T)?R(M,T):T}},function(ge,le,U){"use strict";ge.exports=function(D){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(D)}},function(ge,le,U){"use strict";ge.exports=function(D,R){return R?D.replace(/\/+$/,"")+"/"+R.replace(/^\/+/,""):D}},function(ge,le,U){"use strict";var D=U(18),R=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];ge.exports=function(M){var T,N,v,A={};return M&&D.forEach(M.split("\n"),function(p){if(v=p.indexOf(":"),T=D.trim(p.substr(0,v)).toLowerCase(),N=D.trim(p.substr(v+1)),T){if(A[T]&&R.indexOf(T)>=0)return;A[T]="set-cookie"===T?(A[T]?A[T]:[]).concat([N]):A[T]?A[T]+", "+N:N}}),A}},function(ge,le,U){"use strict";var D=U(18);ge.exports=D.isStandardBrowserEnv()?function(){var R,M=/(msie|trident)/i.test(navigator.userAgent),T=document.createElement("a");function N(v){var A=v;return M&&(T.setAttribute("href",A),A=T.href),T.setAttribute("href",A),{href:T.href,protocol:T.protocol?T.protocol.replace(/:$/,""):"",host:T.host,search:T.search?T.search.replace(/^\?/,""):"",hash:T.hash?T.hash.replace(/^#/,""):"",hostname:T.hostname,port:T.port,pathname:"/"===T.pathname.charAt(0)?T.pathname:"/"+T.pathname}}return R=N(window.location.href),function(v){var A=D.isString(v)?N(v):v;return A.protocol===R.protocol&&A.host===R.host}}():function(){return!0}},function(ge,le,U){"use strict";var D=U(18);ge.exports=D.isStandardBrowserEnv()?{write:function(R,M,T,N,v,A){var p=[];p.push(R+"="+encodeURIComponent(M)),D.isNumber(T)&&p.push("expires="+new Date(T).toGMTString()),D.isString(N)&&p.push("path="+N),D.isString(v)&&p.push("domain="+v),!0===A&&p.push("secure"),document.cookie=p.join("; ")},read:function(R){var M=document.cookie.match(new RegExp("(^|;\\s*)("+R+")=([^;]*)"));return M?decodeURIComponent(M[3]):null},remove:function(R){this.write(R,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(ge,le,U){"use strict";var D=U(42);function R(M){if("function"!=typeof M)throw new TypeError("executor must be a function.");var T;this.promise=new Promise(function(v){T=v});var N=this;M(function(v){N.reason||(N.reason=new D(v),T(N.reason))})}R.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},R.source=function(){var M;return{token:new R(function(T){M=T}),cancel:M}},ge.exports=R},function(ge,le,U){"use strict";ge.exports=function(D){return function(R){return D.apply(null,R)}}},function(ge,le,U){"use strict";var D=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(le,"__esModule",{value:!0});var R=D(U(0)),M=1,T=function(){function N(v){this.lockingPromise=Promise.resolve(),this.locks=0,this.name="",this.lockId=M++,v&&(this.name=v),R.default.debug("[lock-"+this.name+"-"+this.lockId+"] is created.")}return Object.defineProperty(N.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!0,configurable:!0}),N.prototype.lock=function(){var v,A=this;this.locks+=1,R.default.debug("[lock-"+this.name+"-"+this.lockId+"] is locked, current queue "+this.locks+".");var p=new Promise(function(E){v=function(){A.locks-=1,R.default.debug("[lock-"+A.name+"-"+A.lockId+"] is not locked, current queue "+A.locks+"."),E()}}),_=this.lockingPromise.then(function(){return v});return this.lockingPromise=this.lockingPromise.then(function(){return p}),_},N}();le.PromiseMutex=T},function(ge,le,U){"use strict";U.r(le);var D=U(2),R=U(0),M=U(1),T=U(8),N=U(5),v=function(){};v.prototype.set=function(Ce,L){["BatteryLevel"].indexOf(Ce)>-1&&(this[Ce]=L)};var A=new function(){var Ce=Object(T.b)();return Ce.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},Ce.state=Ce.states.UNINIT,Ce.batteryManager=null,Ce._init=function(L,xe){Ce.state=Ce.states.INITING,navigator.getBattery?navigator.getBattery().then(function(Qe){Ce.batteryManager=Qe,L&&setTimeout(function(){L()},0)}).catch(function(Qe){R.default.debug("navigator.getBattery is disabled",Qe),L&&L()}):(Ce.state=Ce.states.INITED,L&&L())},Ce._getBatteryStats=function(){var L={};return L.BatteryLevel=Ce.batteryManager&&Ce.batteryManager.level?Math.floor(100*Ce.batteryManager.level):"UNSUPPORTED",L},Ce.getStats=function(L,xe){var Qe=new v,ze=Ce._getBatteryStats();ze&&ze.BatteryLevel&&Qe.set("BatteryLevel",ze.BatteryLevel),L&&L(Qe)},Ce._init(),Ce},p=U(22),_=U(19),E=U(26),k=U(50),H=U(9),I=["live","rtc","web","interop","h264_interop","web-only"],S=["vp8","vp9","h264"],B=["aes-128-gcm","aes-256-gcm","aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-256-gcm2","aes-128-gcm2"],P=U(11),G=U.n(P),V=U(7),ie=U.n(V),de=U(13),oe=U(4),ae=U(10),J=U(20),C=U(6),d=U(14),W={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},y={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},u=function(Ce){var L={remoteStreamStorage:{},localStreamStorage:{}};return L.gatewayClient=Ce,L.checkAudioOutputLevel=function(xe){return!(xe&&parseInt(xe.audioRecvBytesDelta)>0&&parseInt(xe.audioDecodingNormalDelta)>0&&0===parseInt(xe.audioOutputLevel))},L.checkAudioIntputLevel=function(xe){return!xe||0!==parseInt(xe.audioInputLevel)},L.checkFramerateInput=function(xe,Qe){if(!xe||!Qe.attributes)return!0;var ze=parseInt(Qe.attributes.maxFrameRate),st=parseInt(xe.googFrameRateInput);return!ze||!st||!(ze>10&&st<5||ze<10&&ze>=5&&st<=1)},L.checkFramerateSent=function(xe){return!(xe&&parseInt(xe.googFrameRateInput)>5&&parseInt(xe.googFrameRateSent)<=1)},L.checkSendVideoBitrate=function(xe){return!xe||0!==parseInt(xe.videoSendBytesDelta)},L.checkSendAudioBitrate=function(xe){return!xe||0!==parseInt(xe.audioSendBytesDelta)},L.checkVideoDecode=function(xe){return!xe||0===parseInt(xe.videoRecvBytesDelta)||0!==parseInt(xe.googFrameRateDecoded)},L.checkAudioDecode=function(xe){return!xe||0===parseInt(xe.audioRecvBytesDelta)||0!==parseInt(xe.audioDecodingNormalDelta)},L.record=function(xe,Qe,ze,st,ft){ze[xe]||(ze[xe]={isPrevNormal:!0,record:[]});var pe=ze[xe],g=L["check"+xe](Qe,ft);if(pe.record.push(g),pe.record.length>=5){pe.isCurNormal=-1!==pe.record.indexOf(!0);var ce=y[xe];pe.isPrevNormal&&!pe.isCurNormal&&L.gatewayClient.dispatchEvent({type:"exception",code:ce,msg:W[ce],uid:st}),!pe.isPrevNormal&&pe.isCurNormal&&L.gatewayClient.dispatchEvent({type:"exception",code:ce+2e3,msg:W[ce+2e3],uid:st}),pe.isPrevNormal=pe.isCurNormal,pe.record=[]}},L.setLocalStats=function(xe){var Qe={};Object.keys(xe).map(function(ze){var st=xe[ze],ft=L.gatewayClient.localStreams[parseInt(ze)],pe=L.localStreamStorage[ze]||{};ft&&ft.hasVideo()&&(L.record("SendVideoBitrate",st.videoStats,pe,ze),L.record("FramerateInput",st.videoStats,pe,ze,ft),L.record("FramerateSent",st.videoStats,pe,ze)),ft&&ft.hasAudio()&&(L.record("AudioIntputLevel",st.audioStats,pe,ze),L.record("SendAudioBitrate",st.audioStats,pe,ze)),Qe[ze]=pe}),L.localStreamStorage=Qe},L.setRemoteStats=function(xe){var Qe={};Object.keys(xe).map(function(ze){var st=xe[ze],ft=Ce.remoteStreams[ze],pe=L.remoteStreamStorage[ze]||{};ft&&ft.hasVideo()&&ft.isPlaying()&&L.record("VideoDecode",st.videoStats,pe,ze),ft&&ft.hasAudio()&&ft.isPlaying()&&(L.record("AudioOutputLevel",st.audioStats,pe,ze),L.record("AudioDecode",st.audioStats,pe,ze)),Qe[ze]=pe}),L.remoteStreamStorage=Qe},L};function m(Ce,L){(null==L||L>Ce.length)&&(L=Ce.length);for(var xe=0,Qe=new Array(L);xe<L;xe++)Qe[xe]=Ce[xe];return Qe}var w,x=U(3),ee=new function(){var Ce=Object(T.b)();return Ce.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},Ce.state=Ce.states.UNINIT,Ce.type=null,Ce.lastConnectedAt=null,Ce.lastDisconnectedAt=null,Ce.lastTypeChangedAt=null,Ce.networkChangeTimer=null,Ce._init=function(L,xe){if(Ce.state=Ce.states.INITING,navigator.connection&&navigator.connection.addEventListener){var Qe=Ce._getNetworkInfo();Ce.type=Qe&&Qe.type,Ce.state=Ce.states.INITED,L&&L()}else Ce.state=Ce.states.UNINIT,xe&&xe("DO_NOT_SUPPORT")},Ce._getNetworkInfo=function(){return navigator.connection},Ce._reloadNetworkInfo=function(){var L=Ce._getNetworkInfo(),xe=L&&L.type||"UNSUPPORTED",Qe=Date.now();xe!==Ce.type&&(Ce.lastTypeChangedAt=Qe,"none"==xe?Ce.lastDisconnectedAt=Qe:"none"==Ce.type&&(Ce.lastConnectedAt=Qe),Ce.type=xe,Ce.dispatchEvent({type:"networkTypeChanged",networkType:xe}))},Ce.getStats=function(L,xe){var Qe={},ze=Ce._getNetworkInfo();ze&&(Qe.NetworkType=ze.type||"UNSUPPORTED"),setTimeout(function(){L(Qe)},0)},Ce._init(function(){navigator.connection.addEventListener("change",function(){Ce._reloadNetworkInfo()}),Ce.networkChangeTimer=setInterval(function(){Ce._reloadNetworkInfo()},5e3)},function(L){}),Ce},ue=U(52),ye=U(16),ne=U(53),q=U.n(ne),F=U(21),te=function(){return"HTTPS"===(w||w||(w=(window.location.protocol.split(":")[0]||"").toUpperCase()))},Te=function(){return void 0!==window.isSecureContext},me="host",fe=function(Ce){var pe,g,L={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null,turnServers:[],useProxyServer:!1,useLocalAccessPoint:!1};if(L.mode=Ce.mode,L.codec=Ce.codec,L.clientId=Object(ae.generateSessionId)().slice(0,5),L.uintUid=null,L.customReportCount=0,Ce=ie()({},Ce),L.aespassword=null,L.aesmode="none",L.hasPublished=!1,L.getSessionId=function(){return Ce.sessionId},L.startChannelMediaRelay=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{callback:function(ve){if(ve)return g&&g(ve);g&&g()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(pe instanceof H.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var _e=pe.getSrcChannelMediaInfo(),be=pe.getDestChannelMediaInfos();if(Object(x.isEmpty)(_e))throw"srcChannelMediaInfo should not be empty";if(Object(x.isEmpty)(be)||0===be.length)throw"destChannelMediaInfos should not be empty";if(!Object(ae.is32Uint)(_e.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(x.isValidChannelName)(_e.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(_e.token&&!Object(x.isValidToken)(_e.token))throw"Invalid token in srcChannelMediaInfo";if(be.forEach(function(ve){if(!Object(ae.is32Uint)(ve.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(x.isValidChannelName)(ve.channelName))throw"Invalid channelName in destChannelMediaInfo";if(ve.token&&!Object(x.isValidToken)(ve.token))throw"Invalid token in destChannelMediaInfo"}),L.gatewayClient.state!==de.a.CONNECTED)throw"startChannelMediaRelay should be used after join";L.gatewayClient.startChannelMediaRelay(pe).then(function(){ce&&ce()}).catch(function(ve){ce&&ce(ve)})},L.updateChannelMediaRelay=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{callback:function(ve){if(ve)return g&&g(ve);g&&g()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(pe instanceof H.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var _e=pe.getSrcChannelMediaInfo(),be=pe.getDestChannelMediaInfos();if(Object(x.isEmpty)(_e))throw"srcChannelMediaInfo should not be empty";if(Object(x.isEmpty)(be)||0===be.length)throw"destChannelMediaInfos should not be empty";if(!Object(ae.is32Uint)(_e.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(x.isValidChannelName)(_e.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(_e.token&&!Object(x.isValidToken)(_e.token))throw"Invalid token in srcChannelMediaInfo";if(be.forEach(function(ve){if(!Object(ae.is32Uint)(ve.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(x.isValidChannelName)(ve.channelName))throw"Invalid channelName in destChannelMediaInfo";if(ve.token&&!Object(x.isValidToken)(ve.token))throw"Invalid token in destChannelMediaInfo"}),L.gatewayClient.state!==de.a.CONNECTED)throw"updateChannelMediaRelay should be used after join";L.gatewayClient.updateChannelMediaRelay(pe).then(function(){ce&&ce()}).catch(function(ve){ce&&ce(ve)})},L.stopChannelMediaRelay=function(pe){var g=M.report.reportApiInvoke(Ce.sessionId,{callback:function(ce){if(ce)return pe&&pe(ce);pe&&pe()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});L.gatewayClient.stopChannelMediaRelay().then(function(){g&&g()}).catch(function(ce){g&&g(ce)})},L.getConnectionState=function(){var pe=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),g=de.a.connetionStateMap[L.gatewayClient.state];return pe(),g},L.setClientRole=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{callback:g,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(x.checkValidEnum)(pe,"setClientRole",[me,"audience"]),"rtc"===L.mode){var _e="RTC mode can not use setClientRole";return R.default.warning("[".concat(L.clientId,"] ").concat(_e)),ce&&ce(_e)}L.gatewayClient&&L.gatewayClient.state===de.a.CONNECTED?("audience"===pe&&(0===this.highStreamState?this._unpublish(this.highStream,function(){ce&&ce(null,{role:pe})},function(be){ce&&ce(be)}):L.gatewayClient.setClientRole("audience",ce)),pe===me&&L.gatewayClient.setClientRole(me,ce)):(L.gatewayClient.role=pe,ce&&ce(null,{role:pe}))},L.getGatewayInfo=function(pe){if(L.gatewayClient.state!==de.a.CONNECTED){var g="Client is not in connected state";return R.default.error("[".concat(L.clientId,"] ").concat(g)),void pe(g)}L.gatewayClient.getGatewayInfo(function(ce){pe(null,ce)},pe)},L.renewToken=function(pe,g,ce){var _e=M.report.reportApiInvoke(Ce.sessionId,{callback:function(be,ve){if(be)return R.default.error("Failed to renew token ".concat(be),ve),ce&&ce(be);g&&g(ve)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(x.isValidToken)(pe))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return L.gatewayClient?L.key?(L.key=pe,void L.gatewayClient.renewToken(pe,function(be){return _e(null,be)},_e)):(R.default.error("[".concat(L.clientId,"] renewToken should not be called before user join")),_e(oe.default.INVALID_OPERATION)):(R.default.error("[".concat(L.clientId,"] renewToken Failed. GatewayClient not Exist")),_e(oe.default.INVALID_OPERATION))},L.setLowStreamParameter=function(pe){var g=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(x.checkValidObject)(pe,"param");var ce=pe.width,_e=pe.height,be=pe.framerate,ve=pe.bitrate;Object(x.isEmpty)(ce)||Object(x.checkValidNumber)(ce,"width"),Object(x.isEmpty)(_e)||Object(x.checkValidNumber)(_e,"height"),Object(x.isEmpty)(be)||Object(x.checkValidNumber)(be,"framerate"),Object(x.isEmpty)(ve)||Object(x.checkValidNumber)(ve,"bitrate",1,1e7),(!ce&&_e||ce&&!_e)&&R.default.warning("[".concat(L.clientId,"] The width and height parameters take effect only when both are set")),L.lowStreamParameter=pe,g()},L.init=function(pe,g,ce){var _e=M.report.reportApiInvoke(Ce.sessionId,{callback:function(be,ve){if(be)return ce&&ce(be);g&&g(ve)},name:"Client.init",options:arguments,tag:"tracer"});Object(x.checkValidString)(pe),Object(N.isChromeKernel)()&&Object(N.getChromeKernelVersion)()<=48?ce?_e(oe.default.BAD_ENVIRONMENT):Object(ae.popBanTip)():(Ce.appId=pe,Ce.sessionId=Object(ae.generateSessionId)(),_e())},L.setTurnServer=function(pe){var g=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(L.gatewayClient&&L.gatewayClient.state!==de.a.DISCONNECTED)throw new Error("Set turn server before join channel");if(L.useProxyServer)throw new Error("You have already set the proxy");if(L.useLocalAccessPoint)throw new Error("You have already set the local proxy");pe instanceof Array||(pe=[pe]);var ce=[];pe.map(function(_e,be){Object(x.checkValidObject)(_e,"turnServer");var ve=_e.turnServerURL,Z=_e.username,Se=_e.password,Re=_e.udpport,Pe=_e.forceturn,Oe=_e.tcpport;if(Object(x.checkValidString)(ve,"turnServerURL"),Object(x.checkValidString)(Z,"username"),Object(x.checkValidString)(Se,"password"),Object(x.checkValidString)(Re,"udpport"),0===parseInt(Re))throw new Error("udpport should not be ".concat(Re));Object(x.isEmpty)(Pe)||Object(x.checkValidBoolean)(Pe,"forceturn");var Xe={mode:"manual"};if(Xe.url=ve,Xe.udpport=Re,Xe.username=Z,Xe.credential=Se,Xe.forceturn=Pe||!1,!Object(x.isEmpty)(Oe)){if(Object(x.checkValidString)(Oe,"tcpport"),0===parseInt(Oe))throw new Error("tcpport should not be ".concat(Oe));Xe.tcpport=Oe,R.default.info("[".concat(L.clientId,"] Set turnserver[").concat(be,"] tcpurl. ").concat(Xe.url,":").concat(Xe.tcpport))}R.default.info("[".concat(L.clientId,"] Set turnserver[").concat(be,"] udpurl. ").concat(Xe.url,":").concat(Xe.udpport,",username: ").concat(Xe.username)),ce.push(Xe)}),L.turnServers=ce,g()},L.setProxyServer=function(pe){var g=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(L.gatewayClient&&L.gatewayClient.state!==de.a.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!pe)throw new Error("Do not set the proxyServer parameter as empty");if(L.useProxyServer)throw new Error("You have already set the proxy");if(L.useLocalAccessPoint)throw new Error("You have already set the local proxy");Object(x.checkValidString)(pe,"proxyServer"),L.proxyServer=pe,M.report.setProxyServer(pe),R.default.setProxyServer(pe),g()},L.startProxyServer=function(pe){var g=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(L.gatewayClient&&L.gatewayClient.state!==de.a.DISCONNECTED)throw new Error("Start proxy server before join channel");if(L.proxyServer)throw new Error("You have already set the proxy");if(L.useLocalAccessPoint)throw new Error("You have already set the local proxy");L.useProxyServer=!0,L.proxyServerType=pe||1,g()},L.stopProxyServer=function(){var pe=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(L.gatewayClient&&L.gatewayClient.state!==de.a.DISCONNECTED)throw new Error("Stop proxy server after leave channel");M.report.setProxyServer(),R.default.setProxyServer(),L.turnServers=[],L.proxyServer=null,L.useProxyServer=!1,L.proxyServerType=null,pe()},L.setEncryptionSecret=function(pe){var g=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(x.checkValidString)(pe,"password");var ce=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");ce.test(pe)||console.warn("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer,\n      "),L.aespassword=pe,g()},L.setEncryptionMode=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(x.checkValidString)(pe,"encryptionMode"),-1===B.indexOf(pe))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb" | "sm4-128-ecb" | "aes-128-gcm" | "aes-256-gcm" | "aes-128-gcm2" | "aes-256-gcm2"');var _e=["aes-128-gcm2","aes-256-gcm2"];if(-1!==_e.indexOf(pe)){if(!g||!(g instanceof Uint8Array&&32===g.length))throw Error("salt must be an Uint8Array and exactly equal to 32 bytes")}else if(g)throw new Error("Only ".concat("aes-128-gcm2"," and ").concat("aes-256-gcm2"," support use salt"));g&&(L.aesSalt=Object(ae.uint8ArrayToBase64)(g)),L.aesmode=pe,ce()},L.configPublisher=function(pe){var g=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(x.checkValidObject)(pe,"config");var ce=pe.width,_e=pe.height,be=pe.framerate,ve=pe.bitrate,Z=pe.publisherUrl;Object(x.checkValidNumber)(ce,"width"),Object(x.checkValidNumber)(_e,"height"),Object(x.checkValidNumber)(be,"framerate"),Object(x.checkValidNumber)(ve,"bitrate",1,1e7),Z&&Object(x.checkValidString)(Z,"publisherUrl"),L.gatewayClient.configPublisher(pe),g()},L.enableDualStream=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{callback:function(_e,be){if(_e)return g&&g(_e);pe&&pe(be)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(N.getBrowserOS)()?(M.report.streamSwitch(Ce.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),ce(oe.default.IOS_NOT_SUPPORT)):Object(N.isWeChatBrowser)()?(M.report.streamSwitch(Ce.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),ce(oe.default.WECHAT_NOT_SUPPORT)):(M.report.streamSwitch(Ce.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),L.isDualStream=!0,L.highStream&&(L.highStream.isDualStream=!0),void(0===L.highStreamState?L._publishLowStream(function(_e){return ce(null,_e)},function(_e){R.default.warning("[".concat(L.clientId,"]"),_e),ce(oe.default.ENABLE_DUALSTREAM_FAILED)}):ce(1===L.highStreamState?oe.default.STILL_ON_PUBLISHING:null)))},L.disableDualStream=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{callback:function(_e,be){if(_e)return g&&g(_e);pe&&pe(be)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});M.report.streamSwitch(Ce.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),L.isDualStream=!1,L.highStream&&(L.highStream.isDualStream=!1),0===L.highStreamState?L._unpublishLowStream(function(){L.highStream.lowStream=null,ce()},function(_e){R.default.warning("[".concat(L.clientId,"]"),_e),ce(oe.default.DISABLE_DUALSTREAM_FAILED)}):1===L.highStreamState?ce(oe.default.STILL_ON_PUBLISHING):ce()},L._getLowStream=function(pe,g){L.lowStream?pe(L.lowStream):L._createLowStream(function(ce){L.lowStream=ce,pe(L.lowStream)},g)},L._createLowStream=function(pe,g){if(L.highStream&&L.highStream.stream){var ce=ie()({},L.highStream.params);if(ce.streamID+=1,ce.audio=!1,ce.video)if(L.highStream.stream.getVideoTracks()[0]){var _e=new p.a(ce);_e.isLowStream=!0,_e.streamId=L.highStream.getId()+1;var be={};L.lowStreamParameter&&(be=ie()({},L.lowStreamParameter)),be.width&&be.height||(be.width=160,be.height=120),be.framerate=be.framerate||15,be.bitrate=be.bitrate||50,_e.setVideoProfileCustomPlus(be);try{var ve=q()(L.highStream,{width:_e.videoConstraint.width.ideal,height:_e.videoConstraint.height.ideal,framerate:_e.videoConstraint.frameRate});return _e.stream=ve,L.highStream.lowStream=_e,L.highStream.userMuteVideo&&_e.muteVideo(),pe&&pe(_e)}catch(Z){return g&&g(Z)}}else g&&g(oe.default.HIGH_STREAM_NOT_VIDEO_TRACE);else g&&g(oe.default.HIGH_STREAM_NOT_VIDEO_TRACE)}else g&&g(oe.default.HIGH_STREAM_NOT_VIDEO_TRACE)},L._publishLowStream=function(pe,g){return 2!==L.lowStreamState?g&&g(oe.default.LOW_STREAM_ALREADY_PUBLISHED):L.highStream&&L.highStream.hasScreen()?g&&g(oe.default.SHARING_SCREEN_NOT_SUPPORT):void L._getLowStream(function(ce){L.lowStreamState=1,L.gatewayClient.publish(ce,{streamType:1},function(){L.lowStreamState=0,pe&&pe()},function(_e){1===L.lowStreamState&&(L.lowStreamState=2),R.default.debug("[".concat(L.clientId,"] publish low stream failed")),g&&g(_e)})},g)},L._unpublishLowStream=function(pe,g){if(0!==L.lowStreamState)return g&&g(oe.default.LOW_STREAM_NOT_YET_PUBLISHED);L.lowStream&&(L.gatewayClient.unpublish(L.lowStream,{streamType:1},function(){},function(ce){R.default.debug("[".concat(L.clientId,"] unpublish low stream failed")),g&&g(ce)}),L.lowStream.close(),L.lowStream=null,L.lowStreamState=2,pe&&pe())},L.join=function(pe,g,ce,_e,be,ve){_e&&"function"==typeof _e&&(ve=be,be=_e,_e=null);var Z=te(),Se="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser",Re=Te()?window.isSecureContext:"Browser Not Support",Pe=function(){R.default.warning(Se)};Te()?window.isSecureContext||Pe():Z||Pe();var Oe=M.report.reportApiInvoke(Ce.sessionId,{callback:function(at,Gt){if(at)return ve&&ve(at);be&&be(Gt)},name:"Client.join",options:arguments,getStates:function(){return{isHttps:Z,isSecureContext:Re}},tag:"tracer"});if(pe&&!Object(x.isValidToken)(pe))return R.default.warning("[".concat(L.clientId,"] Param channelKey should be string")),Oe(oe.default.INVALID_PARAMETER);if(!Object(x.isValidChannelName)(g))return R.default.error("Invalid Channel Name ".concat(g)),R.default.warning("[".concat(L.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),Oe(oe.default.INVALID_PARAMETER);if("string"==typeof g&&""===g)return R.default.warning("[".concat(L.clientId,"] Param channel should not be empty")),Oe(oe.default.INVALID_PARAMETER);if(_e&&!Object(x.isValidString)(_e))return R.default.warning("[".concat(L.clientId,"] optionalInfo should be string")),Oe(oe.default.INVALID_PARAMETER);if(ce&&!Object(ae.is32Uint)(ce)&&!Object(x.isValidString)(ce,1,255))return R.default.error("Invalid UID ".concat(ce," ").concat(G()(ce))),R.default.warning("[".concat(L.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is 32Uint")),Oe(oe.default.INVALID_PARAMETER);if("string"==typeof ce&&0==ce.length)return R.default.warning("[".concat(L.clientId,"] String uid should not be empty")),Oe(oe.default.INVALID_PARAMETER);if("string"==typeof ce&&ce.length>256)return R.default.warning("[".concat(L.clientId,"] Length of string uid should be less than 255")),Oe(oe.default.INVALID_PARAMETER);R.default.stopWaitJoin(),L.highStream=null,L.lowStream=null,L.lowStreamParameter=null,L.isDualStream=!1,L.highStreamState=2,L.lowStreamState=2;var Xe=Date.now(),tt=setTimeout(function(){if(1!=L.gatewayClient.hasJoined){R.default.debug("[".concat(L.clientId,"] The time to join the channel is greater than 5 seconds "));var at=Date.now();M.report.joinChannelTimeOut({lts:at,sid:Ce.sessionId,cname:g,cid:Ze&&Ze.cid,uid:Ze.uid||("string"==typeof ce?void 0:ce),elapse:at-Xe,timeout:5})}},5e3),Ze={clientId:L.clientId,appId:Ce.appId,sid:Ce.sessionId,cname:g,uid:ce,turnServers:L.turnServers.concat(),proxyServer:L.proxyServer,token:pe||Ce.appId,useProxyServer:L.useProxyServer,useLocalAccessPoint:L.useLocalAccessPoint,proxyServerType:L.proxyServerType,optionalInfo:_e};if("string"==typeof ce&&(Ze.stringUid=ce,L.uintUid?(Ze.uid=L.uintUid,delete L.uintUid):Ze.uid=0),L.aespassword&&"none"!==L.aesmode&&ie()(Ze,{aespassword:L.aespassword,aesmode:L.aesmode}),L.aesSalt&&(Ze.aes_salt=L.aesSalt),M.report.sessionInit(Ce.sessionId,{lts:(new Date).getTime(),cname:g,appid:Ce.appId,mode:Ce.mode,succ:!0}),L.onSuccess=function(at){clearTimeout(tt),L.rtcStatsCollector.startNetworkQualityTimer(),L.onSuccess=null,Oe(null,at)},L.onFailure=function(at){return Oe(at)},L.channel=g,L.gatewayClient.state!==de.a.DISCONNECTED)return R.default.error("[".concat(L.clientId,"] Client already in connecting/connected state")),Oe(oe.default.INVALID_OPERATION),void M.report.joinGateway(Ce.sessionId,{lts:Date.now(),succ:!1,ec:oe.default.INVALID_OPERATION,addr:null});L.gatewayClient.state=de.a.CONNECTING;var gt=function(at,Gt){R.default.info("[".concat(L.clientId,"] Joining channel: ").concat(g)),L.gatewayClient.dispatchEvent({type:"config-distribute",config:Gt,joinInfo:Ze}),L.key=pe||Ce.appId,Ze.cid=at.cid,Ze.uid||(Ze.uid=at.uid),Ze.vid=at.vid,Ze.clientId=L.clientId,Ze.apResponse=at.res,at.uni_lbs_ip&&at.uni_lbs_ip[1]&&(Ze.uni_lbs_ip=at.uni_lbs_ip[1]),Ze.gatewayAddr=at.gateway_addr,L.joinInfo=Ze,L.gatewayClient.join(Ze,L.key,function(vt){R.default.info("[".concat(L.clientId,"] Join channel ").concat(g," success, join with uid: ").concat(vt,".")),L.onSuccess=null,L.rtcStatsCollector.startNetworkQualityTimer(),Oe(null,vt)},function(vt){return Oe(vt)})};Ze.stringUid&&!Ze.uid?(L.userAccountReq&&!L.userAccountReq.isFinished()&&L.userAccountReq.cancel(),L.userAccountReq=Object(J.getUserAccount)(Ze,L.gatewayClient),L.userAccountReq.then(function(at){R.default.debug("getUserAccount Success ".concat(at.url," ").concat(Ze.stringUid," => ").concat(at.uid)),Ze.uid=at.uid,Object(J.getGatewayList)(Ze,gt,function(Gt){return Oe(Gt)})}).catch(function(at){R.default.error("getUserAccount rejected",at),Oe(at)})):Object(J.getGatewayList)(Ze,gt,function(at){return Oe(at)})},L.renewChannelKey=function(pe,g,ce){var _e=M.report.reportApiInvoke(Ce.sessionId,{callback:function(be,ve){if(be)return ce&&ce(be);g&&g(ve)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(x.checkValidString)(pe,"key",1,2047),void 0===L.key?(R.default.error("[".concat(L.clientId,"] renewChannelKey should not be called before user join")),_e(oe.default.INVALID_OPERATION)):(L.key=pe,L.gatewayClient.joinInfo.token=pe,L.gatewayClient.key=pe,L.gatewayClient.recover(),_e())},L.leave=function(pe,g){L.gatewayClient.isFirstSuccess=!0,L.gatewayClient.hasInvokeLeave=!0;var ce=!1,_e=M.report.reportApiInvoke(Ce.sessionId,{callback:function(be,ve){if(be)return g&&g(be);L.gatewayClient.reconnectingCS=!1,L.gatewayClient.state=de.a.DISCONNECTED,clearTimeout(Object(J._getReconnectCSTimer)(L.clientId)),L._renewSession(),L.rtcStatsCollector.clearNetworkQualityTimer(),pe&&pe(ve)},name:"Client.leave",options:arguments,tag:"tracer"});R.default.info("[".concat(L.clientId,"] Leaving channel")),L.userAccountReq&&!L.userAccountReq.isFinished()&&(L.userAccountReq.cancel(),L.gatewayClient.state===de.a.CONNECTING&&(L.gatewayClient.state=de.a.DISCONNECTED)),L._terminateLiveStreaming(),L.gatewayClient.leave(function(be){ce=!0,_e(null,be)},_e),setTimeout(function(){ce||(L.gatewayClient.socket&&(L.gatewayClient.socket.close(),L.gatewayClient.socket=null),L.gatewayClient.state=de.a.DISCONNECTED,_e(null,"LEAVE_MSG_TIMEOUT"))},Object(D.getParameter)("LEAVE_MSG_TIMEOUT"))},L._renewSession=function(){var pe=Object(ae.generateSessionId)();if(R.default.debug("renewSession ".concat(Ce.sessionId," => ").concat(pe)),Ce.sessionId=pe,L.gatewayClient.peerPublishDurationMap.clear(),L.joinInfo&&(L.joinInfo.sid=pe),L.gatewayClient&&(L.gatewayClient.joinInfo&&(L.gatewayClient.joinInfo.sid=pe),L.gatewayClient.localStreams))for(var g in L.gatewayClient.localStreams){var ce=L.gatewayClient.localStreams[g];ce&&(ce.sid=pe)}},L._publish=function(pe,g,ce,_e){if(2!==L.highStreamState)return R.default.warning("[".concat(L.clientId,"] Can't publish stream when stream already publish ").concat(pe.getId())),ce&&ce(oe.default.STREAM_ALREADY_PUBLISHED);if(0===L.turnServers.length&&Object(D.getParameter)("FORCE_TURN")&&!Object(D.getParameter)("TURN_ENABLE_TCP")&&!Object(D.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");R.default.info("[".concat(L.clientId,"] Publishing stream, uid ").concat(pe.getId())),L.highStream=pe,L.highStreamState=1,L.highStream.streamId=L.joinInfo.stringUid||L.joinInfo.uid,L.hasPublished=!1;var be=function(ve,Z,Se){L.gatewayClient.publish(ve,{streamType:0},function(){ve.sid=Ce.sessionId,L.highStreamState=0,R.default.info("[".concat(L.clientId,"] Publish success, uid: ").concat(ve.getId())),L.highStream&&(L.highStream.isDualStream=L.isDualStream),L.isDualStream?L._publishLowStream(function(){Z&&Z()},function(Re){R.default.warning("[".concat(L.clientId,"] "),Re),ye.a.replaceWithCanvasTrack(ve).then(function(){Z&&Z()})}):ye.a.replaceWithCanvasTrack(ve).then(function(){Z&&Z()})},Se)};"audience"!==L.gatewayClient.role||"live"!==L.mode||_e?be(pe,g,ce):L.gatewayClient.setClientRole(me,function(ve){if(ve)return ce&&ce(ve);be(pe,g,ce)})},L._unpublish=function(pe,g,ce,_e){if(0!==L.highStreamState)return R.default.warning("[".concat(L.clientId,"] Can't unpublish stream when stream not publish")),ce&&ce(oe.default.STREAM_NOT_YET_PUBLISHED);R.default.info("[".concat(L.clientId,"] Unpublish stream, uid ").concat(pe.getId()));var be=function(ve,Z,Se){L.isDualStream&&L.lowStream&&L._unpublishLowStream(null,Se),L.gatewayClient.unpublish(ve,{streamType:0},function(){L.highStreamState=2,R.default.info("[".concat(L.clientId,"] Unpublish stream success, uid: ").concat(ve.getId())),L.gatewayClient.dispatchEvent({type:"stream-unpublished",stream:ve}),Z&&Z()},function(Re){R.default.info("[".concat(L.clientId,"] Unpublish stream fail, uid: ").concat(ve.getId())),Se&&Se(Re)})};L.gatewayClient.role!==me||"live"!==L.mode||_e?be(pe,g,ce):L.gatewayClient.setClientRole("audience",function(ve){if(ve)return ce&&ce(ve);be(pe,g,ce)})},L.publish=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{callback:function(_e,be){if(_e)return 1===L.highStreamState&&"REQUEST_ABORT"!==_e&&(L.highStreamState=2),g&&g(_e)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!g}});2===L.highStreamState?pe._hasVideoTracks()||pe._hasAudioTracks()?(L.gatewayClient.publishRequestId=Object(ae.generateId)(),L._publish(pe,function(_e){return ce(null,_e)},function(_e){return ce(_e)})):ce(oe.default.NO_TRACK_IN_STREAM):ce(oe.default.STREAM_ALREADY_PUBLISHED)},L.unpublish=function(pe,g,ce){var _e=M.report.reportApiInvoke(Ce.sessionId,{callback:function(be,ve){if(be)return g&&g(be);ce&&ce(ve)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!g}});0===L.highStreamState?(L.gatewayClient.publishRequestId=null,L._unpublish(pe,function(be){return _e(null,be)},function(be){return _e(be)})):_e(oe.default.STREAM_NOT_YET_PUBLISHED)},L.subscribe=function(pe,g,ce){var _e=M.report.reportApiInvoke(Ce.sessionId,{callback:function(Z,Se){if(Z)return ce&&ce(Z)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:g,onFailure:!!ce}});"function"==typeof g&&(ce=g,g=null),Object(x.checkValidObject)(pe,"stream"),Object(x.isEmpty)(g)||(Object(x.checkValidObject)(g,"options"),Object(x.isEmpty)(g.video)||Object(x.checkValidBoolean)(g.video,"options.video"),Object(x.isEmpty)(g.audio)||Object(x.checkValidBoolean)(g.audio,"options.audio"));var be={video:!0,audio:!0};if(!Object(x.isEmpty)(g)){if(Object(N.isSafari)()&&(!g.video||!g.audio)){var ve="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return R.default.error("[".concat(L.clientId,"] "),ve),void _e(ve)}if(!Object(x.isEmpty)(g.video)&&!Object(x.isValidBoolean)(g.video)||!Object(x.isEmpty)(g.audio)&&!Object(x.isValidBoolean)(g.audio)||!1===g.audio&&!1===g.video)return ve="INVALID_PARAMETER ".concat(JSON.stringify(g)),R.default.error("[".concat(L.clientId,"] "),ve),void _e(ve)}pe.subscribeOptions?(ie()(pe.subscribeOptions,be,g),L.gatewayClient.subscribeChange(pe,function(Z){return _e(null,Z)},_e)):(L.gatewayClient.subscribeRequestId.set(pe.getId(),Object(ae.generateId)()),pe.subscribeOptions=ie()({},be,g),L.gatewayClient.subscribe(pe,function(Z){return _e(null,Z)},_e))},L.unsubscribe=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{callback:function(_e,be){if(_e)return g&&g(_e)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!g}});R.default.info("[".concat(L.clientId,"] Unsubscribe stream, uid: ").concat(pe.getId())),L.gatewayClient.subscribeRequestId.delete(pe.getId()),L.gatewayClient.unsubscribe(pe,function(_e){return ce(null,_e)},ce)},L.setRemoteVideoStreamType=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:g}});Object(x.checkValidEnum)(g,"streamType",[0,1]),L.gatewayClient.setRemoteVideoStreamType(pe,g),ce()},L.setStreamFallbackOption=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:g}});Object(x.checkValidEnum)(g,"fallbackType",[0,1,2]),L.gatewayClient.setStreamFallbackOption(pe,g),ce()},L.enableAudioVolumeIndicator=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});pe=pe||2e3,g=g||3,Object(x.checkValidNumber)(g,"smooth",1,100),Object(x.checkValidNumber)(pe,"interval",50,1e5),L.audioVolumeIndication=L.audioVolumeIndication||{enabled:!0},L.audioVolumeIndication.interval=pe,L.audioVolumeIndication.smooth=g,L.audioVolumeIndication={interval:pe,smooth:g},R.default.info("[".concat(L.clientId,"] enableAudioVolumeIndicator interval ").concat(pe," smooth ").concat(g)),L.gatewayClient.enableAudioVolumeIndicator(pe,g),ce()},L.getNetworkStats=function(pe,g){return R.default.deprecate("[".concat(L.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),ee.getStats(pe,g)},L.getSystemStats=function(pe,g){return A.getStats(pe,g)},L.getRecordingDevices=function(pe,g){return _.a.getRecordingDevices(pe,g)},L.getPlayoutDevices=function(pe,g){return _.a.getPlayoutDevices(pe,g)},L.getCameras=function(pe,g){return _.a.getCameras(pe,g)},L.getRemoteAudioStats=function(pe,g){return L.rtcStatsCollector.getRemoteAudioStats(pe,g)},L.getLocalAudioStats=function(pe,g){return L.rtcStatsCollector.getLocalAudioStats(pe,g)},L.getRemoteVideoStats=function(pe,g){return L.rtcStatsCollector.getRemoteVideoStats(pe,g)},L.getLocalVideoStats=function(pe,g){return L.rtcStatsCollector.getLocalVideoStats(pe,g)},L._getRemoteVideoQualityStats=function(pe,g){return L.rtcStatsCollector.getRemoteVideoQualityStats(pe,g)},L._getRemoteAudioQualityStats=function(pe,g){return L.rtcStatsCollector.getRemoteAudioQualityStats(pe,g)},L.getTransportStats=function(pe,g){return L.rtcStatsCollector.getTransportStats(function(ce){return ee.getStats(function(_e){var be=ie()({},ce,_e);pe&&pe(be)},g)},g)},L.getSessionStats=function(pe,g){return L.rtcStatsCollector.getSessionStats(pe,g)},L.onNetworkQuality=function(){return L.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},L.sendMetadata=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.sendMetadata",tag:"tracer",callback:function(_e){if(_e)return g&&g(_e);g&&g()}});L.gatewayClient.sendMetadata(pe,ce)},L.sendCustomReportMessage=function(pe,g,ce,_e,be,ve){Object(D.getParameter)("CR")?L.customReportCount>Object(D.getParameter)("CRL")?ve&&ve("REPORT_LIMITED"):(L.gatewayClient.hasJoined||(R.default.WARNING("Should invoke Client.sendCustomReportMessage after join"),ve&&ve("REPORT_BEFORE_JOINED")),L.customReportTimer||(L.customReportTimer=setInterval(function(){L.customReportCount=0},Object(D.getParameter)("CRI"))),Object(x.checkValidString)(pe,"reportId",0,100,!1),Object(x.checkValidString)(g,"category",0,100,!1),Object(x.checkValidString)(ce,"event",0,100,!1),Object(x.checkValidString)(_e,"label",0,100,!1),Object(x.checkValidNumber)(be,"value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),L.customReportCount++,M.report.sendCustomReportMessage(Ce.sessionId,{reportId:pe,category:g,event:ce,label:_e,value:be,lts:Date.now()},function(Z){Z?ve&&ve("REPORT_FAILED"):ve&&ve()})):ve&&ve("REPORT_FORBIDDEN")},L.setLocalAccessPoints=function(pe,g){var ce=M.report.reportApiInvoke(Ce.sessionId,{name:"Client.setLocalAccessPoints",tag:"tracer"});if(Object(x.checkValidArray)(pe,"serverList"),Object(x.checkValidString)(g,"domain"),L.useProxyServer)throw new Error("You have already set the proxy");var _e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;pe=pe.map(function(be){return _e.test(be)?"".concat(be.replace(/\./g,"-"),".").concat(g):be}),L.useLocalAccessPoint=!0,Object(D.setParameter)("WEBCS_DOMAIN",pe),Object(D.setParameter)("WEBCS_DOMAIN_BACKUP_LIST",pe),Object(D.setParameter)("GATEWAY_DOMAINS",[g]),Object(D.setParameter)("EVENT_REPORT_DOMAIN",pe[Math.floor(Math.random()*pe.length)]),Object(D.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",pe[Math.floor(Math.random()*pe.length)]),Object(D.setParameter)("LOG_UPLOAD_SERVER","".concat(pe[Math.floor(Math.random()*pe.length)],":6444")),ce()},Ce.clientId=L.clientId,L.gatewayClient=Object(de.a)(Ce),L.listenerLoggerTimer=null,L.listenerLoggerCache=[],L.on=function(pe,g){L.gatewayClient.on(pe,g),L.listenerLoggerCache.push("".concat(pe).concat(g.name?":"+g.name:"")),L.listenerLoggerTimer?clearTimeout(L.listenerLoggerTimer):R.default.info("[".concat(L.clientId,"] Adding event handler on ").concat(pe)),L.listenerLoggerTimer=setTimeout(function(){L.listenerLoggerCache.length&&(L.listenerLoggerTimer=null,R.default.info("[".concat(L.clientId,"] Added event handler on ").concat(L.listenerLoggerCache.join(", "))),L.listenerLoggerCache=[])},0)},L.off=function(pe,g){R.default.info("remove event handler from [".concat(pe,"]")),L.gatewayClient.removeEventListener(pe,g)},L.rtcStatsCollector=(pe=L.gatewayClient,(g=Object(T.b)()).gatewayClient=pe,g.exceptionMonitor=new u(pe),g.localStats={},g.remoteStats={},g.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},g.getRemoteAudioStats=function(ce){var _e=g.gatewayClient.traffic_stats,be={};for(var ve in g.remoteStats){var Z={},Se=g.remoteStats[ve];if(Object(C.b)(Z,"End2EndDelay",Se.peer_delay&&Se.peer_delay.audio_delay),Object(C.b)(Z,"TransportDelay",Se.peer_delay&&Se.peer_delay.e2e_delay),Object(C.b)(Z,"PacketLossRate",Se.peer_delay&&Se.peer_delay.e2e_audio_lost_ratio_400ms),Object(C.b)(Z,"RecvLevel",Se.audioStats&&Se.audioStats.audioOutputLevel),Object(C.b)(Z,"RecvBitrate",Se.audioRecvBitrate),Object(C.b)(Z,"CodecType",Se.audioStats&&Se.audioStats.googCodecName),Object(C.b)(Z,"MuteState",Se.audioDisabled),Object(C.b)(Z,"TotalFreezeTime",Se.audioStats&&Se.audioStats.audioTotalFreezeTime),Object(C.b)(Z,"TotalPlayDuration",Se.audioStats&&Se.audioStats.audioTotalPlayDuration),_e&&_e.peer_delay){var Re=_e.peer_delay.find(function(Oe){return Oe.peer_uid==ve});if(Re){var Pe=Re.peer_publish_audio_duration+(Date.now()-_e.timestamp);Object(C.b)(Z,"AudioPublishDuration",Pe)}else Object(C.b)(Z,"AudioPublishDuration",-1)}be[ve]=Z}ce&&ce(be)},g.getLocalAudioStats=function(ce){var _e={};for(var be in g.localStats){var ve={},Z=g.localStats[be];Object(C.b)(ve,"RecordingLevel",Z.audioStats&&Z.audioStats.audioInputLevel),Object(C.b)(ve,"SendLevel",Z.audioStats&&Z.audioStats.totalAudioEnergy),Object(C.b)(ve,"SamplingRate",Z.audioStats&&Z.audioStats.totalSamplesDuration),Object(C.b)(ve,"SendBitrate",Z.audioSendBitrate),Object(C.b)(ve,"CodecType",Z.audioStats&&Z.audioStats.googCodecName),Object(C.b)(ve,"MuteState",Z.audioDisabled),Object(C.b)(ve,"audioSendPacketsLost",Z.audioStats&&Z.audioStats.packetsLost);var Se=g.gatewayClient.localStreams[be];Se&&Se.isPlaying()&&Object(C.b)(ve,"MuteState",Se.userMuteAudio?"1":"0"),_e[be]=ve}ce&&ce(_e)},g.getRemoteVideoStats=function(ce){var _e=g.gatewayClient.traffic_stats,be={};for(var ve in g.remoteStats){var Z={},Se=g.remoteStats[ve];if(Object(C.b)(Z,"End2EndDelay",Se.peer_delay&&Se.peer_delay.video_delay),Object(C.b)(Z,"TransportDelay",Se.peer_delay&&Se.peer_delay.e2e_delay),Object(C.b)(Z,"PacketLossRate",Se.peer_delay&&Se.peer_delay.e2e_video_lost_ratio_400ms),Object(C.b)(Z,"RecvBitrate",Se.videoRecvBitrate),Object(C.b)(Z,"RecvResolutionWidth",Se.videoStats&&Se.videoStats.googFrameWidthReceived),Object(C.b)(Z,"RecvResolutionHeight",Se.videoStats&&Se.videoStats.googFrameHeightReceived),Object(C.b)(Z,"RenderResolutionWidth",Se.videoStats&&Se.videoStats.renderRemoteWidth),Object(C.b)(Z,"RenderResolutionHeight",Se.videoStats&&Se.videoStats.renderRemoteHeight),Object(C.b)(Z,"RenderFrameRate",Se.videoStats&&Se.videoStats.googFrameRateOutput),Object(C.b)(Z,"MuteState",Se.videoDisabled),Object(C.b)(Z,"TotalFreezeTime",Se.videoStats&&Se.videoStats.videoTotalFreezeTime),Object(C.b)(Z,"TotalPlayDuration",Se.videoStats&&Se.videoStats.videoTotalPlayDuration),_e&&_e.peer_delay){var Re=_e.peer_delay.find(function(Oe){return Oe.peer_uid==ve});if(Re){var Pe=Re.peer_publish_video_duration+(Date.now()-_e.timestamp);Object(C.b)(Z,"VideoPublishDuration",Pe)}else Object(C.b)(Z,"VideoPublishDuration",-1)}be[ve]=Z}ce&&ce(be)},g.getLocalVideoStats=function(ce){var _e={};for(var be in g.localStats){var ve={},Z=g.localStats[be];Object(C.b)(ve,"TargetSendBitrate",Z.videoTargetSendBitrate),Object(C.b)(ve,"SendFrameRate",Z.videoStats&&Z.videoStats.googFrameRateSent),Object(C.b)(ve,"SendBitrate",Z.videoSendBitrate),Object(C.b)(ve,"SendResolutionWidth",Z.videoStats&&Z.videoStats.googFrameWidthSent),Object(C.b)(ve,"SendResolutionHeight",Z.videoStats&&Z.videoStats.googFrameHeightSent),Object(C.b)(ve,"CaptureResolutionWidth",Z.videoStats&&Z.videoStats.googFrameWidthInput),Object(C.b)(ve,"CaptureResolutionHeight",Z.videoStats&&Z.videoStats.googFrameHeightInput),Object(C.b)(ve,"EncodeDelay",Z.videoStats&&Z.videoStats.googAvgEncodeMs),Object(C.b)(ve,"MuteState",Z.videoDisabled),Object(C.b)(ve,"TotalFreezeTime",Z.videoStats&&Z.videoStats.videoTotalFreezeTime),Object(C.b)(ve,"TotalDuration",Z.videoStats&&Z.videoStats.videoTotalPlayDuration),Object(C.b)(ve,"CaptureFrameRate",Z.videoStats&&Z.videoStats.googFrameRateSent),Object(C.b)(ve,"videoSendPacketsLost",Z.videoStats&&Z.videoStats.packetsLost),Z.videoStats&&!Z.videoStats.googFrameWidthInput&&Object(C.b)(ve,"CaptureResolutionWidth",Z.videoStats&&Z.videoStats.renderLocalWidth),Z.videoStats&&!Z.videoStats.googFrameHeightInput&&Object(C.b)(ve,"CaptureResolutionHeight",Z.videoStats&&Z.videoStats.renderLocalHeight),_e[be]=ve}ce&&ce(_e)},g.getRemoteVideoQualityStats=function(ce){var _e={};for(var be in g.remoteStats){var ve={},Z=g.remoteStats[be];Object(C.b)(ve,"videoReceiveDelay",Z.videoStats&&Z.videoStats.googCurrentDelayMs),Object(C.b)(ve,"VideoFreezeRate",Z.videoStats&&Z.videoStats.videoFreezeRate),Object(C.b)(ve,"FirstFrameTime",Z.firstFrameTime),_e[be]=ve}ce&&ce(_e)},g.getRemoteAudioQualityStats=function(ce){var _e={};for(var be in g.remoteStats){var ve={},Z=g.remoteStats[be];Object(C.b)(ve,"audioReceiveDelay",Z.audioStats&&Z.audioStats.googCurrentDelayMs),Object(C.b)(ve,"AudioFreezeRate",Z.videoStats&&Z.videoStats.videoFreezeRate),_e[be]=ve}ce&&ce(_e)},g.getTransportStats=function(ce){var _e={},be={},ve=g.gatewayClient.traffic_stats,Z=ve.peer_delay;if(Object(C.b)(_e,"OutgoingAvailableBandwidth",g.gatewayClient.OutgoingAvailableBandwidth/1e3),Object(C.b)(_e,"RTT",ve&&2*ve.access_delay),Z){var Se,Re=function(Ce){if("undefined"==typeof Symbol||null==Ce[Symbol.iterator]){if(Array.isArray(Ce)||(Ce=function(pe,g){if(pe){if("string"==typeof pe)return m(pe,g);var ce=Object.prototype.toString.call(pe).slice(8,-1);if("Object"===ce&&pe.constructor&&(ce=pe.constructor.name),"Map"===ce||"Set"===ce)return Array.from(ce);if("Arguments"===ce||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce))return m(pe,g)}}(Ce))){var L=0,xe=function(){};return{s:xe,n:function(){return L>=Ce.length?{done:!0}:{done:!1,value:Ce[L++]}},e:function(pe){throw pe},f:xe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Qe,ze,st=!0,ft=!1;return{s:function(){Qe=Ce[Symbol.iterator]()},n:function(){var pe=Qe.next();return st=pe.done,pe},e:function(pe){ft=!0,ze=pe},f:function(){try{st||null==Qe.return||Qe.return()}finally{if(ft)throw ze}}}}(Z);try{for(Re.s();!(Se=Re.n()).done;){var Pe=Se.value;Pe.downlink_estimate_bandwidth&&(be[Pe.peer_uid]=Pe.downlink_estimate_bandwidth/1e3+"")}}catch(Oe){Re.e(Oe)}finally{Re.f()}}_e.IncomingAvailableBandwidth=be,ce&&ce(_e)},g.getSessionStats=function(ce){var _e={},be=g.gatewayClient.traffic_stats,ve=g.gatewayClient.socket,Z=0,Se=0;for(var Re in g.remoteStats)(Pe=g.remoteStats[Re])&&Pe.videoStats&&Pe.videoStats.videoRecvBytesDelta&&(Se+=parseInt(Pe.videoStats.videoRecvBytesDelta)),Pe&&Pe.audioStats&&Pe.audioStats.audioRecvBytesDelta&&(Se+=parseInt(Pe.audioStats.audioRecvBytesDelta));for(var Re in g.localStats){var Pe;(Pe=g.localStats[Re])&&Pe.videoStats&&Pe.videoStats.videoSendBytesDelta&&(Z+=parseInt(Pe.videoStats.videoSendBytesDelta)),Pe&&Pe.audioStats&&Pe.audioStats.audioSendBytesDelta&&(Z+=parseInt(Pe.audioStats.audioSendBytesDelta))}var Oe=Z+g.session.WSSendBytesDelta+g.session.HTTPSendBytesDelta,Xe=Se+g.session.WSRecvBytesDelta+g.session.HTTPRecvBytesDelta,tt=g.session.sendBytes+Object(d.getHTTPSendBytes)(),Ze=g.session.recvBytes+Object(d.getHTTPRecvBytes)();g.gatewayClient.socket&&g.gatewayClient.socket.state===g.gatewayClient.CONNECTED&&(tt+=ve.getSendBytes(),Ze+=ve.getRecvBytes());var gt=1;be.peer_delay&&(gt=be.peer_delay.length,gt+=1),ve?Object(C.b)(_e,"Duration",ve.getDuration()):Object(C.b)(_e,"Duration",0),Object(C.b)(_e,"UserCount",gt),Object(C.b)(_e,"SendBytes",tt),Object(C.b)(_e,"RecvBytes",Ze),Object(C.b)(_e,"SendBitrate",8*Oe/1e3),Object(C.b)(_e,"RecvBitrate",8*Xe/1e3),ce&&ce(_e)},g.isLocalVideoFreeze=function(ce,_e){var be=0,ve=0;if(!ce||!_e)return!1;if(Object(N.isChrome)()||Object(N.isOpera)())be=ce.googFrameRateInput,ve=ce.googFrameRateSent;else if(Object(N.isSafari)())be=parseInt(ce.framerateMean),ve=parseInt(ce.framesEncoded)-parseInt(_e.framesEncoded);else{if(!Object(N.isFireFox)())return!1;be=parseInt(ce.framerateMean),ve=parseInt(ce.framesEncoded)-parseInt(_e.framesEncoded)}return be>5&&ve<3},g.isRemoteVideoFreeze=function(ce,_e){var be=0,ve=0;if(!ce||!_e)return!1;if(Object(N.isChrome)()||Object(N.isOpera)())be=ce.googFrameRateReceived,ve=ce.googFrameRateDecoded;else if(Object(N.isSafari)())be=ce.framerateMean,ve=parseInt(ce.framesDecoded)-parseInt(_e.framesDecoded);else{if(!Object(N.isFireFox)())return!1;be=parseInt(ce.framesReceived)-parseInt(_e.framesReceived),ve=parseInt(ce.framesDecoded)-parseInt(_e.framesDecoded)}return be>5&&be<10&&ve<3||be>10&&be<20&&ve<4||be>20&&ve<5},g.isAudioFreeze=function(ce){if(Object(N.isChrome)()&&ce){if(ce.googDecodingPLC&&ce.googDecodingPLCCNG&&ce.googDecodingCTN)return(parseInt(ce.googDecodingPLC)+parseInt(ce.googDecodingPLCCNG))/parseInt(ce.googDecodingCTN)>.2}else if((Object(N.isSafari)()||Object(N.isFireFox)())&&ce.packetsLost&&ce.packetsReceived)return parseInt(ce.packetsLost)/(parseInt(ce.packetsLost)+parseInt(ce.packetsReceived))>.2;return!1},g.isAudioDecodeFailed=function(ce){return!!((Object(N.isChrome)()||Object(N.isOpera)())&&ce&&parseInt(ce.bytesReceived)>0&&0===parseInt(ce.googDecodingNormal))},g.startNetworkQualityTimer=function(){g.clearNetworkQualityTimer(),g.networkQualityTimer=setInterval(function(){if(g.gatewayClient.state===de.a.CONNECTED&&navigator.onLine){var ce=g.gatewayClient.traffic_stats;g.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:g.networkQualityTrans(ce.uplink_network_quality),downlinkNetworkQuality:g.networkQualityTrans(ce.downlink_network_quality)})}else g.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3)},g.clearNetworkQualityTimer=function(){g.networkQualityTimer&&clearInterval(g.networkQualityTimer)},g.networkQualityTrans=function(ce){return ce>=0&&ce<.17?1:ce>=.17&&ce<.36?2:ce>=.36&&ce<.59?3:ce>=.59&&ce<=1?4:ce>1?5:0},g.getStatsTimer=setInterval(function(){var ce=g.gatewayClient.traffic_stats,_e=Date.now();g.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(g.localStats).length&&g.exceptionMonitor.setLocalStats(g.localStats),Object.keys(g.remoteStats).length&&g.exceptionMonitor.setRemoteStats(g.remoteStats);var be={};Object.keys(g.gatewayClient.remoteStreams).forEach(function(Se){var Re=g.gatewayClient.remoteStreams[Se],Pe=g.remoteStats[Se],Oe={id:Se,updatedAt:_e};be[Se]=Oe,Oe.firstFrameTime=Re.firstFrameTime,Pe?(Oe.audioTotalPlayDuration=Pe.audioTotalPlayDuration+1,Oe.audioTotalFreezeTime=Pe.audioTotalFreezeTime,Oe.isAudioFreeze=!1,Oe.isAudioDecodeFailed=!1,Oe.videoTotalPlayDuration=Pe.videoTotalPlayDuration+1,Oe.videoTotalFreezeTime=Pe.videoTotalFreezeTime,Oe.isVideoFreeze=!1):(Oe.audioTotalPlayDuration=1,Oe.audioTotalFreezeTime=0,Oe.videoTotalPlayDuration=1,Oe.videoTotalFreezeTime=0);var Xe=ce&&ce.peer_delay&&ce.peer_delay.find(function(tt){return tt.peer_uid==Se});Xe&&(Oe.peer_delay=Xe),Re&&(Re.isPlaying()&&(Oe.audioDisabled=Re.userMuteAudio||Re.peerMuteAudio?"1":"0",Oe.videoDisabled=Re.userMuteVideo||Re.peerMuteVideo?"1":"0"),Pe&&Pe.peer_delay&&Xe&&Pe.peer_delay.stream_type!==Xe.stream_type&&g.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:Se,streamType:Xe.stream_type}),Re.pc&&"established"==Re.pc.state&&Re.pc.getStats(function(tt){if(Oe.pcStats=tt,Oe.audioStats=tt.find(function(vt){return"audio"==vt.mediaType&&(vt.id.indexOf("_recv")>-1||vt.id.toLowerCase().indexOf("inbound")>-1)}),Oe.videoStats=tt.find(function(vt){return"video"==vt.mediaType&&(vt.id.indexOf("_recv")>-1||vt.id.toLowerCase().indexOf("inbound")>-1)}),Pe&&Pe.audioStats&&Oe.audioStats){var Ze=parseInt(Oe.audioStats.bytesReceived)-parseInt(Pe.audioStats.bytesReceived),gt=parseInt(Oe.audioStats.googDecodingNormal)-parseInt(Pe.audioStats.googDecodingNormal);if(Oe.audioStats.audioRecvBytesDelta=Ze,Oe.audioStats.audioDecodingNormalDelta=gt,g.session.recvBytes+=Ze,isFinite(Ze)&&Oe.audioStats.timestamp){var at=Oe.audioStats.timestamp.getTime()-Pe.audioStats.timestamp.getTime();Oe.audioRecvBitrate=Math.floor(8*Ze/at)}g.isAudioFreeze(Oe.audioStats)&&Oe.audioTotalPlayDuration>10&&(Oe.audioTotalFreezeTime++,Oe.isAudioFreeze=!0),g.isAudioDecodeFailed(Oe.audioStats)&&Oe.audioTotalPlayDuration>10&&(Oe.isAudioDecodeFailed=!0),Oe.audioStats.audioTotalFreezeTime=Oe.audioTotalFreezeTime,Oe.audioStats.audioTotalPlayDuration=Oe.audioTotalPlayDuration,Oe.audioStats.audioFreezeRate=Math.ceil(100*Oe.audioTotalFreezeTime/Oe.audioTotalPlayDuration)}if(Pe&&Pe.videoStats&&Oe.videoStats){var Gt=parseInt(Oe.videoStats.bytesReceived)-parseInt(Pe.videoStats.bytesReceived);Oe.videoStats.videoRecvBytesDelta=Gt,g.session.recvBytes+=Gt,isFinite(Gt)&&Oe.videoStats.timestamp&&(at=Oe.videoStats.timestamp.getTime()-Pe.videoStats.timestamp.getTime(),Oe.videoRecvBitrate=Math.floor(8*Gt/at)),g.isRemoteVideoFreeze(Oe.videoStats,Pe.videoStats)&&(Oe.videoTotalFreezeTime++,Oe.isVideoFreeze=!0),Oe.videoStats.videoTotalFreezeTime=Oe.videoTotalFreezeTime,Oe.videoStats.videoTotalPlayDuration=Oe.videoTotalPlayDuration,Oe.videoStats.videoFreezeRate=Math.ceil(100*Oe.videoTotalFreezeTime/Oe.videoTotalPlayDuration),Re.player&&Re.player.video&&Re.player.video.videoWidth&&Re.player.video.videoHeight?(Oe.videoStats.renderRemoteWidth=Re.player.video.videoWidth,Oe.videoStats.renderRemoteHeight=Re.player.video.videoHeight):(Oe.videoStats.renderRemoteWidth=Re.videoWidth||Oe.videoStats.googFrameWidthReceived,Oe.videoStats.renderRemoteHeight=Re.videoHeight||Oe.videoStats.googFrameHeightReceived)}}))}),g.remoteStats=be;var ve={};if(Object.keys(g.gatewayClient.localStreams).forEach(function(Se){var Re=g.gatewayClient.localStreams[Se],Pe=g.localStats[Se],Oe={id:Se,updatedAt:_e};ve[Se]=Oe,Pe?(Oe.videoTotalPlayDuration=Pe.videoTotalPlayDuration+1,Oe.videoTotalFreezeTime=Pe.videoTotalFreezeTime,Oe.isVideoFreeze=!1):(Oe.videoTotalPlayDuration=1,Oe.videoTotalFreezeTime=0),Re&&(Re.isPlaying()&&(Oe.audioDisabled=Re.userMuteAudio?"1":"0",Oe.videoDisabled=Re.userMuteVideo?"1":"0"),Re.video&&Re.attributes.maxVideoBW?Oe.videoTargetSendBitrate=Re.attributes.maxVideoBW:Re.video&&Re.screenAttributes&&(Oe.videoTargetSendBitrate=Re.screenAttributes.maxVideoBW),Re.pc&&"established"==Re.pc.state&&Re.pc.getStats(function(Xe){if(Oe.pcStats=Xe.reverse(),Oe.audioStats=Xe.find(function(at){return"audio"==at.mediaType&&(at.id.indexOf("_send")>-1||at.id.toLowerCase().indexOf("outbound")>-1)}),Oe.videoStats=Xe.find(function(at){return"video"==at.mediaType&&(at.id.indexOf("_send")>-1||at.id.toLowerCase().indexOf("outbound")>-1)}),Oe.audioStats&&Pe&&Pe.audioStats){var tt=parseInt(Oe.audioStats.bytesSent)-parseInt(Pe.audioStats.bytesSent);if(Oe.audioStats.audioSendBytesDelta=tt,g.session.sendBytes+=tt,isFinite(tt)&&Oe.audioStats.timestamp){var Ze=Oe.audioStats.timestamp.getTime()-Pe.audioStats.timestamp.getTime();Oe.audioSendBitrate=Math.floor(8*tt/Ze)}}if(Oe.videoStats&&Pe&&Pe.videoStats){var gt=parseInt(Oe.videoStats.bytesSent)-parseInt(Pe.videoStats.bytesSent);Oe.videoStats.videoSendBytesDelta=gt,g.session.sendBytes+=gt,isFinite(gt)&&Oe.videoStats.timestamp&&(Ze=Oe.videoStats.timestamp.getTime()-Pe.videoStats.timestamp.getTime(),Oe.videoSendBitrate=Math.floor(8*gt/Ze)),g.isLocalVideoFreeze(Oe.videoStats,Pe.videoStats)&&(Oe.videoTotalFreezeTime++,Oe.isVideoFreeze=!0),Oe.videoStats.videoTotalFreezeTime=Oe.videoTotalFreezeTime,Oe.videoStats.videoTotalPlayDuration=Oe.videoTotalPlayDuration,Oe.videoStats.videoFreezeRate=Math.ceil(100*Oe.videoTotalFreezeTime/Oe.videoTotalPlayDuration),Oe.videoStats.renderLocalWidth=Re.videoWidth||Oe.videoStats.googFrameWidthSent,Oe.videoStats.renderLocalHeight=Re.videoHeight||Oe.videoStats.googFrameHeightSent}}))}),g.localStats=ve,g.session.HTTPSendBytesDelta=Object(d.getHTTPSendBytes)()-g.session.HTTPSendBytes,g.session.HTTPSendBytes=Object(d.getHTTPSendBytes)(),g.session.HTTPRecvBytesDelta=Object(d.getHTTPRecvBytes)()-g.session.HTTPRecvBytes,g.session.HTTPRecvBytes=Object(d.getHTTPRecvBytes)(),g.gatewayClient.socket&&g.gatewayClient.socket.state===g.gatewayClient.CONNECTED){var Z=g.gatewayClient.socket;g.session.WSSendBytesDelta=Z.getSendBytes()-g.session.WSSendBytes,g.session.WSSendBytes=Z.getSendBytes(),g.session.WSRecvBytesDelta=Z.getRecvBytes()-g.session.WSRecvBytes,g.session.WSRecvBytes=Z.getRecvBytes()}},1e3),g.gatewayClient.on("join",function(){g.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}}),g),L.configDistributManager=function(pe){var g={};return g.client=pe,g.client.gatewayClient&&g.client.gatewayClient.on("config-distribute",function(ce){var _e=ce.joinInfo,be=ce.config;if(be){Object(x.isEmpty)(be.uploadLog)||(Object(D.setParameter)("UPLOAD_LOG",be.uploadLog),M.report.reportApiInvoke(_e.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:be.uploadLog}})()),Object(x.isEmpty)(be.dualStream)||(pe.isDualStream=be.dualStream,M.report.reportApiInvoke(_e.sid,{name:"_configDistribute",options:{feature:"dualStream",value:be.dualStream}})()),Object(x.isEmpty)(be.streamFallbackOption)||g.client.gatewayClient&&g.client.gatewayClient.on("stream-subscribed",function(ve){var Z=ve.stream;Z?(g.client.gatewayClient.setStreamFallbackOption(Z,be.streamFallbackOption),M.report.reportApiInvoke(_e.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:be.streamFallbackOption,streamId:Z.getId()}})()):M.report.reportApiInvoke(_e.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:be.streamFallbackOption,streamId:Z.getId(),err:"invalid stream"}})()});try{R.default.debug("[".concat(pe.clientId,"] setParameter in distribution: ").concat(JSON.stringify(be))),Object.keys(be).map(function(ve){return Object(D.setParameter)(ve,be[ve])})}catch(ve){R.default.debug("[".concat(pe.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(be)))}}}),g}(L),Object(ue.addLiveStreamingCapability)(L,Ce),Ce.areaCode){var Qe=Ce.areaCode,ze=Ce.excludedArea,st=Object(F.getAreaCodeByConfig)({areaCode:Qe,excludedArea:ze});Object(D.setParameter)("AREA_SETTING",st);var ft=Object(F.getAreaDomainConfig)(st);Object.keys(ft).map(function(pe){var g=ft[pe];"LOG_UPLOAD_SERVER"==pe||"EVENT_REPORT_DOMAIN"==pe||"EVENT_REPORT_BACKUP_DOMAIN"==pe||"NGINX"==pe?Object(D.setParameter)(pe,g[0]):Object(D.setParameter)(pe,g)})}return Object(x.isEmpty)(Ce.turnServer)||L.setTurnServer(Ce.turnServer),Object(x.isEmpty)(Ce.proxyServer)||L.setProxyServer(Ce.proxyServer),"live"===L.mode&&(L.gatewayClient.role="audience"),"rtc"===L.mode&&(L.gatewayClient.role=me),L.gatewayClient.on("onMultiIP",function(pe){L.gatewayClient.closeGateway(),L.gatewayClient.socket=void 0,L.gatewayClient.hasChangeBGPAddress=!0,L.joinInfo.multiIP=pe.option,L.gatewayClient.state=de.a.CONNECTING;var g=function(ce){R.default.info("[".concat(L.clientId,"] Joining channel: ").concat(L.channel)),L.joinInfo.cid=ce.cid,L.joinInfo.uid||(L.joinInfo.uid=ce.uid),L.joinInfo.uni_lbs_ip=ce.uni_lbs_ip,L.joinInfo.gatewayAddr=ce.gateway_addr,L.onSuccess?L.gatewayClient.join(L.joinInfo,L.key,function(_e){R.default.info("[".concat(L.clientId,"] Join channel ").concat(L.channel," success"));var be=L.onSuccess;L.onSuccess=null,L.onFailure=null,be(_e)},L.onFailure):(L.gatewayClient.joinInfo=ie()({},L.joinInfo),L.gatewayClient.rejoin())};L.joinInfo.stringUid&&!L.joinInfo.uid?(L.userAccountReq&&!L.userAccountReq.isFinished()&&L.userAccountReq.cancel(),L.userAccountReq=Object(J.getUserAccount)(joinInfo,L.gatewayClient),L.userAccountReq.then(function(ce){R.default.error("getUserAccount Success ".concat(ce.url," ").concat(joinInfo.stringUid," => ").concat(ce.uid)),L.joinInfo.uid=ce.uid,Object(J.getGatewayList)(L.joinInfo,g,L.onFailure)}).catch(function(ce){R.default.error("getUserAccount rejected",ce),L.onFailure(ce)})):Object(J.getGatewayList)(L.joinInfo,g,L.onFailure)}),L.gatewayClient.on("rejoin-start",function(){L._renewSession(),M.report.sessionInit(Ce.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:L.channel,appid:Ce.appId,mode:Ce.mode,succ:!0})}),L.gatewayClient.on("recover",function(){L._renewSession(),console.log("recover",Ce.sessionId),M.report.sessionInit(Ce.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:L.channel,appid:Ce.appId,mode:Ce.mode,succ:!0})}),L.gatewayClient.on("rejoin",function(){var pe=L.highStreamState;if(R.default.debug("[".concat(L.clientId,"] Client local stream preState: ").concat(pe)),L.onSuccess){var g=L.onSuccess;L.onSuccess=null,L.onFailure=null,g(L.joinInfo.uid)}!L.highStream||0!==pe&&1!==pe||(R.default.info("[".concat(L.clientId,"] publish after rejoin")),L.highStreamState=2,L.lowStreamState=2,L.publish(L.highStream,function(ce){ce&&R.default.info("[".concat(L.clientId,"] "),ce)}))}),L.gatewayClient.on("streamPublished",function(pe){L.hasPublished||(L.hasPublished=!0,L.gatewayClient.dispatchEvent({type:"stream-published",stream:pe.stream,proxy:pe.proxy}))}),L.gatewayClient.on("pubP2PLost",function(pe){R.default.debug("[".concat(L.clientId,"] Start reconnect local peerConnection: ").concat(L.highStream.getId())),L.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:L.highStream.getId()}),1===L.highStreamState&&(L.highStreamState=0,L.lowStreamState=0),L._unpublish(L.highStream,function(){L._publish(L.highStream,function(){R.default.debug("[".concat(L.clientId,"] Reconnect local peerConnection success: ").concat(L.highStream.getId())),L.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:L.highStream.getId(),success:!0,reason:""})},function(g){R.default.debug("[".concat(L.clientId,"] Reconnect local peerConnection failed: ").concat(g)),L.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:L.highStream.getId(),success:!1,reason:g})},!0)},function(g){R.default.debug("[".concat(L.clientId,"] Reconnect local peerConnection failed: ").concat(g)),L.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:L.highStream.getId(),success:!1,reason:g})},!0)}),L.gatewayClient.on("subP2PLost",function(pe){R.default.debug("[".concat(L.clientId,"] Start reconnect remote peerConnection: ").concat(pe.stream.getId()," ").concat(pe.stream.subscribeOptions)),L.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:pe.stream.getId()});var g=pe.stream.subscribeOptions;console.log("Re-subscribe stream",g,pe.stream),L.gatewayClient.unsubscribe(pe.stream,function(){pe.stream.subscribeOptions=g,L.gatewayClient.subscribe(pe.stream,function(){R.default.debug("[".concat(L.clientId,"] Reconnect remote peerConnection success: ").concat(pe.stream.getId())),L.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:pe.stream.getId(),success:!0,reason:""})},function(ce){R.default.debug("[".concat(L.clientId,"] Reconnect remote peerConnection failed: "),ce),L.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:pe.stream.getId(),success:!1,reason:ce})})},function(ce){R.default.debug("[".concat(L.clientId,"] Reconnect remote peerConnection failed: "),ce),L.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:pe.stream.getId(),success:!1,reason:ce})})}),ee.on("networkTypeChanged",function(pe){L.gatewayClient&&L.gatewayClient.dispatchEvent(pe);var g=ie()({},pe,{type:"network-type-changed"});L.gatewayClient.dispatchEvent(g)}),_.a.on("recordingDeviceChanged",function(pe){L.gatewayClient&&L.gatewayClient.dispatchEvent(pe);var g=ie()({},pe,{type:"recording-device-changed"});L.gatewayClient.dispatchEvent(g)}),_.a.on("playoutDeviceChanged",function(pe){L.gatewayClient&&L.gatewayClient.dispatchEvent(pe);var g=ie()({},pe,{type:"playout-device-changed"});L.gatewayClient.dispatchEvent(g)}),_.a.on("cameraChanged",function(pe){L.gatewayClient&&L.gatewayClient.dispatchEvent(pe);var g=ie()({},pe,{type:"camera-changed"});L.gatewayClient.dispatchEvent(g)}),L.gatewayClient.on("streamTypeChange",function(pe){var g=ie()({},pe,{type:"stream-type-changed"});L.gatewayClient.dispatchEvent(g),M.report.reportApiInvoke(Ce.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(pe))}),L},je=function(Ce){switch(Ce){case"h264_interop":return"h264";default:return"vp8"}},Ue=function(Ce){return-1===I.indexOf(Ce.mode)?oe.default.INVALID_CLIENT_MODE:-1===S.indexOf(Ce.codec)?oe.default.INVALID_CLIENT_CODEC:"h264_interop"==Ce.mode&&"h264"!==Ce.codec&&oe.default.CLIENT_MODE_CODEC_MISMATCH},ke=function(Ce){switch(Ce.mode){case"interop":case"h264_interop":Ce.mode="live";break;case"web-only":Ce.mode="rtc"}},qe=_.a.getDevices,et=E.a.getScreenSources,h=JSON.parse(JSON.stringify(D.SUPPORT_RESOLUTION_LIST));le.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:{width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},createClient:function(Ce){var L=M.report.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(Ce=ie()({},Ce||{})).codec||(Ce.codec=je(Ce.mode));var xe=Ue(Ce);if(xe)throw R.default.error("Invalid parameter setting MODE: ".concat(Ce.mode," CODEC: ").concat(Ce.codec," ERROR ").concat(xe)),L(xe),new Error(xe);return R.default.info("Creating client, MODE: ".concat(Ce.mode," CODEC: ").concat(Ce.codec)),ke(Ce),L(null,Ce),fe(Ce)},createStream:p.b,Logger:R.default,report:M.report,getDevices:qe,getScreenSources:et,getParameter:D.getParameter,setParameter:D.setParameter,checkSystemRequirements:function(){var Ce=M.report.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),L=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,xe=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,Qe=window.WebSocket,ze=!!L&&!!xe&&!!Qe,st=!1;N.isChrome()&&N.getBrowserVersion()>=58&&"iOS"!==N.getBrowserOS()&&(st=!0),N.isFireFox()&&N.getBrowserVersion()>=56&&(st=!0),N.isOpera()&&N.getBrowserVersion()>=45&&(st=!0),N.isSafari()&&N.getBrowserVersion()>=11&&(st=!0),N.isEdge()&&(st=!0),(N.isWeChatBrowser()||N.isQQBrowser())&&"iOS"!==N.getBrowserOS()&&(st=!0),N.isSupportedPC()||N.isSupportedMobile()||(st=!1),R.default.debug(N.getBrowserInfo(),"isAPISupport: "+ze+", isVendorAndVersionSupport: "+st);var ft=ze&&st;return Ce(null,ft),ft},getSupportedCodec:k.getSupportedCodec,ChannelMediaRelayConfiguration:H.ChannelMediaRelayConfiguration,VERSION:D.VERSION,BUILD:D.BUILD,PROFILE_TABLE:h,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2,AREAS:F.AREAS,AREA_VERSION:"global"}}]).default},module.exports=le()},898:(ge,le,U)=>{"use strict";function D(r){return"function"==typeof r}let R=!1;const M={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else R&&console.log("RxJS: Back to a better error behavior. Thank you. <3");R=r},get useDeprecatedSynchronousErrorHandling(){return R}};function T(r){setTimeout(()=>{throw r},0)}const N={closed:!0,next(r){},error(r){if(M.useDeprecatedSynchronousErrorHandling)throw r;T(r)},complete(){}},v=Array.isArray||(r=>r&&"number"==typeof r.length);function A(r){return null!==r&&"object"==typeof r}const _=(()=>{function r(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,i)=>`${i+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r})();class E{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof E)n.remove(this);else if(null!==n)for(let a=0;a<n.length;++a)n[a].remove(this);if(D(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){t=a instanceof _?k(a.errors):[a]}}if(v(s)){let a=-1,c=s.length;for(;++a<c;){const l=s[a];if(A(l))try{l.unsubscribe()}catch(f){t=t||[],f instanceof _?t=t.concat(k(f.errors)):t.push(f)}}}if(t)throw new _(t)}add(t){let n=t;if(!t)return E.EMPTY;switch(typeof t){case"function":n=new E(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof E)){const s=n;n=new E,n._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof E){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}remove(t){const n=this._subscriptions;if(n){const i=n.indexOf(t);-1!==i&&n.splice(i,1)}}}var r;function k(r){return r.reduce((t,n)=>t.concat(n instanceof _?n.errors:n),[])}E.EMPTY=((r=new E).closed=!0,r);const H="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class S extends E{constructor(t,n,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=N;break;case 1:if(!t){this.destination=N;break}if("object"==typeof t){t instanceof S?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new B(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new B(this,t,n,i)}}[H](){return this}static create(t,n,i){const o=new S(t,n,i);return o.syncErrorThrowable=!1,o}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class B extends S{constructor(t,n,i,o){super(),this._parentSubscriber=t;let s,a=this;D(n)?s=n:n&&(s=n.next,i=n.error,o=n.complete,n!==N&&(a=Object.create(n),D(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=i,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;M.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:i}=M;if(this._error)i&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=t,n.syncErrorThrown=!0):T(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;T(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const n=()=>this._complete.call(this._context);M.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,n){try{t.call(this._context,n)}catch(i){if(this.unsubscribe(),M.useDeprecatedSynchronousErrorHandling)throw i;T(i)}}__tryOrSetError(t,n,i){if(!M.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(o){return M.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=o,t.syncErrorThrown=!0,!0):(T(o),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const V="function"==typeof Symbol&&Symbol.observable||"@@observable";function ie(r){return r}let ae=(()=>{class r{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const i=new r;return i.source=this,i.operator=n,i}subscribe(n,i,o){const{operator:s}=this,a=function(r,t,n){if(r){if(r instanceof S)return r;if(r[H])return r[H]()}return r||t||n?new S(r,t,n):new S(N)}(n,i,o);if(a.add(s?s.call(a,this.source):this.source||M.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),M.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(n){try{return this._subscribe(n)}catch(i){M.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=i),function(r){for(;r;){const{closed:t,destination:n,isStopped:i}=r;if(t||i)return!1;r=n&&n instanceof S?n:null}return!0}(n)?n.error(i):console.warn(i)}}forEach(n,i){return new(i=J(i))((o,s)=>{let a;a=this.subscribe(c=>{try{n(c)}catch(l){s(l),a&&a.unsubscribe()}},s,o)})}_subscribe(n){const{source:i}=this;return i&&i.subscribe(n)}[V](){return this}pipe(...n){return 0===n.length?this:function(r){return 0===r.length?ie:1===r.length?r[0]:function(n){return r.reduce((i,o)=>o(i),n)}}(n)(this)}toPromise(n){return new(n=J(n))((i,o)=>{let s;this.subscribe(a=>s=a,a=>o(a),()=>i(s))})}}return r.create=t=>new r(t),r})();function J(r){if(r||(r=M.Promise||Promise),!r)throw new Error("no Promise impl found");return r}const d=(()=>{function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r})();class W extends E{constructor(t,n){super(),this.subject=t,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,n=t.observers;if(this.subject=null,!n||0===n.length||t.isStopped||t.closed)return;const i=n.indexOf(this.subscriber);-1!==i&&n.splice(i,1)}}class y extends S{constructor(t){super(t),this.destination=t}}let u=(()=>{class r extends ae{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[H](){return new y(this)}lift(n){const i=new K(this,this);return i.operator=n,i}next(n){if(this.closed)throw new d;if(!this.isStopped){const{observers:i}=this,o=i.length,s=i.slice();for(let a=0;a<o;a++)s[a].next(n)}}error(n){if(this.closed)throw new d;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:i}=this,o=i.length,s=i.slice();for(let a=0;a<o;a++)s[a].error(n);this.observers.length=0}complete(){if(this.closed)throw new d;this.isStopped=!0;const{observers:n}=this,i=n.length,o=n.slice();for(let s=0;s<i;s++)o[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new d;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new d;return this.hasError?(n.error(this.thrownError),E.EMPTY):this.isStopped?(n.complete(),E.EMPTY):(this.observers.push(n),new W(this,n))}asObservable(){const n=new ae;return n.source=this,n}}return r.create=(t,n)=>new K(t,n),r})();class K extends u{constructor(t,n){super(),this.destination=t,this.source=n}next(t){const{destination:n}=this;n&&n.next&&n.next(t)}error(t){const{destination:n}=this;n&&n.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:n}=this;return n?this.source.subscribe(t):E.EMPTY}}function m(r){return r&&"function"==typeof r.schedule}function w(r,t){return function(i){if("function"!=typeof r)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new x(r,t))}}class x{constructor(t,n){this.project=t,this.thisArg=n}call(t,n){return n.subscribe(new ee(t,this.project,this.thisArg))}}class ee extends S{constructor(t,n,i){super(t),this.project=n,this.count=0,this.thisArg=i||this}_next(t){let n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(n)}}const ue=r=>t=>{for(let n=0,i=r.length;n<i&&!t.closed;n++)t.next(r[n]);t.complete()},q="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",me=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function fe(r){return!!r&&"function"!=typeof r.subscribe&&"function"==typeof r.then}const Ne=r=>{if(r&&"function"==typeof r[V])return(r=>t=>{const n=r[V]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)})(r);if(me(r))return ue(r);if(fe(r))return(r=>t=>(r.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,T),t))(r);if(r&&"function"==typeof r[q])return(r=>t=>{const n=r[q]();for(;;){let i;try{i=n.next()}catch(o){return t.error(o),t}if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(r);{const n=`You provided ${A(r)?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function ke(r,t){return new ae(n=>{const i=new E;let o=0;return i.add(t.schedule(function(){o!==r.length?(n.next(r[o++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function L(r,t){return t?function(r,t){if(null!=r){if(function(r){return r&&"function"==typeof r[V]}(r))return function(r,t){return new ae(n=>{const i=new E;return i.add(t.schedule(()=>{const o=r[V]();i.add(o.subscribe({next(s){i.add(t.schedule(()=>n.next(s)))},error(s){i.add(t.schedule(()=>n.error(s)))},complete(){i.add(t.schedule(()=>n.complete()))}}))})),i})}(r,t);if(fe(r))return function(r,t){return new ae(n=>{const i=new E;return i.add(t.schedule(()=>r.then(o=>{i.add(t.schedule(()=>{n.next(o),i.add(t.schedule(()=>n.complete()))}))},o=>{i.add(t.schedule(()=>n.error(o)))}))),i})}(r,t);if(me(r))return ke(r,t);if(function(r){return r&&"function"==typeof r[q]}(r)||"string"==typeof r)return function(r,t){if(!r)throw new Error("Iterable cannot be null");return new ae(n=>{const i=new E;let o;return i.add(()=>{o&&"function"==typeof o.return&&o.return()}),i.add(t.schedule(()=>{o=r[q](),i.add(t.schedule(function(){if(n.closed)return;let s,a;try{const c=o.next();s=c.value,a=c.done}catch(c){return void n.error(c)}a?n.complete():(n.next(s),this.schedule())}))})),i})}(r,t)}throw new TypeError((null!==r&&typeof r||r)+" is not observable")}(r,t):r instanceof ae?r:new ae(Ne(r))}class xe extends S{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ze extends S{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function ft(r,t){if(t.closed)return;if(r instanceof ae)return r.subscribe(t);let n;try{n=Ne(r)(t)}catch(i){t.error(i)}return n}function pe(r,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?i=>i.pipe(pe((o,s)=>L(r(o,s)).pipe(w((a,c)=>t(o,a,s,c))),n)):("number"==typeof t&&(n=t),i=>i.lift(new g(r,n)))}class g{constructor(t,n=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=n}call(t,n){return n.subscribe(new ce(t,this.project,this.concurrent))}}class ce extends ze{constructor(t,n,i=Number.POSITIVE_INFINITY){super(t),this.project=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let n;const i=this.index++;try{n=this.project(t,i)}catch(o){return void this.destination.error(o)}this.active++,this._innerSub(n)}_innerSub(t){const n=new xe(this),i=this.destination;i.add(n);const o=ft(t,n);o!==n&&i.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function be(r=Number.POSITIVE_INFINITY){return pe(ie,r)}function ve(r,t){return t?ke(r,t):new ae(ue(r))}function Z(...r){let t=Number.POSITIVE_INFINITY,n=null,i=r[r.length-1];return m(i)?(n=r.pop(),r.length>1&&"number"==typeof r[r.length-1]&&(t=r.pop())):"number"==typeof i&&(t=r.pop()),null===n&&1===r.length&&r[0]instanceof ae?r[0]:be(t)(ve(r,n))}function Se(){return function(t){return t.lift(new Re(t))}}class Re{constructor(t){this.connectable=t}call(t,n){const{connectable:i}=this;i._refCount++;const o=new Pe(t,i),s=n.subscribe(o);return o.closed||(o.connection=i.connect()),s}}class Pe extends S{constructor(t,n){super(t),this.connectable=n}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const n=t._refCount;if(n<=0)return void(this.connection=null);if(t._refCount=n-1,n>1)return void(this.connection=null);const{connection:i}=this,o=t._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()}}class Oe extends ae{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new E,t.add(this.source.subscribe(new tt(this.getSubject(),this))),t.closed&&(this._connection=null,t=E.EMPTY)),t}refCount(){return Se()(this)}}const Xe=(()=>{const r=Oe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}})();class tt extends y{constructor(t,n){super(t),this.connectable=n}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const n=t._connection;t._refCount=0,t._subject=null,t._connection=null,n&&n.unsubscribe()}}}function vt(){return new u}function _t(r){for(let t in r)if(r[t]===_t)return t;throw Error("Could not find renamed property on target object.")}function _r(r,t){for(const n in t)t.hasOwnProperty(n)&&!r.hasOwnProperty(n)&&(r[n]=t[n])}function It(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(It).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function xo(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const ma=_t({__forward_ref__:_t});function an(r){return r.__forward_ref__=an,r.toString=function(){return It(this())},r}function mt(r){return a1(r)?r():r}function a1(r){return"function"==typeof r&&r.hasOwnProperty(ma)&&r.__forward_ref__===an}class gs extends Error{constructor(t,n){super(function(r,t){return`${r?`NG0${r}: `:""}${t}`}(t,n)),this.code=t}}function Pt(r){return"string"==typeof r?r:null==r?"":String(r)}function yr(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Pt(r)}function Gu(r,t){const n=t?` in ${t}`:"";throw new gs("201",`No provider for ${yr(r)} found${n}`)}function Lr(r,t){null==r&&function(r,t,n,i){throw new Error(`ASSERTION ERROR: ${r}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}(t,r,null,"!=")}function $e(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function xt(r){return{providers:r.providers||[],imports:r.imports||[]}}function lo(r){return c1(r,zu)||c1(r,u1)}function c1(r,t){return r.hasOwnProperty(t)?r[t]:null}function l1(r){return r&&(r.hasOwnProperty(lp)||r.hasOwnProperty(ID))?r[lp]:null}const zu=_t({\u0275prov:_t}),lp=_t({\u0275inj:_t}),u1=_t({ngInjectableDef:_t}),ID=_t({ngInjectorDef:_t});var Et=(()=>((Et=Et||{})[Et.Default=0]="Default",Et[Et.Host=1]="Host",Et[Et.Self=2]="Self",Et[Et.SkipSelf=4]="SkipSelf",Et[Et.Optional=8]="Optional",Et))();let up;function Lo(r){const t=up;return up=r,t}function d1(r,t,n){const i=lo(r);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&Et.Optional?null:void 0!==t?t:void Gu(It(r),"Injector")}function Fo(r){return{toString:r}.toString()}var Jr=(()=>((Jr=Jr||{})[Jr.OnPush=0]="OnPush",Jr[Jr.Default=1]="Default",Jr))(),Fn=(()=>((Fn=Fn||{})[Fn.Emulated=0]="Emulated",Fn[Fn.None=2]="None",Fn[Fn.ShadowDom=3]="ShadowDom",Fn))();const DD="undefined"!=typeof globalThis&&globalThis,MD="undefined"!=typeof window&&window,ND="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,nn=DD||"undefined"!=typeof global&&global||MD||ND,_a={},ln=[],$u=_t({\u0275cmp:_t}),dp=_t({\u0275dir:_t}),fp=_t({\u0275pipe:_t}),f1=_t({\u0275mod:_t}),kD=_t({\u0275loc:_t}),uo=_t({\u0275fac:_t}),Jc=_t({__NG_ELEMENT_ID__:_t});let PD=0;function Vn(r){return Fo(()=>{const n={},i={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Jr.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||ln,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Fn.Emulated,id:"c",styles:r.styles||ln,_:null,setInput:null,schemas:r.schemas||null,tView:null},o=r.directives,s=r.features,a=r.pipes;return i.id+=PD++,i.inputs=m1(r.inputs,n),i.outputs=m1(r.outputs),s&&s.forEach(c=>c(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(h1):null,i.pipeDefs=a?()=>("function"==typeof a?a():a).map(p1):null,i})}function h1(r){return vr(r)||function(r){return r[dp]||null}(r)}function p1(r){return function(r){return r[fp]||null}(r)}const g1={};function Vt(r){return Fo(()=>{const t={type:r.type,bootstrap:r.bootstrap||ln,declarations:r.declarations||ln,imports:r.imports||ln,exports:r.exports||ln,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(g1[r.id]=r.type),t})}function m1(r,t){if(null==r)return _a;const n={};for(const i in r)if(r.hasOwnProperty(i)){let o=r[i],s=o;Array.isArray(o)&&(s=o[1],o=o[0]),n[o]=i,t&&(t[o]=s)}return n}const Ye=Vn;function Or(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function vr(r){return r[$u]||null}function Qr(r,t){const n=r[f1]||null;if(!n&&!0===t)throw new Error(`Type ${It(r)} does not have '\u0275mod' property.`);return n}function Vi(r){return Array.isArray(r)&&"object"==typeof r[1]}function yi(r){return Array.isArray(r)&&!0===r[1]}function gp(r){return 0!=(8&r.flags)}function Qu(r){return 2==(2&r.flags)}function Xu(r){return 1==(1&r.flags)}function vi(r){return null!==r.template}function BD(r){return 0!=(512&r[2])}function Es(r,t){return r.hasOwnProperty(uo)?r[uo]:null}class y1{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Pn(){return v1}function v1(r){return r.type.prototype.ngOnChanges&&(r.setInput=GD),qD}function qD(){const r=b1(this),t=null==r?void 0:r.current;if(t){const n=r.previous;if(n===_a)r.previous=t;else for(let i in t)n[i]=t[i];r.current=null,this.ngOnChanges(t)}}function GD(r,t,n,i){const o=b1(r)||function(r,t){return r[E1]=t}(r,{previous:_a,current:null}),s=o.current||(o.current={}),a=o.previous,c=this.declaredInputs[n],l=a[c];s[c]=new y1(l&&l.currentValue,t,a===_a),r[i]=t}Pn.ngInherit=!0;const E1="__ngSimpleChanges__";function b1(r){return r[E1]||null}let yp;function In(r){return!!r.listen}const w1={createRenderer:(r,t)=>void 0!==yp?yp:"undefined"!=typeof document?document:void 0};function Un(r){for(;Array.isArray(r);)r=r[0];return r}function Zu(r,t){return Un(t[r])}function ei(r,t){return Un(t[r.index])}function Ep(r,t){return r.data[t]}function Vr(r,t){const n=t[r];return Vi(n)?n:n[0]}function T1(r){return 4==(4&r[2])}function bp(r){return 128==(128&r[2])}function Uo(r,t){return null==t?null:r[t]}function A1(r){r[18]=0}function Sp(r,t){r[5]+=t;let n=r,i=r[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const Ot={lFrame:P1(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function R1(){return Ot.bindingsEnabled}function We(){return Ot.lFrame.lView}function Xt(){return Ot.lFrame.tView}function $n(){let r=I1();for(;null!==r&&64===r.type;)r=r.parent;return r}function I1(){return Ot.lFrame.currentTNode}function Ui(r,t){const n=Ot.lFrame;n.currentTNode=r,n.isParent=t}function Cp(){return Ot.lFrame.isParent}function wp(){Ot.lFrame.isParent=!1}function ed(){return Ot.isInCheckNoChangesMode}function td(r){Ot.isInCheckNoChangesMode=r}function Ca(){return Ot.lFrame.bindingIndex++}function sM(r,t){const n=Ot.lFrame;n.bindingIndex=n.bindingRootIndex=r,Tp(t)}function Tp(r){Ot.lFrame.currentDirectiveIndex=r}function M1(){return Ot.lFrame.currentQueryIndex}function Rp(r){Ot.lFrame.currentQueryIndex=r}function cM(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function N1(r,t,n){if(n&Et.SkipSelf){let o=t,s=r;for(;!(o=o.parent,null!==o||n&Et.Host||(o=cM(s),null===o||(s=s[15],10&o.type))););if(null===o)return!1;t=o,r=s}const i=Ot.lFrame=k1();return i.currentTNode=t,i.lView=r,!0}function nd(r){const t=k1(),n=r[1];Ot.lFrame=t,t.currentTNode=n.firstChild,t.lView=r,t.tView=n,t.contextLView=r,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function k1(){const r=Ot.lFrame,t=null===r?null:r.child;return null===t?P1(r):t}function P1(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function x1(){const r=Ot.lFrame;return Ot.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const L1=x1;function rd(){const r=x1();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function br(){return Ot.lFrame.selectedIndex}function jo(r){Ot.lFrame.selectedIndex=r}function On(){const r=Ot.lFrame;return Ep(r.tView,r.selectedIndex)}function id(r,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const s=r.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:f,ngOnDestroy:b}=s;a&&(r.contentHooks||(r.contentHooks=[])).push(-n,a),c&&((r.contentHooks||(r.contentHooks=[])).push(n,c),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(n,c)),l&&(r.viewHooks||(r.viewHooks=[])).push(-n,l),f&&((r.viewHooks||(r.viewHooks=[])).push(n,f),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(n,f)),null!=b&&(r.destroyHooks||(r.destroyHooks=[])).push(n,b)}}function od(r,t,n){V1(r,t,3,n)}function sd(r,t,n,i){(3&r[2])===n&&V1(r,t,n,i)}function Ip(r,t){let n=r[2];(3&n)===t&&(n&=2047,n+=1,r[2]=n)}function V1(r,t,n,i){const s=null!=i?i:-1,a=t.length-1;let c=0;for(let l=void 0!==i?65535&r[18]:0;l<a;l++)if("number"==typeof t[l+1]){if(c=t[l],null!=i&&c>=i)break}else t[l]<0&&(r[18]+=65536),(c<s||-1==s)&&(mM(r,n,t,l),r[18]=(4294901760&r[18])+l+2),l++}function mM(r,t,n,i){const o=n[i]<0,s=n[i+1],c=r[o?-n[i]:n[i]];if(o){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{s.call(c)}finally{}}}else try{s.call(c)}finally{}}class tl{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function ad(r,t,n){const i=In(r);let o=0;for(;o<n.length;){const s=n[o];if("number"==typeof s){if(0!==s)break;o++;const a=n[o++],c=n[o++],l=n[o++];i?r.setAttribute(t,c,l,a):t.setAttributeNS(a,c,l)}else{const a=s,c=n[++o];Dp(a)?i&&r.setProperty(t,a,c):i?r.setAttribute(t,a,c):t.setAttribute(a,c),o++}}return o}function U1(r){return 3===r||4===r||6===r}function Dp(r){return 64===r.charCodeAt(0)}function cd(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const o=t[i];"number"==typeof o?n=o:0===n||j1(r,n,o,null,-1===n||2===n?t[++i]:null)}}return r}function j1(r,t,n,i,o){let s=0,a=r.length;if(-1===t)a=-1;else for(;s<r.length;){const c=r[s++];if("number"==typeof c){if(c===t){a=-1;break}if(c>t){a=s-1;break}}}for(;s<r.length;){const c=r[s];if("number"==typeof c)break;if(c===n){if(null===i)return void(null!==o&&(r[s+1]=o));if(i===r[s+1])return void(r[s+2]=o)}s++,null!==i&&s++,null!==o&&s++}-1!==a&&(r.splice(a,0,t),s=a+1),r.splice(s++,0,n),null!==i&&r.splice(s++,0,i),null!==o&&r.splice(s++,0,o)}function B1(r){return-1!==r}function wa(r){return 32767&r}function Ta(r,t){let n=function(r){return r>>16}(r),i=t;for(;n>0;)i=i[15],n--;return i}let Mp=!0;function ld(r){const t=Mp;return Mp=r,t}let SM=0;function rl(r,t){const n=kp(r,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(r.injectorIndex=t.length,Np(i.data,r),Np(t,null),Np(i.blueprint,null));const o=ud(r,t),s=r.injectorIndex;if(B1(o)){const a=wa(o),c=Ta(o,t),l=c[1].data;for(let f=0;f<8;f++)t[s+f]=c[a+f]|l[a+f]}return t[s+8]=o,s}function Np(r,t){r.push(0,0,0,0,0,0,0,0,t)}function kp(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function ud(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let n=0,i=null,o=t;for(;null!==o;){const s=o[1],a=s.type;if(i=2===a?s.declTNode:1===a?o[6]:null,null===i)return-1;if(n++,o=o[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function dd(r,t,n){!function(r,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Jc)&&(i=n[Jc]),null==i&&(i=n[Jc]=SM++);const o=255&i;t.data[r+(o>>5)]|=1<<o}(r,t,n)}function q1(r,t,n){if(n&Et.Optional)return r;Gu(t,"NodeInjector")}function G1(r,t,n,i){if(n&Et.Optional&&void 0===i&&(i=null),0==(n&(Et.Self|Et.Host))){const o=r[9],s=Lo(void 0);try{return o?o.get(t,i,n&Et.Optional):d1(t,i,n&Et.Optional)}finally{Lo(s)}}return q1(i,t,n)}function z1(r,t,n,i=Et.Default,o){if(null!==r){const s=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(Jc)?r[Jc]:void 0;return"number"==typeof t?t>=0?255&t:TM:t}(n);if("function"==typeof s){if(!N1(t,r,i))return i&Et.Host?q1(o,n,i):G1(t,n,i,o);try{const a=s(i);if(null!=a||i&Et.Optional)return a;Gu(n)}finally{L1()}}else if("number"==typeof s){let a=null,c=kp(r,t),l=-1,f=i&Et.Host?t[16][6]:null;for((-1===c||i&Et.SkipSelf)&&(l=-1===c?ud(r,t):t[c+8],-1!==l&&Y1(i,!1)?(a=t[1],c=wa(l),t=Ta(l,t)):c=-1);-1!==c;){const b=t[1];if(K1(s,c,b.data)){const O=AM(c,t,n,a,i,f);if(O!==$1)return O}l=t[c+8],-1!==l&&Y1(i,t[1].data[c+8]===f)&&K1(s,c,t)?(a=b,c=wa(l),t=Ta(l,t)):c=-1}}}return G1(t,n,i,o)}const $1={};function TM(){return new Aa($n(),We())}function AM(r,t,n,i,o,s){const a=t[1],c=a.data[r+8],b=fd(c,a,n,null==i?Qu(c)&&Mp:i!=a&&0!=(3&c.type),o&Et.Host&&s===c);return null!==b?il(t,a,b,c):$1}function fd(r,t,n,i,o){const s=r.providerIndexes,a=t.data,c=1048575&s,l=r.directiveStart,b=s>>20,j=o?c+b:r.directiveEnd;for(let z=i?c:c+b;z<j;z++){const $=a[z];if(z<l&&n===$||z>=l&&$.type===n)return z}if(o){const z=a[l];if(z&&vi(z)&&z.type===n)return l}return null}function il(r,t,n,i){let o=r[n];const s=t.data;if(function(r){return r instanceof tl}(o)){const a=o;a.resolving&&function(r,t){throw new gs("200",`Circular dependency in DI detected for ${r}`)}(yr(s[n]));const c=ld(a.canSeeViewProviders);a.resolving=!0;const l=a.injectImpl?Lo(a.injectImpl):null;N1(r,i,Et.Default);try{o=r[n]=a.factory(void 0,s,r,i),t.firstCreatePass&&n>=i.directiveStart&&function(r,t,n){const{ngOnChanges:i,ngOnInit:o,ngDoCheck:s}=t.type.prototype;if(i){const a=v1(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(r,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(r,a)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-r,o),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(r,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(r,s))}(n,s[n],t)}finally{null!==l&&Lo(l),ld(c),a.resolving=!1,L1()}}return o}function K1(r,t,n){return!!(n[t+(r>>5)]&1<<r)}function Y1(r,t){return!(r&Et.Self||r&Et.Host&&t)}class Aa{constructor(t,n){this._tNode=t,this._lView=n}get(t,n){return z1(this._tNode,this._lView,t,void 0,n)}}function ir(r){return Fo(()=>{const t=r.prototype.constructor,n=t[uo]||Pp(t),i=Object.prototype;let o=Object.getPrototypeOf(r.prototype).constructor;for(;o&&o!==i;){const s=o[uo]||Pp(o);if(s&&s!==n)return s;o=Object.getPrototypeOf(o)}return s=>new s})}function Pp(r){return a1(r)?()=>{const t=Pp(mt(r));return t&&t()}:Es(r)}function Ss(r){return function(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const n=r.attrs;if(n){const i=n.length;let o=0;for(;o<i;){const s=n[o];if(U1(s))break;if(0===s)o+=2;else if("number"==typeof s)for(o++;o<i&&"string"==typeof n[o];)o++;else{if(s===t)return n[o+1];o+=2}}}return null}($n(),r)}const Ia="__parameters__";function Cs(r,t,n){return Fo(()=>{const i=function(r){return function(...n){if(r){const i=r(...n);for(const o in i)this[o]=i[o]}}}(t);function o(...s){if(this instanceof o)return i.apply(this,s),this;const a=new o(...s);return c.annotation=a,c;function c(l,f,b){const O=l.hasOwnProperty(Ia)?l[Ia]:Object.defineProperty(l,Ia,{value:[]})[Ia];for(;O.length<=b;)O.push(null);return(O[b]=O[b]||[]).push(a),l}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=r,o.annotationCls=o,o})}class ut{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=$e({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const DM=new ut("AnalyzeForEntryComponents"),hd=Function;function ti(r,t){void 0===t&&(t=r);for(let n=0;n<r.length;n++){let i=r[n];Array.isArray(i)?(t===r&&(t=r.slice(0,n)),ti(i,t)):t!==r&&t.push(i)}return t}function Bi(r,t){r.forEach(n=>Array.isArray(n)?Bi(n,t):t(n))}function gd(r,t,n){t>=r.length?r.push(n):r.splice(t,0,n)}function ws(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function Ho(r,t){const n=[];for(let i=0;i<r;i++)n.push(t);return n}function Ur(r,t,n){let i=Da(r,t);return i>=0?r[1|i]=n:(i=~i,function(r,t,n,i){let o=r.length;if(o==t)r.push(n,i);else if(1===o)r.push(i,r[0]),r[0]=n;else{for(o--,r.push(r[o-1],r[o]);o>t;)r[o]=r[o-2],o--;r[t]=n,r[t+1]=i}}(r,i,t,n)),i}function Lp(r,t){const n=Da(r,t);if(n>=0)return r[1|n]}function Da(r,t){return function(r,t,n){let i=0,o=r.length>>n;for(;o!==i;){const s=i+(o-i>>1),a=r[s<<n];if(t===a)return s<<n;a>t?o=s:i=s+1}return~(o<<n)}(r,t,1)}const cl={},Vp="__NG_DI_FLAG__",Ma="ngTempTokenPath",jM=/\n/gm,Up="__source",jp=_t({provide:String,useValue:_t});let ll;function Na(r){const t=ll;return ll=r,t}function HM(r,t=Et.Default){if(void 0===ll)throw new Error("inject() must be called from an injection context");return null===ll?d1(r,void 0,t):ll.get(r,t&Et.Optional?null:void 0,t)}function De(r,t=Et.Default){return(up||HM)(mt(r),t)}const tE=De;function Ts(r){const t=[];for(let n=0;n<r.length;n++){const i=mt(r[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let o,s=Et.Default;for(let a=0;a<i.length;a++){const c=i[a],l=WM(c);"number"==typeof l?-1===l?o=c.token:s|=l:o=c}t.push(De(o,s))}else t.push(De(i))}return t}function ul(r,t){return r[Vp]=t,r.prototype[Vp]=t,r}function WM(r){return r[Vp]}function nE(r,t,n,i){const o=r[Ma];throw t[Up]&&o.unshift(t[Up]),r.message=function(r,t,n,i=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let o=It(t);if(Array.isArray(t))o=t.map(It).join(" -> ");else if("object"==typeof t){let s=[];for(let a in t)if(t.hasOwnProperty(a)){let c=t[a];s.push(a+":"+("string"==typeof c?JSON.stringify(c):It(c)))}o=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${o}]: ${r.replace(jM,"\n  ")}`}("\n"+r.message,o,n,i),r.ngTokenPath=o,r[Ma]=null,r}const ka=ul(Cs("Inject",r=>({token:r})),-1),Mr=ul(Cs("Optional"),8),Wo=ul(Cs("SkipSelf"),4);const bE="__ngContext__";function lr(r,t){r[bE]=t}function Jp(r){const t=function(r){return r[bE]||null}(r);return t?Array.isArray(t)?t:t.lView:null}function Sd(r){return r.ngOriginalError}function LN(r,...t){r.error(...t)}class Rs{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),i=this._findContext(t),o=function(r){return r&&r.ngErrorLogger||LN}(t);o(this._console,"ERROR",t),n&&o(this._console,"ORIGINAL ERROR",n),i&&o(this._console,"ERROR CONTEXT",i)}_findContext(t){return t?function(r){return r.ngDebugContext}(t)||this._findContext(Sd(t)):null}_findOriginalError(t){let n=t&&Sd(t);for(;n&&Sd(n);)n=Sd(n);return n||null}}const DE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(nn))();function qi(r){return r instanceof Function?r():r}var Br=(()=>((Br=Br||{})[Br.Important=1]="Important",Br[Br.DashCase=2]="DashCase",Br))();function Zp(r,t){return undefined(r,t)}function ml(r){const t=r[3];return yi(t)?t[3]:t}function eg(r){return xE(r[13])}function tg(r){return xE(r[4])}function xE(r){for(;null!==r&&!yi(r);)r=r[4];return r}function Fa(r,t,n,i,o){if(null!=i){let s,a=!1;yi(i)?s=i:Vi(i)&&(a=!0,i=i[0]);const c=Un(i);0===r&&null!==n?null==o?BE(t,n,c):Is(t,n,c,o||null,!0):1===r&&null!==n?Is(t,n,c,o||null,!0):2===r?function(r,t,n){const i=wd(r,t);i&&function(r,t,n,i){In(r)?r.removeChild(t,n,i):t.removeChild(n)}(r,i,t,n)}(t,c,a):3===r&&t.destroyNode(c),null!=s&&function(r,t,n,i,o){const s=n[7];s!==Un(n)&&Fa(t,r,i,s,o);for(let c=10;c<n.length;c++){const l=n[c];_l(l[1],l,r,t,i,s)}}(t,r,s,n,o)}}function rg(r,t,n){return In(r)?r.createElement(t,n):null===n?r.createElement(t):r.createElementNS(n,t)}function FE(r,t){const n=r[9],i=n.indexOf(t),o=t[3];1024&t[2]&&(t[2]&=-1025,Sp(o,-1)),n.splice(i,1)}function ig(r,t){if(r.length<=10)return;const n=10+t,i=r[n];if(i){const o=i[17];null!==o&&o!==r&&FE(o,i),t>0&&(r[n-1][4]=i[4]);const s=ws(r,10+t);!function(r,t){_l(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const a=s[19];null!==a&&a.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function VE(r,t){if(!(256&t[2])){const n=t[11];In(n)&&n.destroyNode&&_l(r,t,n,3,null,null),function(r){let t=r[13];if(!t)return og(r[1],r);for(;t;){let n=null;if(Vi(t))n=t[13];else{const i=t[10];i&&(n=i)}if(!n){for(;t&&!t[4]&&t!==r;)Vi(t)&&og(t[1],t),t=t[3];null===t&&(t=r),Vi(t)&&og(t[1],t),n=t&&t[4]}t=n}}(t)}}function og(r,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(r,t){let n;if(null!=r&&null!=(n=r.destroyHooks))for(let i=0;i<n.length;i+=2){const o=t[n[i]];if(!(o instanceof tl)){const s=n[i+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const c=o[s[a]],l=s[a+1];try{l.call(c)}finally{}}else try{s.call(o)}finally{}}}}(r,t),function(r,t){const n=r.cleanup,i=t[7];let o=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+1],c="function"==typeof a?a(t):Un(t[a]),l=i[o=n[s+2]],f=n[s+3];"boolean"==typeof f?c.removeEventListener(n[s],l,f):f>=0?i[o=f]():i[o=-f].unsubscribe(),s+=2}else{const a=i[o=n[s+1]];n[s].call(a)}if(null!==i){for(let s=o+1;s<i.length;s++)i[s]();t[7]=null}}(r,t),1===t[1].type&&In(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&yi(t[3])){n!==t[3]&&FE(n,t);const i=t[19];null!==i&&i.detachView(r)}}}function UE(r,t,n){return function(r,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[0];if(2&i.flags){const o=r.data[i.directiveStart].encapsulation;if(o===Fn.None||o===Fn.Emulated)return null}return ei(i,n)}(r,t.parent,n)}function Is(r,t,n,i,o){In(r)?r.insertBefore(t,n,i,o):t.insertBefore(n,i,o)}function BE(r,t,n){In(r)?r.appendChild(t,n):t.appendChild(n)}function HE(r,t,n,i,o){null!==i?Is(r,t,n,i,o):BE(r,t,n)}function wd(r,t){return In(r)?r.parentNode(t):t.parentNode}function WE(r,t,n){return GE(r,t,n)}let GE=function(r,t,n){return 40&r.type?ei(r,n):null};function Td(r,t,n,i){const o=UE(r,i,t),s=t[11],c=WE(i.parent||t[6],i,t);if(null!=o)if(Array.isArray(n))for(let l=0;l<n.length;l++)HE(s,o,n[l],c,!1);else HE(s,o,n,c,!1)}function Ad(r,t){if(null!==t){const n=t.type;if(3&n)return ei(t,r);if(4&n)return ag(-1,r[t.index]);if(8&n){const i=t.child;if(null!==i)return Ad(r,i);{const o=r[t.index];return yi(o)?ag(-1,o):Un(o)}}if(32&n)return Zp(t,r)()||Un(r[t.index]);{const i=$E(r,t);return null!==i?Array.isArray(i)?i[0]:Ad(ml(r[16]),i):Ad(r,t.next)}}return null}function $E(r,t){return null!==t?r[16][6].projection[t.projection]:null}function ag(r,t){const n=10+r+1;if(n<t.length){const i=t[n],o=i[1].firstChild;if(null!==o)return Ad(i,o)}return t[7]}function cg(r,t,n,i,o,s,a){for(;null!=n;){const c=i[n.index],l=n.type;if(a&&0===t&&(c&&lr(Un(c),i),n.flags|=4),64!=(64&n.flags))if(8&l)cg(r,t,n.child,i,o,s,!1),Fa(t,r,o,c,s);else if(32&l){const f=Zp(n,i);let b;for(;b=f();)Fa(t,r,o,b,s);Fa(t,r,o,c,s)}else 16&l?YE(r,t,i,n,o,s):Fa(t,r,o,c,s);n=a?n.projectionNext:n.next}}function _l(r,t,n,i,o,s){cg(n,i,r.firstChild,t,o,s,!1)}function YE(r,t,n,i,o,s){const a=n[16],l=a[6].projection[i.projection];if(Array.isArray(l))for(let f=0;f<l.length;f++)Fa(t,r,o,l[f],s);else cg(r,t,l,a[3],o,s,!0)}function JE(r,t,n){In(r)?r.setAttribute(t,"style",n):t.style.cssText=n}function lg(r,t,n){In(r)?""===n?r.removeAttribute(t,"class"):r.setAttribute(t,"class",n):t.className=n}function QE(r,t,n){let i=r.length;for(;;){const o=r.indexOf(t,n);if(-1===o)return o;if(0===o||r.charCodeAt(o-1)<=32){const s=t.length;if(o+s===i||r.charCodeAt(o+s)<=32)return o}n=o+1}}const XE="ng-template";function ck(r,t,n){let i=0;for(;i<r.length;){let o=r[i++];if(n&&"class"===o){if(o=r[i],-1!==QE(o.toLowerCase(),t,0))return!0}else if(1===o){for(;i<r.length&&"string"==typeof(o=r[i++]);)if(o.toLowerCase()===t)return!0;return!1}}return!1}function ZE(r){return 4===r.type&&r.value!==XE}function lk(r,t,n){return t===(4!==r.type||n?r.value:XE)}function uk(r,t,n){let i=4;const o=r.attrs||[],s=function(r){for(let t=0;t<r.length;t++)if(U1(r[t]))return t;return r.length}(o);let a=!1;for(let c=0;c<t.length;c++){const l=t[c];if("number"!=typeof l){if(!a)if(4&i){if(i=2|1&i,""!==l&&!lk(r,l,n)||""===l&&1===t.length){if(Ei(i))return!1;a=!0}}else{const f=8&i?l:t[++c];if(8&i&&null!==r.attrs){if(!ck(r.attrs,f,n)){if(Ei(i))return!1;a=!0}continue}const O=dk(8&i?"class":l,o,ZE(r),n);if(-1===O){if(Ei(i))return!1;a=!0;continue}if(""!==f){let j;j=O>s?"":o[O+1].toLowerCase();const z=8&i?j:null;if(z&&-1!==QE(z,f,0)||2&i&&f!==j){if(Ei(i))return!1;a=!0}}}}else{if(!a&&!Ei(i)&&!Ei(l))return!1;if(a&&Ei(l))continue;a=!1,i=l|1&i}}return Ei(i)||a}function Ei(r){return 0==(1&r)}function dk(r,t,n,i){if(null===t)return-1;let o=0;if(i||!n){let s=!1;for(;o<t.length;){const a=t[o];if(a===r)return o;if(3===a||6===a)s=!0;else{if(1===a||2===a){let c=t[++o];for(;"string"==typeof c;)c=t[++o];continue}if(4===a)break;if(0===a){o+=4;continue}}o+=s?1:2}return-1}return function(r,t){let n=r.indexOf(4);if(n>-1)for(n++;n<r.length;){const i=r[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,r)}function eb(r,t,n=!1){for(let i=0;i<t.length;i++)if(uk(r,t[i],n))return!0;return!1}function gk(r,t){e:for(let n=0;n<t.length;n++){const i=t[n];if(r.length===i.length){for(let o=0;o<r.length;o++)if(r[o]!==i[o])continue e;return!0}}return!1}function tb(r,t){return r?":not("+t.trim()+")":t}function mk(r){let t=r[0],n=1,i=2,o="",s=!1;for(;n<r.length;){let a=r[n];if("string"==typeof a)if(2&i){const c=r[++n];o+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else 8&i?o+="."+a:4&i&&(o+=" "+a);else""!==o&&!Ei(a)&&(t+=tb(s,o),o=""),i=a,s=s||!Ei(i);n++}return""!==o&&(t+=tb(s,o)),t}const Mt={};function Lt(r){nb(Xt(),We(),br()+r,ed())}function nb(r,t,n,i){if(!i)if(3==(3&t[2])){const s=r.preOrderCheckHooks;null!==s&&od(t,s,n)}else{const s=r.preOrderHooks;null!==s&&sd(t,s,0,n)}jo(n)}function Rd(r,t){return r<<17|t<<2}function bi(r){return r>>17&32767}function ug(r){return 2|r}function ho(r){return(131068&r)>>2}function dg(r,t){return-131069&r|t<<2}function fg(r){return 1|r}function fb(r,t){const n=r.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const o=n[i],s=n[i+1];if(-1!==s){const a=r.data[s];Rp(o),a.contentQueries(2,t[s],s)}}}function yl(r,t,n,i,o,s,a,c,l,f){const b=t.blueprint.slice();return b[0]=o,b[2]=140|i,A1(b),b[3]=b[15]=r,b[8]=n,b[10]=a||r&&r[10],b[11]=c||r&&r[11],b[12]=l||r&&r[12]||null,b[9]=f||r&&r[9]||null,b[6]=s,b[16]=2==t.type?r[16]:b,b}function Va(r,t,n,i,o){let s=r.data[t];if(null===s)s=function(r,t,n,i,o){const s=I1(),a=Cp(),l=r.data[t]=function(r,t,n,i,o,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,n,t,i,o);return null===r.firstChild&&(r.firstChild=l),null!==s&&(a?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(r,t,n,i,o),Ot.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=i,s.attrs=o;const a=function(){const r=Ot.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return Ui(s,!0),s}function Ua(r,t,n,i){if(0===n)return-1;const o=t.length;for(let s=0;s<n;s++)t.push(i),r.blueprint.push(i),r.data.push(null);return o}function vl(r,t,n){nd(t);try{const i=r.viewQuery;null!==i&&Ig(1,i,n);const o=r.template;null!==o&&hb(r,t,o,1,n),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&fb(r,t),r.staticViewQueries&&Ig(2,r.viewQuery,n);const s=r.components;null!==s&&function(r,t){for(let n=0;n<t.length;n++)Yk(r,t[n])}(t,s)}catch(i){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),i}finally{t[2]&=-5,rd()}}function ja(r,t,n,i){const o=t[2];if(256==(256&o))return;nd(t);const s=ed();try{A1(t),function(r){Ot.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==n&&hb(r,t,n,2,i);const a=3==(3&o);if(!s)if(a){const f=r.preOrderCheckHooks;null!==f&&od(t,f,null)}else{const f=r.preOrderHooks;null!==f&&sd(t,f,0,null),Ip(t,0)}if(function(r){for(let t=eg(r);null!==t;t=tg(t)){if(!t[2])continue;const n=t[9];for(let i=0;i<n.length;i++){const o=n[i],s=o[3];0==(1024&o[2])&&Sp(s,1),o[2]|=1024}}}(t),function(r){for(let t=eg(r);null!==t;t=tg(t))for(let n=10;n<t.length;n++){const i=t[n],o=i[1];bp(i)&&ja(o,i,o.template,i[8])}}(t),null!==r.contentQueries&&fb(r,t),!s)if(a){const f=r.contentCheckHooks;null!==f&&od(t,f)}else{const f=r.contentHooks;null!==f&&sd(t,f,1),Ip(t,1)}!function(r,t){const n=r.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)jo(~o);else{const s=o,a=n[++i],c=n[++i];sM(a,s),c(2,t[s])}}}finally{jo(-1)}}(r,t);const c=r.components;null!==c&&function(r,t){for(let n=0;n<t.length;n++)Kk(r,t[n])}(t,c);const l=r.viewQuery;if(null!==l&&Ig(2,l,i),!s)if(a){const f=r.viewCheckHooks;null!==f&&od(t,f)}else{const f=r.viewHooks;null!==f&&sd(t,f,2),Ip(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Sp(t[3],-1))}finally{rd()}}function Ok(r,t,n,i){const o=t[10],s=!ed(),a=T1(t);try{s&&!a&&o.begin&&o.begin(),a&&vl(r,t,i),ja(r,t,n,i)}finally{s&&!a&&o.end&&o.end()}}function hb(r,t,n,i,o){const s=br(),a=2&i;try{jo(-1),a&&t.length>20&&nb(r,t,20,ed()),n(i,o)}finally{jo(s)}}function pb(r,t,n){if(gp(t)){const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=r.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}}function Eg(r,t,n){!R1()||(function(r,t,n,i){const o=n.directiveStart,s=n.directiveEnd;r.firstCreatePass||rl(n,t),lr(i,t);const a=n.initialInputs;for(let c=o;c<s;c++){const l=r.data[c],f=vi(l);f&&Wk(t,n,l);const b=il(t,r,c,n);lr(b,t),null!==a&&qk(0,c-o,b,l,0,a),f&&(Vr(n.index,t)[8]=b)}}(r,t,n,ei(n,t)),128==(128&n.flags)&&function(r,t,n){const i=n.directiveStart,o=n.directiveEnd,a=n.index,c=Ot.lFrame.currentDirectiveIndex;try{jo(a);for(let l=i;l<o;l++){const f=r.data[l],b=t[l];Tp(l),(null!==f.hostBindings||0!==f.hostVars||null!==f.hostAttrs)&&Sb(f,b)}}finally{jo(-1),Tp(c)}}(r,t,n))}function bg(r,t,n=ei){const i=t.localNames;if(null!==i){let o=t.index+1;for(let s=0;s<i.length;s+=2){const a=i[s+1],c=-1===a?n(t,r):r[a];r[o++]=c}}}function gb(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=Dd(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function Dd(r,t,n,i,o,s,a,c,l,f){const b=20+i,O=b+o,j=function(r,t){const n=[];for(let i=0;i<t;i++)n.push(i<r?null:Mt);return n}(b,O),z="function"==typeof f?f():f;return j[1]={type:r,blueprint:j,template:n,queries:null,viewQuery:c,declTNode:t,data:j.slice().fill(null,b),bindingStartIndex:b,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:l,consts:z,incompleteFirstPass:!1}}function yb(r,t,n,i){const o=Ib(t);null===n?o.push(i):(o.push(n),r.firstCreatePass&&Ob(r).push(i,o.length-1))}function vb(r,t,n){for(let i in r)if(r.hasOwnProperty(i)){const o=r[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,o):n[i]=[t,o]}return n}function Hr(r,t,n,i,o,s,a,c){const l=ei(t,n);let b,f=t.inputs;!c&&null!=f&&(b=f[i])?(Nb(r,n,b,i,o),Qu(t)&&function(r,t){const n=Vr(t,r);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(i=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(i),o=null!=a?a(o,t.value||"",i):o,In(s)?s.setProperty(l,i,o):Dp(i)||(l.setProperty?l.setProperty(i,o):l[i]=o))}function Sg(r,t,n,i){let o=!1;if(R1()){const s=function(r,t,n){const i=r.directiveRegistry;let o=null;if(i)for(let s=0;s<i.length;s++){const a=i[s];eb(n,a.selectors,!1)&&(o||(o=[]),dd(rl(n,t),r,a.type),vi(a)?(Cb(r,n),o.unshift(a)):o.push(a))}return o}(r,t,n),a=null===i?null:{"":-1};if(null!==s){o=!0,wb(n,r.data.length,s.length);for(let b=0;b<s.length;b++){const O=s[b];O.providersResolver&&O.providersResolver(O)}let c=!1,l=!1,f=Ua(r,t,s.length,null);for(let b=0;b<s.length;b++){const O=s[b];n.mergedAttrs=cd(n.mergedAttrs,O.hostAttrs),Tb(r,n,t,f,O),Hk(f,O,a),null!==O.contentQueries&&(n.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(n.flags|=128);const j=O.type.prototype;!c&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(n.index),c=!0),!l&&(j.ngOnChanges||j.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(n.index),l=!0),f++}!function(r,t){const i=t.directiveEnd,o=r.data,s=t.attrs,a=[];let c=null,l=null;for(let f=t.directiveStart;f<i;f++){const b=o[f],O=b.inputs,j=null===s||ZE(t)?null:Gk(O,s);a.push(j),c=vb(O,f,c),l=vb(b.outputs,f,l)}null!==c&&(c.hasOwnProperty("class")&&(t.flags|=16),c.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=c,t.outputs=l}(r,n)}a&&function(r,t,n){if(t){const i=r.localNames=[];for(let o=0;o<t.length;o+=2){const s=n[t[o+1]];if(null==s)throw new gs("301",`Export of name '${t[o+1]}' not found!`);i.push(t[o],s)}}}(n,i,a)}return n.mergedAttrs=cd(n.mergedAttrs,n.attrs),o}function bb(r,t,n,i,o,s){const a=s.hostBindings;if(a){let c=r.hostBindingOpCodes;null===c&&(c=r.hostBindingOpCodes=[]);const l=~t.index;(function(r){let t=r.length;for(;t>0;){const n=r[--t];if("number"==typeof n&&n<0)return n}return 0})(c)!=l&&c.push(l),c.push(i,o,a)}}function Sb(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function Cb(r,t){t.flags|=2,(r.components||(r.components=[])).push(t.index)}function Hk(r,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=r;vi(t)&&(n[""]=r)}}function wb(r,t,n){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+n,r.providerIndexes=t}function Tb(r,t,n,i,o){r.data[i]=o;const s=o.factory||(o.factory=Es(o.type)),a=new tl(s,vi(o),null);r.blueprint[i]=a,n[i]=a,bb(r,t,0,i,Ua(r,n,o.hostVars,Mt),o)}function Wk(r,t,n){const i=ei(t,r),o=gb(n),s=r[10],a=Md(r,yl(r,o,null,n.onPush?64:16,i,t,s,s.createRenderer(i,n),null,null));r[t.index]=a}function Gi(r,t,n,i,o,s){const a=ei(r,t);!function(r,t,n,i,o,s,a){if(null==s)In(r)?r.removeAttribute(t,o,n):t.removeAttribute(o);else{const c=null==a?Pt(s):a(s,i||"",o);In(r)?r.setAttribute(t,o,c,n):n?t.setAttributeNS(n,o,c):t.setAttribute(o,c)}}(t[11],a,s,r.value,n,i,o)}function qk(r,t,n,i,o,s){const a=s[t];if(null!==a){const c=i.setInput;for(let l=0;l<a.length;){const f=a[l++],b=a[l++],O=a[l++];null!==c?i.setInput(n,O,f,b):n[b]=O}}}function Gk(r,t){let n=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;r.hasOwnProperty(o)&&(null===n&&(n=[]),n.push(o,r[o],t[i+1])),i+=2}else i+=2;else i+=4}return n}function Ab(r,t,n,i){return new Array(r,!0,!1,t,null,0,i,n,null,null)}function Kk(r,t){const n=Vr(t,r);if(bp(n)){const i=n[1];80&n[2]?ja(i,n,i.template,n[8]):n[5]>0&&wg(n)}}function wg(r){for(let i=eg(r);null!==i;i=tg(i))for(let o=10;o<i.length;o++){const s=i[o];if(1024&s[2]){const a=s[1];ja(a,s,a.template,s[8])}else s[5]>0&&wg(s)}const n=r[1].components;if(null!==n)for(let i=0;i<n.length;i++){const o=Vr(n[i],r);bp(o)&&o[5]>0&&wg(o)}}function Yk(r,t){const n=Vr(t,r),i=n[1];(function(r,t){for(let n=t.length;n<r.blueprint.length;n++)t.push(r.blueprint[n])})(i,n),vl(i,n,n[8])}function Md(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function Tg(r){for(;r;){r[2]|=64;const t=ml(r);if(BD(r)&&!t)return r;r=t}return null}function Rg(r,t,n){const i=t[10];i.begin&&i.begin();try{ja(r,t,r.template,n)}catch(o){throw Mb(t,o),o}finally{i.end&&i.end()}}function Rb(r){!function(r){for(let t=0;t<r.components.length;t++){const n=r.components[t],i=Jp(n),o=i[1];Ok(o,i,o.template,n)}}(r[8])}function Ig(r,t,n){Rp(0),t(r,n)}const eP=(()=>Promise.resolve(null))();function Ib(r){return r[7]||(r[7]=[])}function Ob(r){return r.cleanup||(r.cleanup=[])}function Mb(r,t){const n=r[9],i=n?n.get(Rs,null):null;i&&i.handleError(t)}function Nb(r,t,n,i,o){for(let s=0;s<n.length;){const a=n[s++],c=n[s++],l=t[a],f=r.data[a];null!==f.setInput?f.setInput(l,o,i,c):l[c]=o}}function go(r,t,n){const i=Zu(t,r);!function(r,t,n){In(r)?r.setValue(t,n):t.textContent=n}(r[11],i,n)}function Nd(r,t,n){let i=n?r.styles:null,o=n?r.classes:null,s=0;if(null!==t)for(let a=0;a<t.length;a++){const c=t[a];"number"==typeof c?s=c:1==s?o=xo(o,c):2==s&&(i=xo(i,c+": "+t[++a]+";"))}n?r.styles=i:r.stylesWithoutHost=i,n?r.classes=o:r.classesWithoutHost=o}const Ba=new ut("INJECTOR",-1);class kb{get(t,n=cl){if(n===cl){const i=new Error(`NullInjectorError: No provider for ${It(t)}!`);throw i.name="NullInjectorError",i}return n}}const El=new ut("Set Injector scope."),bl={},rP={};let Og;function Pb(){return void 0===Og&&(Og=new kb),Og}function xb(r,t=null,n=null,i){return new oP(r,n,t||Pb(),i)}class oP{constructor(t,n,i,o=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];n&&Bi(n,c=>this.processProvider(c,t,n)),Bi([t],c=>this.processInjectorType(c,[],s)),this.records.set(Ba,Ha(void 0,this));const a=this.records.get(El);this.scope=null!=a?a.value:null,this.source=o||("object"==typeof t?null:It(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=cl,i=Et.Default){this.assertNotDestroyed();const o=Na(this),s=Lo(void 0);try{if(!(i&Et.SkipSelf)){let c=this.records.get(t);if(void 0===c){const l=function(r){return"function"==typeof r||"object"==typeof r&&r instanceof ut}(t)&&lo(t);c=l&&this.injectableDefInScope(l)?Ha(Dg(t),bl):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(i&Et.Self?Pb():this.parent).get(t,n=i&Et.Optional&&n===cl?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Ma]=a[Ma]||[]).unshift(It(t)),o)throw a;return nE(a,t,"R3InjectorError",this.source)}throw a}finally{Lo(s),Na(o)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((i,o)=>t.push(It(o))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,n,i){if(!(t=mt(t)))return!1;let o=l1(t);const s=null==o&&t.ngModule||void 0,a=void 0===s?t:s,c=-1!==i.indexOf(a);if(void 0!==s&&(o=l1(s)),null==o)return!1;if(null!=o.imports&&!c){let b;i.push(a);try{Bi(o.imports,O=>{this.processInjectorType(O,n,i)&&(void 0===b&&(b=[]),b.push(O))})}finally{}if(void 0!==b)for(let O=0;O<b.length;O++){const{ngModule:j,providers:z}=b[O];Bi(z,$=>this.processProvider($,j,z||ln))}}this.injectorDefTypes.add(a);const l=Es(a)||(()=>new a);this.records.set(a,Ha(l,bl));const f=o.providers;if(null!=f&&!c){const b=t;Bi(f,O=>this.processProvider(O,b,f))}return void 0!==s&&void 0!==t.providers}processProvider(t,n,i){let o=Wa(t=mt(t))?t:mt(t&&t.provide);const s=function(r,t,n){return Fb(r)?Ha(void 0,r.useValue):Ha(Lb(r),bl)}(t);if(Wa(t)||!0!==t.multi)this.records.get(o);else{let a=this.records.get(o);a||(a=Ha(void 0,bl,!0),a.factory=()=>Ts(a.multi),this.records.set(o,a)),o=t,a.multi.push(t)}this.records.set(o,s)}hydrate(t,n){return n.value===bl&&(n.value=rP,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=mt(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Dg(r){const t=lo(r),n=null!==t?t.factory:Es(r);if(null!==n)return n;if(r instanceof ut)throw new Error(`Token ${It(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const t=r.length;if(t>0){const i=Ho(t,"?");throw new Error(`Can't resolve all parameters for ${It(r)}: (${i.join(", ")}).`)}const n=function(r){const t=r&&(r[zu]||r[u1]);if(t){const n=function(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(r);return null!==n?()=>n.factory(r):()=>new r}(r);throw new Error("unreachable")}function Lb(r,t,n){let i;if(Wa(r)){const o=mt(r);return Es(o)||Dg(o)}if(Fb(r))i=()=>mt(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))i=()=>r.useFactory(...Ts(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))i=()=>De(mt(r.useExisting));else{const o=mt(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return Es(o)||Dg(o);i=()=>new o(...Ts(r.deps))}return i}function Ha(r,t,n=!1){return{factory:r,value:t,multi:n?[]:void 0}}function Fb(r){return null!==r&&"object"==typeof r&&jp in r}function Wa(r){return"function"==typeof r}const Vb=function(r,t,n){return function(r,t=null,n=null,i){const o=xb(r,t,n,i);return o._resolveInjectorDefTypes(),o}({name:n},t,r,n)};let en=(()=>{class r{static create(n,i){return Array.isArray(n)?Vb(n,i,""):Vb(n.providers,n.parent,n.name||"")}}return r.THROW_IF_NOT_FOUND=cl,r.NULL=new kb,r.\u0275prov=$e({token:r,providedIn:"any",factory:()=>De(Ba)}),r.__NG_ELEMENT_ID__=-1,r})();function AP(r,t){id(Jp(r)[1],$n())}function Ht(r){let t=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),n=!0;const i=[r];for(;t;){let o;if(vi(r))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");o=t.\u0275dir}if(o){if(n){i.push(o);const a=r;a.inputs=Lg(r.inputs),a.declaredInputs=Lg(r.declaredInputs),a.outputs=Lg(r.outputs);const c=o.hostBindings;c&&DP(r,c);const l=o.viewQuery,f=o.contentQueries;if(l&&IP(r,l),f&&OP(r,f),_r(r.inputs,o.inputs),_r(r.declaredInputs,o.declaredInputs),_r(r.outputs,o.outputs),vi(o)&&o.data.animation){const b=r.data;b.animation=(b.animation||[]).concat(o.data.animation)}}const s=o.features;if(s)for(let a=0;a<s.length;a++){const c=s[a];c&&c.ngInherit&&c(r),c===Ht&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(r){let t=0,n=null;for(let i=r.length-1;i>=0;i--){const o=r[i];o.hostVars=t+=o.hostVars,o.hostAttrs=cd(o.hostAttrs,n=cd(n,o.hostAttrs))}}(i)}function Lg(r){return r===_a?{}:r===ln?[]:r}function IP(r,t){const n=r.viewQuery;r.viewQuery=n?(i,o)=>{t(i,o),n(i,o)}:t}function OP(r,t){const n=r.contentQueries;r.contentQueries=n?(i,o,s)=>{t(i,o,s),n(i,o,s)}:t}function DP(r,t){const n=r.hostBindings;r.hostBindings=n?(i,o)=>{t(i,o),n(i,o)}:t}let kd=null;function qa(){if(!kd){const r=nn.Symbol;if(r&&r.iterator)kd=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(kd=i)}}}return kd}class Ci{constructor(t){this.wrapped=t}static wrap(t){return new Ci(t)}static unwrap(t){return Ci.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ci}}function Cl(r){return!!Fg(r)&&(Array.isArray(r)||!(r instanceof Map)&&qa()in r)}function Fg(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function ur(r,t,n){return!Object.is(r[t],n)&&(r[t]=n,!0)}function Tn(r,t,n,i){const o=We();return ur(o,Ca(),t)&&(Xt(),Gi(On(),o,r,t,n,i)),Tn}function En(r,t,n,i,o,s,a,c){const l=We(),f=Xt(),b=r+20,O=f.firstCreatePass?function(r,t,n,i,o,s,a,c,l){const f=t.consts,b=Va(t,r,4,a||null,Uo(f,c));Sg(t,n,b,Uo(f,l)),id(t,b);const O=b.tViews=Dd(2,b,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,f);return null!==t.queries&&(t.queries.template(t,b),O.queries=t.queries.embeddedTView(b)),b}(b,f,l,t,n,i,o,s,a):f.data[b];Ui(O,!1);const j=l[11].createComment("");Td(f,l,j,O),lr(j,l),Md(l,l[b]=Ab(j,l,j,O)),Xu(O)&&Eg(f,l,O),null!=a&&bg(l,O,c)}function Ie(r,t=Et.Default){const n=We();return null===n?De(r,t):z1($n(),n,mt(r),t)}function Ft(r,t,n){const i=We();return ur(i,Ca(),t)&&Hr(Xt(),On(),i,r,t,i[11],n,!1),Ft}function Wg(r,t,n,i,o){const a=o?"class":"style";Nb(r,n,t.inputs[a],a,i)}function ct(r,t,n,i){const o=We(),s=Xt(),a=20+r,c=o[11],l=o[a]=rg(c,t,Ot.lFrame.currentNamespace),f=s.firstCreatePass?function(r,t,n,i,o,s,a){const c=t.consts,f=Va(t,r,2,o,Uo(c,s));return Sg(t,n,f,Uo(c,a)),null!==f.attrs&&Nd(f,f.attrs,!1),null!==f.mergedAttrs&&Nd(f,f.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,f),f}(a,s,o,0,t,n,i):s.data[a];Ui(f,!0);const b=f.mergedAttrs;null!==b&&ad(c,l,b);const O=f.classes;null!==O&&lg(c,l,O);const j=f.styles;null!==j&&JE(c,l,j),64!=(64&f.flags)&&Td(s,o,l,f),0===Ot.lFrame.elementDepthCount&&lr(l,o),Ot.lFrame.elementDepthCount++,Xu(f)&&(Eg(s,o,f),pb(s,f,o)),null!==i&&bg(o,f)}function lt(){let r=$n();Cp()?wp():(r=r.parent,Ui(r,!1));const t=r;Ot.lFrame.elementDepthCount--;const n=Xt();n.firstCreatePass&&(id(n,r),gp(r)&&n.queries.elementEnd(r)),null!=t.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(t)&&Wg(n,t,We(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(t)&&Wg(n,t,We(),t.stylesWithoutHost,!1)}function rn(r,t,n,i){ct(r,t,n,i),lt()}function Ld(r,t,n){const i=We(),o=Xt(),s=r+20,a=o.firstCreatePass?function(r,t,n,i,o){const s=t.consts,a=Uo(s,i),c=Va(t,r,8,"ng-container",a);return null!==a&&Nd(c,a,!0),Sg(t,n,c,Uo(s,o)),null!==t.queries&&t.queries.elementStart(t,c),c}(s,o,i,t,n):o.data[s];Ui(a,!0);const c=i[s]=i[11].createComment("");Td(o,i,c,a),lr(c,i),Xu(a)&&(Eg(o,i,a),pb(o,a,i)),null!=n&&bg(i,a)}function Fd(){let r=$n();const t=Xt();Cp()?wp():(r=r.parent,Ui(r,!1)),t.firstCreatePass&&(id(t,r),gp(r)&&t.queries.elementEnd(r))}function Al(r){return!!r&&"function"==typeof r.then}const Vd=function(r){return!!r&&"function"==typeof r.subscribe};function on(r,t,n,i){const o=We(),s=Xt(),a=$n();return function(r,t,n,i,o,s,a,c){const l=Xu(i),b=r.firstCreatePass&&Ob(r),O=t[8],j=Ib(t);let z=!0;if(3&i.type||c){const re=ei(i,t),Ee=c?c(re):re,he=j.length,Ae=c?Fe=>c(Un(Fe[i.index])):i.index;if(In(n)){let Fe=null;if(!c&&l&&(Fe=function(r,t,n,i){const o=r.cleanup;if(null!=o)for(let s=0;s<o.length-1;s+=2){const a=o[s];if(a===n&&o[s+1]===i){const c=t[7],l=o[s+2];return c.length>l?c[l]:null}"string"==typeof a&&(s+=2)}return null}(r,t,o,i.index)),null!==Fe)(Fe.__ngLastListenerFn__||Fe).__ngNextListenerFn__=s,Fe.__ngLastListenerFn__=s,z=!1;else{s=qg(i,t,O,s,!1);const Be=n.listen(Ee,o,s);j.push(s,Be),b&&b.push(o,Ae,he,he+1)}}else s=qg(i,t,O,s,!0),Ee.addEventListener(o,s,a),j.push(s),b&&b.push(o,Ae,he,a)}else s=qg(i,t,O,s,!1);const $=i.outputs;let Q;if(z&&null!==$&&(Q=$[o])){const re=Q.length;if(re)for(let Ee=0;Ee<re;Ee+=2){const Ge=t[Q[Ee]][Q[Ee+1]].subscribe(s),it=j.length;j.push(s,Ge),b&&b.push(o,i.index,it,-(it+1))}}}(s,o,o[11],a,r,t,!!n,i),on}function R0(r,t,n,i){try{return!1!==n(i)}catch(o){return Mb(r,o),!1}}function qg(r,t,n,i,o){return function s(a){if(a===Function)return i;const c=2&r.flags?Vr(r.index,t):t;0==(32&t[2])&&Tg(c);let l=R0(t,0,i,a),f=s.__ngNextListenerFn__;for(;f;)l=R0(t,0,f,a)&&l,f=f.__ngNextListenerFn__;return o&&!1===l&&(a.preventDefault(),a.returnValue=!1),l}}function xn(r=1){return function(r){return(Ot.lFrame.contextLView=function(r,t){for(;r>0;)t=t[15],r--;return t}(r,Ot.lFrame.contextLView))[8]}(r)}function ux(r,t){let n=null;const i=function(r){const t=r.attrs;if(null!=t){const n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(r);for(let o=0;o<t.length;o++){const s=t[o];if("*"!==s){if(null===i?eb(r,s,!0):gk(i,s))return o}else n=o}return n}function zo(r){const t=We()[16][6];if(!t.projection){const i=t.projection=Ho(r?r.length:1,null),o=i.slice();let s=t.child;for(;null!==s;){const a=r?ux(s,r):0;null!==a&&(o[a]?o[a].projectionNext=s:i[a]=s,o[a]=s),s=s.next}}}function or(r,t=0,n){const i=We(),o=Xt(),s=Va(o,20+r,16,null,n||null);null===s.projection&&(s.projection=t),wp(),64!=(64&s.flags)&&function(r,t,n){YE(t[11],0,t,n,UE(r,n,t),WE(n.parent||t[6],n,t))}(o,i,s)}function F0(r,t,n,i,o){const s=r[n+1],a=null===t;let c=i?bi(s):ho(s),l=!1;for(;0!==c&&(!1===l||a);){const b=r[c+1];hx(r[c],t)&&(l=!0,r[c+1]=i?fg(b):ug(b)),c=i?bi(b):ho(b)}l&&(r[n+1]=i?ug(s):fg(s))}function hx(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&Da(r,t)>=0}function Jn(r,t){return function(r,t,n,i){const o=We(),s=Xt(),a=function(r){const t=Ot.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,n}(2);s.firstUpdatePass&&function(r,t,n,i){const o=r.data;if(null===o[n+1]){const s=o[br()],a=function(r,t){return t>=r.expandoStartIndex}(r,n);(function(r,t){return 0!=(r.flags&(t?16:32))})(s,i)&&null===t&&!a&&(t=!1),t=function(r,t,n,i){const o=function(r){const t=Ot.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}(r);let s=i?t.residualClasses:t.residualStyles;if(null===o)0===(i?t.classBindings:t.styleBindings)&&(n=Rl(n=zg(null,r,t,n,i),t.attrs,i),s=null);else{const a=t.directiveStylingLast;if(-1===a||r[a]!==o)if(n=zg(o,r,t,n,i),null===s){let l=function(r,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==ho(i))return r[bi(i)]}(r,t,i);void 0!==l&&Array.isArray(l)&&(l=zg(null,r,t,l[1],i),l=Rl(l,t.attrs,i),function(r,t,n,i){r[bi(n?t.classBindings:t.styleBindings)]=i}(r,t,i,l))}else s=function(r,t,n){let i;const o=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<o;s++)i=Rl(i,r[s].hostAttrs,n);return Rl(i,t.attrs,n)}(r,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),n}(o,s,t,i),function(r,t,n,i,o,s){let a=s?t.classBindings:t.styleBindings,c=bi(a),l=ho(a);r[i]=n;let b,f=!1;if(Array.isArray(n)){const O=n;b=O[1],(null===b||Da(O,b)>0)&&(f=!0)}else b=n;if(o)if(0!==l){const j=bi(r[c+1]);r[i+1]=Rd(j,c),0!==j&&(r[j+1]=dg(r[j+1],i)),r[c+1]=function(r,t){return 131071&r|t<<17}(r[c+1],i)}else r[i+1]=Rd(c,0),0!==c&&(r[c+1]=dg(r[c+1],i)),c=i;else r[i+1]=Rd(l,0),0===c?c=i:r[l+1]=dg(r[l+1],i),l=i;f&&(r[i+1]=ug(r[i+1])),F0(r,b,i,!0),F0(r,b,i,!1),function(r,t,n,i,o){const s=o?r.residualClasses:r.residualStyles;null!=s&&"string"==typeof t&&Da(s,t)>=0&&(n[i+1]=fg(n[i+1]))}(t,b,r,i,s),a=Rd(c,l),s?t.classBindings=a:t.styleBindings=a}(o,s,t,n,a,i)}}(s,r,a,i),t!==Mt&&ur(o,a,t)&&function(r,t,n,i,o,s,a,c){if(!(3&t.type))return;const l=r.data,f=l[c+1];jd(function(r){return 1==(1&r)}(f)?K0(l,t,n,o,ho(f),a):void 0)||(jd(s)||function(r){return 2==(2&r)}(f)&&(s=K0(l,null,n,o,c,a)),function(r,t,n,i,o){const s=In(r);if(t)o?s?r.addClass(n,i):n.classList.add(i):s?r.removeClass(n,i):n.classList.remove(i);else{let a=-1===i.indexOf("-")?void 0:Br.DashCase;if(null==o)s?r.removeStyle(n,i,a):n.style.removeProperty(i);else{const c="string"==typeof o&&o.endsWith("!important");c&&(o=o.slice(0,-10),a|=Br.Important),s?r.setStyle(n,i,o,a):n.style.setProperty(i,o,c?"important":"")}}}(i,a,Zu(br(),n),o,s))}(s,s.data[br()],o,o[11],r,o[a+1]=function(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=It(function(r){return r instanceof class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?r.changingThisBreaksApplicationSecurity:r}(r)))),r}(t,n),i,a)}(r,t,null,!0),Jn}function zg(r,t,n,i,o){let s=null;const a=n.directiveEnd;let c=n.directiveStylingLast;for(-1===c?c=n.directiveStart:c++;c<a&&(s=t[c],i=Rl(i,s.hostAttrs,o),s!==r);)c++;return null!==r&&(n.directiveStylingLast=c),i}function Rl(r,t,n){const i=n?1:2;let o=-1;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:o===i&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Ur(r,a,!!n||t[++s]))}return void 0===r?null:r}function K0(r,t,n,i,o,s){const a=null===t;let c;for(;o>0;){const l=r[o],f=Array.isArray(l),b=f?l[1]:l,O=null===b;let j=n[o+1];j===Mt&&(j=O?ln:void 0);let z=O?Lp(j,i):b===i?j:void 0;if(f&&!jd(z)&&(z=Lp(l,i)),jd(z)&&(c=z,a))return c;const $=r[o+1];o=a?bi($):ho($)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(c=Lp(l,i))}return c}function jd(r){return void 0!==r}function bn(r,t=""){const n=We(),i=Xt(),o=r+20,s=i.firstCreatePass?Va(i,o,1,t,null):i.data[o],a=n[o]=function(r,t){return In(r)?r.createText(t):r.createTextNode(t)}(n[11],t);Td(i,n,a,s),Ui(s,!1)}function Ds(r){return _o("",r,""),Ds}function _o(r,t,n){const i=We(),o=function(r,t,n,i){return ur(r,Ca(),n)?t+Pt(n)+i:Mt}(i,r,t,n);return o!==Mt&&go(i,br(),o),_o}function Il(r,t,n){const i=We();return ur(i,Ca(),t)&&Hr(Xt(),On(),i,r,t,i[11],n,!0),Il}const Ms=void 0;var $x=["en",[["a","p"],["AM","PM"],Ms],[["AM","PM"],Ms,Ms],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ms,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ms,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ms,"{1} 'at' {0}",Ms],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let nc={};function Cr(r){const t=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let n=mS(t);if(n)return n;const i=t.split("-")[0];if(n=mS(i),n)return n;if("en"===i)return $x;throw new Error(`Missing locale data for the locale "${r}".`)}function mS(r){return r in nc||(nc[r]=nn.ng&&nn.ng.common&&nn.ng.common.locales&&nn.ng.common.locales[r]),nc[r]}var ot=(()=>((ot=ot||{})[ot.LocaleId=0]="LocaleId",ot[ot.DayPeriodsFormat=1]="DayPeriodsFormat",ot[ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",ot[ot.DaysFormat=3]="DaysFormat",ot[ot.DaysStandalone=4]="DaysStandalone",ot[ot.MonthsFormat=5]="MonthsFormat",ot[ot.MonthsStandalone=6]="MonthsStandalone",ot[ot.Eras=7]="Eras",ot[ot.FirstDayOfWeek=8]="FirstDayOfWeek",ot[ot.WeekendRange=9]="WeekendRange",ot[ot.DateFormat=10]="DateFormat",ot[ot.TimeFormat=11]="TimeFormat",ot[ot.DateTimeFormat=12]="DateTimeFormat",ot[ot.NumberSymbols=13]="NumberSymbols",ot[ot.NumberFormats=14]="NumberFormats",ot[ot.CurrencyCode=15]="CurrencyCode",ot[ot.CurrencySymbol=16]="CurrencySymbol",ot[ot.CurrencyName=17]="CurrencyName",ot[ot.Currencies=18]="Currencies",ot[ot.Directionality=19]="Directionality",ot[ot.PluralCase=20]="PluralCase",ot[ot.ExtraData=21]="ExtraData",ot))();const Bd="en-US";let _S=Bd;function $g(r){Lr(r,"Expected localeId to be defined"),"string"==typeof r&&(_S=r.toLowerCase().replace(/_/g,"-"))}function Jg(r,t,n,i,o){if(r=mt(r),Array.isArray(r))for(let s=0;s<r.length;s++)Jg(r[s],t,n,i,o);else{const s=Xt(),a=We();let c=Wa(r)?r:mt(r.provide),l=Lb(r);const f=$n(),b=1048575&f.providerIndexes,O=f.directiveStart,j=f.providerIndexes>>20;if(Wa(r)||!r.multi){const z=new tl(l,o,Ie),$=Xg(c,t,o?b:b+j,O);-1===$?(dd(rl(f,a),s,c),Qg(s,r,t.length),t.push(c),f.directiveStart++,f.directiveEnd++,o&&(f.providerIndexes+=1048576),n.push(z),a.push(z)):(n[$]=z,a[$]=z)}else{const z=Xg(c,t,b+j,O),$=Xg(c,t,b,b+j),Q=z>=0&&n[z],re=$>=0&&n[$];if(o&&!re||!o&&!Q){dd(rl(f,a),s,c);const Ee=function(r,t,n,i,o){const s=new tl(r,n,Ie);return s.multi=[],s.index=t,s.componentProviders=0,BS(s,o,i&&!n),s}(o?q3:W3,n.length,o,i,l);!o&&re&&(n[$].providerFactory=Ee),Qg(s,r,t.length,0),t.push(c),f.directiveStart++,f.directiveEnd++,o&&(f.providerIndexes+=1048576),n.push(Ee),a.push(Ee)}else Qg(s,r,z>-1?z:$,BS(n[o?$:z],l,!o&&i));!o&&i&&re&&n[$].componentProviders++}}}function Qg(r,t,n,i){const o=Wa(t);if(o||function(r){return!!r.useClass}(t)){const a=(t.useClass||t).prototype.ngOnDestroy;if(a){const c=r.destroyHooks||(r.destroyHooks=[]);if(!o&&t.multi){const l=c.indexOf(n);-1===l?c.push(n,[i,a]):c[l+1].push(i,a)}else c.push(n,a)}}}function BS(r,t,n){return n&&r.componentProviders++,r.multi.push(t)-1}function Xg(r,t,n,i){for(let o=n;o<i;o++)if(t[o]===r)return o;return-1}function W3(r,t,n,i){return Zg(this.multi,[])}function q3(r,t,n,i){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=il(n,n[1],this.providerFactory.index,i);s=c.slice(0,a),Zg(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Zg(o,s);return s}function Zg(r,t){for(let n=0;n<r.length;n++)t.push((0,r[n])());return t}function Wt(r,t=[]){return n=>{n.providersResolver=(i,o)=>function(r,t,n){const i=Xt();if(i.firstCreatePass){const o=vi(r);Jg(n,i.data,i.blueprint,o,!0),Jg(t,i.data,i.blueprint,o,!1)}}(i,o?o(r):r,t)}}class HS{}const qS="ngComponent";class $3{resolveComponentFactory(t){throw function(r){const t=Error(`No component factory found for ${It(r)}. Did you add it to @NgModule.entryComponents?`);return t[qS]=r,t}(t)}}let yo=(()=>{class r{}return r.NULL=new $3,r})();function zd(...r){}function ic(r,t){return new jt(ei(r,t))}const J3=function(){return ic($n(),We())};let jt=(()=>{class r{constructor(n){this.nativeElement=n}}return r.__NG_ELEMENT_ID__=J3,r})();function GS(r){return r instanceof jt?r.nativeElement:r}class Ns{}let Yi=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>X3(),r})();const X3=function(){const r=We(),n=Vr($n().index,r);return function(r){return r[11]}(Vi(n)?n:r)};let tm=(()=>{class r{}return r.\u0275prov=$e({token:r,providedIn:"root",factory:()=>null}),r})();class $o{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const zS=new $o("12.2.10");class $S{constructor(){}supports(t){return Cl(t)}create(t){return new nL(t)}}const tL=(r,t)=>t;class nL{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||tL}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,o=0,s=null;for(;n||i;){const a=!i||n&&n.currentIndex<YS(i,o,s)?n:i,c=YS(a,o,s),l=a.currentIndex;if(a===i)o--,i=i._nextRemoved;else if(n=n._next,null==a.previousIndex)o++;else{s||(s=[]);const f=c-o,b=l-o;if(f!=b){for(let j=0;j<f;j++){const z=j<s.length?s[j]:s[j]=0,$=z+j;b<=$&&$<f&&(s[j]=z+1)}s[a.previousIndex]=b-f}}c!==l&&t(a,c,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Cl(t))throw new Error(`Error trying to diff '${It(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let o,s,a,n=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let c=0;c<this.length;c++)s=t[c],a=this._trackByFn(c,s),null!==n&&Object.is(n.trackById,a)?(i&&(n=this._verifyReinsertion(n,s,a,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,a,c),i=!0),n=n._next}else o=0,function(r,t){if(Array.isArray(r))for(let n=0;n<r.length;n++)t(r[n]);else{const n=r[qa()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(t,c=>{a=this._trackByFn(o,c),null!==n&&Object.is(n.trackById,a)?(i&&(n=this._verifyReinsertion(n,c,a,o)),Object.is(n.item,c)||this._addIdentityChange(n,c)):(n=this._mismatch(n,c,a,o),i=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,o){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,o)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,o))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,o)):t=this._addAfter(new rL(n,i),s,o),t}_verifyReinsertion(t,n,i,o){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?t=this._reinsertAfter(s,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const o=t._prevRemoved,s=t._nextRemoved;return null===o?this._removalsHead=s:o._nextRemoved=s,null===s?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){const o=null===n?this._itHead:n._next;return t._next=o,t._prev=n,null===o?this._itTail=t:o._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new KS),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,i=t._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KS),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class rL{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iL{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const n=t._prevDup,i=t._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class KS{constructor(){this.map=new Map}put(t){const n=t.trackById;let i=this.map.get(n);i||(i=new iL,this.map.set(n,i)),i.add(t)}get(t,n){const o=this.map.get(t);return o?o.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function YS(r,t,n){const i=r.previousIndex;if(null===i)return i;let o=0;return n&&i<n.length&&(o=n[i]),i+t+o}class JS{constructor(){}supports(t){return t instanceof Map||Fg(t)}create(){return new oL}}class oL{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||Fg(t)))throw new Error(`Error trying to diff '${It(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,o)=>{if(n&&n.key===o)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(o,i);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const o=this._records.get(t);this._maybeAddToChanges(o,n);const s=o._prev,a=o._next;return s&&(s._next=a),a&&(a._prev=s),o._next=null,o._prev=null,o}const i=new sL(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}}class sL{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function QS(){return new oc([new $S])}let oc=(()=>{class r{constructor(n){this.factories=n}static create(n,i){if(null!=i){const o=i.factories.slice();n=n.concat(o)}return new r(n)}static extend(n){return{provide:r,useFactory:i=>r.create(n,i||QS()),deps:[[r,new Wo,new Mr]]}}find(n){const i=this.factories.find(o=>o.supports(n));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(r){return r.name||typeof r}(n)}'`)}}return r.\u0275prov=$e({token:r,providedIn:"root",factory:QS}),r})();function XS(){return new sc([new JS])}let sc=(()=>{class r{constructor(n){this.factories=n}static create(n,i){if(i){const o=i.factories.slice();n=n.concat(o)}return new r(n)}static extend(n){return{provide:r,useFactory:i=>r.create(n,i||XS()),deps:[[r,new Wo,new Mr]]}}find(n){const i=this.factories.find(o=>o.supports(n));if(i)return i;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return r.\u0275prov=$e({token:r,providedIn:"root",factory:XS}),r})();function $d(r,t,n,i,o=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&i.push(Un(s)),yi(s))for(let c=10;c<s.length;c++){const l=s[c],f=l[1].firstChild;null!==f&&$d(l[1],l,f,i)}const a=n.type;if(8&a)$d(r,t,n.child,i);else if(32&a){const c=Zp(n,t);let l;for(;l=c();)i.push(l)}else if(16&a){const c=$E(t,n);if(Array.isArray(c))i.push(...c);else{const l=ml(t[16]);$d(l[1],l,c,i,!0)}}n=o?n.projectionNext:n.next}return i}class kl{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return $d(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(yi(t)){const n=t[8],i=n?n.indexOf(this):-1;i>-1&&(ig(t,i),ws(n,i))}this._attachedToViewContainer=!1}VE(this._lView[1],this._lView)}onDestroy(t){yb(this._lView[1],this._lView,null,t)}markForCheck(){Tg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Rg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,t,n){td(!0);try{Rg(r,t,n)}finally{td(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(r,t){_l(r,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class cL extends kl{constructor(t){super(t),this._view=t}detectChanges(){Rb(this._view)}checkNoChanges(){!function(r){td(!0);try{Rb(r)}finally{td(!1)}}(this._view)}get context(){return null}}const uL=function(r){return function(r,t,n){if(Qu(r)&&!n){const i=Vr(r.index,t);return new kl(i,i)}return 47&r.type?new kl(t[16],t):null}($n(),We(),16==(16&r))};let vo=(()=>{class r{}return r.__NG_ELEMENT_ID__=uL,r})();const hL=[new JS],gL=new oc([new $S]),mL=new sc(hL),yL=function(){return Kd($n(),We())};let ii=(()=>{class r{}return r.__NG_ELEMENT_ID__=yL,r})();const vL=ii,EL=class extends vL{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(t){const n=this._declarationTContainer.tViews,i=yl(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(n)),vl(n,i,t),new kl(i)}};function Kd(r,t){return 4&r.type?new EL(t,r,ic(r,t)):null}class Ji{}class ZS{}const CL=function(){return nC($n(),We())};let wr=(()=>{class r{}return r.__NG_ELEMENT_ID__=CL,r})();const TL=wr,eC=class extends TL{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return ic(this._hostTNode,this._hostLView)}get injector(){return new Aa(this._hostTNode,this._hostLView)}get parentInjector(){const t=ud(this._hostTNode,this._hostLView);if(B1(t)){const n=Ta(t,this._hostLView),i=wa(t);return new Aa(n[1].data[i+8],n)}return new Aa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=tC(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,i){const o=t.createEmbeddedView(n||{});return this.insert(o,i),o}createComponent(t,n,i,o,s){const a=i||this.parentInjector;if(!s&&null==t.ngModule&&a){const l=a.get(Ji,null);l&&(s=l)}const c=t.create(a,o,void 0,s);return this.insert(c.hostView,n),c}insert(t,n){const i=t._lView,o=i[1];if(function(r){return yi(r[3])}(i)){const b=this.indexOf(t);if(-1!==b)this.detach(b);else{const O=i[3],j=new eC(O,O[6],O[3]);j.detach(j.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;!function(r,t,n,i){const o=10+i,s=n.length;i>0&&(n[o-1][4]=t),i<s-10?(t[4]=n[o],gd(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;const a=t[17];null!==a&&n!==a&&function(r,t){const n=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===n?r[9]=[t]:n.push(t)}(a,t);const c=t[19];null!==c&&c.insertView(r),t[2]|=128}(o,i,a,s);const c=ag(s,a),l=i[11],f=wd(l,a[7]);return null!==f&&function(r,t,n,i,o,s){i[0]=o,i[6]=t,_l(r,i,n,1,o,s)}(o,a[6],l,i,f,c),t.attachToViewContainerRef(),gd(nm(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=tC(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=ig(this._lContainer,n);i&&(ws(nm(this._lContainer),n),VE(i[1],i))}detach(t){const n=this._adjustIndex(t,-1),i=ig(this._lContainer,n);return i&&null!=ws(nm(this._lContainer),n)?new kl(i):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function tC(r){return r[8]}function nm(r){return r[8]||(r[8]=[])}function nC(r,t){let n;const i=t[r.index];if(yi(i))n=i;else{let o;if(8&r.type)o=Un(i);else{const s=t[11];o=s.createComment("");const a=ei(r,t);Is(s,wd(s,a),o,function(r,t){return In(r)?r.nextSibling(t):t.nextSibling}(s,a),!1)}t[r.index]=n=Ab(i,t,o,r),Md(t,n)}return new eC(n,r,t)}const uc={};class SC extends yo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=vr(t);return new wC(n,this.ngModule)}}function CC(r){const t=[];for(let n in r)r.hasOwnProperty(n)&&t.push({propName:r[n],templateName:n});return t}const b4=new ut("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>DE});class wC extends HS{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function(r){return r.map(mk).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return CC(this.componentDef.inputs)}get outputs(){return CC(this.componentDef.outputs)}create(t,n,i,o){const s=(o=o||this.ngModule)?function(r,t){return{get:(n,i,o)=>{const s=r.get(n,uc,o);return s!==uc||i===uc?s:t.get(n,i,o)}}}(t,o.injector):t,a=s.get(Ns,w1),c=s.get(tm,null),l=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",b=i?function(r,t,n){if(In(r))return r.selectRootElement(t,n===Fn.ShadowDom);let i="string"==typeof t?r.querySelector(t):t;return i.textContent="",i}(l,i,this.componentDef.encapsulation):rg(a.createRenderer(null,this.componentDef),f,function(r){const t=r.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(f)),O=this.componentDef.onPush?576:528,j=function(r,t){return{components:[],scheduler:r||DE,clean:eP,playerHandler:t||null,flags:0}}(),z=Dd(0,null,null,1,0,null,null,null,null,null),$=yl(null,z,j,O,null,null,a,l,c,s);let Q,re;nd($);try{const Ee=function(r,t,n,i,o,s){const a=n[1];n[20]=r;const l=Va(a,20,2,"#host",null),f=l.mergedAttrs=t.hostAttrs;null!==f&&(Nd(l,f,!0),null!==r&&(ad(o,r,f),null!==l.classes&&lg(o,r,l.classes),null!==l.styles&&JE(o,r,l.styles)));const b=i.createRenderer(r,t),O=yl(n,gb(t),null,t.onPush?64:16,n[20],l,i,b,s||null,null);return a.firstCreatePass&&(dd(rl(l,n),a,t.type),Cb(a,l),wb(l,n.length,1)),Md(n,O),n[20]=O}(b,this.componentDef,$,a,l);if(b)if(i)ad(l,b,["ng-version",zS.full]);else{const{attrs:he,classes:Ae}=function(r){const t=[],n=[];let i=1,o=2;for(;i<r.length;){let s=r[i];if("string"==typeof s)2===o?""!==s&&t.push(s,r[++i]):8===o&&n.push(s);else{if(!Ei(o))break;o=s}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);he&&ad(l,b,he),Ae&&Ae.length>0&&lg(l,b,Ae.join(" "))}if(re=Ep(z,20),void 0!==n){const he=re.projection=[];for(let Ae=0;Ae<this.ngContentSelectors.length;Ae++){const Fe=n[Ae];he.push(null!=Fe?Array.from(Fe):null)}}Q=function(r,t,n,i,o){const s=n[1],a=function(r,t,n){const i=$n();r.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Tb(r,i,t,Ua(r,t,1,null),n));const o=il(t,r,i.directiveStart,i);lr(o,t);const s=ei(i,t);return s&&lr(s,t),o}(s,n,t);if(i.components.push(a),r[8]=a,o&&o.forEach(l=>l(a,t)),t.contentQueries){const l=$n();t.contentQueries(1,a,l.directiveStart)}const c=$n();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(jo(c.index),bb(n[1],c,0,c.directiveStart,c.directiveEnd,t),Sb(t,a)),a}(Ee,this.componentDef,$,j,[AP]),vl(z,$,null)}finally{rd()}return new w4(this.componentType,Q,ic(re,$),$,re)}}class w4 extends class{}{constructor(t,n,i,o,s){super(),this.location=i,this._rootLView=o,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new cL(o),this.componentType=t}get injector(){return new Aa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const dc=new Map;class R4 extends Ji{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new SC(this);const i=Qr(t),o=function(r){return r[kD]||null}(t);o&&$g(o),this._bootstrapComponents=qi(i.bootstrap),this._r3Injector=xb(t,n,[{provide:Ji,useValue:this},{provide:yo,useValue:this.componentFactoryResolver}],It(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=en.THROW_IF_NOT_FOUND,i=Et.Default){return t===en||t===Ji||t===Ba?this:this._r3Injector.get(t,n,i)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class gm extends ZS{constructor(t){super(),this.moduleType=t,null!==Qr(t)&&function(r){const t=new Set;!function n(i){const o=Qr(i,!0),s=o.id;null!==s&&(function(r,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${r} - ${It(t)} vs ${It(t.name)}`)}(s,dc.get(s),i),dc.set(s,i));const a=qi(o.imports);for(const c of a)t.has(c)||(t.add(c),n(c))}(r)}(t)}create(t){return new R4(this.moduleType,t)}}function IC(r,t,n,i,o,s){const a=t+n;return ur(r,a,o)?function(r,t,n){return r[t]=n}(r,a+1,s?i.call(s,o):i(o)):function(r,t){const n=r[t];return n===Mt?void 0:n}(r,a+1)}function PC(r,t,n){const i=r+20,o=We(),s=function(r,t){return r[t]}(o,i);return function(r,t){Ci.isWrapped(t)&&(t=Ci.unwrap(t),r[Ot.lFrame.bindingIndex]=Mt);return t}(o,function(r,t){return r[1].data[t].pure}(o,i)?IC(o,function(){const r=Ot.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}(),t,s.transform,n,s):s.transform(n))}function mm(r){return t=>{setTimeout(r,void 0,t)}}const Kt=class extends u{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){var o,s,a;let c=t,l=n||(()=>null),f=i;if(t&&"object"==typeof t){const O=t;c=null===(o=O.next)||void 0===o?void 0:o.bind(O),l=null===(s=O.error)||void 0===s?void 0:s.bind(O),f=null===(a=O.complete)||void 0===a?void 0:a.bind(O)}this.__isAsync&&(l=mm(l),c&&(c=mm(c)),f&&(f=mm(f)));const b=super.subscribe({next:c,error:l,complete:f});return t instanceof E&&t.add(b),b}};function W4(){return this._results[qa()]()}class fc{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=qa(),i=fc.prototype;i[n]||(i[n]=W4)}get changes(){return this._changes||(this._changes=new Kt)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const o=ti(t);(this._changesDetected=!function(r,t,n){if(r.length!==t.length)return!1;for(let i=0;i<r.length;i++){let o=r[i],s=t[i];if(n&&(o=n(o),s=n(s)),s!==o)return!1}return!0}(i._results,o,n))&&(i._results=o,i.length=o.length,i.last=o[this.length-1],i.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class _m{constructor(t){this.queryList=t,this.matches=null}clone(){return new _m(this.queryList)}setDirty(){this.queryList.setDirty()}}class ym{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,o=[];for(let s=0;s<i;s++){const a=n.getByIndex(s);o.push(this.queries[a.indexInDeclarationView].clone())}return new ym(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==UC(t,n).matches&&this.queries[n].setDirty()}}class xC{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class vm{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const o=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(t,o);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new vm(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Em{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new Em(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){const s=i[o];this.matchTNodeWithReadOption(t,n,z4(n,s)),this.matchTNodeWithReadOption(t,n,fd(n,t,s,!1,!1))}else i===ii?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,fd(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const o=this.metadata.read;if(null!==o)if(o===jt||o===wr||o===ii&&4&n.type)this.addMatch(n.index,-2);else{const s=fd(n,t,o,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function z4(r,t){const n=r.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function K4(r,t,n,i){return-1===n?function(r,t){return 11&r.type?ic(r,t):4&r.type?Kd(r,t):null}(t,r):-2===n?function(r,t,n){return n===jt?ic(t,r):n===ii?Kd(t,r):n===wr?nC(t,r):void 0}(r,t,i):il(r,r[1],n,t)}function LC(r,t,n,i){const o=t[19].queries[i];if(null===o.matches){const s=r.data,a=n.matches,c=[];for(let l=0;l<a.length;l+=2){const f=a[l];c.push(f<0?null:K4(t,s[f],a[l+1],n.metadata.read))}o.matches=c}return o.matches}function bm(r,t,n,i){const o=r.queries.getByIndex(n),s=o.matches;if(null!==s){const a=LC(r,t,o,n);for(let c=0;c<s.length;c+=2){const l=s[c];if(l>0)i.push(a[c/2]);else{const f=s[c+1],b=t[-l];for(let O=10;O<b.length;O++){const j=b[O];j[17]===j[3]&&bm(j[1],j,f,i)}if(null!==b[9]){const O=b[9];for(let j=0;j<O.length;j++){const z=O[j];bm(z[1],z,f,i)}}}}}return i}function Sn(r){const t=We(),n=Xt(),i=M1();Rp(i+1);const o=UC(n,i);if(r.dirty&&T1(t)===(2==(2&o.metadata.flags))){if(null===o.matches)r.reset([]);else{const s=o.crossesNgTemplate?bm(n,t,i,[]):LC(n,t,o,i);r.reset(s,GS),r.notifyOnChanges()}return!0}return!1}function Qi(r,t,n){const i=Xt();i.firstCreatePass&&(VC(i,new xC(r,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),FC(i,We(),t)}function Tr(r,t,n,i){const o=Xt();if(o.firstCreatePass){const s=$n();VC(o,new xC(t,n,i),s.index),function(r,t){const n=r.contentQueries||(r.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(r.queries.length-1,t)}(o,r),2==(2&n)&&(o.staticContentQueries=!0)}FC(o,We(),n)}function Cn(){return function(r,t){return r[19].queries[t].queryList}(We(),M1())}function FC(r,t,n){const i=new fc(4==(4&n));yb(r,t,i,i.destroy),null===t[19]&&(t[19]=new ym),t[19].queries.push(new _m(i))}function VC(r,t,n){null===r.queries&&(r.queries=new vm),r.queries.track(new Em(t,n))}function UC(r,t){return r.queries.getByIndex(t)}const Gl=new ut("Application Initializer");let pc=(()=>{class r{constructor(n){this.appInits=n,this.resolve=zd,this.reject=zd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const s=this.appInits[o]();if(Al(s))n.push(s);else if(Vd(s)){const a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});n.push(a)}}Promise.all(n).then(()=>{i()}).catch(o=>{this.reject(o)}),0===n.length&&i(),this.initialized=!0}}return r.\u0275fac=function(n){return new(n||r)(De(Gl,8))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();const zl=new ut("AppId"),wF={provide:zl,useFactory:function(){return`${Rm()}${Rm()}${Rm()}`},deps:[]};function Rm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iw=new ut("Platform Initializer"),gc=new ut("Platform ID"),ow=new ut("appBootstrapListener");let tf=(()=>{class r{log(n){console.log(n)}warn(n){console.warn(n)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();const Eo=new ut("LocaleId"),sw=new ut("DefaultCurrencyCode");class AF{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}const Im=function(r){return new gm(r)},RF=Im,IF=function(r){return Promise.resolve(Im(r))},aw=function(r){const t=Im(r),i=qi(Qr(r).declarations).reduce((o,s)=>{const a=vr(s);return a&&o.push(new wC(a)),o},[]);return new AF(t,i)},OF=aw,DF=function(r){return Promise.resolve(aw(r))};let xs=(()=>{class r{constructor(){this.compileModuleSync=RF,this.compileModuleAsync=IF,this.compileModuleAndAllComponentsSync=OF,this.compileModuleAndAllComponentsAsync=DF}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();const kF=(()=>Promise.resolve(0))();function Om(r){"undefined"==typeof Zone?kF.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class wt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Kt(!1),this.onMicrotaskEmpty=new Kt(!1),this.onStable=new Kt(!1),this.onError=new Kt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&n,o.shouldCoalesceRunChangeDetection=i,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function(){let r=nn.requestAnimationFrame,t=nn.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&t){const n=r[Zone.__symbol__("OriginalDelegate")];n&&(r=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(r){const t=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(nn,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Mm(r),r.isCheckStableRunning=!0,Dm(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Mm(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,o,s,a,c)=>{try{return cw(r),n.invokeTask(o,s,a,c)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||r.shouldCoalesceRunChangeDetection)&&t(),lw(r)}},onInvoke:(n,i,o,s,a,c,l)=>{try{return cw(r),n.invoke(o,s,a,c,l)}finally{r.shouldCoalesceRunChangeDetection&&t(),lw(r)}},onHasTask:(n,i,o,s)=>{n.hasTask(o,s),i===o&&("microTask"==s.change?(r._hasPendingMicrotasks=s.microTask,Mm(r),Dm(r)):"macroTask"==s.change&&(r.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,o,s)=>(n.handleError(o,s),r.runOutsideAngular(()=>r.onError.emit(s)),!1)})}(o)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(wt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,o){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+o,t,xF,zd,zd);try{return s.runTask(a,n,i)}finally{s.cancelTask(a)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const xF={};function Dm(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Mm(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function cw(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function lw(r){r._nesting--,Dm(r)}class VF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Kt,this.onMicrotaskEmpty=new Kt,this.onStable=new Kt,this.onError=new Kt}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,o){return t.apply(n,i)}}let Nm=(()=>{class r{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wt.assertNotInAngularZone(),Om(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Om(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:o})}whenStable(n,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,i,o){return[]}}return r.\u0275fac=function(n){return new(n||r)(De(wt))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),uw=(()=>{class r{constructor(){this._applications=new Map,km.addToWindow(this)}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return km.findTestabilityInTree(this,n,i)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();class UF{addToWindow(t){}findTestabilityInTree(t,n,i){return null}}let km=new UF,dw=!0,fw=!1;function Pm(){return fw=!0,dw}let Ii;const hw=new ut("AllowMultipleToken");class xm{constructor(t,n){this.name=t,this.token=n}}function pw(r,t,n=[]){const i=`Platform: ${t}`,o=new ut(i);return(s=[])=>{let a=gw();if(!a||a.injector.get(hw,!1))if(r)r(n.concat(s).concat({provide:o,useValue:!0}));else{const c=n.concat(s).concat({provide:o,useValue:!0},{provide:El,useValue:"platform"});!function(r){if(Ii&&!Ii.destroyed&&!Ii.injector.get(hw,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ii=r.get(mw);const t=r.get(iw,null);t&&t.forEach(n=>n())}(en.create({providers:c,name:i}))}return function(r){const t=gw();if(!t)throw new Error("No platform exists!");if(!t.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(o)}}function gw(){return Ii&&!Ii.destroyed?Ii:null}let mw=(()=>{class r{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const c=function(r,t){let n;return n="noop"===r?new VF:("zone.js"===r?void 0:r)||new wt({enableLongStackTrace:Pm(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:wt,useValue:c}];return c.run(()=>{const f=en.create({providers:l,parent:this.injector,name:n.moduleType.name}),b=n.create(f),O=b.injector.get(Rs,null);if(!O)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return c.runOutsideAngular(()=>{const j=c.onError.subscribe({next:z=>{O.handleError(z)}});b.onDestroy(()=>{Lm(this._modules,b),j.unsubscribe()})}),function(r,t,n){try{const i=n();return Al(i)?i.catch(o=>{throw t.runOutsideAngular(()=>r.handleError(o)),o}):i}catch(i){throw t.runOutsideAngular(()=>r.handleError(i)),i}}(O,c,()=>{const j=b.injector.get(pc);return j.runInitializers(),j.donePromise.then(()=>($g(b.injector.get(Eo,Bd)||Bd),this._moduleDoBootstrap(b),b))})})}bootstrapModule(n,i=[]){const o=_w({},i);return function(r,t,n){const i=new gm(n);return Promise.resolve(i)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(n){const i=n.injector.get(Ls);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${It(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(n){return new(n||r)(De(en))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();function _w(r,t){return Array.isArray(t)?t.reduce(_w,r):Object.assign(Object.assign({},r),t)}let Ls=(()=>{class r{constructor(n,i,o,s,a){this._zone=n,this._injector=i,this._exceptionHandler=o,this._componentFactoryResolver=s,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new ae(f=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{f.next(this._stable),f.complete()})}),l=new ae(f=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{wt.assertNotInAngularZone(),Om(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,f.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{wt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{f.next(!1)}))});return()=>{b.unsubscribe(),O.unsubscribe()}});this.isStable=Z(c,l.pipe(r=>Se()(function(r,t){return function(i){let o;o="function"==typeof r?r:function(){return r};const s=Object.create(i,Xe);return s.source=i,s.subjectFactory=o,s}}(vt)(r))))}bootstrap(n,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let o;o=n instanceof HS?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(o.componentType);const s=function(r){return r.isBoundToModule}(o)?void 0:this._injector.get(Ji),c=o.create(en.NULL,[],i||o.selector,s),l=c.location.nativeElement,f=c.injector.get(Nm,null),b=f&&c.injector.get(uw);return f&&b&&b.registerApplication(l,f),c.onDestroy(()=>{this.detachView(c.hostView),Lm(this.components,c),b&&b.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;Lm(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(ow,[]).concat(this._bootstrapListeners).forEach(o=>o(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(n){return new(n||r)(De(wt),De(en),De(Rs),De(yo),De(pc))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();function Lm(r,t){const n=r.indexOf(t);n>-1&&r.splice(n,1)}class rf{}class e5{}const t5={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let n5=(()=>{class r{constructor(n,i){this._compiler=n,this._config=i||t5}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[i,o]=n.split("#");return void 0===o&&(o="default"),U(255)(i).then(s=>s[o]).then(s=>bw(s,i,o)).then(s=>this._compiler.compileModuleAsync(s))}loadFactory(n){let[i,o]=n.split("#"),s="NgFactory";return void 0===o&&(o="default",s=""),U(255)(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(a=>a[o+s]).then(a=>bw(a,i,o))}}return r.\u0275fac=function(n){return new(n||r)(De(xs),De(e5,8))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();function bw(r,t,n){if(!r)throw new Error(`Cannot find '${n}' in '${t}'`);return r}const f5=pw(null,"core",[{provide:gc,useValue:"unknown"},{provide:mw,deps:[en]},{provide:uw,deps:[]},{provide:tf,deps:[]}]),_5=[{provide:Ls,useClass:Ls,deps:[wt,en,Rs,yo,pc]},{provide:b4,deps:[wt],useFactory:function(r){let t=[];return r.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(n){t.push(n)}}},{provide:pc,useClass:pc,deps:[[new Mr,Gl]]},{provide:xs,useClass:xs,deps:[]},wF,{provide:oc,useFactory:function(){return gL},deps:[]},{provide:sc,useFactory:function(){return mL},deps:[]},{provide:Eo,useFactory:function(r){return $g(r=r||"undefined"!=typeof $localize&&$localize.locale||Bd),r},deps:[[new ka(Eo),new Mr,new Wo]]},{provide:sw,useValue:"USD"}];let v5=(()=>{class r{constructor(n){}}return r.\u0275fac=function(n){return new(n||r)(De(Ls))},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:_5}),r})(),pf=null;function Xi(){return pf}const bt=new ut("DocumentToken");let Us=(()=>{class r{historyGo(n){throw new Error("Not implemented")}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({factory:yV,token:r,providedIn:"platform"}),r})();function yV(){return De(Gw)}const vV=new ut("Location Initialized");let Gw=(()=>{class r extends Us{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xi().getBaseHref(this._doc)}onPopState(n){const i=Xi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=Xi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,i,o){zw()?this._history.pushState(n,i,o):this.location.hash=o}replaceState(n,i,o){zw()?this._history.replaceState(n,i,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return r.\u0275fac=function(n){return new(n||r)(De(bt))},r.\u0275prov=$e({factory:EV,token:r,providedIn:"platform"}),r})();function zw(){return!!window.history.pushState}function EV(){return new Gw(De(bt))}function Qm(r,t){if(0==r.length)return t;if(0==t.length)return r;let n=0;return r.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?r+t.substring(1):1==n?r+t:r+"/"+t}function $w(r){const t=r.match(/#|\?|$/),n=t&&t.index||r.length;return r.slice(0,n-("/"===r[n-1]?1:0))+r.slice(n)}function So(r){return r&&"?"!==r[0]?"?"+r:r}let yc=(()=>{class r{historyGo(n){throw new Error("Not implemented")}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({factory:bV,token:r,providedIn:"root"}),r})();function bV(r){const t=De(bt).location;return new Kw(De(Us),t&&t.origin||"")}const Xm=new ut("appBaseHref");let Kw=(()=>{class r extends yc{constructor(n,i){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Qm(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+So(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${i}${o}`:i}pushState(n,i,o,s){const a=this.prepareExternalUrl(o+So(s));this._platformLocation.pushState(n,i,a)}replaceState(n,i,o,s){const a=this.prepareExternalUrl(o+So(s));this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var i,o;null===(o=(i=this._platformLocation).historyGo)||void 0===o||o.call(i,n)}}return r.\u0275fac=function(n){return new(n||r)(De(Us),De(Xm,8))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),SV=(()=>{class r extends yc{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){const i=Qm(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,o,s){let a=this.prepareExternalUrl(o+So(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(n,i,a)}replaceState(n,i,o,s){let a=this.prepareExternalUrl(o+So(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var i,o;null===(o=(i=this._platformLocation).historyGo)||void 0===o||o.call(i,n)}}return r.\u0275fac=function(n){return new(n||r)(De(Us),De(Xm,8))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),Ql=(()=>{class r{constructor(n,i){this._subject=new Kt,this._urlChangeListeners=[],this._platformStrategy=n;const o=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=$w(Yw(o)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+So(i))}normalize(n){return r.stripTrailingSlash(function(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,Yw(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,i="",o=null){this._platformStrategy.pushState(o,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+So(i)),o)}replaceState(n,i="",o=null){this._platformStrategy.replaceState(o,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+So(i)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var i,o;null===(o=(i=this._platformStrategy).historyGo)||void 0===o||o.call(i,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(o=>o(n,i))}subscribe(n,i,o){return this._subject.subscribe({next:n,error:i,complete:o})}}return r.\u0275fac=function(n){return new(n||r)(De(yc),De(Us))},r.normalizeQueryParams=So,r.joinWithSlash=Qm,r.stripTrailingSlash=$w,r.\u0275prov=$e({factory:CV,token:r,providedIn:"root"}),r})();function CV(){return new Ql(De(yc),De(Us))}function Yw(r){return r.replace(/\/index.html$/,"")}const Jw={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Nr=(()=>((Nr=Nr||{})[Nr.Decimal=0]="Decimal",Nr[Nr.Percent=1]="Percent",Nr[Nr.Currency=2]="Currency",Nr[Nr.Scientific=3]="Scientific",Nr))(),jn=(()=>((jn=jn||{})[jn.Zero=0]="Zero",jn[jn.One=1]="One",jn[jn.Two=2]="Two",jn[jn.Few=3]="Few",jn[jn.Many=4]="Many",jn[jn.Other=5]="Other",jn))(),Ln=(()=>((Ln=Ln||{})[Ln.Format=0]="Format",Ln[Ln.Standalone=1]="Standalone",Ln))(),Yt=(()=>((Yt=Yt||{})[Yt.Narrow=0]="Narrow",Yt[Yt.Abbreviated=1]="Abbreviated",Yt[Yt.Wide=2]="Wide",Yt[Yt.Short=3]="Short",Yt))(),Rn=(()=>((Rn=Rn||{})[Rn.Short=0]="Short",Rn[Rn.Medium=1]="Medium",Rn[Rn.Long=2]="Long",Rn[Rn.Full=3]="Full",Rn))(),St=(()=>((St=St||{})[St.Decimal=0]="Decimal",St[St.Group=1]="Group",St[St.List=2]="List",St[St.PercentSign=3]="PercentSign",St[St.PlusSign=4]="PlusSign",St[St.MinusSign=5]="MinusSign",St[St.Exponential=6]="Exponential",St[St.SuperscriptingExponent=7]="SuperscriptingExponent",St[St.PerMille=8]="PerMille",St[St.Infinity=9]="Infinity",St[St.NaN=10]="NaN",St[St.TimeSeparator=11]="TimeSeparator",St[St.CurrencyDecimal=12]="CurrencyDecimal",St[St.CurrencyGroup=13]="CurrencyGroup",St))();function gf(r,t){return ci(Cr(r)[ot.DateFormat],t)}function mf(r,t){return ci(Cr(r)[ot.TimeFormat],t)}function _f(r,t){return ci(Cr(r)[ot.DateTimeFormat],t)}function ai(r,t){const n=Cr(r),i=n[ot.NumberSymbols][t];if(void 0===i){if(t===St.CurrencyDecimal)return n[ot.NumberSymbols][St.Decimal];if(t===St.CurrencyGroup)return n[ot.NumberSymbols][St.Group]}return i}const MV=function(r){return Cr(r)[ot.PluralCase]};function Qw(r){if(!r[ot.ExtraData])throw new Error(`Missing extra locale data for the locale "${r[ot.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ci(r,t){for(let n=t;n>-1;n--)if(void 0!==r[n])return r[n];throw new Error("Locale data API: locale data undefined")}function e_(r){const[t,n]=r.split(":");return{hours:+t,minutes:+n}}const FV=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xl={},VV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Qn=(()=>((Qn=Qn||{})[Qn.Short=0]="Short",Qn[Qn.ShortGMT=1]="ShortGMT",Qn[Qn.Long=2]="Long",Qn[Qn.Extended=3]="Extended",Qn))(),At=(()=>((At=At||{})[At.FullYear=0]="FullYear",At[At.Month=1]="Month",At[At.Date=2]="Date",At[At.Hours=3]="Hours",At[At.Minutes=4]="Minutes",At[At.Seconds=5]="Seconds",At[At.FractionalSeconds=6]="FractionalSeconds",At[At.Day=7]="Day",At))(),Bt=(()=>((Bt=Bt||{})[Bt.DayPeriods=0]="DayPeriods",Bt[Bt.Days=1]="Days",Bt[Bt.Months=2]="Months",Bt[Bt.Eras=3]="Eras",Bt))();function UV(r,t,n,i){let o=function(r){if(eT(r))return r;if("number"==typeof r&&!isNaN(r))return new Date(r);if("string"==typeof r){if(r=r.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(r)){const[o,s=1,a=1]=r.split("-").map(c=>+c);return yf(o,s-1,a)}const n=parseFloat(r);if(!isNaN(r-n))return new Date(n);let i;if(i=r.match(FV))return function(r){const t=new Date(0);let n=0,i=0;const o=r[8]?t.setUTCFullYear:t.setFullYear,s=r[8]?t.setUTCHours:t.setHours;r[9]&&(n=Number(r[9]+r[10]),i=Number(r[9]+r[11])),o.call(t,Number(r[1]),Number(r[2])-1,Number(r[3]));const a=Number(r[4]||0)-n,c=Number(r[5]||0)-i,l=Number(r[6]||0),f=Math.floor(1e3*parseFloat("0."+(r[7]||0)));return s.call(t,a,c,l,f),t}(i)}const t=new Date(r);if(!eT(t))throw new Error(`Unable to convert "${r}" into a date`);return t}(r);t=Co(n,t)||t;let c,a=[];for(;t;){if(c=VV.exec(t),!c){a.push(t);break}{a=a.concat(c.slice(1));const b=a.pop();if(!b)break;t=b}}let l=o.getTimezoneOffset();i&&(l=Zw(i,l),o=function(r,t,n){const o=r.getTimezoneOffset();return function(r,t){return(r=new Date(r.getTime())).setMinutes(r.getMinutes()+t),r}(r,-1*(Zw(t,o)-o))}(o,i));let f="";return a.forEach(b=>{const O=function(r){if(n_[r])return n_[r];let t;switch(r){case"G":case"GG":case"GGG":t=hn(Bt.Eras,Yt.Abbreviated);break;case"GGGG":t=hn(Bt.Eras,Yt.Wide);break;case"GGGGG":t=hn(Bt.Eras,Yt.Narrow);break;case"y":t=Bn(At.FullYear,1,0,!1,!0);break;case"yy":t=Bn(At.FullYear,2,0,!0,!0);break;case"yyy":t=Bn(At.FullYear,3,0,!1,!0);break;case"yyyy":t=Bn(At.FullYear,4,0,!1,!0);break;case"Y":t=Sf(1);break;case"YY":t=Sf(2,!0);break;case"YYY":t=Sf(3);break;case"YYYY":t=Sf(4);break;case"M":case"L":t=Bn(At.Month,1,1);break;case"MM":case"LL":t=Bn(At.Month,2,1);break;case"MMM":t=hn(Bt.Months,Yt.Abbreviated);break;case"MMMM":t=hn(Bt.Months,Yt.Wide);break;case"MMMMM":t=hn(Bt.Months,Yt.Narrow);break;case"LLL":t=hn(Bt.Months,Yt.Abbreviated,Ln.Standalone);break;case"LLLL":t=hn(Bt.Months,Yt.Wide,Ln.Standalone);break;case"LLLLL":t=hn(Bt.Months,Yt.Narrow,Ln.Standalone);break;case"w":t=t_(1);break;case"ww":t=t_(2);break;case"W":t=t_(1,!0);break;case"d":t=Bn(At.Date,1);break;case"dd":t=Bn(At.Date,2);break;case"c":case"cc":t=Bn(At.Day,1);break;case"ccc":t=hn(Bt.Days,Yt.Abbreviated,Ln.Standalone);break;case"cccc":t=hn(Bt.Days,Yt.Wide,Ln.Standalone);break;case"ccccc":t=hn(Bt.Days,Yt.Narrow,Ln.Standalone);break;case"cccccc":t=hn(Bt.Days,Yt.Short,Ln.Standalone);break;case"E":case"EE":case"EEE":t=hn(Bt.Days,Yt.Abbreviated);break;case"EEEE":t=hn(Bt.Days,Yt.Wide);break;case"EEEEE":t=hn(Bt.Days,Yt.Narrow);break;case"EEEEEE":t=hn(Bt.Days,Yt.Short);break;case"a":case"aa":case"aaa":t=hn(Bt.DayPeriods,Yt.Abbreviated);break;case"aaaa":t=hn(Bt.DayPeriods,Yt.Wide);break;case"aaaaa":t=hn(Bt.DayPeriods,Yt.Narrow);break;case"b":case"bb":case"bbb":t=hn(Bt.DayPeriods,Yt.Abbreviated,Ln.Standalone,!0);break;case"bbbb":t=hn(Bt.DayPeriods,Yt.Wide,Ln.Standalone,!0);break;case"bbbbb":t=hn(Bt.DayPeriods,Yt.Narrow,Ln.Standalone,!0);break;case"B":case"BB":case"BBB":t=hn(Bt.DayPeriods,Yt.Abbreviated,Ln.Format,!0);break;case"BBBB":t=hn(Bt.DayPeriods,Yt.Wide,Ln.Format,!0);break;case"BBBBB":t=hn(Bt.DayPeriods,Yt.Narrow,Ln.Format,!0);break;case"h":t=Bn(At.Hours,1,-12);break;case"hh":t=Bn(At.Hours,2,-12);break;case"H":t=Bn(At.Hours,1);break;case"HH":t=Bn(At.Hours,2);break;case"m":t=Bn(At.Minutes,1);break;case"mm":t=Bn(At.Minutes,2);break;case"s":t=Bn(At.Seconds,1);break;case"ss":t=Bn(At.Seconds,2);break;case"S":t=Bn(At.FractionalSeconds,1);break;case"SS":t=Bn(At.FractionalSeconds,2);break;case"SSS":t=Bn(At.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Ef(Qn.Short);break;case"ZZZZZ":t=Ef(Qn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Ef(Qn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Ef(Qn.Long);break;default:return null}return n_[r]=t,t}(b);f+=O?O(o,n,l):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function yf(r,t,n){const i=new Date(0);return i.setFullYear(r,t,n),i.setHours(0,0,0),i}function Co(r,t){const n=function(r){return Cr(r)[ot.LocaleId]}(r);if(Xl[n]=Xl[n]||{},Xl[n][t])return Xl[n][t];let i="";switch(t){case"shortDate":i=gf(r,Rn.Short);break;case"mediumDate":i=gf(r,Rn.Medium);break;case"longDate":i=gf(r,Rn.Long);break;case"fullDate":i=gf(r,Rn.Full);break;case"shortTime":i=mf(r,Rn.Short);break;case"mediumTime":i=mf(r,Rn.Medium);break;case"longTime":i=mf(r,Rn.Long);break;case"fullTime":i=mf(r,Rn.Full);break;case"short":const o=Co(r,"shortTime"),s=Co(r,"shortDate");i=vf(_f(r,Rn.Short),[o,s]);break;case"medium":const a=Co(r,"mediumTime"),c=Co(r,"mediumDate");i=vf(_f(r,Rn.Medium),[a,c]);break;case"long":const l=Co(r,"longTime"),f=Co(r,"longDate");i=vf(_f(r,Rn.Long),[l,f]);break;case"full":const b=Co(r,"fullTime"),O=Co(r,"fullDate");i=vf(_f(r,Rn.Full),[b,O])}return i&&(Xl[n][t]=i),i}function vf(r,t){return t&&(r=r.replace(/\{([^}]+)}/g,function(n,i){return null!=t&&i in t?t[i]:n})),r}function Mi(r,t,n="-",i,o){let s="";(r<0||o&&r<=0)&&(o?r=1-r:(r=-r,s=n));let a=String(r);for(;a.length<t;)a="0"+a;return i&&(a=a.substr(a.length-t)),s+a}function Bn(r,t,n=0,i=!1,o=!1){return function(s,a){let c=function(r,t){switch(r){case At.FullYear:return t.getFullYear();case At.Month:return t.getMonth();case At.Date:return t.getDate();case At.Hours:return t.getHours();case At.Minutes:return t.getMinutes();case At.Seconds:return t.getSeconds();case At.FractionalSeconds:return t.getMilliseconds();case At.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${r}".`)}}(r,s);if((n>0||c>-n)&&(c+=n),r===At.Hours)0===c&&-12===n&&(c=12);else if(r===At.FractionalSeconds)return function(r,t){return Mi(r,3).substr(0,t)}(c,t);const l=ai(a,St.MinusSign);return Mi(c,t,l,i,o)}}function hn(r,t,n=Ln.Format,i=!1){return function(o,s){return function(r,t,n,i,o,s){switch(n){case Bt.Months:return function(r,t,n){const i=Cr(r),s=ci([i[ot.MonthsFormat],i[ot.MonthsStandalone]],t);return ci(s,n)}(t,o,i)[r.getMonth()];case Bt.Days:return function(r,t,n){const i=Cr(r),s=ci([i[ot.DaysFormat],i[ot.DaysStandalone]],t);return ci(s,n)}(t,o,i)[r.getDay()];case Bt.DayPeriods:const a=r.getHours(),c=r.getMinutes();if(s){const f=function(r){const t=Cr(r);return Qw(t),(t[ot.ExtraData][2]||[]).map(i=>"string"==typeof i?e_(i):[e_(i[0]),e_(i[1])])}(t),b=function(r,t,n){const i=Cr(r);Qw(i);const s=ci([i[ot.ExtraData][0],i[ot.ExtraData][1]],t)||[];return ci(s,n)||[]}(t,o,i),O=f.findIndex(j=>{if(Array.isArray(j)){const[z,$]=j,Q=a>=z.hours&&c>=z.minutes,re=a<$.hours||a===$.hours&&c<$.minutes;if(z.hours<$.hours){if(Q&&re)return!0}else if(Q||re)return!0}else if(j.hours===a&&j.minutes===c)return!0;return!1});if(-1!==O)return b[O]}return function(r,t,n){const i=Cr(r),s=ci([i[ot.DayPeriodsFormat],i[ot.DayPeriodsStandalone]],t);return ci(s,n)}(t,o,i)[a<12?0:1];case Bt.Eras:return function(r,t){return ci(Cr(r)[ot.Eras],t)}(t,i)[r.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(o,s,r,t,n,i)}}function Ef(r){return function(t,n,i){const o=-1*i,s=ai(n,St.MinusSign),a=o>0?Math.floor(o/60):Math.ceil(o/60);switch(r){case Qn.Short:return(o>=0?"+":"")+Mi(a,2,s)+Mi(Math.abs(o%60),2,s);case Qn.ShortGMT:return"GMT"+(o>=0?"+":"")+Mi(a,1,s);case Qn.Long:return"GMT"+(o>=0?"+":"")+Mi(a,2,s)+":"+Mi(Math.abs(o%60),2,s);case Qn.Extended:return 0===i?"Z":(o>=0?"+":"")+Mi(a,2,s)+":"+Mi(Math.abs(o%60),2,s);default:throw new Error(`Unknown zone width "${r}"`)}}}function Xw(r){return yf(r.getFullYear(),r.getMonth(),r.getDate()+(4-r.getDay()))}function t_(r,t=!1){return function(n,i){let o;if(t){const s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,a=n.getDate();o=1+Math.floor((a+s)/7)}else{const s=Xw(n),a=function(r){const t=yf(r,0,1).getDay();return yf(r,0,1+(t<=4?4:11)-t)}(s.getFullYear()),c=s.getTime()-a.getTime();o=1+Math.round(c/6048e5)}return Mi(o,r,ai(i,St.MinusSign))}}function Sf(r,t=!1){return function(n,i){return Mi(Xw(n).getFullYear(),r,ai(i,St.MinusSign),t)}}const n_={};function Zw(r,t){r=r.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+r)/6e4;return isNaN(n)?t:n}function eT(r){return r instanceof Date&&!isNaN(r.valueOf())}const JV=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function e6(r,t,n,i,o){const a=function(r,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=r.split(";"),o=i[0],s=i[1],a=-1!==o.indexOf(".")?o.split("."):[o.substring(0,o.lastIndexOf("0")+1),o.substring(o.lastIndexOf("0")+1)],c=a[0],l=a[1]||"";n.posPre=c.substr(0,c.indexOf("#"));for(let b=0;b<l.length;b++){const O=l.charAt(b);"0"===O?n.minFrac=n.maxFrac=b+1:"#"===O?n.maxFrac=b+1:n.posSuf+=O}const f=c.split(",");if(n.gSize=f[1]?f[1].length:0,n.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,s){const b=o.length-n.posPre.length-n.posSuf.length,O=s.indexOf("#");n.negPre=s.substr(0,O).replace(/'/g,""),n.negSuf=s.substr(O+b).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function(r,t){return Cr(r)[ot.NumberFormats][t]}(t,Nr.Currency),ai(t,St.MinusSign));return a.minFrac=function(r){let t;const n=Jw[r];return n&&(t=n[2]),"number"==typeof t?t:2}(i),a.maxFrac=a.minFrac,function(r,t,n,i,o,s,a=!1){let c="",l=!1;if(isFinite(r)){let f=function(r){let i,o,s,a,c,t=Math.abs(r)+"",n=0;for((o=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(o<0&&(o=s),o+=+t.slice(s+1),t=t.substring(0,s)):o<0&&(o=t.length),s=0;"0"===t.charAt(s);s++);if(s===(c=t.length))i=[0],o=1;else{for(c--;"0"===t.charAt(c);)c--;for(o-=s,i=[],a=0;s<=c;s++,a++)i[a]=Number(t.charAt(s))}return o>22&&(i=i.splice(0,21),n=o-1,o=1),{digits:i,exponent:n,integerLen:o}}(r);a&&(f=function(r){if(0===r.digits[0])return r;const t=r.digits.length-r.integerLen;return r.exponent?r.exponent+=2:(0===t?r.digits.push(0,0):1===t&&r.digits.push(0),r.integerLen+=2),r}(f));let b=t.minInt,O=t.minFrac,j=t.maxFrac;if(s){const he=s.match(JV);if(null===he)throw new Error(`${s} is not a valid digit info`);const Ae=he[1],Fe=he[3],Be=he[5];null!=Ae&&(b=s_(Ae)),null!=Fe&&(O=s_(Fe)),null!=Be?j=s_(Be):null!=Fe&&O>j&&(j=O)}!function(r,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let i=r.digits,o=i.length-r.integerLen;const s=Math.min(Math.max(t,o),n);let a=s+r.integerLen,c=i[a];if(a>0){i.splice(Math.max(r.integerLen,a));for(let O=a;O<i.length;O++)i[O]=0}else{o=Math.max(0,o),r.integerLen=1,i.length=Math.max(1,a=s+1),i[0]=0;for(let O=1;O<a;O++)i[O]=0}if(c>=5)if(a-1<0){for(let O=0;O>a;O--)i.unshift(0),r.integerLen++;i.unshift(1),r.integerLen++}else i[a-1]++;for(;o<Math.max(0,s);o++)i.push(0);let l=0!==s;const f=t+r.integerLen,b=i.reduceRight(function(O,j,z,$){return $[z]=(j+=O)<10?j:j-10,l&&(0===$[z]&&z>=f?$.pop():l=!1),j>=10?1:0},0);b&&(i.unshift(b),r.integerLen++)}(f,O,j);let z=f.digits,$=f.integerLen;const Q=f.exponent;let re=[];for(l=z.every(he=>!he);$<b;$++)z.unshift(0);for(;$<0;$++)z.unshift(0);$>0?re=z.splice($,z.length):(re=z,z=[0]);const Ee=[];for(z.length>=t.lgSize&&Ee.unshift(z.splice(-t.lgSize,z.length).join(""));z.length>t.gSize;)Ee.unshift(z.splice(-t.gSize,z.length).join(""));z.length&&Ee.unshift(z.join("")),c=Ee.join(ai(n,i)),re.length&&(c+=ai(n,o)+re.join("")),Q&&(c+=ai(n,St.Exponential)+"+"+Q)}else c=ai(n,St.Infinity);return c=r<0&&!l?t.negPre+c+t.negSuf:t.posPre+c+t.posSuf,c}(r,a,t,St.CurrencyGroup,St.CurrencyDecimal,o).replace("\xa4",n).replace("\xa4","").trim()}function s_(r){const t=parseInt(r);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+r);return t}class wf{}let s6=(()=>{class r extends wf{constructor(n){super(),this.locale=n}getPluralCategory(n,i){switch(MV(i||this.locale)(n)){case jn.Zero:return"zero";case jn.One:return"one";case jn.Two:return"two";case jn.Few:return"few";case jn.Many:return"many";default:return"other"}}}return r.\u0275fac=function(n){return new(n||r)(De(Eo))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();function iT(r,t){t=encodeURIComponent(t);for(const n of r.split(";")){const i=n.indexOf("="),[o,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(o.trim()===t)return decodeURIComponent(s)}return null}let eu=(()=>{class r{constructor(n,i){this._viewContainer=n,this._context=new u6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){cT("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){cT("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}}return r.\u0275fac=function(n){return new(n||r)(Ie(wr),Ie(ii))},r.\u0275dir=Ye({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),r})();class u6{constructor(){this.$implicit=null,this.ngIf=null}}function cT(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${It(t)}'.`)}class a_{constructor(t,n){this._viewContainerRef=t,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let tu=(()=>{class r{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(n){this._ngSwitch=n,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(n){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(n)}_matchCase(n){const i=n==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(n){if(this._defaultViews&&n!==this._defaultUsed){this._defaultUsed=n;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(n)}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=Ye({type:r,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),r})(),c_=(()=>{class r{constructor(n,i,o){this.ngSwitch=o,o._addCase(),this._view=new a_(n,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return r.\u0275fac=function(n){return new(n||r)(Ie(wr),Ie(ii),Ie(tu,9))},r.\u0275dir=Ye({type:r,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),r})();function Ni(r,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${It(r)}'`)}let fT=(()=>{class r{constructor(n){this.locale=n}transform(n,i="mediumDate",o,s){if(null==n||""===n||n!=n)return null;try{return UV(n,i,s||this.locale,o)}catch(a){throw Ni(r,a.message)}}}return r.\u0275fac=function(n){return new(n||r)(Ie(Eo,16))},r.\u0275pipe=Or({name:"date",type:r,pure:!0}),r})(),hT=(()=>{class r{transform(n){return JSON.stringify(n,null,2)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275pipe=Or({name:"json",type:r,pure:!1}),r})(),gT=(()=>{class r{constructor(n,i="USD"){this._locale=n,this._defaultCurrencyCode=i}transform(n,i=this._defaultCurrencyCode,o="symbol",s,a){if(!function(r){return!(null==r||""===r||r!=r)}(n))return null;a=a||this._locale,"boolean"==typeof o&&(o=o?"symbol":"code");let c=i||this._defaultCurrencyCode;"code"!==o&&(c="symbol"===o||"symbol-narrow"===o?function(r,t,n="en"){const i=function(r){return Cr(r)[ot.Currencies]}(n)[r]||Jw[r]||[],o=i[1];return"narrow"===t&&"string"==typeof o?o:i[0]||r}(c,"symbol"===o?"wide":"narrow",a):o);try{return e6(function(r){if("string"==typeof r&&!isNaN(Number(r)-parseFloat(r)))return Number(r);if("number"!=typeof r)throw new Error(`${r} is not a number`);return r}(n),a,c,i,s)}catch(l){throw Ni(r,l.message)}}}return r.\u0275fac=function(n){return new(n||r)(Ie(Eo,16),Ie(sw,16))},r.\u0275pipe=Or({name:"currency",type:r,pure:!0}),r})();let Jo=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:[{provide:wf,useClass:s6}]}),r})();const mT="browser";let _T=(()=>{class r{}return r.\u0275prov=$e({token:r,providedIn:"root",factory:()=>new P6(De(bt),window)}),r})();class P6{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function(r,t){const n=r.getElementById(t)||r.getElementsByName(t)[0];if(n)return n;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const i=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let o=i.currentNode;for(;o;){const s=o.shadowRoot;if(s){const a=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(a)return a}o=i.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),i=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],o-s[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=yT(this.window.history)||yT(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function yT(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class vT{}class d_ extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(r){pf||(pf=r)}(new d_)}onAndCancel(t,n,i){return t.addEventListener(n,i,!1),()=>{t.removeEventListener(n,i,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=(nu=nu||document.querySelector("base"),nu?nu.getAttribute("href"):null);return null==n?null:function(r){Tf=Tf||document.createElement("a"),Tf.setAttribute("href",r);const t=Tf.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){nu=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return iT(document.cookie,t)}}let Tf,nu=null;const ET=new ut("TRANSITION_ID"),j6=[{provide:Gl,useFactory:function(r,t,n){return()=>{n.get(pc).donePromise.then(()=>{const i=Xi(),o=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let s=0;s<o.length;s++)i.remove(o[s])})}},deps:[ET,bt,en],multi:!0}];class f_{static init(){!function(r){km=r}(new f_)}addToWindow(t){nn.getAngularTestability=(i,o=!0)=>{const s=t.findTestabilityInTree(i,o);if(null==s)throw new Error("Could not find testability for element.");return s},nn.getAllAngularTestabilities=()=>t.getAllTestabilities(),nn.getAllAngularRootElements=()=>t.getAllRootElements(),nn.frameworkStabilizers||(nn.frameworkStabilizers=[]),nn.frameworkStabilizers.push(i=>{const o=nn.getAllAngularTestabilities();let s=o.length,a=!1;const c=function(l){a=a||l,s--,0==s&&i(a)};o.forEach(function(l){l.whenStable(c)})})}findTestabilityInTree(t,n,i){if(null==n)return null;const o=t.getTestability(n);return null!=o?o:i?Xi().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}}let B6=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();const ru=new ut("EventManagerPlugins");let Rf=(()=>{class r{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(o=>o.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,i,o){return this._findPluginFor(i).addEventListener(n,i,o)}addGlobalEventListener(n,i,o){return this._findPluginFor(i).addGlobalEventListener(n,i,o)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const o=this._plugins;for(let s=0;s<o.length;s++){const a=o[s];if(a.supports(n))return this._eventNameToPlugin.set(n,a),a}throw new Error(`No event manager plugin found for event ${n}`)}}return r.\u0275fac=function(n){return new(n||r)(De(ru),De(wt))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();class h_{constructor(t){this._doc=t}addGlobalEventListener(t,n,i){const o=Xi().getGlobalEventTarget(this._doc,t);if(!o)throw new Error(`Unsupported event target ${o} for event ${n}`);return this.addEventListener(o,n,i)}}let ST=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(n){const i=new Set;n.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),i.add(o))}),this.onStylesAdded(i)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),iu=(()=>{class r extends ST{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,i,o){n.forEach(s=>{const a=this._doc.createElement("style");a.textContent=s,o.push(i.appendChild(a))})}addHost(n){const i=[];this._addStylesToHost(this._stylesSet,n,i),this._hostNodes.set(n,i)}removeHost(n){const i=this._hostNodes.get(n);i&&i.forEach(CT),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((i,o)=>{this._addStylesToHost(n,o,i)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(CT))}}return r.\u0275fac=function(n){return new(n||r)(De(bt))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();function CT(r){Xi().remove(r)}const p_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},g_=/%COMP%/g;function If(r,t,n){for(let i=0;i<t.length;i++){let o=t[i];Array.isArray(o)?If(r,o,n):(o=o.replace(g_,r),n.push(o))}return n}function AT(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let Of=(()=>{class r{constructor(n,i,o){this.eventManager=n,this.sharedStylesHost=i,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new m_(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;switch(i.encapsulation){case Fn.Emulated:{let o=this.rendererByCompId.get(i.id);return o||(o=new n8(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,o)),o.applyToHost(n),o}case 1:case Fn.ShadowDom:return new r8(this.eventManager,this.sharedStylesHost,n,i);default:if(!this.rendererByCompId.has(i.id)){const o=If(i.id,i.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(n){return new(n||r)(De(Rf),De(iu),De(zl))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();class m_{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,n){return n?document.createElementNS(p_[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){t.appendChild(n)}insertBefore(t,n,i){t&&t.insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,o){if(o){n=o+":"+n;const s=p_[o];s?t.setAttributeNS(s,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){const o=p_[i];o?t.removeAttributeNS(o,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,o){o&(Br.DashCase|Br.Important)?t.style.setProperty(n,i,o&Br.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Br.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t[n]=i}setValue(t,n){t.nodeValue=n}listen(t,n,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,AT(i)):this.eventManager.addEventListener(t,n,AT(i))}}class n8 extends m_{constructor(t,n,i,o){super(t),this.component=i;const s=If(o+"-"+i.id,i.styles,[]);n.addStyles(s),this.contentAttr=function(r){return"_ngcontent-%COMP%".replace(g_,r)}(o+"-"+i.id),this.hostAttr=function(r){return"_nghost-%COMP%".replace(g_,r)}(o+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}}class r8 extends m_{constructor(t,n,i,o){super(t),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=If(o.id,o.styles,[]);for(let a=0;a<s.length;a++){const c=document.createElement("style");c.textContent=s[a],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let i8=(()=>{class r extends h_{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,o){return n.addEventListener(i,o,!1),()=>this.removeEventListener(n,i,o)}removeEventListener(n,i,o){return n.removeEventListener(i,o)}}return r.\u0275fac=function(n){return new(n||r)(De(bt))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();const OT=["alt","control","meta","shift"],d8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DT={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},f8={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let h8=(()=>{class r extends h_{constructor(n){super(n)}supports(n){return null!=r.parseEventName(n)}addEventListener(n,i,o){const s=r.parseEventName(i),a=r.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xi().onAndCancel(n,s.domEventName,a))}static parseEventName(n){const i=n.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const s=r._normalizeKey(i.pop());let a="";if(OT.forEach(l=>{const f=i.indexOf(l);f>-1&&(i.splice(f,1),a+=l+".")}),a+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=o,c.fullKey=a,c}static getEventFullKey(n){let i="",o=function(r){let t=r.key;if(null==t){if(t=r.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===r.location&&DT.hasOwnProperty(t)&&(t=DT[t]))}return d8[t]||t}(n);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),OT.forEach(s=>{s!=o&&f8[s](n)&&(i+=s+".")}),i+=o,i}static eventCallback(n,i,o){return s=>{r.getEventFullKey(s)===n&&o.runGuarded(()=>i(s))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return r.\u0275fac=function(n){return new(n||r)(De(bt))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();const b8=pw(f5,"browser",[{provide:gc,useValue:mT},{provide:iw,useValue:function(){d_.makeCurrent(),f_.init()},multi:!0},{provide:bt,useFactory:function(){return function(r){yp=r}(document),document},deps:[]}]),S8=[[],{provide:El,useValue:"root"},{provide:Rs,useFactory:function(){return new Rs},deps:[]},{provide:ru,useClass:i8,multi:!0,deps:[bt,wt,gc]},{provide:ru,useClass:h8,multi:!0,deps:[bt]},[],{provide:Of,useClass:Of,deps:[Rf,iu,zl]},{provide:Ns,useExisting:Of},{provide:ST,useExisting:iu},{provide:iu,useClass:iu,deps:[bt]},{provide:Nm,useClass:Nm,deps:[wt]},{provide:Rf,useClass:Rf,deps:[ru,wt]},{provide:vT,useClass:B6,deps:[]},[]];let E_=(()=>{class r{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:r,providers:[{provide:zl,useValue:n.appId},{provide:ET,useExisting:zl},j6]}}}return r.\u0275fac=function(n){return new(n||r)(De(r,12))},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:S8,imports:[Jo,v5]}),r})();function Rt(...r){let t=r[r.length-1];return m(t)?(r.pop(),ke(r,t)):ve(r)}function js(r,t){return pe(r,t,1)}function ki(r,t){return function(i){return i.lift(new D8(r,t))}}"undefined"!=typeof window&&window;class D8{constructor(t,n){this.predicate=t,this.thisArg=n}call(t,n){return n.subscribe(new M8(t,this.predicate,this.thisArg))}}class M8 extends S{constructor(t,n,i){super(t),this.predicate=n,this.thisArg=i,this.count=0}_next(t){let n;try{n=this.predicate.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}n&&this.destination.next(t)}}class NT{}class kT{}class wo{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const o=n.slice(0,i),s=o.toLowerCase(),a=n.slice(i+1).trim();this.maybeSetNormalizedName(o,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(n=>{let i=t[n];const o=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(o,i),this.maybeSetNormalizedName(n,o))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof wo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new wo;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof wo?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,n);const o=("a"===t.op?this.headers.get(n):void 0)||[];o.push(...i),this.headers.set(n,o);break;case"d":const s=t.value;if(s){let a=this.headers.get(n);if(!a)return;a=a.filter(c=>-1===s.indexOf(c)),0===a.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class N8{encodeKey(t){return PT(t)}encodeValue(t){return PT(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const P8=/%(\d[a-f0-9])/gi,x8={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function PT(r){return encodeURIComponent(r).replace(P8,(t,n)=>{var i;return null!==(i=x8[n])&&void 0!==i?i:t})}function xT(r){return`${r}`}class Xo{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new N8,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(r,t){const n=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(o=>{const s=o.indexOf("="),[a,c]=-1==s?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,s)),t.decodeValue(o.slice(s+1))],l=n.get(a)||[];l.push(c),n.set(a,l)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const i=t.fromObject[n];this.map.set(n,Array.isArray(i)?i:[i])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(i=>{const o=t[i];Array.isArray(o)?o.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:o,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new Xo({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(xT(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const o=i.indexOf(xT(t.value));-1!==o&&i.splice(o,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class L8{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function LT(r){return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer}function FT(r){return"undefined"!=typeof Blob&&r instanceof Blob}function VT(r){return"undefined"!=typeof FormData&&r instanceof FormData}class ou{constructor(t,n,i,o){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==i?i:null,s=o):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new wo),this.context||(this.context=new L8),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{const c=n.indexOf("?");this.urlWithParams=n+(-1===c?"?":c<n.length-1?"&":"")+a}}else this.params=new Xo,this.urlWithParams=n}serializeBody(){return null===this.body?null:LT(this.body)||FT(this.body)||VT(this.body)||function(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Xo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||VT(this.body)?null:FT(this.body)?this.body.type||null:LT(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Xo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var n;const i=t.method||this.method,o=t.url||this.url,s=t.responseType||this.responseType,a=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let f=t.headers||this.headers,b=t.params||this.params;const O=null!==(n=t.context)&&void 0!==n?n:this.context;return void 0!==t.setHeaders&&(f=Object.keys(t.setHeaders).reduce((j,z)=>j.set(z,t.setHeaders[z]),f)),t.setParams&&(b=Object.keys(t.setParams).reduce((j,z)=>j.set(z,t.setParams[z]),b)),new ou(i,o,a,{params:b,headers:f,context:O,reportProgress:l,responseType:s,withCredentials:c})}}var Hn=(()=>((Hn=Hn||{})[Hn.Sent=0]="Sent",Hn[Hn.UploadProgress=1]="UploadProgress",Hn[Hn.ResponseHeader=2]="ResponseHeader",Hn[Hn.DownloadProgress=3]="DownloadProgress",Hn[Hn.Response=4]="Response",Hn[Hn.User=5]="User",Hn))();class S_{constructor(t,n=200,i="OK"){this.headers=t.headers||new wo,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class C_ extends S_{constructor(t={}){super(t),this.type=Hn.ResponseHeader}clone(t={}){return new C_({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Df extends S_{constructor(t={}){super(t),this.type=Hn.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Df({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class w_ extends S_{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function T_(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let U8=(()=>{class r{constructor(n){this.handler=n}request(n,i,o={}){let s;if(n instanceof ou)s=n;else{let l,f;l=o.headers instanceof wo?o.headers:new wo(o.headers),o.params&&(f=o.params instanceof Xo?o.params:new Xo({fromObject:o.params})),s=new ou(n,i,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:f,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const a=Rt(s).pipe(js(l=>this.handler.handle(l)));if(n instanceof ou||"events"===o.observe)return a;const c=a.pipe(ki(l=>l instanceof Df));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(w(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(w(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(w(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(w(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new Xo).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,o={}){return this.request("PATCH",n,T_(o,i))}post(n,i,o={}){return this.request("POST",n,T_(o,i))}put(n,i,o={}){return this.request("PUT",n,T_(o,i))}}return r.\u0275fac=function(n){return new(n||r)(De(NT))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();class UT{constructor(t,n){this.next=t,this.interceptor=n}handle(t){return this.interceptor.intercept(t,this.next)}}const A_=new ut("HTTP_INTERCEPTORS");let j8=(()=>{class r{intercept(n,i){return i.handle(n)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();const B8=/^\)\]\}',?\n/;let jT=(()=>{class r{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ae(i=>{const o=this.xhrFactory.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((z,$)=>o.setRequestHeader(z,$.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const z=n.detectContentTypeHeader();null!==z&&o.setRequestHeader("Content-Type",z)}if(n.responseType){const z=n.responseType.toLowerCase();o.responseType="json"!==z?z:"text"}const s=n.serializeBody();let a=null;const c=()=>{if(null!==a)return a;const z=1223===o.status?204:o.status,$=o.statusText||"OK",Q=new wo(o.getAllResponseHeaders()),re=function(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(o)||n.url;return a=new C_({headers:Q,status:z,statusText:$,url:re}),a},l=()=>{let{headers:z,status:$,statusText:Q,url:re}=c(),Ee=null;204!==$&&(Ee=void 0===o.response?o.responseText:o.response),0===$&&($=Ee?200:0);let he=$>=200&&$<300;if("json"===n.responseType&&"string"==typeof Ee){const Ae=Ee;Ee=Ee.replace(B8,"");try{Ee=""!==Ee?JSON.parse(Ee):null}catch(Fe){Ee=Ae,he&&(he=!1,Ee={error:Fe,text:Ee})}}he?(i.next(new Df({body:Ee,headers:z,status:$,statusText:Q,url:re||void 0})),i.complete()):i.error(new w_({error:Ee,headers:z,status:$,statusText:Q,url:re||void 0}))},f=z=>{const{url:$}=c(),Q=new w_({error:z,status:o.status||0,statusText:o.statusText||"Unknown Error",url:$||void 0});i.error(Q)};let b=!1;const O=z=>{b||(i.next(c()),b=!0);let $={type:Hn.DownloadProgress,loaded:z.loaded};z.lengthComputable&&($.total=z.total),"text"===n.responseType&&!!o.responseText&&($.partialText=o.responseText),i.next($)},j=z=>{let $={type:Hn.UploadProgress,loaded:z.loaded};z.lengthComputable&&($.total=z.total),i.next($)};return o.addEventListener("load",l),o.addEventListener("error",f),o.addEventListener("timeout",f),o.addEventListener("abort",f),n.reportProgress&&(o.addEventListener("progress",O),null!==s&&o.upload&&o.upload.addEventListener("progress",j)),o.send(s),i.next({type:Hn.Sent}),()=>{o.removeEventListener("error",f),o.removeEventListener("abort",f),o.removeEventListener("load",l),o.removeEventListener("timeout",f),n.reportProgress&&(o.removeEventListener("progress",O),null!==s&&o.upload&&o.upload.removeEventListener("progress",j)),o.readyState!==o.DONE&&o.abort()}})}}return r.\u0275fac=function(n){return new(n||r)(De(vT))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();const R_=new ut("XSRF_COOKIE_NAME"),I_=new ut("XSRF_HEADER_NAME");class BT{}let W8=(()=>{class r{constructor(n,i,o){this.doc=n,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=iT(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return r.\u0275fac=function(n){return new(n||r)(De(bt),De(gc),De(R_))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),O_=(()=>{class r{constructor(n,i){this.tokenService=n,this.headerName=i}intercept(n,i){const o=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||o.startsWith("http://")||o.startsWith("https://"))return i.handle(n);const s=this.tokenService.getToken();return null!==s&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,s)})),i.handle(n)}}return r.\u0275fac=function(n){return new(n||r)(De(BT),De(I_))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),q8=(()=>{class r{constructor(n,i){this.backend=n,this.injector=i,this.chain=null}handle(n){if(null===this.chain){const i=this.injector.get(A_,[]);this.chain=i.reduceRight((o,s)=>new UT(o,s),this.backend)}return this.chain.handle(n)}}return r.\u0275fac=function(n){return new(n||r)(De(kT),De(en))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),G8=(()=>{class r{static disable(){return{ngModule:r,providers:[{provide:O_,useClass:j8}]}}static withOptions(n={}){return{ngModule:r,providers:[n.cookieName?{provide:R_,useValue:n.cookieName}:[],n.headerName?{provide:I_,useValue:n.headerName}:[]]}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:[O_,{provide:A_,useExisting:O_,multi:!0},{provide:BT,useClass:W8},{provide:R_,useValue:"XSRF-TOKEN"},{provide:I_,useValue:"X-XSRF-TOKEN"}]}),r})(),HT=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:[U8,{provide:NT,useClass:q8},jT,{provide:kT,useExisting:jT}],imports:[[G8.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),r})();function Mf(r,t){return new ae(n=>{const i=r.length;if(0===i)return void n.complete();const o=new Array(i);let s=0,a=0;for(let c=0;c<i;c++){const l=L(r[c]);let f=!1;n.add(l.subscribe({next:b=>{f||(f=!0,a++),o[c]=b},error:b=>n.error(b),complete:()=>{s++,(s===i||!f)&&(a===i&&n.next(t?t.reduce((b,O,j)=>(b[O]=o[j],b),{}):o),n.complete())}}))}})}let WT=(()=>{class r{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return r.\u0275fac=function(n){return new(n||r)(Ie(Yi),Ie(jt))},r.\u0275dir=Ye({type:r}),r})(),Bs=(()=>{class r extends WT{}return r.\u0275fac=function(){let t;return function(i){return(t||(t=ir(r)))(i||r)}}(),r.\u0275dir=Ye({type:r,features:[Ht]}),r})();const Zi=new ut("NgValueAccessor"),K8={provide:Zi,useExisting:an(()=>Nf),multi:!0},J8=new ut("CompositionEventMode");let Nf=(()=>{class r extends WT{constructor(n,i,o){super(n,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const r=Xi()?Xi().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(n){this.setProperty("value",null==n?"":n)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return r.\u0275fac=function(n){return new(n||r)(Ie(Yi),Ie(jt),Ie(J8,8))},r.\u0275dir=Ye({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,i){1&n&&on("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Wt([K8]),Ht]}),r})();const hr=new ut("NgValidators"),es=new ut("NgAsyncValidators");function eA(r){return null!=r}function tA(r){const t=Al(r)?L(r):r;return Vd(t),t}function nA(r){let t={};return r.forEach(n=>{t=null!=n?Object.assign(Object.assign({},t),n):t}),0===Object.keys(t).length?null:t}function rA(r,t){return t.map(n=>n(r))}function iA(r){return r.map(t=>function(r){return!r.validate}(t)?t:n=>t.validate(n))}function D_(r){return null!=r?function(r){if(!r)return null;const t=r.filter(eA);return 0==t.length?null:function(n){return nA(rA(n,t))}}(iA(r)):null}function M_(r){return null!=r?function(r){if(!r)return null;const t=r.filter(eA);return 0==t.length?null:function(n){return function(...r){if(1===r.length){const t=r[0];if(v(t))return Mf(t,null);if(A(t)&&Object.getPrototypeOf(t)===Object.prototype){const n=Object.keys(t);return Mf(n.map(i=>t[i]),n)}}if("function"==typeof r[r.length-1]){const t=r.pop();return Mf(r=1===r.length&&v(r[0])?r[0]:r,null).pipe(w(n=>t(...n)))}return Mf(r,null)}(rA(n,t).map(tA)).pipe(w(nA))}}(iA(r)):null}function aA(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function cA(r){return r._rawValidators}function lA(r){return r._rawAsyncValidators}function N_(r){return r?Array.isArray(r)?r:[r]:[]}function kf(r,t){return Array.isArray(r)?r.includes(t):r===t}function uA(r,t){const n=N_(t);return N_(r).forEach(o=>{kf(n,o)||n.push(o)}),n}function dA(r,t){return N_(t).filter(n=>!kf(r,n))}let fA=(()=>{class r{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=D_(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=M_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,i){return!!this.control&&this.control.hasError(n,i)}getError(n,i){return this.control?this.control.getError(n,i):null}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=Ye({type:r}),r})(),Ir=(()=>{class r extends fA{get formDirective(){return null}get path(){return null}}return r.\u0275fac=function(){let t;return function(i){return(t||(t=ir(r)))(i||r)}}(),r.\u0275dir=Ye({type:r,features:[Ht]}),r})();class eo extends fA{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let pA=(()=>{class r extends class{constructor(t){this._cd=t}is(t){var n,i,o;return"submitted"===t?!!(null===(n=this._cd)||void 0===n?void 0:n.submitted):!!(null===(o=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===o?void 0:o[t])}}{constructor(n){super(n)}}return r.\u0275fac=function(n){return new(n||r)(Ie(eo,2))},r.\u0275dir=Ye({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,i){2&n&&Jn("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[Ht]}),r})();function su(r,t){x_(r,t),t.valueAccessor.writeValue(r.value),function(r,t){t.valueAccessor.registerOnChange(n=>{r._pendingValue=n,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&gA(r,t)})}(r,t),function(r,t){const n=(i,o)=>{t.valueAccessor.writeValue(i),o&&t.viewToModelUpdate(i)};r.registerOnChange(n),t._registerOnDestroy(()=>{r._unregisterOnChange(n)})}(r,t),function(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&gA(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function(r,t){if(t.valueAccessor.setDisabledState){const n=i=>{t.valueAccessor.setDisabledState(i)};r.registerOnDisabledChange(n),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(n)})}}(r,t)}function Lf(r,t,n=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Vf(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function Ff(r,t){r.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function x_(r,t){const n=cA(r);null!==t.validator?r.setValidators(aA(n,t.validator)):"function"==typeof n&&r.setValidators([n]);const i=lA(r);null!==t.asyncValidator?r.setAsyncValidators(aA(i,t.asyncValidator)):"function"==typeof i&&r.setAsyncValidators([i]);const o=()=>r.updateValueAndValidity();Ff(t._rawValidators,o),Ff(t._rawAsyncValidators,o)}function Vf(r,t){let n=!1;if(null!==r){if(null!==t.validator){const o=cA(r);if(Array.isArray(o)&&o.length>0){const s=o.filter(a=>a!==t.validator);s.length!==o.length&&(n=!0,r.setValidators(s))}}if(null!==t.asyncValidator){const o=lA(r);if(Array.isArray(o)&&o.length>0){const s=o.filter(a=>a!==t.asyncValidator);s.length!==o.length&&(n=!0,r.setAsyncValidators(s))}}}const i=()=>{};return Ff(t._rawValidators,i),Ff(t._rawAsyncValidators,i),n}function gA(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function mA(r,t){x_(r,t)}function _A(r,t){r._syncPendingControls(),t.forEach(n=>{const i=n.control;"submit"===i.updateOn&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Uf(r,t){const n=r.indexOf(t);n>-1&&r.splice(n,1)}const au="VALID",jf="INVALID",vc="PENDING",cu="DISABLED";function V_(r){return(j_(r)?r.validators:r)||null}function yA(r){return Array.isArray(r)?D_(r):r||null}function U_(r,t){return(j_(t)?t.asyncValidators:r)||null}function vA(r){return Array.isArray(r)?M_(r):r||null}function j_(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class B_{constructor(t,n){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=yA(this._rawValidators),this._composedAsyncValidatorFn=vA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===au}get invalid(){return this.status===jf}get pending(){return this.status==vc}get disabled(){return this.status===cu}get enabled(){return this.status!==cu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=yA(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=vA(t)}addValidators(t){this.setValidators(uA(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(uA(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(dA(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(dA(t,this._rawAsyncValidators))}hasValidator(t){return kf(this._rawValidators,t)}hasAsyncValidator(t){return kf(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=vc,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=cu,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=au,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===au||this.status===vc)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cu:au}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=vc,this._hasOwnPendingAsyncValidator=!0;const n=tA(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){return function(r,t,n){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let i=r;return t.forEach(o=>{i=i instanceof H_?i.controls.hasOwnProperty(o)?i.controls[o]:null:i instanceof dU&&i.at(o)||null}),i}(this,t)}getError(t,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Kt,this.statusChanges=new Kt}_calculateStatus(){return this._allControlsDisabled()?cu:this.errors?jf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vc)?vc:this._anyControlsHaveStatus(jf)?jf:au}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){j_(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Hs extends B_{constructor(t=null,n,i){super(V_(n),U_(i,n)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=null,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Uf(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Uf(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class H_ extends B_{constructor(t,n,i){super(V_(n),U_(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n instanceof Hs?n.value:n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>!!i._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const n of Object.keys(this.controls)){const i=this.controls[n];if(this.contains(n)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,n,i)=>((n.enabled||this.disabled)&&(t[i]=n.value),t))}_reduceChildren(t,n){let i=t;return this._forEachChild((o,s)=>{i=n(i,o,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((n,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class dU extends B_{constructor(t,n,i){super(V_(n),U_(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),n&&(this.controls.splice(t,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){this._checkAllValuesPresent(t),t.forEach((i,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(t.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t instanceof Hs?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((n,i)=>!!i._syncPendingControls()||n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((n,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const fU={provide:Ir,useExisting:an(()=>uu)},lu=(()=>Promise.resolve(null))();let uu=(()=>{class r extends Ir{constructor(n,i){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Kt,this.form=new H_({},D_(n),M_(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){lu.then(()=>{const i=this._findContainer(n.path);n.control=i.registerControl(n.name,n.control),su(n.control,n),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){lu.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name),Uf(this._directives,n)})}addFormGroup(n){lu.then(()=>{const i=this._findContainer(n.path),o=new H_({});mA(o,n),i.registerControl(n.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){lu.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,i){lu.then(()=>{this.form.get(n.path).setValue(i)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,_A(this.form,this._directives),this.ngSubmit.emit(n),!1}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return r.\u0275fac=function(n){return new(n||r)(Ie(hr,10),Ie(es,10))},r.\u0275dir=Ye({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,i){1&n&&on("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Wt([fU]),Ht]}),r})(),TA=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({}),r})();const W_=new ut("NgModelWithFormControlWarning"),EU={provide:eo,useExisting:an(()=>q_)};let q_=(()=>{class r extends eo{constructor(n,i,o,s){super(),this._ngModelWarningConfig=s,this.update=new Kt,this._ngModelWarningSent=!1,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=function(r,t){if(!t)return null;let n,i,o;return Array.isArray(t),t.forEach(s=>{s.constructor===Nf?n=s:function(r){return Object.getPrototypeOf(r.constructor)===Bs}(s)?i=s:o=s}),o||i||n||null}(0,o)}set isDisabled(n){}ngOnChanges(n){if(this._isControlChanged(n)){const i=n.form.previousValue;i&&Lf(i,this,!1),su(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}(function(r,t){if(!r.hasOwnProperty("model"))return!1;const n=r.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)})(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Lf(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}}return r.\u0275fac=function(n){return new(n||r)(Ie(hr,10),Ie(es,10),Ie(Zi,10),Ie(W_,8))},r.\u0275dir=Ye({type:r,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Wt([EU]),Ht,Pn]}),r._ngModelWarningSentOnce=!1,r})();const bU={provide:Ir,useExisting:an(()=>du)};let du=(()=>{class r extends Ir{constructor(n,i){super(),this.validators=n,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Kt,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Vf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const i=this.form.get(n.path);return su(i,n),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){Lf(n.control||null,n,!1),Uf(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,i){this.form.get(n.path).setValue(i)}onSubmit(n){return this.submitted=!0,_A(this.form,this.directives),this.ngSubmit.emit(n),!1}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const i=n.control,o=this.form.get(n.path);i!==o&&(Lf(i||null,n),o instanceof Hs&&(su(o,n),n.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const i=this.form.get(n.path);mA(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const i=this.form.get(n.path);i&&function(r,t){return Vf(r,t)}(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){x_(this.form,this),this._oldForm&&Vf(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(n){return new(n||r)(Ie(hr,10),Ie(es,10))},r.\u0275dir=Ye({type:r,selectors:[["","formGroup",""]],hostBindings:function(n,i){1&n&&on("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Wt([bU]),Ht,Pn]}),r})(),BA=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[[TA]]}),r})(),Bf=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[BA]}),r})(),HA=(()=>{class r{static withConfig(n){return{ngModule:r,providers:[{provide:W_,useValue:n.warnOnNgModelWithFormControl}]}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[BA]}),r})();class WA{}const To="*";function J_(r,t){return{type:7,name:r,definitions:t,options:{}}}function Q_(r,t=null){return{type:4,styles:t,timings:r}}function qA(r,t=null){return{type:2,steps:r,options:t}}function ns(r){return{type:6,styles:r,offset:null}}function Hf(r,t,n){return{type:0,name:r,styles:t,options:n}}function Wf(r,t,n=null){return{type:1,expr:r,animation:t,options:n}}function GA(r){Promise.resolve(null).then(r)}class Ec{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){GA(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class zA{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,i=0,o=0;const s=this.players.length;0==s?GA(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++n==s&&this._onFinish()}),a.onDestroy(()=>{++i==s&&this._onDestroy()}),a.onStart(()=>{++o==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,c)=>Math.max(a,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(i=>{const o=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(o)})}getPosition(){const t=this.players.reduce((n,i)=>null===n||i.totalTime>n.totalTime?i:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}function $A(){return"undefined"!=typeof window&&void 0!==window.document}function Z_(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function rs(r){switch(r.length){case 0:return new Ec;case 1:return r[0];default:return new zA(r)}}function KA(r,t,n,i,o={},s={}){const a=[],c=[];let l=-1,f=null;if(i.forEach(b=>{const O=b.offset,j=O==l,z=j&&f||{};Object.keys(b).forEach($=>{let Q=$,re=b[$];if("offset"!==$)switch(Q=t.normalizePropertyName(Q,a),re){case"!":re=o[$];break;case To:re=s[$];break;default:re=t.normalizeStyleValue($,Q,re,a)}z[Q]=re}),j||c.push(z),f=z,l=O}),a.length){const b="\n - ";throw new Error(`Unable to animate due to the following errors:${b}${a.join(b)}`)}return c}function ey(r,t,n,i){switch(t){case"start":r.onStart(()=>i(n&&ty(n,"start",r)));break;case"done":r.onDone(()=>i(n&&ty(n,"done",r)));break;case"destroy":r.onDestroy(()=>i(n&&ty(n,"destroy",r)))}}function ty(r,t,n){const i=n.totalTime,s=ny(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,null==i?r.totalTime:i,!!n.disabled),a=r._data;return null!=a&&(s._data=a),s}function ny(r,t,n,i,o="",s=0,a){return{element:r,triggerName:t,fromState:n,toState:i,phaseName:o,totalTime:s,disabled:!!a}}function Wr(r,t,n){let i;return r instanceof Map?(i=r.get(t),i||r.set(t,i=n)):(i=r[t],i||(i=r[t]=n)),i}function YA(r){const t=r.indexOf(":");return[r.substring(1,t),r.substr(t+1)]}let ry=(r,t)=>!1,iy=(r,t)=>!1,JA=(r,t,n)=>[];const QA=Z_();(QA||"undefined"!=typeof Element)&&(ry=$A()?(r,t)=>{for(;t&&t!==document.documentElement;){if(t===r)return!0;t=t.parentNode||t.host}return!1}:(r,t)=>r.contains(t),iy=(()=>{if(QA||Element.prototype.matches)return(r,t)=>r.matches(t);{const r=Element.prototype,t=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector;return t?(n,i)=>t.apply(n,[i]):iy}})(),JA=(r,t,n)=>{let i=[];if(n){const o=r.querySelectorAll(t);for(let s=0;s<o.length;s++)i.push(o[s])}else{const o=r.querySelector(t);o&&i.push(o)}return i});let Ws=null,XA=!1;function oy(r){Ws||(Ws=("undefined"!=typeof document?document.body:null)||{},XA=!!Ws.style&&"WebkitAppearance"in Ws.style);let t=!0;return Ws.style&&!function(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in Ws.style,!t&&XA&&(t="Webkit"+r.charAt(0).toUpperCase()+r.substr(1)in Ws.style)),t}const sy=iy,ay=ry,cy=JA;function ZA(r){const t={};return Object.keys(r).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[i]=r[n]}),t}let e2=(()=>{class r{validateStyleProperty(n){return oy(n)}matchesElement(n,i){return sy(n,i)}containsElement(n,i){return ay(n,i)}query(n,i,o){return cy(n,i,o)}computeStyle(n,i,o){return o||""}animate(n,i,o,s,a,c=[],l){return new Ec(o,s)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),ly=(()=>{class r{}return r.NOOP=new e2,r})();const uy="ng-enter",qf="ng-leave",Gf="ng-trigger",zf=".ng-trigger",n2="ng-animating",dy=".ng-animating";function qs(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:fy(parseFloat(t[1]),t[2])}function fy(r,t){switch(t){case"s":return 1e3*r;default:return r}}function $f(r,t,n){return r.hasOwnProperty("duration")?r:function(r,t,n){let o,s=0,a="";if("string"==typeof r){const c=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return t.push(`The provided timing value "${r}" is invalid.`),{duration:0,delay:0,easing:""};o=fy(parseFloat(c[1]),c[2]);const l=c[3];null!=l&&(s=fy(parseFloat(l),c[4]));const f=c[5];f&&(a=f)}else o=r;if(!n){let c=!1,l=t.length;o<0&&(t.push("Duration values below 0 are not allowed for this animation step."),c=!0),s<0&&(t.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&t.splice(l,0,`The provided timing value "${r}" is invalid.`)}return{duration:o,delay:s,easing:a}}(r,t,n)}function bc(r,t={}){return Object.keys(r).forEach(n=>{t[n]=r[n]}),t}function is(r,t,n={}){if(t)for(let i in r)n[i]=r[i];else bc(r,n);return n}function o2(r,t,n){return n?t+":"+n+";":""}function s2(r){let t="";for(let n=0;n<r.style.length;n++){const i=r.style.item(n);t+=o2(0,i,r.style.getPropertyValue(i))}for(const n in r.style)r.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=o2(0,YU(n),r.style[n]));r.setAttribute("style",t)}function to(r,t,n){r.style&&(Object.keys(t).forEach(i=>{const o=py(i);n&&!n.hasOwnProperty(i)&&(n[i]=r.style[o]),r.style[o]=t[i]}),Z_()&&s2(r))}function Gs(r,t){r.style&&(Object.keys(t).forEach(n=>{const i=py(n);r.style[i]=""}),Z_()&&s2(r))}function fu(r){return Array.isArray(r)?1==r.length?r[0]:qA(r):r}const hy=new RegExp("{{\\s*(.+?)\\s*}}","g");function a2(r){let t=[];if("string"==typeof r){let n;for(;n=hy.exec(r);)t.push(n[1]);hy.lastIndex=0}return t}function Kf(r,t,n){const i=r.toString(),o=i.replace(hy,(s,a)=>{let c=t[a];return t.hasOwnProperty(a)||(n.push(`Please provide a value for the animation param ${a}`),c=""),c.toString()});return o==i?r:o}function Yf(r){const t=[];let n=r.next();for(;!n.done;)t.push(n.value),n=r.next();return t}const KU=/-+([a-z0-9])/g;function py(r){return r.replace(KU,(...t)=>t[1].toUpperCase())}function YU(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function c2(r,t){return 0===r||0===t}function l2(r,t,n){const i=Object.keys(n);if(i.length&&t.length){let s=t[0],a=[];if(i.forEach(c=>{s.hasOwnProperty(c)||a.push(c),s[c]=n[c]}),a.length)for(var o=1;o<t.length;o++){let c=t[o];a.forEach(function(l){c[l]=gy(r,l)})}}return t}function qr(r,t,n){switch(t.type){case 7:return r.visitTrigger(t,n);case 0:return r.visitState(t,n);case 1:return r.visitTransition(t,n);case 2:return r.visitSequence(t,n);case 3:return r.visitGroup(t,n);case 4:return r.visitAnimate(t,n);case 5:return r.visitKeyframes(t,n);case 6:return r.visitStyle(t,n);case 8:return r.visitReference(t,n);case 9:return r.visitAnimateChild(t,n);case 10:return r.visitAnimateRef(t,n);case 11:return r.visitQuery(t,n);case 12:return r.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function gy(r,t){return window.getComputedStyle(r)[t]}function JU(r,t){const n=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(i=>function(r,t,n){if(":"==r[0]){const l=function(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return t.push(`The transition alias value "${r}" is not supported`),"* => *"}}(r,n);if("function"==typeof l)return void t.push(l);r=l}const i=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${r}" is not supported`),t;const o=i[1],s=i[2],a=i[3];t.push(u2(o,a));"<"==s[0]&&!("*"==o&&"*"==a)&&t.push(u2(a,o))}(i,n,t)):n.push(r),n}const Qf=new Set(["true","1"]),Xf=new Set(["false","0"]);function u2(r,t){const n=Qf.has(r)||Xf.has(r),i=Qf.has(t)||Xf.has(t);return(o,s)=>{let a="*"==r||r==o,c="*"==t||t==s;return!a&&n&&"boolean"==typeof o&&(a=o?Qf.has(r):Xf.has(r)),!c&&i&&"boolean"==typeof s&&(c=s?Qf.has(t):Xf.has(t)),a&&c}}const ZU=new RegExp("s*:selfs*,?","g");function my(r,t,n){return new ej(r).build(t,n)}class ej{constructor(t){this._driver=t}build(t,n){const i=new rj(n);return this._resetContextStyleTimingState(i),qr(this,fu(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,n){let i=n.queryCount=0,o=n.depCount=0;const s=[],a=[];return"@"==t.name.charAt(0)&&n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(c=>{if(this._resetContextStyleTimingState(n),0==c.type){const l=c,f=l.name;f.toString().split(/\s*,\s*/).forEach(b=>{l.name=b,s.push(this.visitState(l,n))}),l.name=f}else if(1==c.type){const l=this.visitTransition(c,n);i+=l.queryCount,o+=l.depCount,a.push(l)}else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:s,transitions:a,queryCount:i,depCount:o,options:null}}visitState(t,n){const i=this.visitStyle(t.styles,n),o=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,a=o||{};if(i.styles.forEach(c=>{if(Zf(c)){const l=c;Object.keys(l).forEach(f=>{a2(l[f]).forEach(b=>{a.hasOwnProperty(b)||s.add(b)})})}}),s.size){const c=Yf(s.values());n.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${c.join(", ")}`)}}return{type:0,name:t.name,style:i,options:o?{params:o}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const i=qr(this,fu(t.animation),n);return{type:1,matchers:JU(t.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:zs(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(i=>qr(this,i,n)),options:zs(t.options)}}visitGroup(t,n){const i=n.currentTime;let o=0;const s=t.steps.map(a=>{n.currentTime=i;const c=qr(this,a,n);return o=Math.max(o,n.currentTime),c});return n.currentTime=o,{type:3,steps:s,options:zs(t.options)}}visitAnimate(t,n){const i=function(r,t){let n=null;if(r.hasOwnProperty("duration"))n=r;else if("number"==typeof r)return _y($f(r,t).duration,0,"");const i=r;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=_y(0,0,"");return s.dynamic=!0,s.strValue=i,s}return n=n||$f(i,t),_y(n.duration,n.delay,n.easing)}(t.timings,n.errors);n.currentAnimateTimings=i;let o,s=t.styles?t.styles:ns({});if(5==s.type)o=this.visitKeyframes(s,n);else{let a=t.styles,c=!1;if(!a){c=!0;const f={};i.easing&&(f.easing=i.easing),a=ns(f)}n.currentTime+=i.duration+i.delay;const l=this.visitStyle(a,n);l.isEmptyStep=c,o=l}return n.currentAnimateTimings=null,{type:4,timings:i,style:o,options:null}}visitStyle(t,n){const i=this._makeStyleAst(t,n);return this._validateStyleAst(i,n),i}_makeStyleAst(t,n){const i=[];Array.isArray(t.styles)?t.styles.forEach(a=>{"string"==typeof a?a==To?i.push(a):n.errors.push(`The provided style string value ${a} is not allowed.`):i.push(a)}):i.push(t.styles);let o=!1,s=null;return i.forEach(a=>{if(Zf(a)){const c=a,l=c.easing;if(l&&(s=l,delete c.easing),!o)for(let f in c)if(c[f].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,n){const i=n.currentAnimateTimings;let o=n.currentTime,s=n.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(a=>{"string"!=typeof a&&Object.keys(a).forEach(c=>{if(!this._driver.validateStyleProperty(c))return void n.errors.push(`The provided animation property "${c}" is not a supported CSS property for animations`);const l=n.collectedStyles[n.currentQuerySelector],f=l[c];let b=!0;f&&(s!=o&&s>=f.startTime&&o<=f.endTime&&(n.errors.push(`The CSS property "${c}" that exists between the times of "${f.startTime}ms" and "${f.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${o}ms"`),b=!1),s=f.startTime),b&&(l[c]={startTime:s,endTime:o}),n.options&&function(r,t,n){const i=t.params||{},o=a2(r);o.length&&o.forEach(s=>{i.hasOwnProperty(s)||n.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(a[c],n.options,n.errors)})})}visitKeyframes(t,n){const i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push("keyframes() must be placed inside of a call to animate()"),i;let s=0;const a=[];let c=!1,l=!1,f=0;const b=t.steps.map(Ee=>{const he=this._makeStyleAst(Ee,n);let Ae=null!=he.offset?he.offset:function(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(n=>{if(Zf(n)&&n.hasOwnProperty("offset")){const i=n;t=parseFloat(i.offset),delete i.offset}});else if(Zf(r)&&r.hasOwnProperty("offset")){const n=r;t=parseFloat(n.offset),delete n.offset}return t}(he.styles),Fe=0;return null!=Ae&&(s++,Fe=he.offset=Ae),l=l||Fe<0||Fe>1,c=c||Fe<f,f=Fe,a.push(Fe),he});l&&n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),c&&n.errors.push("Please ensure that all keyframe offsets are in order");const O=t.steps.length;let j=0;s>0&&s<O?n.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(j=1/(O-1));const z=O-1,$=n.currentTime,Q=n.currentAnimateTimings,re=Q.duration;return b.forEach((Ee,he)=>{const Ae=j>0?he==z?1:j*he:a[he],Fe=Ae*re;n.currentTime=$+Q.delay+Fe,Q.duration=Fe,this._validateStyleAst(Ee,n),Ee.offset=Ae,i.styles.push(Ee)}),i}visitReference(t,n){return{type:8,animation:qr(this,fu(t.animation),n),options:zs(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:zs(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:zs(t.options)}}visitQuery(t,n){const i=n.currentQuerySelector,o=t.options||{};n.queryCount++,n.currentQuery=t;const[s,a]=function(r){const t=!!r.split(/\s*,\s*/).find(n=>":self"==n);return t&&(r=r.replace(ZU,"")),[r=r.replace(/@\*/g,zf).replace(/@\w+/g,n=>zf+"-"+n.substr(1)).replace(/:animating/g,dy),t]}(t.selector);n.currentQuerySelector=i.length?i+" "+s:s,Wr(n.collectedStyles,n.currentQuerySelector,{});const c=qr(this,fu(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:s,limit:o.limit||0,optional:!!o.optional,includeSelf:a,animation:c,originalSelector:t.selector,options:zs(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push("stagger() can only be used inside of query()");const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:$f(t.timings,n.errors,!0);return{type:12,animation:qr(this,fu(t.animation),n),timings:i,options:null}}}class rj{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Zf(r){return!Array.isArray(r)&&"object"==typeof r}function zs(r){return r?(r=bc(r)).params&&(r.params=function(r){return r?bc(r):null}(r.params)):r={},r}function _y(r,t,n){return{duration:r,delay:t,easing:n}}function yy(r,t,n,i,o,s,a=null,c=!1){return{type:1,element:r,keyframes:t,preStyleProps:n,postStyleProps:i,duration:o,delay:s,totalTime:o+s,easing:a,subTimeline:c}}class eh{constructor(){this._map=new Map}consume(t){let n=this._map.get(t);return n?this._map.delete(t):n=[],n}append(t,n){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const cj=new RegExp(":enter","g"),uj=new RegExp(":leave","g");function vy(r,t,n,i,o,s={},a={},c,l,f=[]){return(new dj).buildKeyframes(r,t,n,i,o,s,a,c,l,f)}class dj{buildKeyframes(t,n,i,o,s,a,c,l,f,b=[]){f=f||new eh;const O=new Ey(t,n,f,o,s,b,[]);O.options=l,O.currentTimeline.setStyles([a],null,O.errors,l),qr(this,i,O);const j=O.timelines.filter(z=>z.containsAnimation());if(j.length&&Object.keys(c).length){const z=j[j.length-1];z.allowOnlyTimelineStyles()||z.setStyles([c],null,O.errors,l)}return j.length?j.map(z=>z.buildKeyframes()):[yy(n,[],[],[],0,0,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const i=n.subInstructions.consume(n.element);if(i){const o=n.createSubContext(t.options),s=n.currentTimeline.currentTime,a=this._visitSubInstructions(i,o,o.options);s!=a&&n.transformIntoNewTimeline(a)}n.previousNode=t}visitAnimateRef(t,n){const i=n.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=t}_visitSubInstructions(t,n,i){let s=n.currentTimeline.currentTime;const a=null!=i.duration?qs(i.duration):null,c=null!=i.delay?qs(i.delay):null;return 0!==a&&t.forEach(l=>{const f=n.appendInstructionToTimeline(l,a,c);s=Math.max(s,f.duration+f.delay)}),s}visitReference(t,n){n.updateOptions(t.options,!0),qr(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const i=n.subContextCount;let o=n;const s=t.options;if(s&&(s.params||s.delay)&&(o=n.createSubContext(s),o.transformIntoNewTimeline(),null!=s.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=th);const a=qs(s.delay);o.delayNextStep(a)}t.steps.length&&(t.steps.forEach(a=>qr(this,a,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>i&&o.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const i=[];let o=n.currentTimeline.currentTime;const s=t.options&&t.options.delay?qs(t.options.delay):0;t.steps.forEach(a=>{const c=n.createSubContext(t.options);s&&c.delayNextStep(s),qr(this,a,c),o=Math.max(o,c.currentTimeline.currentTime),i.push(c.currentTimeline)}),i.forEach(a=>n.currentTimeline.mergeTimelineCollectedStyles(a)),n.transformIntoNewTimeline(o),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const i=t.strValue;return $f(n.params?Kf(i,n.params,n.errors):i,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const i=n.currentAnimateTimings=this._visitTiming(t.timings,n),o=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),o.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,n):(n.incrementTime(i.duration),this.visitStyle(s,n),o.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const i=n.currentTimeline,o=n.currentAnimateTimings;!o&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=o&&o.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const i=n.currentAnimateTimings,o=n.currentTimeline.duration,s=i.duration,c=n.createSubContext().currentTimeline;c.easing=i.easing,t.styles.forEach(l=>{c.forwardTime((l.offset||0)*s),c.setStyles(l.styles,l.easing,n.errors,n.options),c.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(c),n.transformIntoNewTimeline(o+s),n.previousNode=t}visitQuery(t,n){const i=n.currentTimeline.currentTime,o=t.options||{},s=o.delay?qs(o.delay):0;s&&(6===n.previousNode.type||0==i&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=th);let a=i;const c=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!o.optional,n.errors);n.currentQueryTotal=c.length;let l=null;c.forEach((f,b)=>{n.currentQueryIndex=b;const O=n.createSubContext(t.options,f);s&&O.delayNextStep(s),f===n.element&&(l=O.currentTimeline),qr(this,t.animation,O),O.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,O.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(a),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const i=n.parentContext,o=n.currentTimeline,s=t.timings,a=Math.abs(s.duration),c=a*(n.currentQueryTotal-1);let l=a*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=c-l;break;case"full":l=i.currentStaggerTime}const b=n.currentTimeline;l&&b.delayNextStep(l);const O=b.currentTime;qr(this,t.animation,n),n.previousNode=t,i.currentStaggerTime=o.currentTime-O+(o.startTime-i.currentTimeline.startTime)}}const th={};class Ey{constructor(t,n,i,o,s,a,c,l){this._driver=t,this.element=n,this.subInstructions=i,this._enterClassName=o,this._leaveClassName=s,this.errors=a,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=th,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new nh(this._driver,n,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const i=t;let o=this.options;null!=i.duration&&(o.duration=qs(i.duration)),null!=i.delay&&(o.delay=qs(i.delay));const s=i.params;if(s){let a=o.params;a||(a=this.options.params={}),Object.keys(s).forEach(c=>{(!n||!a.hasOwnProperty(c))&&(a[c]=Kf(s[c],a,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const i=t.params={};Object.keys(n).forEach(o=>{i[o]=n[o]})}}return t}createSubContext(t=null,n,i){const o=n||this.element,s=new Ey(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=th,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,i){const o={duration:null!=n?n:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},s=new fj(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,o,t.stretchStartingKeyframe);return this.timelines.push(s),o}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,i,o,s,a){let c=[];if(o&&c.push(this.element),t.length>0){t=(t=t.replace(cj,"."+this._enterClassName)).replace(uj,"."+this._leaveClassName);let f=this._driver.query(this.element,t,1!=i);0!==i&&(f=i<0?f.slice(f.length+i,f.length):f.slice(0,i)),c.push(...f)}return!s&&0==c.length&&a.push(`\`query("${n}")\` returned zero elements. (Use \`query("${n}", { optional: true })\` if you wish to allow this.)`),c}}class nh{constructor(t,n,i,o){this._driver=t,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new nh(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles[t]=n,this._globalTimelineStyles[t]=n,this._styleSummary[t]={time:this.currentTime,value:n}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(n=>{this._backFill[n]=this._globalTimelineStyles[n]||To,this._currentKeyframe[n]=To}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,i,o){n&&(this._previousKeyframe.easing=n);const s=o&&o.params||{},a=function(r,t){const n={};let i;return r.forEach(o=>{"*"===o?(i=i||Object.keys(t),i.forEach(s=>{n[s]=To})):is(o,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(a).forEach(c=>{const l=Kf(a[c],s,i);this._pendingStyles[c]=l,this._localTimelineStyles.hasOwnProperty(c)||(this._backFill[c]=this._globalTimelineStyles.hasOwnProperty(c)?this._globalTimelineStyles[c]:To),this._updateStyle(c,l)})}applyStylesToKeyframe(){const t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const n=this._localTimelineStyles[t];this._pendingStyles[t]=n,this._updateStyle(t,n)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(n=>{const i=this._styleSummary[n],o=t._styleSummary[n];(!i||o.time>i.time)&&this._updateStyle(n,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((c,l)=>{const f=is(c,!0);Object.keys(f).forEach(b=>{const O=f[b];"!"==O?t.add(b):O==To&&n.add(b)}),i||(f.offset=l/this.duration),o.push(f)});const s=t.size?Yf(t.values()):[],a=n.size?Yf(n.values()):[];if(i){const c=o[0],l=bc(c);c.offset=0,l.offset=1,o=[c,l]}return yy(this.element,o,s,a,this.duration,this.startTime,this.easing,!1)}}class fj extends nh{constructor(t,n,i,o,s,a,c=!1){super(t,n,a.delay),this.keyframes=i,this.preStyleProps=o,this.postStyleProps=s,this._stretchStartingKeyframe=c,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:i,easing:o}=this.timings;if(this._stretchStartingKeyframe&&n){const s=[],a=i+n,c=n/a,l=is(t[0],!1);l.offset=0,s.push(l);const f=is(t[0],!1);f.offset=h2(c),s.push(f);const b=t.length-1;for(let O=1;O<=b;O++){let j=is(t[O],!1);j.offset=h2((n+j.offset*i)/a),s.push(j)}i=a,n=0,o="",t=s}return yy(this.element,t,this.preStyleProps,this.postStyleProps,i,n,o,!0)}}function h2(r,t=3){const n=Math.pow(10,t-1);return Math.round(r*n)/n}class by{}class pj extends by{normalizePropertyName(t,n){return py(t)}normalizeStyleValue(t,n,i,o){let s="";const a=i.toString().trim();if(gj[n]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const c=i.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&o.push(`Please provide a CSS unit value for ${t}:${i}`)}return a+s}}const gj=(()=>function(r){const t={};return r.forEach(n=>t[n]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function p2(r,t,n,i,o,s,a,c,l,f,b,O,j){return{type:0,element:r,triggerName:t,isRemovalTransition:o,fromState:n,fromStyles:s,toState:i,toStyles:a,timelines:c,queriedElements:l,preStyleProps:f,postStyleProps:b,totalTime:O,errors:j}}const Sy={};class g2{constructor(t,n,i){this._triggerName=t,this.ast=n,this._stateStyles=i}match(t,n,i,o){return function(r,t,n,i,o){return r.some(s=>s(t,n,i,o))}(this.ast.matchers,t,n,i,o)}buildStyles(t,n,i){const o=this._stateStyles["*"],s=this._stateStyles[t],a=o?o.buildStyles(n,i):{};return s?s.buildStyles(n,i):a}build(t,n,i,o,s,a,c,l,f,b){const O=[],j=this.ast.options&&this.ast.options.params||Sy,$=this.buildStyles(i,c&&c.params||Sy,O),Q=l&&l.params||Sy,re=this.buildStyles(o,Q,O),Ee=new Set,he=new Map,Ae=new Map,Fe="void"===o,Be={params:Object.assign(Object.assign({},j),Q)},Ge=b?[]:vy(t,n,this.ast.animation,s,a,$,re,Be,f,O);let it=0;if(Ge.forEach(Ve=>{it=Math.max(Ve.duration+Ve.delay,it)}),O.length)return p2(n,this._triggerName,i,o,Fe,$,re,[],[],he,Ae,it,O);Ge.forEach(Ve=>{const Je=Ve.element,Tt=Wr(he,Je,{});Ve.preStyleProps.forEach(pn=>Tt[pn]=!0);const Nn=Wr(Ae,Je,{});Ve.postStyleProps.forEach(pn=>Nn[pn]=!0),Je!==n&&Ee.add(Je)});const ht=Yf(Ee.values());return p2(n,this._triggerName,i,o,Fe,$,re,Ge,ht,he,Ae,it)}}class yj{constructor(t,n,i){this.styles=t,this.defaultParams=n,this.normalizer=i}buildStyles(t,n){const i={},o=bc(this.defaultParams);return Object.keys(t).forEach(s=>{const a=t[s];null!=a&&(o[s]=a)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const a=s;Object.keys(a).forEach(c=>{let l=a[c];l.length>1&&(l=Kf(l,o,n));const f=this.normalizer.normalizePropertyName(c,n);l=this.normalizer.normalizeStyleValue(c,f,l,n),i[f]=l})}}),i}}class Ej{constructor(t,n,i){this.name=t,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states={},n.states.forEach(o=>{this.states[o.name]=new yj(o.style,o.options&&o.options.params||{},i)}),m2(this.states,"true","1"),m2(this.states,"false","0"),n.transitions.forEach(o=>{this.transitionFactories.push(new g2(t,o,this.states))}),this.fallbackTransition=function(r,t,n){return new g2(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,c)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,i,o){return this.transitionFactories.find(a=>a.match(t,n,i,o))||null}matchStyles(t,n,i){return this.fallbackTransition.buildStyles(t,n,i)}}function m2(r,t,n){r.hasOwnProperty(t)?r.hasOwnProperty(n)||(r[n]=r[t]):r.hasOwnProperty(n)&&(r[t]=r[n])}const Sj=new eh;class Cj{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,n){const i=[],o=my(this._driver,n,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[t]=o}_buildPlayer(t,n,i){const o=t.element,s=KA(0,this._normalizer,0,t.keyframes,n,i);return this._driver.animate(o,s,t.duration,t.delay,t.easing,[],!0)}create(t,n,i={}){const o=[],s=this._animations[t];let a;const c=new Map;if(s?(a=vy(this._driver,n,s,uy,qf,{},{},i,Sj,o),a.forEach(b=>{const O=Wr(c,b.element,{});b.postStyleProps.forEach(j=>O[j]=null)})):(o.push("The requested animation doesn't exist or has already been destroyed"),a=[]),o.length)throw new Error(`Unable to create the animation due to the following errors: ${o.join("\n")}`);c.forEach((b,O)=>{Object.keys(b).forEach(j=>{b[j]=this._driver.computeStyle(O,j,To)})});const f=rs(a.map(b=>{const O=c.get(b.element);return this._buildPlayer(b,{},O)}));return this._playersById[t]=f,f.onDestroy(()=>this.destroy(t)),this.players.push(f),f}destroy(t){const n=this._getPlayer(t);n.destroy(),delete this._playersById[t];const i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(t){const n=this._playersById[t];if(!n)throw new Error(`Unable to find the timeline player referenced by ${t}`);return n}listen(t,n,i,o){const s=ny(n,"","","");return ey(this._getPlayer(t),i,s,o),()=>{}}command(t,n,i,o){if("register"==i)return void this.register(t,o[0]);if("create"==i)return void this.create(t,n,o[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(t)}}}const _2="ng-animate-queued",y2="ng-animate-disabled",v2=".ng-animate-disabled",Rj=[],E2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ij={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},li="__ng_removed";class Cy{constructor(t,n=""){this.namespaceId=n;const i=t&&t.hasOwnProperty("value");if(this.value=function(r){return null!=r?r:null}(i?t.value:t),i){const s=bc(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const n=t.params;if(n){const i=this.options.params;Object.keys(n).forEach(o=>{null==i[o]&&(i[o]=n[o])})}}}const hu="void",wy=new Cy(hu);class Oj{constructor(t,n,i){this.id=t,this.hostElement=n,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,ui(n,this._hostClassName)}listen(t,n,i,o){if(!this._triggers.hasOwnProperty(n))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${n}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${n}" because the provided event is undefined!`);if(!function(r){return"start"==r||"done"==r}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${n}" is not supported!`);const s=Wr(this._elementListeners,t,[]),a={name:n,phase:i,callback:o};s.push(a);const c=Wr(this._engine.statesByElement,t,{});return c.hasOwnProperty(n)||(ui(t,Gf),ui(t,Gf+"-"+n),c[n]=wy),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(a);l>=0&&s.splice(l,1),this._triggers[n]||delete c[n]})}}register(t,n){return!this._triggers[t]&&(this._triggers[t]=n,!0)}_getTrigger(t){const n=this._triggers[t];if(!n)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return n}trigger(t,n,i,o=!0){const s=this._getTrigger(n),a=new Ty(this.id,n,t);let c=this._engine.statesByElement.get(t);c||(ui(t,Gf),ui(t,Gf+"-"+n),this._engine.statesByElement.set(t,c={}));let l=c[n];const f=new Cy(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&f.absorbOptions(l.options),c[n]=f,l||(l=wy),f.value!==hu&&l.value===f.value){if(!function(r,t){const n=Object.keys(r),i=Object.keys(t);if(n.length!=i.length)return!1;for(let o=0;o<n.length;o++){const s=n[o];if(!t.hasOwnProperty(s)||r[s]!==t[s])return!1}return!0}(l.params,f.params)){const Q=[],re=s.matchStyles(l.value,l.params,Q),Ee=s.matchStyles(f.value,f.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{Gs(t,re),to(t,Ee)})}return}const j=Wr(this._engine.playersByElement,t,[]);j.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==n&&Q.queued&&Q.destroy()});let z=s.matchTransition(l.value,f.value,t,f.params),$=!1;if(!z){if(!o)return;z=s.fallbackTransition,$=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:z,fromState:l,toState:f,player:a,isFallbackTransition:$}),$||(ui(t,_2),a.onStart(()=>{Sc(t,_2)})),a.onDone(()=>{let Q=this.players.indexOf(a);Q>=0&&this.players.splice(Q,1);const re=this._engine.playersByElement.get(t);if(re){let Ee=re.indexOf(a);Ee>=0&&re.splice(Ee,1)}}),this.players.push(a),j.push(a),a}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((n,i)=>{delete n[t]}),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(o=>o.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const i=this._engine.driver.query(t,zf,!0);i.forEach(o=>{if(o[li])return;const s=this._engine.fetchNamespacesByElement(o);s.size?s.forEach(a=>a.triggerLeaveAnimation(o,n,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(t,n,i,o){const s=this._engine.statesByElement.get(t);if(s){const a=[];if(Object.keys(s).forEach(c=>{if(this._triggers[c]){const l=this.trigger(t,c,hu,o);l&&a.push(l)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,n),i&&rs(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(n&&i){const o=new Set;n.forEach(s=>{const a=s.name;if(o.has(a))return;o.add(a);const l=this._triggers[a].fallbackTransition,f=i[a]||wy,b=new Cy(hu),O=new Ty(this.id,a,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:a,transition:l,fromState:f,toState:b,player:O,isFallbackTransition:!0})})}}removeNode(t,n){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let o=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)o=!0;else{let a=t;for(;a=a.parentNode;)if(i.statesByElement.get(a)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(t),o)i.markElementAsRemoved(this.id,t,!1,n);else{const s=t[li];(!s||s===E2)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,n))}}insertNode(t,n){ui(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(i=>{const o=i.player;if(o.destroyed)return;const s=i.element,a=this._elementListeners.get(s);a&&a.forEach(c=>{if(c.name==i.triggerName){const l=ny(s,i.triggerName,i.fromState.value,i.toState.value);l._data=t,ey(i.player,c.phase,l,c.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):n.push(i)}),this._queue=[],n.sort((i,o)=>{const s=i.transition.ast.depCount,a=o.transition.ast.depCount;return 0==s||0==a?s-a:this._engine.driver.containsElement(i.element,o.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(i=>i.element===t)||n,n}}class Dj{constructor(t,n,i){this.bodyNode=t,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,n){const i=new Oj(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,n){const i=this._namespaceList.length-1;if(i>=0){let o=!1;for(let s=i;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,n)){this._namespaceList.splice(s+1,0,t),o=!0;break}o||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(n,t),t}register(t,n){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,n)),i}registerTrigger(t,n,i){let o=this._namespaceLookup[t];o&&o.register(n,i)&&this.totalAnimations++}destroy(t,n){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const o=this._namespaceList.indexOf(i);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>i.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,i=this.statesByElement.get(t);if(i){const o=Object.keys(i);for(let s=0;s<o.length;s++){const a=i[o[s]].namespaceId;if(a){const c=this._fetchNamespace(a);c&&n.add(c)}}}return n}trigger(t,n,i,o){if(rh(n)){const s=this._fetchNamespace(t);if(s)return s.trigger(n,i,o),!0}return!1}insertNode(t,n,i,o){if(!rh(n))return;const s=n[li];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const a=this.collectedLeaveElements.indexOf(n);a>=0&&this.collectedLeaveElements.splice(a,1)}if(t){const a=this._fetchNamespace(t);a&&a.insertNode(n,i)}o&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ui(t,y2)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Sc(t,y2))}removeNode(t,n,i,o){if(rh(n)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(n,o):this.markElementAsRemoved(t,n,!1,o),i){const a=this.namespacesByHostElement.get(n);a&&a.id!==t&&a.removeNode(n,o)}}else this._onRemovalComplete(n,o)}markElementAsRemoved(t,n,i,o){this.collectedLeaveElements.push(n),n[li]={namespaceId:t,setForRemoval:o,hasAnimation:i,removedBeforeQueried:!1}}listen(t,n,i,o,s){return rh(n)?this._fetchNamespace(t).listen(n,i,o,s):()=>{}}_buildInstruction(t,n,i,o,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,o,t.fromState.options,t.toState.options,n,s)}destroyInnerAnimations(t){let n=this.driver.query(t,zf,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,dy,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return rs(this.players).onDone(()=>t());t()})}processLeaveNode(t){const n=t[li];if(n&&n.setForRemoval){if(t[li]=E2,n.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,v2)&&this.markElementAsDisabled(t,!1),this.driver.query(t,v2,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,o)=>this._balanceNamespaceList(i,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ui(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{n=this._flushAnimations(i,t)}finally{for(let o=0;o<i.length;o++)i[o]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],n.length?rs(n).onDone(()=>{i.forEach(o=>o())}):i.forEach(o=>o())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,n){const i=new eh,o=[],s=new Map,a=[],c=new Map,l=new Map,f=new Map,b=new Set;this.disabledNodes.forEach(nt=>{b.add(nt);const pt=this.driver.query(nt,".ng-animate-queued",!0);for(let Ct=0;Ct<pt.length;Ct++)b.add(pt[Ct])});const O=this.bodyNode,j=Array.from(this.statesByElement.keys()),z=C2(j,this.collectedEnterElements),$=new Map;let Q=0;z.forEach((nt,pt)=>{const Ct=uy+Q++;$.set(pt,Ct),nt.forEach(qt=>ui(qt,Ct))});const re=[],Ee=new Set,he=new Set;for(let nt=0;nt<this.collectedLeaveElements.length;nt++){const pt=this.collectedLeaveElements[nt],Ct=pt[li];Ct&&Ct.setForRemoval&&(re.push(pt),Ee.add(pt),Ct.hasAnimation?this.driver.query(pt,".ng-star-inserted",!0).forEach(qt=>Ee.add(qt)):he.add(pt))}const Ae=new Map,Fe=C2(j,Array.from(Ee));Fe.forEach((nt,pt)=>{const Ct=qf+Q++;Ae.set(pt,Ct),nt.forEach(qt=>ui(qt,Ct))}),t.push(()=>{z.forEach((nt,pt)=>{const Ct=$.get(pt);nt.forEach(qt=>Sc(qt,Ct))}),Fe.forEach((nt,pt)=>{const Ct=Ae.get(pt);nt.forEach(qt=>Sc(qt,Ct))}),re.forEach(nt=>{this.processLeaveNode(nt)})});const Be=[],Ge=[];for(let nt=this._namespaceList.length-1;nt>=0;nt--)this._namespaceList[nt].drainQueuedTransitions(n).forEach(Ct=>{const qt=Ct.player,wn=Ct.element;if(Be.push(qt),this.collectedEnterElements.length){const Le=wn[li];if(Le&&Le.setForMove)return void qt.destroy()}const X=!O||!this.driver.containsElement(O,wn),Y=Ae.get(wn),se=$.get(wn),we=this._buildInstruction(Ct,i,se,Y,X);if(we.errors&&we.errors.length)Ge.push(we);else{if(X)return qt.onStart(()=>Gs(wn,we.fromStyles)),qt.onDestroy(()=>to(wn,we.toStyles)),void o.push(qt);if(Ct.isFallbackTransition)return qt.onStart(()=>Gs(wn,we.fromStyles)),qt.onDestroy(()=>to(wn,we.toStyles)),void o.push(qt);we.timelines.forEach(Le=>Le.stretchStartingKeyframe=!0),i.append(wn,we.timelines),a.push({instruction:we,player:qt,element:wn}),we.queriedElements.forEach(Le=>Wr(c,Le,[]).push(qt)),we.preStyleProps.forEach((Le,He)=>{const Ke=Object.keys(Le);if(Ke.length){let kt=l.get(He);kt||l.set(He,kt=new Set),Ke.forEach(tn=>kt.add(tn))}}),we.postStyleProps.forEach((Le,He)=>{const Ke=Object.keys(Le);let kt=f.get(He);kt||f.set(He,kt=new Set),Ke.forEach(tn=>kt.add(tn))})}});if(Ge.length){const nt=[];Ge.forEach(pt=>{nt.push(`@${pt.triggerName} has failed due to:\n`),pt.errors.forEach(Ct=>nt.push(`- ${Ct}\n`))}),Be.forEach(pt=>pt.destroy()),this.reportError(nt)}const it=new Map,ht=new Map;a.forEach(nt=>{const pt=nt.element;i.has(pt)&&(ht.set(pt,pt),this._beforeAnimationBuild(nt.player.namespaceId,nt.instruction,it))}),o.forEach(nt=>{const pt=nt.element;this._getPreviousPlayers(pt,!1,nt.namespaceId,nt.triggerName,null).forEach(qt=>{Wr(it,pt,[]).push(qt),qt.destroy()})});const Ve=re.filter(nt=>T2(nt,l,f)),Je=new Map;S2(Je,this.driver,he,f,To).forEach(nt=>{T2(nt,l,f)&&Ve.push(nt)});const Nn=new Map;z.forEach((nt,pt)=>{S2(Nn,this.driver,new Set(nt),l,"!")}),Ve.forEach(nt=>{const pt=Je.get(nt),Ct=Nn.get(nt);Je.set(nt,Object.assign(Object.assign({},pt),Ct))});const pn=[],Zt=[],Kr={};a.forEach(nt=>{const{element:pt,player:Ct,instruction:qt}=nt;if(i.has(pt)){if(b.has(pt))return Ct.onDestroy(()=>to(pt,qt.toStyles)),Ct.disabled=!0,Ct.overrideTotalTime(qt.totalTime),void o.push(Ct);let wn=Kr;if(ht.size>1){let Y=pt;const se=[];for(;Y=Y.parentNode;){const we=ht.get(Y);if(we){wn=we;break}se.push(Y)}se.forEach(we=>ht.set(we,wn))}const X=this._buildAnimation(Ct.namespaceId,qt,it,s,Nn,Je);if(Ct.setRealPlayer(X),wn===Kr)pn.push(Ct);else{const Y=this.playersByElement.get(wn);Y&&Y.length&&(Ct.parentPlayer=rs(Y)),o.push(Ct)}}else Gs(pt,qt.fromStyles),Ct.onDestroy(()=>to(pt,qt.toStyles)),Zt.push(Ct),b.has(pt)&&o.push(Ct)}),Zt.forEach(nt=>{const pt=s.get(nt.element);if(pt&&pt.length){const Ct=rs(pt);nt.setRealPlayer(Ct)}}),o.forEach(nt=>{nt.parentPlayer?nt.syncPlayerEvents(nt.parentPlayer):nt.destroy()});for(let nt=0;nt<re.length;nt++){const pt=re[nt],Ct=pt[li];if(Sc(pt,qf),Ct&&Ct.hasAnimation)continue;let qt=[];if(c.size){let X=c.get(pt);X&&X.length&&qt.push(...X);let Y=this.driver.query(pt,dy,!0);for(let se=0;se<Y.length;se++){let we=c.get(Y[se]);we&&we.length&&qt.push(...we)}}const wn=qt.filter(X=>!X.destroyed);wn.length?Pj(this,pt,wn):this.processLeaveNode(pt)}return re.length=0,pn.forEach(nt=>{this.players.push(nt),nt.onDone(()=>{nt.destroy();const pt=this.players.indexOf(nt);this.players.splice(pt,1)}),nt.play()}),pn}elementContainsData(t,n){let i=!1;const o=n[li];return o&&o.setForRemoval&&(i=!0),this.playersByElement.has(n)&&(i=!0),this.playersByQueriedElement.has(n)&&(i=!0),this.statesByElement.has(n)&&(i=!0),this._fetchNamespace(t).elementContainsData(n)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,i,o,s){let a=[];if(n){const c=this.playersByQueriedElement.get(t);c&&(a=c)}else{const c=this.playersByElement.get(t);if(c){const l=!s||s==hu;c.forEach(f=>{f.queued||!l&&f.triggerName!=o||a.push(f)})}}return(i||o)&&(a=a.filter(c=>!(i&&i!=c.namespaceId||o&&o!=c.triggerName))),a}_beforeAnimationBuild(t,n,i){const s=n.element,a=n.isRemovalTransition?void 0:t,c=n.isRemovalTransition?void 0:n.triggerName;for(const l of n.timelines){const f=l.element,b=f!==s,O=Wr(i,f,[]);this._getPreviousPlayers(f,b,a,c,n.toState).forEach(z=>{const $=z.getRealPlayer();$.beforeDestroy&&$.beforeDestroy(),z.destroy(),O.push(z)})}Gs(s,n.fromStyles)}_buildAnimation(t,n,i,o,s,a){const c=n.triggerName,l=n.element,f=[],b=new Set,O=new Set,j=n.timelines.map($=>{const Q=$.element;b.add(Q);const re=Q[li];if(re&&re.removedBeforeQueried)return new Ec($.duration,$.delay);const Ee=Q!==l,he=function(r){const t=[];return w2(r,t),t}((i.get(Q)||Rj).map(it=>it.getRealPlayer())).filter(it=>!!it.element&&it.element===Q),Ae=s.get(Q),Fe=a.get(Q),Be=KA(0,this._normalizer,0,$.keyframes,Ae,Fe),Ge=this._buildPlayer($,Be,he);if($.subTimeline&&o&&O.add(Q),Ee){const it=new Ty(t,c,Q);it.setRealPlayer(Ge),f.push(it)}return Ge});f.forEach($=>{Wr(this.playersByQueriedElement,$.element,[]).push($),$.onDone(()=>function(r,t,n){let i;if(r instanceof Map){if(i=r.get(t),i){if(i.length){const o=i.indexOf(n);i.splice(o,1)}0==i.length&&r.delete(t)}}else if(i=r[t],i){if(i.length){const o=i.indexOf(n);i.splice(o,1)}0==i.length&&delete r[t]}return i}(this.playersByQueriedElement,$.element,$))}),b.forEach($=>ui($,n2));const z=rs(j);return z.onDestroy(()=>{b.forEach($=>Sc($,n2)),to(l,n.toStyles)}),O.forEach($=>{Wr(o,$,[]).push(z)}),z}_buildPlayer(t,n,i){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,i):new Ec(t.duration,t.delay)}}class Ty{constructor(t,n,i){this.namespaceId=t,this.triggerName=n,this.element=i,this._player=new Ec,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(n=>{this._queuedCallbacks[n].forEach(i=>ey(t,n,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){Wr(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function rh(r){return r&&1===r.nodeType}function b2(r,t){const n=r.style.display;return r.style.display=null!=t?t:"none",n}function S2(r,t,n,i,o){const s=[];n.forEach(l=>s.push(b2(l)));const a=[];i.forEach((l,f)=>{const b={};l.forEach(O=>{const j=b[O]=t.computeStyle(f,O,o);(!j||0==j.length)&&(f[li]=Ij,a.push(f))}),r.set(f,b)});let c=0;return n.forEach(l=>b2(l,s[c++])),a}function C2(r,t){const n=new Map;if(r.forEach(c=>n.set(c,[])),0==t.length)return n;const o=new Set(t),s=new Map;function a(c){if(!c)return 1;let l=s.get(c);if(l)return l;const f=c.parentNode;return l=n.has(f)?f:o.has(f)?1:a(f),s.set(c,l),l}return t.forEach(c=>{const l=a(c);1!==l&&n.get(l).push(c)}),n}const ih="$$classes";function ui(r,t){if(r.classList)r.classList.add(t);else{let n=r[ih];n||(n=r[ih]={}),n[t]=!0}}function Sc(r,t){if(r.classList)r.classList.remove(t);else{let n=r[ih];n&&delete n[t]}}function Pj(r,t,n){rs(n).onDone(()=>r.processLeaveNode(t))}function w2(r,t){for(let n=0;n<r.length;n++){const i=r[n];i instanceof zA?w2(i.players,t):t.push(i)}}function T2(r,t,n){const i=n.get(r);if(!i)return!1;let o=t.get(r);return o?i.forEach(s=>o.add(s)):t.set(r,i),n.delete(r),!0}class oh{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new Dj(t,n,i),this._timelineEngine=new Cj(t,n,i),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(t,n,i,o,s){const a=t+"-"+o;let c=this._triggerCache[a];if(!c){const l=[],f=my(this._driver,s,l);if(l.length)throw new Error(`The animation trigger "${o}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);c=function(r,t,n){return new Ej(r,t,n)}(o,f,this._normalizer),this._triggerCache[a]=c}this._transitionEngine.registerTrigger(n,o,c)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,i,o){this._transitionEngine.insertNode(t,n,i,o)}onRemove(t,n,i,o){this._transitionEngine.removeNode(t,n,o||!1,i)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,i,o){if("@"==i.charAt(0)){const[s,a]=YA(i);this._timelineEngine.command(s,n,a,o)}else this._transitionEngine.trigger(t,n,i,o)}listen(t,n,i,o,s){if("@"==i.charAt(0)){const[a,c]=YA(i);return this._timelineEngine.listen(a,n,c,s)}return this._transitionEngine.listen(t,n,i,o,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function A2(r,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=Ay(t[0]),t.length>1&&(i=Ay(t[t.length-1]))):t&&(n=Ay(t)),n||i?new Fj(r,n,i):null}let Fj=(()=>{class r{constructor(n,i,o){this._element=n,this._startStyles=i,this._endStyles=o,this._state=0;let s=r.initialStylesByElement.get(n);s||r.initialStylesByElement.set(n,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&to(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(to(this._element,this._initialStyles),this._endStyles&&(to(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(Gs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Gs(this._element,this._endStyles),this._endStyles=null),to(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function Ay(r){let t=null;const n=Object.keys(r);for(let i=0;i<n.length;i++){const o=n[i];Vj(o)&&(t=t||{},t[o]=r[o])}return t}function Vj(r){return"display"===r||"position"===r}const R2="animation",I2="animationend";class Bj{constructor(t,n,i,o,s,a,c){this._element=t,this._name=n,this._duration=i,this._delay=o,this._easing=s,this._fillMode=a,this._onDoneFn=c,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=l=>this._handleCallback(l)}apply(){(function(r,t){const n=Iy(r,"").trim();let i=0;n.length&&(function(r,t){let n=0;for(let i=0;i<r.length;i++)","===r.charAt(i)&&n++;return n}(n)+1,t=`${n}, ${t}`),sh(r,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),M2(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){O2(this._element,this._name,"paused")}resume(){O2(this._element,this._name,"running")}setPosition(t){const n=D2(this._element,this._name);this._position=t*this._duration,sh(this._element,"Delay",`-${this._position}ms`,n)}getPosition(){return this._position}_handleCallback(t){const n=t._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(n-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),M2(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(r,t){const i=Iy(r,"").split(","),o=Ry(i,t);o>=0&&(i.splice(o,1),sh(r,"",i.join(",")))}(this._element,this._name))}}function O2(r,t,n){sh(r,"PlayState",n,D2(r,t))}function D2(r,t){const n=Iy(r,"");return n.indexOf(",")>0?Ry(n.split(","),t):Ry([n],t)}function Ry(r,t){for(let n=0;n<r.length;n++)if(r[n].indexOf(t)>=0)return n;return-1}function M2(r,t,n){n?r.removeEventListener(I2,t):r.addEventListener(I2,t)}function sh(r,t,n,i){const o=R2+t;if(null!=i){const s=r.style[o];if(s.length){const a=s.split(",");a[i]=n,n=a.join(",")}}r.style[o]=n}function Iy(r,t){return r.style[R2+t]||""}class N2{constructor(t,n,i,o,s,a,c,l){this.element=t,this.keyframes=n,this.animationName=i,this._duration=o,this._delay=s,this._finalStyles=c,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=a||"linear",this.totalTime=o+s,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Bj(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const n=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(t[i]=n?this._finalStyles[i]:gy(this.element,i))})}this.currentSnapshot=t}}class $j extends Ec{constructor(t,n){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=ZA(n)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const n=this._startingStyles[t];n?this.element.style.setProperty(t,n):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class P2{constructor(){this._count=0}validateStyleProperty(t){return oy(t)}matchesElement(t,n){return sy(t,n)}containsElement(t,n){return ay(t,n)}query(t,n,i){return cy(t,n,i)}computeStyle(t,n,i){return window.getComputedStyle(t)[n]}buildKeyframeElement(t,n,i){i=i.map(c=>ZA(c));let o=`@keyframes ${n} {\n`,s="";i.forEach(c=>{s=" ";const l=parseFloat(c.offset);o+=`${s}${100*l}% {\n`,s+=" ",Object.keys(c).forEach(f=>{const b=c[f];switch(f){case"offset":return;case"easing":return void(b&&(o+=`${s}animation-timing-function: ${b};\n`));default:return void(o+=`${s}${f}: ${b};\n`)}}),o+=`${s}}\n`}),o+="}\n";const a=document.createElement("style");return a.textContent=o,a}animate(t,n,i,o,s,a=[],c){const l=a.filter(re=>re instanceof N2),f={};c2(i,o)&&l.forEach(re=>{let Ee=re.currentSnapshot;Object.keys(Ee).forEach(he=>f[he]=Ee[he])});const b=function(r){let t={};return r&&(Array.isArray(r)?r:[r]).forEach(i=>{Object.keys(i).forEach(o=>{"offset"==o||"easing"==o||(t[o]=i[o])})}),t}(n=l2(t,n,f));if(0==i)return new $j(t,b);const O="gen_css_kf_"+this._count++,j=this.buildKeyframeElement(t,O,n);(function(r){var t;const n=null===(t=r.getRootNode)||void 0===t?void 0:t.call(r);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(j);const $=A2(t,n),Q=new N2(t,n,O,i,o,s,b,$);return Q.onDestroy(()=>function(r){r.parentNode.removeChild(r)}(j)),Q}}class L2{constructor(t,n,i,o){this.element=t,this.keyframes=n,this.options=i,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,n,i){return t.animate(n,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(n=>{"offset"!=n&&(t[n]=this._finished?this._finalKeyframe[n]:gy(this.element,n))}),this.currentSnapshot=t}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class Xj{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(F2().toString()),this._cssKeyframesDriver=new P2}validateStyleProperty(t){return oy(t)}matchesElement(t,n){return sy(t,n)}containsElement(t,n){return ay(t,n)}query(t,n,i){return cy(t,n,i)}computeStyle(t,n,i){return window.getComputedStyle(t)[n]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,n,i,o,s,a=[],c){if(!c&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,n,i,o,s,a);const b={duration:i,delay:o,fill:0==o?"both":"forwards"};s&&(b.easing=s);const O={},j=a.filter($=>$ instanceof L2);c2(i,o)&&j.forEach($=>{let Q=$.currentSnapshot;Object.keys(Q).forEach(re=>O[re]=Q[re])});const z=A2(t,n=l2(t,n=n.map($=>is($,!1)),O));return new L2(t,n,b,z)}}function F2(){return $A()&&Element.prototype.animate||{}}let e7=(()=>{class r extends WA{constructor(n,i){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(i.body,{id:"0",encapsulation:Fn.None,styles:[],data:{animation:[]}})}build(n){const i=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(n)?qA(n):n;return V2(this._renderer,null,i,"register",[o]),new t7(i,this._renderer)}}return r.\u0275fac=function(n){return new(n||r)(De(Ns),De(bt))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();class t7 extends class{}{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new n7(this._id,t,n||{},this._renderer)}}class n7{constructor(t,n,i,o){this.id=t,this.element=n,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return V2(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,n;return null!==(n=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==n?n:0}}function V2(r,t,n,i,o){return r.setProperty(t,`@@${n}:${i}`,o)}const U2="@.disabled";let r7=(()=>{class r{constructor(n,i,o){this.delegate=n,this.engine=i,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,a)=>{a&&a.parentNode(s)&&a.removeChild(s.parentNode,s)}}createRenderer(n,i){const s=this.delegate.createRenderer(n,i);if(!(n&&i&&i.data&&i.data.animation)){let b=this._rendererCache.get(s);return b||(b=new j2("",s,this.engine),this._rendererCache.set(s,b)),b}const a=i.id,c=i.id+"-"+this._currentId;this._currentId++,this.engine.register(c,n);const l=b=>{Array.isArray(b)?b.forEach(l):this.engine.registerTrigger(a,c,n,b.name,b)};return i.data.animation.forEach(l),new i7(this,c,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,i,o){n>=0&&n<this._microtaskId?this._zone.run(()=>i(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[a,c]=s;a(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(n){return new(n||r)(De(Ns),De(oh),De(wt))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();class j2{constructor(t,n,i){this.namespaceId=t,this.delegate=n,this.engine=i,this.destroyNode=this.delegate.destroyNode?o=>n.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,i,o=!0){this.delegate.insertBefore(t,n,i),this.engine.onInsert(this.namespaceId,n,t,o)}removeChild(t,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,o){this.delegate.setAttribute(t,n,i,o)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,o){this.delegate.setStyle(t,n,i,o)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){"@"==n.charAt(0)&&n==U2?this.disableAnimations(t,!!i):this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.delegate.listen(t,n,i)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class i7 extends j2{constructor(t,n,i,o){super(n,i,o),this.factory=t,this.namespaceId=n}setProperty(t,n,i){"@"==n.charAt(0)?"."==n.charAt(1)&&n==U2?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,n.substr(1),i):this.delegate.setProperty(t,n,i)}listen(t,n,i){if("@"==n.charAt(0)){const o=function(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let s=n.substr(1),a="";return"@"!=s.charAt(0)&&([s,a]=function(r){const t=r.indexOf(".");return[r.substring(0,t),r.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{this.factory.scheduleListenerCallback(c._data||-1,i,c)})}return this.delegate.listen(t,n,i)}}let a7=(()=>{class r extends oh{constructor(n,i,o){super(n.body,i,o)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(n){return new(n||r)(De(bt),De(ly),De(by))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();const $s=new ut("AnimationModuleType"),B2=[{provide:WA,useClass:e7},{provide:by,useFactory:function(){return new pj}},{provide:oh,useClass:a7},{provide:Ns,useFactory:function(r,t,n){return new r7(r,t,n)},deps:[Of,oh,wt]}],H2=[{provide:ly,useFactory:function(){return"function"==typeof F2()?new Xj:new P2}},{provide:$s,useValue:"BrowserAnimations"},...B2],W2=[{provide:ly,useClass:e2},{provide:$s,useValue:"NoopAnimations"},...B2];let d7=(()=>{class r{static withConfig(n){return{ngModule:r,providers:n.disableAnimations?W2:H2}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:H2,imports:[E_]}),r})();const ch_agora={appId:"00f745e00ee7406eaeb981cf301d4127"};var f7=U(507);class Gr{constructor(t){this.config=t,this.audioDevices=[],this.videoDevices=[],this.AgoraRTC=Gr.AgoraRTC,this.checkSystemRequirements()?this.collectDevices():this.AgoraRTC.Logger.error("Web RTC is not supported in this browser")}checkSystemRequirements(){return this.AgoraRTC.checkSystemRequirements()}createClient(t,n=!0,i,o){return this.client=this.AgoraRTC.createClient(t),n&&this.init(this.config.AppID,i,o),this.client}createStream(t){if(!t.microphoneId&&this.audioDevices&&this.audioDevices.length&&(t.microphoneId=this.audioDevices[0].deviceId),!t.cameraId&&this.videoDevices&&this.videoDevices.length){const n=this.videoDevices[0].deviceId;t.cameraId=t.cameraId||n}return this.AgoraRTC.createStream(t)}init(t,n,i){this.client.init(t,n,i)}collectDevices(){this.AgoraRTC.getDevices(t=>{const n=t.filter(o=>"audioinput"===o.kind&&"default"!==o.deviceId),i=t.filter(o=>"videoinput"===o.kind&&"default"!==o.deviceId);this.audioDevices=n,this.videoDevices=i})}}Gr.\u0275fac=function(t){return new(t||Gr)(De("config"))},Gr.\u0275prov=$e({token:Gr,factory:Gr.\u0275fac,providedIn:"root"}),Gr.AgoraRTC=f7,Gr.ngInjectableDef=$e({factory:function(){return new Gr(De("config"))},token:Gr,providedIn:"root"});let h7=(()=>{class r{static forRoot(n){return{ngModule:r,providers:[Gr,{provide:"config",useValue:n}]}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({}),r})();const un={RELAY_OK:0,SERVER_ERROR_RESPONSE:1,SERVER_NO_RESPONSE:2,NO_RESOURCE_AVAILABLE:3,FAILED_JOIN_SRC:4,FAILED_JOIN_DEST:5,FAILED_PACKET_RECEIVED_FROM_SRC:6,FAILED_PACKET_SENT_TO_DEST:7,SERVER_CONNECTION_LOST:8,INTERNAL_ERROR:9,SRC_TOKEN_EXPIRED:10,DEST_TOKEN_EXPIRED:11,RELAY_ALREADY_START:12,RELAY_NOT_START:13};un[un.RELAY_OK]="RELAY_OK",un[un.SERVER_ERROR_RESPONSE]="SERVER_ERROR_RESPONSE",un[un.SERVER_NO_RESPONSE]="SERVER_NO_RESPONSE",un[un.NO_RESOURCE_AVAILABLE]="NO_RESOURCE_AVAILABLE",un[un.FAILED_JOIN_SRC]="FAILED_JOIN_SRC",un[un.FAILED_JOIN_DEST]="FAILED_JOIN_DEST",un[un.FAILED_PACKET_RECEIVED_FROM_SRC]="FAILED_PACKET_RECEIVED_FROM_SRC",un[un.FAILED_PACKET_SENT_TO_DEST]="FAILED_PACKET_SENT_TO_DEST",un[un.SERVER_CONNECTION_LOST]="SERVER_CONNECTION_LOST",un[un.INTERNAL_ERROR]="INTERNAL_ERROR",un[un.SRC_TOKEN_EXPIRED]="SRC_TOKEN_EXPIRED",un[un.DEST_TOKEN_EXPIRED]="DEST_TOKEN_EXPIRED",un[un.RELAY_ALREADY_START]="RELAY_ALREADY_START",un[un.RELAY_NOT_START]="RELAY_NOT_START";const no={Debug:0,Info:1,Warning:2,Error:3,None:4};no[no.Debug]="Debug",no[no.Info]="Info",no[no.Warning]="Warning",no[no.Error]="Error",no[no.None]="None";class di extends u{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return n&&!n.closed&&t.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new d;return this._value}next(t){super.next(this._value=t)}}class p7 extends S{notifyNext(t,n,i,o,s){this.destination.next(n)}notifyError(t,n){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class g7 extends S{constructor(t,n,i){super(),this.parent=t,this.outerValue=n,this.outerIndex=i,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function m7(r,t,n,i,o=new g7(r,n,i)){if(!o.closed)return t instanceof ae?t.subscribe(o):Ne(t)(o)}const G2={};class y7{constructor(t){this.resultSelector=t}call(t,n){return n.subscribe(new v7(t,this.resultSelector))}}class v7 extends p7{constructor(t,n){super(t),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(G2),this.observables.push(t)}_complete(){const t=this.observables,n=t.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let i=0;i<n;i++)this.add(m7(this,t[i],void 0,i))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,n,i){const o=this.values,a=this.toRespond?o[i]===G2?--this.toRespond:this.toRespond:0;o[i]=n,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let n;try{n=this.resultSelector.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(n)}}const lh=(()=>{function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r})();function Oy(...r){return be(1)(Rt(...r))}const Ks=new ae(r=>r.complete());function uh(r){return r?function(r){return new ae(t=>r.schedule(()=>t.complete()))}(r):Ks}function Dy(r){return new ae(t=>{let n;try{n=r()}catch(o){return void t.error(o)}return(n?L(n):uh()).subscribe(t)})}function Pi(r,t){return"function"==typeof t?n=>n.pipe(Pi((i,o)=>L(r(i,o)).pipe(w((s,a)=>t(i,s,o,a))))):n=>n.lift(new S7(r))}class S7{constructor(t){this.project=t}call(t,n){return n.subscribe(new C7(t,this.project))}}class C7 extends ze{constructor(t,n){super(t),this.project=n,this.index=0}_next(t){let n;const i=this.index++;try{n=this.project(t,i)}catch(o){return void this.destination.error(o)}this._innerSub(n)}_innerSub(t){const n=this.innerSubscription;n&&n.unsubscribe();const i=new xe(this),o=this.destination;o.add(i),this.innerSubscription=ft(t,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const z2=(()=>{function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r})();function Ao(r){return t=>0===r?uh():t.lift(new w7(r))}class w7{constructor(t){if(this.total=t,this.total<0)throw new z2}call(t,n){return n.subscribe(new T7(t,this.total))}}class T7 extends S{constructor(t,n){super(t),this.total=n,this.count=0}_next(t){const n=this.total,i=++this.count;i<=n&&(this.destination.next(t),i===n&&(this.destination.complete(),this.unsubscribe()))}}function os(...r){const t=r[r.length-1];return m(t)?(r.pop(),n=>Oy(r,n,t)):n=>Oy(r,n)}function $2(r,t){let n=!1;return arguments.length>=2&&(n=!0),function(o){return o.lift(new A7(r,t,n))}}class A7{constructor(t,n,i=!1){this.accumulator=t,this.seed=n,this.hasSeed=i}call(t,n){return n.subscribe(new R7(t,this.accumulator,this.seed,this.hasSeed))}}class R7 extends S{constructor(t,n,i,o){super(t),this.accumulator=n,this._seed=i,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const n=this.index++;let i;try{i=this.accumulator(this.seed,t,n)}catch(o){this.destination.error(o)}this.seed=i,this.destination.next(i)}}function ss(r){return function(n){const i=new I7(r),o=n.lift(i);return i.caught=o}}class I7{constructor(t){this.selector=t}call(t,n){return n.subscribe(new O7(t,this.selector,this.caught))}}class O7 extends ze{constructor(t,n,i){super(t),this.selector=n,this.caught=i}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new xe(this);this.add(i);const o=ft(n,i);o!==i&&this.add(o)}}}function My(r){return function(n){return 0===r?uh():n.lift(new D7(r))}}class D7{constructor(t){if(this.total=t,this.total<0)throw new z2}call(t,n){return n.subscribe(new M7(t,this.total))}}class M7 extends S{constructor(t,n){super(t),this.total=n,this.ring=new Array,this.count=0}_next(t){const n=this.ring,i=this.total,o=this.count++;n.length<i?n.push(t):n[o%i]=t}_complete(){const t=this.destination;let n=this.count;if(n>0){const i=this.count>=this.total?this.total:this.count,o=this.ring;for(let s=0;s<i;s++){const a=n++%i;t.next(o[a])}}t.complete()}}function K2(r=P7){return t=>t.lift(new N7(r))}class N7{constructor(t){this.errorFactory=t}call(t,n){return n.subscribe(new k7(t,this.errorFactory))}}class k7 extends S{constructor(t,n){super(t),this.errorFactory=n,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(n){t=n}this.destination.error(t)}}}function P7(){return new lh}function Y2(r=null){return t=>t.lift(new x7(r))}class x7{constructor(t){this.defaultValue=t}call(t,n){return n.subscribe(new L7(t,this.defaultValue))}}class L7 extends S{constructor(t,n){super(t),this.defaultValue=n,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function wc(r,t){const n=arguments.length>=2;return i=>i.pipe(r?ki((o,s)=>r(o,s,i)):ie,Ao(1),n?Y2(t):K2(()=>new lh))}function as(){}function kr(r,t,n){return function(o){return o.lift(new V7(r,t,n))}}class V7{constructor(t,n,i){this.nextOrObserver=t,this.error=n,this.complete=i}call(t,n){return n.subscribe(new U7(t,this.nextOrObserver,this.error,this.complete))}}class U7 extends S{constructor(t,n,i,o){super(t),this._tapNext=as,this._tapError=as,this._tapComplete=as,this._tapError=i||as,this._tapComplete=o||as,D(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||as,this._tapError=n.error||as,this._tapComplete=n.complete||as)}_next(t){try{this._tapNext.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class B7{constructor(t){this.callback=t}call(t,n){return n.subscribe(new H7(t,this.callback))}}class H7 extends S{constructor(t,n){super(t),this.add(new E(n))}}class Ro{constructor(t,n){this.id=t,this.url=n}}class Ny extends Ro{constructor(t,n,i="imperative",o=null){super(t,n),this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pu extends Ro{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class J2 extends Ro{constructor(t,n,i){super(t,n),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class W7 extends Ro{constructor(t,n,i){super(t,n),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class q7 extends Ro{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G7 extends Ro{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z7 extends Ro{constructor(t,n,i,o,s){super(t,n),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $7 extends Ro{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K7 extends Ro{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q2{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class X2{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Y7{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class J7{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q7{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X7{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z2{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const $t="primary";class Z7{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Tc(r){return new Z7(r)}const eR="ngNavigationCancelingError";function ky(r){const t=Error("NavigationCancelingError: "+r);return t[eR]=!0,t}function tB(r,t,n){const i=n.path.split("/");if(i.length>r.length||"full"===n.pathMatch&&(t.hasChildren()||i.length<r.length))return null;const o={};for(let s=0;s<i.length;s++){const a=i[s],c=r[s];if(a.startsWith(":"))o[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:r.slice(0,i.length),posParams:o}}function ro(r,t){const n=r?Object.keys(r):void 0,i=t?Object.keys(t):void 0;if(!n||!i||n.length!=i.length)return!1;let o;for(let s=0;s<n.length;s++)if(o=n[s],!tR(r[o],t[o]))return!1;return!0}function tR(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const n=[...r].sort(),i=[...t].sort();return n.every((o,s)=>i[s]===o)}return r===t}function nR(r){return Array.prototype.concat.apply([],r)}function rR(r){return r.length>0?r[r.length-1]:null}function sr(r,t){for(const n in r)r.hasOwnProperty(n)&&t(r[n],n)}function io(r){return Vd(r)?r:Al(r)?L(Promise.resolve(r)):Rt(r)}const iB={exact:function sR(r,t,n){if(!Js(r.segments,t.segments)||!dh(r.segments,t.segments,n)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!r.children[i]||!sR(r.children[i],t.children[i],n))return!1;return!0},subset:aR},iR={exact:function(r,t){return ro(r,t)},subset:function(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(n=>tR(r[n],t[n]))},ignored:()=>!0};function oR(r,t,n){return iB[n.paths](r.root,t.root,n.matrixParams)&&iR[n.queryParams](r.queryParams,t.queryParams)&&!("exact"===n.fragment&&r.fragment!==t.fragment)}function aR(r,t,n){return cR(r,t,t.segments,n)}function cR(r,t,n,i){if(r.segments.length>n.length){const o=r.segments.slice(0,n.length);return!(!Js(o,n)||t.hasChildren()||!dh(o,n,i))}if(r.segments.length===n.length){if(!Js(r.segments,n)||!dh(r.segments,n,i))return!1;for(const o in t.children)if(!r.children[o]||!aR(r.children[o],t.children[o],i))return!1;return!0}{const o=n.slice(0,r.segments.length),s=n.slice(r.segments.length);return!!(Js(r.segments,o)&&dh(r.segments,o,i)&&r.children[$t])&&cR(r.children[$t],t,s,i)}}function dh(r,t,n){return t.every((i,o)=>iR[n](r[o].parameters,i.parameters))}class Ys{constructor(t,n,i){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tc(this.queryParams)),this._queryParamMap}toString(){return lB.serialize(this)}}class Jt{constructor(t,n){this.segments=t,this.children=n,this.parent=null,sr(n,(i,o)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fh(this)}}class gu{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Tc(this.parameters)),this._parameterMap}toString(){return fR(this)}}function Js(r,t){return r.length===t.length&&r.every((n,i)=>n.path===t[i].path)}class Py{}class lR{parse(t){const n=new yB(t);return new Ys(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){return`${`/${mu(t.root,!0)}`}${function(r){const t=Object.keys(r).map(n=>{const i=r[n];return Array.isArray(i)?i.map(o=>`${hh(n)}=${hh(o)}`).join("&"):`${hh(n)}=${hh(i)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${function(r){return encodeURI(r)}(t.fragment)}`:""}`}}const lB=new lR;function fh(r){return r.segments.map(t=>fR(t)).join("/")}function mu(r,t){if(!r.hasChildren())return fh(r);if(t){const n=r.children[$t]?mu(r.children[$t],!1):"",i=[];return sr(r.children,(o,s)=>{s!==$t&&i.push(`${s}:${mu(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function(r,t){let n=[];return sr(r.children,(i,o)=>{o===$t&&(n=n.concat(t(i,o)))}),sr(r.children,(i,o)=>{o!==$t&&(n=n.concat(t(i,o)))}),n}(r,(i,o)=>o===$t?[mu(r.children[$t],!1)]:[`${o}:${mu(i,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[$t]?`${fh(r)}/${n[0]}`:`${fh(r)}/(${n.join("//")})`}}function uR(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hh(r){return uR(r).replace(/%3B/gi,";")}function xy(r){return uR(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ph(r){return decodeURIComponent(r)}function dR(r){return ph(r.replace(/\+/g,"%20"))}function fR(r){return`${xy(r.path)}${function(r){return Object.keys(r).map(t=>`;${xy(t)}=${xy(r[t])}`).join("")}(r.parameters)}`}const hB=/^[^\/()?;=#]+/;function gh(r){const t=r.match(hB);return t?t[0]:""}const pB=/^[^=?&#]+/,mB=/^[^?&#]+/;class yB{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[$t]=new Jt(t,n)),i}parseSegment(){const t=gh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new gu(ph(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=gh(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const o=gh(this.remaining);o&&(i=o,this.capture(i))}t[ph(n)]=ph(i)}parseQueryParam(t){const n=function(r){const t=r.match(pB);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const a=function(r){const t=r.match(mB);return t?t[0]:""}(this.remaining);a&&(i=a,this.capture(i))}const o=dR(n),s=dR(i);if(t.hasOwnProperty(o)){let a=t[o];Array.isArray(a)||(a=[a],t[o]=a),a.push(s)}else t[o]=s}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=gh(this.remaining),o=this.remaining[i.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=$t);const a=this.parseChildren();n[s]=1===Object.keys(a).length?a[$t]:new Jt([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class hR{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=Ly(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){const n=Ly(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=Fy(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return Fy(t,this._root).map(n=>n.value)}}function Ly(r,t){if(r===t.value)return t;for(const n of t.children){const i=Ly(r,n);if(i)return i}return null}function Fy(r,t){if(r===t.value)return[t];for(const n of t.children){const i=Fy(r,n);if(i.length)return i.unshift(t),i}return[]}class Io{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function _u(r){const t={};return r&&r.children.forEach(n=>t[n.value.outlet]=n),t}class pR extends hR{constructor(t,n){super(t),this.snapshot=n,Vy(this,t)}toString(){return this.snapshot.toString()}}function gR(r,t){const n=function(r,t){const a=new mh([],{},{},"",{},$t,t,null,r.root,-1,{});return new _R("",new Io(a,[]))}(r,t),i=new di([new gu("",{})]),o=new di({}),s=new di({}),a=new di({}),c=new di(""),l=new Ac(i,o,a,c,s,$t,t,n.root);return l.snapshot=n.root,new pR(new Io(l,[]),n)}class Ac{constructor(t,n,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=i,this.fragment=o,this.data=s,this.outlet=a,this.component=c,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(w(t=>Tc(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(w(t=>Tc(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mR(r,t="emptyOnly"){const n=r.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const o=n[i],s=n[i-1];if(o.routeConfig&&""===o.routeConfig.path)i--;else{if(s.component)break;i--}}return function(r){return r.reduce((t,n)=>({params:Object.assign(Object.assign({},t.params),n.params),data:Object.assign(Object.assign({},t.data),n.data),resolve:Object.assign(Object.assign({},t.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class mh{constructor(t,n,i,o,s,a,c,l,f,b,O){this.url=t,this.params=n,this.queryParams=i,this.fragment=o,this.data=s,this.outlet=a,this.component=c,this.routeConfig=l,this._urlSegment=f,this._lastPathIndex=b,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Tc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _R extends hR{constructor(t,n){super(n),this.url=t,Vy(this,n)}toString(){return yR(this._root)}}function Vy(r,t){t.value._routerState=r,t.children.forEach(n=>Vy(r,n))}function yR(r){const t=r.children.length>0?` { ${r.children.map(yR).join(", ")} } `:"";return`${r.value}${t}`}function Uy(r){if(r.snapshot){const t=r.snapshot,n=r._futureSnapshot;r.snapshot=n,ro(t.queryParams,n.queryParams)||r.queryParams.next(n.queryParams),t.fragment!==n.fragment&&r.fragment.next(n.fragment),ro(t.params,n.params)||r.params.next(n.params),function(r,t){if(r.length!==t.length)return!1;for(let n=0;n<r.length;++n)if(!ro(r[n],t[n]))return!1;return!0}(t.url,n.url)||r.url.next(n.url),ro(t.data,n.data)||r.data.next(n.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function jy(r,t){return ro(r.params,t.params)&&function(r,t){return Js(r,t)&&r.every((n,i)=>ro(n.parameters,t[i].parameters))}(r.url,t.url)&&!(!r.parent!=!t.parent)&&(!r.parent||jy(r.parent,t.parent))}function _h(r,t,n){if(n&&r.shouldReuseRoute(t.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=t.value;const o=function(r,t,n){return t.children.map(i=>{for(const o of n.children)if(r.shouldReuseRoute(i.value,o.value.snapshot))return _h(r,i,o);return _h(r,i)})}(r,t,n);return new Io(i,o)}{if(r.shouldAttach(t.value)){const s=r.retrieve(t.value);if(null!==s){const a=s.route;return vR(t,a),a}}const i=function(r){return new Ac(new di(r.url),new di(r.params),new di(r.queryParams),new di(r.fragment),new di(r.data),r.outlet,r.component,r)}(t.value),o=t.children.map(s=>_h(r,s));return new Io(i,o)}}function vR(r,t){if(r.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(r.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=r.value;for(let n=0;n<r.children.length;++n)vR(r.children[n],t.children[n])}function yh(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function yu(r){return"object"==typeof r&&null!=r&&r.outlets}function By(r,t,n,i,o){let s={};return i&&sr(i,(a,c)=>{s[c]=Array.isArray(a)?a.map(l=>`${l}`):`${a}`}),new Ys(n.root===r?t:ER(n.root,r,t),s,o)}function ER(r,t,n){const i={};return sr(r.children,(o,s)=>{i[s]=o===t?n:ER(o,t,n)}),new Jt(r.segments,i)}class bR{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&yh(i[0]))throw new Error("Root segment cannot have matrix parameters");const o=i.find(yu);if(o&&o!==rR(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hy{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}}function SR(r,t,n){if(r||(r=new Jt([],{})),0===r.segments.length&&r.hasChildren())return vh(r,t,n);const i=function(r,t,n){let i=0,o=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;o<r.segments.length;){if(i>=n.length)return s;const a=r.segments[o],c=n[i];if(yu(c))break;const l=`${c}`,f=i<n.length-1?n[i+1]:null;if(o>0&&void 0===l)break;if(l&&f&&"object"==typeof f&&void 0===f.outlets){if(!wR(l,f,a))return s;i+=2}else{if(!wR(l,{},a))return s;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}(r,t,n),o=n.slice(i.commandIndex);if(i.match&&i.pathIndex<r.segments.length){const s=new Jt(r.segments.slice(0,i.pathIndex),{});return s.children[$t]=new Jt(r.segments.slice(i.pathIndex),r.children),vh(s,0,o)}return i.match&&0===o.length?new Jt(r.segments,{}):i.match&&!r.hasChildren()?Wy(r,t,n):i.match?vh(r,0,o):Wy(r,t,n)}function vh(r,t,n){if(0===n.length)return new Jt(r.segments,{});{const i=function(r){return yu(r[0])?r[0].outlets:{[$t]:r}}(n),o={};return sr(i,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(o[a]=SR(r.children[a],t,s))}),sr(r.children,(s,a)=>{void 0===i[a]&&(o[a]=s)}),new Jt(r.segments,o)}}function Wy(r,t,n){const i=r.segments.slice(0,t);let o=0;for(;o<n.length;){const s=n[o];if(yu(s)){const l=DB(s.outlets);return new Jt(i,l)}if(0===o&&yh(n[0])){i.push(new gu(r.segments[t].path,CR(n[0]))),o++;continue}const a=yu(s)?s.outlets[$t]:`${s}`,c=o<n.length-1?n[o+1]:null;a&&c&&yh(c)?(i.push(new gu(a,CR(c))),o+=2):(i.push(new gu(a,{})),o++)}return new Jt(i,{})}function DB(r){const t={};return sr(r,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[i]=Wy(new Jt([],{}),0,n))}),t}function CR(r){const t={};return sr(r,(n,i)=>t[i]=`${n}`),t}function wR(r,t,n){return r==n.path&&ro(t,n.parameters)}class NB{constructor(t,n,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=o}activate(t){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),Uy(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){const o=_u(n);t.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,o[a],i),delete o[a]}),sr(o,(s,a)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,n,i){const o=t.value,s=n?n.value:null;if(o===s)if(o.component){const a=i.getContext(o.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const i=n.getContext(t.value.outlet);if(i&&i.outlet){const o=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:s})}}deactivateRouteAndOutlet(t,n){const i=n.getContext(t.value.outlet),o=i&&t.value.component?i.children:n,s=_u(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],o);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,n,i){const o=_u(n);t.children.forEach(s=>{this.activateRoutes(s,o[s.value.outlet],i),this.forwardEvent(new X7(s.value.snapshot))}),t.children.length&&this.forwardEvent(new J7(t.value.snapshot))}activateRoutes(t,n,i){const o=t.value,s=n?n.value:null;if(Uy(o),o===s)if(o.component){const a=i.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,i);else if(o.component){const a=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const c=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),TR(c.route)}else{const c=function(r){for(let t=r.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(o.snapshot),l=c?c.module.componentFactoryResolver:null;a.attachRef=null,a.route=o,a.resolver=l,a.outlet&&a.outlet.activateWith(o,l),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,i)}}function TR(r){Uy(r.value),r.children.forEach(TR)}class qy{constructor(t,n){this.routes=t,this.module=n}}function cs(r){return"function"==typeof r}function Qs(r){return r instanceof Ys}const vu=Symbol("INITIAL_VALUE");function Eu(){return Pi(r=>function(...r){let t,n;return m(r[r.length-1])&&(n=r.pop()),"function"==typeof r[r.length-1]&&(t=r.pop()),1===r.length&&v(r[0])&&(r=r[0]),ve(r,n).lift(new y7(t))}(r.map(t=>t.pipe(Ao(1),os(vu)))).pipe($2((t,n)=>{let i=!1;return n.reduce((o,s,a)=>o!==vu?o:(s===vu&&(i=!0),i||!1!==s&&a!==n.length-1&&!Qs(s)?o:s),t)},vu),ki(t=>t!==vu),w(t=>Qs(t)?t:!0===t),Ao(1)))}let AR=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=Vn({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,i){1&n&&rn(0,"router-outlet")},directives:function(){return[wu]},encapsulation:2}),r})();function RR(r,t=""){for(let n=0;n<r.length;n++){const i=r[n];UB(i,jB(t,i))}}function UB(r,t){r.children&&RR(r.children,t)}function jB(r,t){return t?r||t.path?r&&!t.path?`${r}/`:!r&&t.path?t.path:`${r}/${t.path}`:"":r}function Gy(r){const t=r.children&&r.children.map(Gy),n=t?Object.assign(Object.assign({},r),{children:t}):Object.assign({},r);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==$t&&(n.component=AR),n}function fi(r){return r.outlet||$t}function IR(r,t){const n=r.filter(i=>fi(i)===t);return n.push(...r.filter(i=>fi(i)!==t)),n}const OR={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Eh(r,t,n){var i;if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||n.length>0)?Object.assign({},OR):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(t.matcher||tB)(n,r,t);if(!s)return Object.assign({},OR);const a={};sr(s.posParams,(l,f)=>{a[f]=l.path});const c=s.consumed.length>0?Object.assign(Object.assign({},a),s.consumed[s.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:c,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function bh(r,t,n,i,o="corrected"){if(n.length>0&&function(r,t,n){return n.some(i=>Sh(r,t,i)&&fi(i)!==$t)}(r,n,i)){const a=new Jt(t,function(r,t,n,i){const o={};o[$t]=i,i._sourceSegment=r,i._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&fi(s)!==$t){const a=new Jt([],{});a._sourceSegment=r,a._segmentIndexShift=t.length,o[fi(s)]=a}return o}(r,t,i,new Jt(n,r.children)));return a._sourceSegment=r,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(r,t,n){return n.some(i=>Sh(r,t,i))}(r,n,i)){const a=new Jt(r.segments,function(r,t,n,i,o,s){const a={};for(const c of i)if(Sh(r,n,c)&&!o[fi(c)]){const l=new Jt([],{});l._sourceSegment=r,l._segmentIndexShift="legacy"===s?r.segments.length:t.length,a[fi(c)]=l}return Object.assign(Object.assign({},o),a)}(r,t,n,i,r.children,o));return a._sourceSegment=r,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}const s=new Jt(r.segments,r.children);return s._sourceSegment=r,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function Sh(r,t,n){return(!(r.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function DR(r,t,n,i){return!!(fi(r)===i||i!==$t&&Sh(t,n,r))&&("**"===r.path||Eh(t,r,n).matched)}function MR(r,t,n){return 0===t.length&&!r.children[n]}class bu{constructor(t){this.segmentGroup=t||null}}class NR{constructor(t){this.urlTree=t}}function Ch(r){return new ae(t=>t.error(new bu(r)))}function kR(r){return new ae(t=>t.error(new NR(r)))}function GB(r){return new ae(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${r}'`)))}class KB{constructor(t,n,i,o,s){this.configLoader=n,this.urlSerializer=i,this.urlTree=o,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(Ji)}apply(){const t=bh(this.urlTree.root,[],[],this.config).segmentGroup,n=new Jt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,$t).pipe(w(s=>this.createUrlTree(zy(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ss(s=>{if(s instanceof NR)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof bu?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,$t).pipe(w(o=>this.createUrlTree(zy(o),t.queryParams,t.fragment))).pipe(ss(o=>{throw o instanceof bu?this.noMatchError(o):o}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,i){const o=t.segments.length>0?new Jt([],{[$t]:t}):t;return new Ys(o,n,i)}expandSegmentGroup(t,n,i,o){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,n,i).pipe(w(s=>new Jt([],s))):this.expandSegment(t,i,n,i.segments,o,!0)}expandChildren(t,n,i){const o=[];for(const s of Object.keys(i.children))"primary"===s?o.unshift(s):o.push(s);return L(o).pipe(js(s=>{const a=i.children[s],c=IR(n,s);return this.expandSegmentGroup(t,c,a,s).pipe(w(l=>({segment:l,outlet:s})))}),$2((s,a)=>(s[a.outlet]=a.segment,s),{}),function(r,t){const n=arguments.length>=2;return i=>i.pipe(r?ki((o,s)=>r(o,s,i)):ie,My(1),n?Y2(t):K2(()=>new lh))}())}expandSegment(t,n,i,o,s,a){return L(i).pipe(js(c=>this.expandSegmentAgainstRoute(t,n,i,c,o,s,a).pipe(ss(f=>{if(f instanceof bu)return Rt(null);throw f}))),wc(c=>!!c),ss((c,l)=>{if(c instanceof lh||"EmptyError"===c.name){if(MR(n,o,s))return Rt(new Jt([],{}));throw new bu(n)}throw c}))}expandSegmentAgainstRoute(t,n,i,o,s,a,c){return DR(o,n,s,a)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(t,n,o,s,a):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,i,o,s,a):Ch(n):Ch(n)}expandSegmentAgainstRouteUsingRedirect(t,n,i,o,s,a){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,o,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,o,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,o){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?kR(s):this.lineralizeSegments(i,s).pipe(pe(a=>{const c=new Jt(a,{});return this.expandSegment(t,c,n,a,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,o,s,a){const{matched:c,consumedSegments:l,lastChild:f,positionalParamSegments:b}=Eh(n,o,s);if(!c)return Ch(n);const O=this.applyRedirectCommands(l,o.redirectTo,b);return o.redirectTo.startsWith("/")?kR(O):this.lineralizeSegments(o,O).pipe(pe(j=>this.expandSegment(t,n,i,j.concat(s.slice(f)),a,!1)))}matchSegmentAgainstRoute(t,n,i,o,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Rt(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe(w(j=>(i._loadedConfig=j,new Jt(o,{})))):Rt(new Jt(o,{}));const{matched:a,consumedSegments:c,lastChild:l}=Eh(n,i,o);if(!a)return Ch(n);const f=o.slice(l);return this.getChildConfig(t,i,o).pipe(pe(O=>{const j=O.module,z=O.routes,{segmentGroup:$,slicedSegments:Q}=bh(n,c,f,z),re=new Jt($.segments,$.children);if(0===Q.length&&re.hasChildren())return this.expandChildren(j,z,re).pipe(w(Fe=>new Jt(c,Fe)));if(0===z.length&&0===Q.length)return Rt(new Jt(c,{}));const Ee=fi(i)===s;return this.expandSegment(j,re,z,Q,Ee?$t:s,!0).pipe(w(Ae=>new Jt(c.concat(Ae.segments),Ae.children)))}))}getChildConfig(t,n,i){return n.children?Rt(new qy(n.children,t)):n.loadChildren?void 0!==n._loadedConfig?Rt(n._loadedConfig):this.runCanLoadGuards(t.injector,n,i).pipe(pe(o=>o?this.configLoader.load(t.injector,n).pipe(w(s=>(n._loadedConfig=s,s))):function(r){return new ae(t=>t.error(ky(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`)))}(n))):Rt(new qy([],t))}runCanLoadGuards(t,n,i){const o=n.canLoad;return o&&0!==o.length?Rt(o.map(a=>{const c=t.get(a);let l;if(function(r){return r&&cs(r.canLoad)}(c))l=c.canLoad(n,i);else{if(!cs(c))throw new Error("Invalid CanLoad guard");l=c(n,i)}return io(l)})).pipe(Eu(),kr(a=>{if(!Qs(a))return;const c=ky(`Redirecting to "${this.urlSerializer.serialize(a)}"`);throw c.url=a,c}),w(a=>!0===a)):Rt(!0)}lineralizeSegments(t,n){let i=[],o=n.root;for(;;){if(i=i.concat(o.segments),0===o.numberOfChildren)return Rt(i);if(o.numberOfChildren>1||!o.children[$t])return GB(t.redirectTo);o=o.children[$t]}}applyRedirectCommands(t,n,i){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,i)}applyRedirectCreatreUrlTree(t,n,i,o){const s=this.createSegmentGroup(t,n.root,i,o);return new Ys(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const i={};return sr(t,(o,s)=>{if("string"==typeof o&&o.startsWith(":")){const c=o.substring(1);i[s]=n[c]}else i[s]=o}),i}createSegmentGroup(t,n,i,o){const s=this.createSegments(t,n.segments,i,o);let a={};return sr(n.children,(c,l)=>{a[l]=this.createSegmentGroup(t,c,i,o)}),new Jt(s,a)}createSegments(t,n,i,o){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,o):this.findOrReturn(s,i))}findPosParam(t,n,i){const o=i[n.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return o}findOrReturn(t,n){let i=0;for(const o of n){if(o.path===t.path)return n.splice(i),o;i++}return t}}function zy(r){const t={};for(const i of Object.keys(r.children)){const s=zy(r.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function(r){if(1===r.numberOfChildren&&r.children[$t]){const t=r.children[$t];return new Jt(r.segments.concat(t.segments),t.children)}return r}(new Jt(r.segments,t))}class PR{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class wh{constructor(t,n){this.component=t,this.route=n}}function QB(r,t,n){const i=r._root;return Su(i,t?t._root:null,n,[i.value])}function Th(r,t,n){const i=function(r){if(!r)return null;for(let t=r.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(i?i.module.injector:n).get(r)}function Su(r,t,n,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=_u(t);return r.children.forEach(a=>{(function(r,t,n,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=r.value,a=t?t.value:null,c=n?n.getContext(r.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const l=function(r,t,n){if("function"==typeof n)return n(r,t);switch(n){case"pathParamsChange":return!Js(r.url,t.url);case"pathParamsOrQueryParamsChange":return!Js(r.url,t.url)||!ro(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jy(r,t)||!ro(r.queryParams,t.queryParams);case"paramsChange":default:return!jy(r,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new PR(i)):(s.data=a.data,s._resolvedData=a._resolvedData),Su(r,t,s.component?c?c.children:null:n,i,o),l&&c&&c.outlet&&c.outlet.isActivated&&o.canDeactivateChecks.push(new wh(c.outlet.component,a))}else a&&Cu(t,c,o),o.canActivateChecks.push(new PR(i)),Su(r,null,s.component?c?c.children:null:n,i,o)})(a,s[a.value.outlet],n,i.concat([a.value]),o),delete s[a.value.outlet]}),sr(s,(a,c)=>Cu(a,n.getContext(c),o)),o}function Cu(r,t,n){const i=_u(r),o=r.value;sr(i,(s,a)=>{Cu(s,o.component?t?t.children.getContext(a):null:t,n)}),n.canDeactivateChecks.push(new wh(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}class u9{}function xR(r){return new ae(t=>t.error(r))}class f9{constructor(t,n,i,o,s,a){this.rootComponentType=t,this.config=n,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=a}recognize(){const t=bh(this.urlTree.root,[],[],this.config.filter(a=>void 0===a.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,$t);if(null===n)return null;const i=new mh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Io(i,n),s=new _R(this.url,o);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const n=t.value,i=mR(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,n,i){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,i)}processChildren(t,n){const i=[];for(const s of Object.keys(n.children)){const a=n.children[s],c=IR(t,s),l=this.processSegmentGroup(c,a,s);if(null===l)return null;i.push(...l)}const o=LR(i);return function(r){r.sort((t,n)=>t.value.outlet===$t?-1:n.value.outlet===$t?1:t.value.outlet.localeCompare(n.value.outlet))}(o),o}processSegment(t,n,i,o){for(const s of t){const a=this.processSegmentAgainstRoute(s,n,i,o);if(null!==a)return a}return MR(n,i,o)?[]:null}processSegmentAgainstRoute(t,n,i,o){if(t.redirectTo||!DR(t,n,i,o))return null;let s,a=[],c=[];if("**"===t.path){const z=i.length>0?rR(i).parameters:{};s=new mh(i,z,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,UR(t),fi(t),t.component,t,FR(n),VR(n)+i.length,jR(t))}else{const z=Eh(n,t,i);if(!z.matched)return null;a=z.consumedSegments,c=i.slice(z.lastChild),s=new mh(a,z.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,UR(t),fi(t),t.component,t,FR(n),VR(n)+a.length,jR(t))}const l=function(r){return r.children?r.children:r.loadChildren?r._loadedConfig.routes:[]}(t),{segmentGroup:f,slicedSegments:b}=bh(n,a,c,l.filter(z=>void 0===z.redirectTo),this.relativeLinkResolution);if(0===b.length&&f.hasChildren()){const z=this.processChildren(l,f);return null===z?null:[new Io(s,z)]}if(0===l.length&&0===b.length)return[new Io(s,[])];const O=fi(t)===o,j=this.processSegment(l,f,b,O?$t:o);return null===j?null:[new Io(s,j)]}}function g9(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function LR(r){const t=[],n=new Set;for(const i of r){if(!g9(i)){t.push(i);continue}const o=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==o?(o.children.push(...i.children),n.add(o)):t.push(i)}for(const i of n){const o=LR(i.children);t.push(new Io(i.value,o))}return t.filter(i=>!n.has(i))}function FR(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function VR(r){let t=r,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function UR(r){return r.data||{}}function jR(r){return r.resolve||{}}function $y(r){return Pi(t=>{const n=r(t);return n?L(n).pipe(w(()=>t)):Rt(t)})}class C9 extends class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const Ky=new ut("ROUTES");class BR{constructor(t,n,i,o){this.loader=t,this.compiler=n,this.onLoadStartListener=i,this.onLoadEndListener=o}load(t,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const o=this.loadModuleFactory(n.loadChildren).pipe(w(s=>{this.onLoadEndListener&&this.onLoadEndListener(n);const a=s.create(t);return new qy(nR(a.injector.get(Ky,void 0,Et.Self|Et.Optional)).map(Gy),a)}),ss(s=>{throw n._loader$=void 0,s}));return n._loader$=new Oe(o,()=>new u).pipe(Se()),n._loader$}loadModuleFactory(t){return"string"==typeof t?L(this.loader.load(t)):io(t()).pipe(pe(n=>n instanceof ZS?Rt(n):L(this.compiler.compileModuleAsync(n))))}}class w9{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Rc,this.attachRef=null}}class Rc{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const i=this.getOrCreateContext(t);i.outlet=n,this.contexts.set(t,i)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new w9,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}class A9{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function R9(r){throw r}function I9(r,t,n){return t.parse("/")}function HR(r,t){return Rt(null)}const O9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},D9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let tr=(()=>{class r{constructor(n,i,o,s,a,c,l,f){this.rootComponentType=n,this.urlSerializer=i,this.rootContexts=o,this.location=s,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new u,this.errorHandler=R9,this.malformedUriErrorHandler=I9,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:HR,afterPreactivation:HR},this.urlHandlingStrategy=new A9,this.routeReuseStrategy=new C9,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=a.get(Ji),this.console=a.get(tf);const j=a.get(wt);this.isNgZoneEnabled=j instanceof wt&&wt.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=new Ys(new Jt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new BR(c,l,z=>this.triggerEvent(new Q2(z)),z=>this.triggerEvent(new X2(z))),this.routerState=gR(this.currentUrlTree,this.rootComponentType),this.transitions=new di({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const i=this.events;return n.pipe(ki(o=>0!==o.id),w(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Pi(o=>{let s=!1,a=!1;return Rt(o).pipe(kr(c=>{this.currentNavigation={id:c.id,initialUrl:c.currentRawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Pi(c=>{const l=this.browserUrlTree.toString(),f=!this.navigated||c.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||f)&&this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Ah(c.source)&&(this.browserUrlTree=c.extractedUrl),Rt(c).pipe(Pi(O=>{const j=this.transitions.getValue();return i.next(new Ny(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),j!==this.transitions.getValue()?Ks:Promise.resolve(O)}),function(r,t,n,i){return Pi(o=>function(r,t,n,i,o){return new KB(r,t,n,i,o).apply()}(r,t,n,o.extractedUrl,i).pipe(w(s=>Object.assign(Object.assign({},o),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),kr(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function(r,t,n,i,o){return pe(s=>function(r,t,n,i,o="emptyOnly",s="legacy"){try{const a=new f9(r,t,n,i,o,s).recognize();return null===a?xR(new u9):Rt(a)}catch(a){return xR(a)}}(r,t,s.urlAfterRedirects,n(s.urlAfterRedirects),i,o).pipe(w(a=>Object.assign(Object.assign({},s),{targetSnapshot:a}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),kr(O=>{"eager"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(O.urlAfterRedirects,O),this.browserUrlTree=O.urlAfterRedirects);const j=new q7(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);i.next(j)}));if(f&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:j,extractedUrl:z,source:$,restoredState:Q,extras:re}=c,Ee=new Ny(j,this.serializeUrl(z),$,Q);i.next(Ee);const he=gR(z,this.rootComponentType).snapshot;return Rt(Object.assign(Object.assign({},c),{targetSnapshot:he,urlAfterRedirects:z,extras:Object.assign(Object.assign({},re),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=c.rawUrl,this.browserUrlTree=c.urlAfterRedirects,c.resolve(null),Ks}),$y(c=>{const{targetSnapshot:l,id:f,extractedUrl:b,rawUrl:O,extras:{skipLocationChange:j,replaceUrl:z}}=c;return this.hooks.beforePreactivation(l,{navigationId:f,appliedUrlTree:b,rawUrlTree:O,skipLocationChange:!!j,replaceUrl:!!z})}),kr(c=>{const l=new G7(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}),w(c=>Object.assign(Object.assign({},c),{guards:QB(c.targetSnapshot,c.currentSnapshot,this.rootContexts)})),function(r,t){return pe(n=>{const{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return 0===a.length&&0===s.length?Rt(Object.assign(Object.assign({},n),{guardsResult:!0})):function(r,t,n,i){return L(r).pipe(pe(o=>function(r,t,n,i,o){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Rt(s.map(c=>{const l=Th(c,t,o);let f;if(function(r){return r&&cs(r.canDeactivate)}(l))f=io(l.canDeactivate(r,t,n,i));else{if(!cs(l))throw new Error("Invalid CanDeactivate guard");f=io(l(r,t,n,i))}return f.pipe(wc())})).pipe(Eu()):Rt(!0)}(o.component,o.route,n,t,i)),wc(o=>!0!==o,!0))}(a,i,o,r).pipe(pe(c=>c&&function(r){return"boolean"==typeof r}(c)?function(r,t,n,i){return L(t).pipe(js(o=>Oy(function(r,t){return null!==r&&t&&t(new Y7(r)),Rt(!0)}(o.route.parent,i),function(r,t){return null!==r&&t&&t(new Q7(r)),Rt(!0)}(o.route,i),function(r,t,n){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>function(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(a)).filter(a=>null!==a).map(a=>Dy(()=>Rt(a.guards.map(l=>{const f=Th(l,a.node,n);let b;if(function(r){return r&&cs(r.canActivateChild)}(f))b=io(f.canActivateChild(i,r));else{if(!cs(f))throw new Error("Invalid CanActivateChild guard");b=io(f(i,r))}return b.pipe(wc())})).pipe(Eu())));return Rt(s).pipe(Eu())}(r,o.path,n),function(r,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;return i&&0!==i.length?Rt(i.map(s=>Dy(()=>{const a=Th(s,t,n);let c;if(function(r){return r&&cs(r.canActivate)}(a))c=io(a.canActivate(t,r));else{if(!cs(a))throw new Error("Invalid CanActivate guard");c=io(a(t,r))}return c.pipe(wc())}))).pipe(Eu()):Rt(!0)}(r,o.route,n))),wc(o=>!0!==o,!0))}(i,s,r,t):Rt(c)),w(c=>Object.assign(Object.assign({},n),{guardsResult:c})))})}(this.ngModule.injector,c=>this.triggerEvent(c)),kr(c=>{if(Qs(c.guardsResult)){const f=ky(`Redirecting to "${this.serializeUrl(c.guardsResult)}"`);throw f.url=c.guardsResult,f}const l=new z7(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.triggerEvent(l)}),ki(c=>!!c.guardsResult||(this.restoreHistory(c),this.cancelNavigationTransition(c,""),!1)),$y(c=>{if(c.guards.canActivateChecks.length)return Rt(c).pipe(kr(l=>{const f=new $7(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(f)}),Pi(l=>{let f=!1;return Rt(l).pipe(function(r,t){return pe(n=>{const{targetSnapshot:i,guards:{canActivateChecks:o}}=n;if(!o.length)return Rt(n);let s=0;return L(o).pipe(js(a=>function(r,t,n,i){return function(r,t,n,i){const o=Object.keys(r);if(0===o.length)return Rt({});const s={};return L(o).pipe(pe(a=>function(r,t,n,i){const o=Th(r,t,i);return io(o.resolve?o.resolve(t,n):o(t,n))}(r[a],t,n,i).pipe(kr(c=>{s[a]=c}))),My(1),pe(()=>Object.keys(s).length===o.length?Rt(s):Ks))}(r._resolve,r,t,i).pipe(w(s=>(r._resolvedData=s,r.data=Object.assign(Object.assign({},r.data),mR(r,n).resolve),null)))}(a.route,i,r,t)),kr(()=>s++),My(1),pe(a=>s===o.length?Rt(n):Ks))})}(this.paramsInheritanceStrategy,this.ngModule.injector),kr({next:()=>f=!0,complete:()=>{f||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),kr(l=>{const f=new K7(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(f)}))}),$y(c=>{const{targetSnapshot:l,id:f,extractedUrl:b,rawUrl:O,extras:{skipLocationChange:j,replaceUrl:z}}=c;return this.hooks.afterPreactivation(l,{navigationId:f,appliedUrlTree:b,rawUrlTree:O,skipLocationChange:!!j,replaceUrl:!!z})}),w(c=>{const l=function(r,t,n){const i=_h(r,t._root,n?n._root:void 0);return new pR(i,t)}(this.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return Object.assign(Object.assign({},c),{targetRouterState:l})}),kr(c=>{this.currentUrlTree=c.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),this.routerState=c.targetRouterState,"deferred"===this.urlUpdateStrategy&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c),this.browserUrlTree=c.urlAfterRedirects)}),((r,t,n)=>w(i=>(new NB(t,i.targetRouterState,i.currentRouterState,n).activate(r),i)))(this.rootContexts,this.routeReuseStrategy,c=>this.triggerEvent(c)),kr({next(){s=!0},complete(){s=!0}}),function(r){return t=>t.lift(new B7(r))}(()=>{if(!s&&!a){const c=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,c)):this.cancelNavigationTransition(o,c)}this.currentNavigation=null}),ss(c=>{if(a=!0,function(r){return r&&r[eR]}(c)){const l=Qs(c.url);l||(this.navigated=!0,this.restoreHistory(o,!0));const f=new J2(o.id,this.serializeUrl(o.extractedUrl),c.message);i.next(f),l?setTimeout(()=>{const b=this.urlHandlingStrategy.merge(c.url,this.rawUrlTree),O={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ah(o.source)};this.scheduleNavigation(b,"imperative",null,O,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const l=new W7(o.id,this.serializeUrl(o.extractedUrl),c);i.next(l);try{o.resolve(this.errorHandler(c))}catch(f){o.reject(f)}}return Ks}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}getTransition(){const n=this.transitions.value;return n.urlAfterRedirects=this.browserUrlTree,n}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const i=this.extractLocationChangeInfoFromEvent(n);this.shouldScheduleNavigation(this.lastLocationChangeInfo,i)&&setTimeout(()=>{const{source:o,state:s,urlTree:a}=i,c={replaceUrl:!0};if(s){const l=Object.assign({},s);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(c.state=l)}this.scheduleNavigation(a,o,s,c)},0),this.lastLocationChangeInfo=i}))}extractLocationChangeInfoFromEvent(n){var i;return{source:"popstate"===n.type?"popstate":"hashchange",urlTree:this.parseUrl(n.url),state:(null===(i=n.state)||void 0===i?void 0:i.navigationId)?n.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(n,i){if(!n)return!0;const o=i.urlTree.toString()===n.urlTree.toString();return i.transitionId!==n.transitionId||!o||!("hashchange"===i.source&&"popstate"===n.source||"popstate"===i.source&&"hashchange"===n.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){RR(n),this.config=n.map(Gy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,i={}){const{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,f=o||this.routerState.root,b=l?this.currentUrlTree.fragment:a;let O=null;switch(c){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=s||null}return null!==O&&(O=this.removeEmptyProps(O)),function(r,t,n,i,o){if(0===n.length)return By(t.root,t.root,t,i,o);const s=function(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new bR(!0,0,r);let t=0,n=!1;const i=r.reduce((o,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return sr(s.outlets,(l,f)=>{c[f]="string"==typeof l?l.split("/"):l}),[...o,{outlets:c}]}if(s.segmentPath)return[...o,s.segmentPath]}return"string"!=typeof s?[...o,s]:0===a?(s.split("/").forEach((c,l)=>{0==l&&"."===c||(0==l&&""===c?n=!0:".."===c?t++:""!=c&&o.push(c))}),o):[...o,s]},[]);return new bR(n,t,i)}(n);if(s.toRoot())return By(t.root,new Jt([],{}),t,i,o);const a=function(r,t,n){if(r.isAbsolute)return new Hy(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const s=n.snapshot._urlSegment;return new Hy(s,s===t.root,0)}const i=yh(r.commands[0])?0:1;return function(r,t,n){let i=r,o=t,s=n;for(;s>o;){if(s-=o,i=i.parent,!i)throw new Error("Invalid number of '../'");o=i.segments.length}return new Hy(i,!1,o-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,r.numberOfDoubleDots)}(s,t,r),c=a.processChildren?vh(a.segmentGroup,a.index,s.commands):SR(a.segmentGroup,a.index,s.commands);return By(a.segmentGroup,c,t,i,o)}(f,this.currentUrlTree,n,O,null!=b?b:null)}navigateByUrl(n,i={skipLocationChange:!1}){const o=Qs(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(n,i={skipLocationChange:!1}){return function(r){for(let t=0;t<r.length;t++){const n=r[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let i;try{i=this.urlSerializer.parse(n)}catch(o){i=this.malformedUriErrorHandler(o,this.urlSerializer,n)}return i}isActive(n,i){let o;if(o=!0===i?Object.assign({},O9):!1===i?Object.assign({},D9):i,Qs(n))return oR(this.currentUrlTree,n,o);const s=this.parseUrl(n);return oR(this.currentUrlTree,s,o)}removeEmptyProps(n){return Object.keys(n).reduce((i,o)=>{const s=n[o];return null!=s&&(i[o]=s),i},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new pu(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,i,o,s,a){var c,l;if(this.disposed)return Promise.resolve(!1);const f=this.getTransition(),b=Ah(i)&&f&&!Ah(f.source),z=(this.lastSuccessfulId===f.id||this.currentNavigation?f.rawUrl:f.urlAfterRedirects).toString()===n.toString();if(b&&z)return Promise.resolve(!0);let $,Q,re;a?($=a.resolve,Q=a.reject,re=a.promise):re=new Promise((Ae,Fe)=>{$=Ae,Q=Fe});const Ee=++this.navigationId;let he;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),he=o&&o.\u0275routerPageId?o.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(c=this.browserPageId)&&void 0!==c?c:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):he=0,this.setTransition({id:Ee,targetPageId:he,source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:s,resolve:$,reject:Q,promise:re,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),re.catch(Ae=>Promise.reject(Ae))}setBrowserUrl(n,i){const o=this.urlSerializer.serialize(n),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl?this.location.replaceState(o,"",s):this.location.go(o,"",s)}restoreHistory(n,i=!1){var o,s;if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===a?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===a&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(a)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,i){const o=new J2(n.id,this.serializeUrl(n.extractedUrl),i);this.triggerEvent(o),n.resolve(!1)}generateNgRouterState(n,i){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}}return r.\u0275fac=function(n){return new(n||r)(De(hd),De(Py),De(Rc),De(Ql),De(en),De(rf),De(xs),De(void 0))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();function Ah(r){return"imperative"!==r}let Rh=(()=>{class r{constructor(n,i,o,s,a){this.router=n,this.route=i,this.commands=[],this.onChanges=new u,null==o&&s.setAttribute(a.nativeElement,"tabindex","0")}ngOnChanges(n){this.onChanges.next(this)}set routerLink(n){this.commands=null!=n?Array.isArray(n)?n:[n]:[]}onClick(){const n={skipLocationChange:Ic(this.skipLocationChange),replaceUrl:Ic(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,n),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ic(this.preserveFragment)})}}return r.\u0275fac=function(n){return new(n||r)(Ie(tr),Ie(Ac),Ss("tabindex"),Ie(Yi),Ie(jt))},r.\u0275dir=Ye({type:r,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(n,i){1&n&&on("click",function(){return i.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[Pn]}),r})();function Ic(r){return""===r||!!r}let wu=(()=>{class r{constructor(n,i,o,s,a){this.parentContexts=n,this.location=i,this.resolver=o,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new Kt,this.deactivateEvents=new Kt,this.name=s||$t,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const a=(i=i||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),c=this.parentContexts.getOrCreateContext(this.name).children,l=new P9(n,c,this.location.injector);this.activated=this.location.createComponent(a,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(n){return new(n||r)(Ie(Rc),Ie(wr),Ie(yo),Ss("name"),Ie(vo))},r.\u0275dir=Ye({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),r})();class P9{constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===Ac?this.route:t===Rc?this.childContexts:this.parent.get(t,n)}}class WR{}class qR{preload(t,n){return Rt(null)}}let GR=(()=>{class r{constructor(n,i,o,s,a){this.router=n,this.injector=s,this.preloadingStrategy=a,this.loader=new BR(i,o,f=>n.triggerEvent(new Q2(f)),f=>n.triggerEvent(new X2(f)))}setUpPreloading(){this.subscription=this.router.events.pipe(ki(n=>n instanceof pu),js(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(Ji);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){const o=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const a=s._loadedConfig;o.push(this.processRoutes(a.module,a.routes))}else s.loadChildren&&!s.canLoad?o.push(this.preloadConfig(n,s)):s.children&&o.push(this.processRoutes(n,s.children));return L(o).pipe(be(),w(s=>{}))}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Rt(i._loadedConfig):this.loader.load(n.injector,i)).pipe(pe(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return r.\u0275fac=function(n){return new(n||r)(De(tr),De(rf),De(xs),De(en),De(WR))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),Jy=(()=>{class r{constructor(n,i,o={}){this.router=n,this.viewportScroller=i,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Ny?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof pu&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Z2&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.router.triggerEvent(new Z2(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(De(tr),De(_T),De(void 0))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();const Xs=new ut("ROUTER_CONFIGURATION"),zR=new ut("ROUTER_FORROOT_GUARD"),L9=[Ql,{provide:Py,useClass:lR},{provide:tr,useFactory:function(r,t,n,i,o,s,a,c={},l,f){const b=new tr(null,r,t,n,i,o,s,nR(a));return l&&(b.urlHandlingStrategy=l),f&&(b.routeReuseStrategy=f),function(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy)}(c,b),c.enableTracing&&b.events.subscribe(O=>{var j,z;null===(j=console.group)||void 0===j||j.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(z=console.groupEnd)||void 0===z||z.call(console)}),b},deps:[Py,Rc,Ql,en,rf,xs,Ky,Xs,[class{},new Mr],[class{},new Mr]]},Rc,{provide:Ac,useFactory:function(r){return r.routerState.root},deps:[tr]},{provide:rf,useClass:n5},GR,qR,class{preload(t,n){return n().pipe(ss(()=>Rt(null)))}},{provide:Xs,useValue:{enableTracing:!1}}];function F9(){return new xm("Router",tr)}let Oc=(()=>{class r{constructor(n,i){}static forRoot(n,i){return{ngModule:r,providers:[L9,$R(n),{provide:zR,useFactory:j9,deps:[[tr,new Mr,new Wo]]},{provide:Xs,useValue:i||{}},{provide:yc,useFactory:U9,deps:[Us,[new ka(Xm),new Mr],Xs]},{provide:Jy,useFactory:V9,deps:[tr,_T,Xs]},{provide:WR,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:qR},{provide:xm,multi:!0,useFactory:F9},[Qy,{provide:Gl,multi:!0,useFactory:q9,deps:[Qy]},{provide:KR,useFactory:G9,deps:[Qy]},{provide:ow,multi:!0,useExisting:KR}]]}}static forChild(n){return{ngModule:r,providers:[$R(n)]}}}return r.\u0275fac=function(n){return new(n||r)(De(zR,8),De(tr,8))},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({}),r})();function V9(r,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Jy(r,t,n)}function U9(r,t,n={}){return n.useHash?new SV(r,t):new Kw(r,t)}function j9(r){return"guarded"}function $R(r){return[{provide:DM,multi:!0,useValue:r},{provide:Ky,multi:!0,useValue:r}]}let Qy=(()=>{class r{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new u}appInitializer(){return this.injector.get(vV,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const o=new Promise(c=>i=c),s=this.injector.get(tr),a=this.injector.get(Xs);return"disabled"===a.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===a.initialNavigation||"enabledBlocking"===a.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Rt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),o})}bootstrapListener(n){const i=this.injector.get(Xs),o=this.injector.get(GR),s=this.injector.get(Jy),a=this.injector.get(tr),c=this.injector.get(Ls);n===c.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&a.initialNavigation(),o.setUpPreloading(),s.init(),a.resetRootComponentType(c.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(n){return new(n||r)(De(en))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();function q9(r){return r.appInitializer.bind(r)}function G9(r){return r.bootstrapListener.bind(r)}const KR=new ut("Router Initializer");let Tu=(()=>{class r{handleAuthentication(){}setSession(n){}logout(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),$9=(()=>{class r{constructor(n,i){this.auth=n,this.router=i}canActivate(n,i){return new ae(o=>(this.auth.isAuthenticated()||this.router.navigate(["/login"]),o.next(this.auth.isAuthenticated()),()=>{}))}}return r.\u0275fac=function(n){return new(n||r)(De(Tu),De(tr))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),Xy=(()=>{class r{constructor(){this.actionStream=new u,this.actionQueue=[],this.isActionInProgress=!1}push(n){this.actionQueue.push(n),this.tryToRunNextAction()}continue(){this.isActionInProgress=!1,this.tryToRunNextAction()}tryToRunNextAction(){this.isActionInProgress||0===this.actionQueue.length||(this.isActionInProgress=!0,this.actionStream.next(this.actionQueue.shift()))}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();new ut("[angular-notifier] Notifier Options");const Zy=new ut("[anuglar-notifier] Notifier Config");let Dh=(()=>{class r{constructor(n,i){this.queueService=n,this.config=i}getConfig(){return this.config}show(n){this.queueService.push({payload:n,type:"SHOW"})}hide(n){this.queueService.push({payload:n,type:"HIDE"})}hideNewest(){this.queueService.push({type:"HIDE_NEWEST"})}hideOldest(){this.queueService.push({type:"HIDE_OLDEST"})}hideAll(){this.queueService.push({type:"HIDE_ALL"})}notify(n,i,o){let s={message:i,type:n};void 0!==o&&(s.id=o),this.show(s)}}return r.\u0275fac=function(n){return new(n||r)(De(Xy),De(Zy))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),ZR=(()=>{class r{constructor(n){this.notifierService=n}showSuccess(n){this.notifierService.notify("success",n)}showError(n){this.notifierService.notify("error",n)}showWarning(n){this.notifierService.notify("warning",n)}showInfo(n){this.notifierService.notify("info",n)}showDefault(n){this.notifierService.notify("default",n)}}return r.\u0275fac=function(n){return new(n||r)(De(Dh))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})(),ev=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:[$9,ZR],imports:[[Oc,HT]]}),r})();function oH(r,t){1&r&&rn(0,"div",3)}let sH=(()=>{class r{constructor(n,i){this.auth=n,this.router=i,this.loading=!0}ngAfterViewInit(){this.auth.isAuthenticated()&&this.router.navigate(["/dashboard"])}}return r.\u0275fac=function(n){return new(n||r)(Ie(Tu),Ie(tr))},r.\u0275cmp=Vn({type:r,selectors:[["login"]],decls:3,vars:1,consts:[[1,"o-page","o-page--center","account-page"],[1,"o-page__card"],["id","auth-container",4,"ngIf"],["id","auth-container"]],template:function(n,i){1&n&&(ct(0,"div",0),ct(1,"div",1),En(2,oH,1,0,"div",2),lt(),lt()),2&n&&(Lt(2),Ft("ngIf",!i.auth.isAuthenticated()))},directives:[eu],encapsulation:2}),r})();function Wn(r){return null!=r&&"false"!=`${r}`}function eI(r){return Array.isArray(r)?r:[r]}function qn(r){return null==r?"":"string"==typeof r?r:`${r}px`}function Do(r){return r instanceof jt?r.nativeElement:r}class cH extends E{constructor(t,n){super()}schedule(t,n=0){return this}}class Mh extends cH{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){if(this.closed)return this;this.state=t;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,i=0){return setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return n;clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let o,i=!1;try{this.work(t)}catch(s){i=!0,o=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),o}_unsubscribe(){const t=this.id,n=this.scheduler,i=n.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&i.splice(o,1),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null}}let tI=(()=>{class r{constructor(n,i=r.now){this.SchedulerAction=n,this.now=i}schedule(n,i=0,o){return new this.SchedulerAction(this,n).schedule(o,i)}}return r.now=()=>Date.now(),r})();class xi extends tI{constructor(t,n=tI.now){super(t,()=>xi.delegate&&xi.delegate!==this?xi.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,n=0,i){return xi.delegate&&xi.delegate!==this?xi.delegate.schedule(t,n,i):super.schedule(t,n,i)}flush(t){const{actions:n}=this;if(this.active)return void n.push(t);let i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=n.shift());if(this.active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}}const Nh=new xi(Mh);class lH{constructor(t,n){this.dueTime=t,this.scheduler=n}call(t,n){return n.subscribe(new uH(t,this.dueTime,this.scheduler))}}class uH extends S{constructor(t,n,i){super(t),this.dueTime=n,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dH,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function dH(r){r.debouncedNext()}let av,tv=(()=>{class r{create(n){return"undefined"==typeof MutationObserver?null:new MutationObserver(n)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({factory:function(){return new r},token:r,providedIn:"root"}),r})(),rI=(()=>{class r{constructor(n){this._mutationObserverFactory=n,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((n,i)=>this._cleanupObserver(i))}observe(n){const i=Do(n);return new ae(o=>{const a=this._observeElement(i).subscribe(o);return()=>{a.unsubscribe(),this._unobserveElement(i)}})}_observeElement(n){if(this._observedElements.has(n))this._observedElements.get(n).count++;else{const i=new u,o=this._mutationObserverFactory.create(s=>i.next(s));o&&o.observe(n,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(n,{observer:o,stream:i,count:1})}return this._observedElements.get(n).stream}_unobserveElement(n){this._observedElements.has(n)&&(this._observedElements.get(n).count--,this._observedElements.get(n).count||this._cleanupObserver(n))}_cleanupObserver(n){if(this._observedElements.has(n)){const{observer:i,stream:o}=this._observedElements.get(n);i&&i.disconnect(),o.complete(),this._observedElements.delete(n)}}}return r.\u0275fac=function(n){return new(n||r)(De(tv))},r.\u0275prov=$e({factory:function(){return new r(De(tv))},token:r,providedIn:"root"}),r})(),fH=(()=>{class r{constructor(n,i,o){this._contentObserver=n,this._elementRef=i,this._ngZone=o,this.event=new Kt,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(n){this._disabled=Wn(n),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(n){this._debounce=function(r,t=0){return function(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):t}(n),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const n=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?n.pipe(function(r,t=Nh){return n=>n.lift(new lH(r,t))}(this.debounce)):n).subscribe(this.event)})}_unsubscribe(){var n;null===(n=this._currentSubscription)||void 0===n||n.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(Ie(rI),Ie(jt),Ie(wt))},r.\u0275dir=Ye({type:r,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),r})(),iI=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:[tv]}),r})();class AH{constructor(t){this.total=t}call(t,n){return n.subscribe(new RH(t,this.total))}}class RH extends S{constructor(t,n){super(t),this.total=n,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}class IH{constructor(t,n){this.compare=t,this.keySelector=n}call(t,n){return n.subscribe(new OH(t,this.compare,this.keySelector))}}class OH extends S{constructor(t,n,i){super(t),this.keySelector=i,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}compare(t,n){return t===n}_next(t){let n;try{const{keySelector:o}=this;n=o?o(t):t}catch(o){return this.destination.error(o)}let i=!1;if(this.hasKey)try{const{compare:o}=this;i=o(this.key,n)}catch(o){return this.destination.error(o)}else this.hasKey=!0;i||(this.key=n,this.destination.next(t))}}function ar(r){return t=>t.lift(new DH(r))}class DH{constructor(t){this.notifier=t}call(t,n){const i=new MH(t),o=ft(this.notifier,new xe(i));return o&&!i.seenValue?(i.add(o),n.subscribe(i)):i}}class MH extends ze{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}try{av="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(r){av=!1}let Dc,_n=(()=>{class r{constructor(n){this._platformId=n,this.isBrowser=this._platformId?function(r){return r===mT}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!av)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(n){return new(n||r)(De(gc))},r.\u0275prov=$e({factory:function(){return new r(De(gc))},token:r,providedIn:"root"}),r})(),Ru=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({}),r})();const cI=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function lI(){if(Dc)return Dc;if("object"!=typeof document||!document)return Dc=new Set(cI),Dc;let r=document.createElement("input");return Dc=new Set(cI.filter(t=>(r.setAttribute("type",t),r.type===t))),Dc}let Iu,Zs,cv,Li;function kh(r){return function(){if(null==Iu&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Iu=!0}))}finally{Iu=Iu||!1}return Iu}()?r:!!r.capture}function uI(){if(null==Zs){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Zs=!1,Zs;if("scrollBehavior"in document.documentElement.style)Zs=!0;else{const r=Element.prototype.scrollTo;Zs=!!r&&!/\{\s*\[native code\]\s*\}/.test(r.toString())}}return Zs}function ea(r){return r.composedPath?r.composedPath()[0]:r.target}function lv(){return void 0!==Li.__karma__&&!!Li.__karma__||void 0!==Li.jasmine&&!!Li.jasmine||void 0!==Li.jest&&!!Li.jest||void 0!==Li.Mocha&&!!Li.Mocha}function mI(r){return 0===r.offsetX&&0===r.offsetY}function _I(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}Li="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},"undefined"!=typeof Element&&Element;const yI=new ut("cdk-input-modality-detector-options"),nW={ignoreKeys:[18,17,224,91,16]},Mc=kh({passive:!0,capture:!0});let EI=(()=>{class r{constructor(n,i,o,s){this._platform=n,this._mostRecentTarget=null,this._modality=new di(null),this._lastTouchMs=0,this._onKeydown=a=>{var c,l;(null===(l=null===(c=this._options)||void 0===c?void 0:c.ignoreKeys)||void 0===l?void 0:l.some(f=>f===a.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ea(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(mI(a)?"keyboard":"mouse"),this._mostRecentTarget=ea(a))},this._onTouchstart=a=>{_I(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ea(a))},this._options=Object.assign(Object.assign({},nW),s),this.modalityDetected=this._modality.pipe(t=>t.lift(new AH(1))),this.modalityChanged=this.modalityDetected.pipe(function(r,t){return n=>n.lift(new IH(r,t))}()),n.isBrowser&&i.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Mc),o.addEventListener("mousedown",this._onMousedown,Mc),o.addEventListener("touchstart",this._onTouchstart,Mc)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Mc),document.removeEventListener("mousedown",this._onMousedown,Mc),document.removeEventListener("touchstart",this._onTouchstart,Mc))}}return r.\u0275fac=function(n){return new(n||r)(De(_n),De(wt),De(bt),De(yI,8))},r.\u0275prov=$e({factory:function(){return new r(De(_n),De(wt),De(bt),De(yI,8))},token:r,providedIn:"root"}),r})();const wI=new ut("cdk-focus-monitor-default-options"),xh=kh({passive:!0,capture:!0});let uv=(()=>{class r{constructor(n,i,o,s,a){this._ngZone=n,this._platform=i,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new u,this._rootNodeFocusAndBlurListener=c=>{const l=ea(c),f="focus"===c.type?this._onFocus:this._onBlur;for(let b=l;b;b=b.parentElement)f.call(this,c,b)},this._document=s,this._detectionMode=(null==a?void 0:a.detectionMode)||0}monitor(n,i=!1){const o=Do(n);if(!this._platform.isBrowser||1!==o.nodeType)return Rt(null);const s=function(r){if(function(){if(null==cv){const r="undefined"!=typeof document?document.head:null;cv=!(!r||!r.createShadowRoot&&!r.attachShadow)}return cv}()){const t=r.getRootNode?r.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return i&&(a.checkChildren=!0),a.subject;const c={checkChildren:i,subject:new u,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(n){const i=Do(n),o=this._elementInfo.get(i);o&&(o.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(o))}focusVia(n,i,o){const s=Do(n);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((n,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(n,i,o){o?n.classList.add(i):n.classList.remove(i)}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(n){return 1===this._detectionMode||!!(null==n?void 0:n.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(n,i){this._toggleClass(n,"cdk-focused",!!i),this._toggleClass(n,"cdk-touch-focused","touch"===i),this._toggleClass(n,"cdk-keyboard-focused","keyboard"===i),this._toggleClass(n,"cdk-mouse-focused","mouse"===i),this._toggleClass(n,"cdk-program-focused","program"===i)}_setOrigin(n,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=n,this._originFromTouchInteraction="touch"===n&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(n,i){const o=this._elementInfo.get(i),s=ea(n);!o||!o.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),o)}_onBlur(n,i){const o=this._elementInfo.get(i);!o||o.checkChildren&&n.relatedTarget instanceof Node&&i.contains(n.relatedTarget)||(this._setClasses(i),this._emitOrigin(o.subject,null))}_emitOrigin(n,i){this._ngZone.run(()=>n.next(i))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;const i=n.rootNode,o=this._rootNodeFocusListenerCount.get(i)||0;o||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,xh),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,xh)}),this._rootNodeFocusListenerCount.set(i,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ar(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(n){const i=n.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const o=this._rootNodeFocusListenerCount.get(i);o>1?this._rootNodeFocusListenerCount.set(i,o-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,xh),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,xh),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,i,o){this._setClasses(n,i),this._emitOrigin(o.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(n){const i=[];return this._elementInfo.forEach((o,s)=>{(s===n||o.checkChildren&&s.contains(n))&&i.push([s,o])}),i}}return r.\u0275fac=function(n){return new(n||r)(De(wt),De(_n),De(EI),De(bt,8),De(wI,8))},r.\u0275prov=$e({factory:function(){return new r(De(wt),De(_n),De(EI),De(bt,8),De(wI,8))},token:r,providedIn:"root"}),r})();const TI="cdk-high-contrast-black-on-white",AI="cdk-high-contrast-white-on-black",dv="cdk-high-contrast-active";let RI=(()=>{class r{constructor(n,i){this._platform=n,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);const i=this._document.defaultView||window,o=i&&i.getComputedStyle?i.getComputedStyle(n):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(n),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const n=this._document.body.classList;n.remove(dv),n.remove(TI),n.remove(AI),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(n.add(dv),n.add(TI)):2===i&&(n.add(dv),n.add(AI))}}}return r.\u0275fac=function(n){return new(n||r)(De(_n),De(bt))},r.\u0275prov=$e({factory:function(){return new r(De(_n),De(bt))},token:r,providedIn:"root"}),r})();const II=new ut("cdk-dir-doc",{providedIn:"root",factory:function(){return tE(bt)}});let ta=(()=>{class r{constructor(n){if(this.value="ltr",this.change=new Kt,n){const o=n.documentElement?n.documentElement.dir:null,s=(n.body?n.body.dir:null)||o;this.value="ltr"===s||"rtl"===s?s:"ltr"}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(n){return new(n||r)(De(II,8))},r.\u0275prov=$e({factory:function(){return new r(De(II,8))},token:r,providedIn:"root"}),r})(),Du=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({}),r})();const OI=new $o("12.2.12"),DI=new $o("12.2.12"),dW=new ut("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let na,zr=(()=>{class r{constructor(n,i,o){this._hasDoneGlobalChecks=!1,this._document=o,n._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return!(!Pm()||lv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[n])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const n=this._document.createElement("div");n.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(n);const i=getComputedStyle(n);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(n)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&DI.full!==OI.full&&console.warn("The Angular Material version ("+DI.full+") does not match the Angular CDK version ("+OI.full+").\nPlease ensure the versions of these two packages exactly match.")}}return r.\u0275fac=function(n){return new(n||r)(De(RI),De(dW,8),De(bt))},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[[Du],Du]}),r})();function fv(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Wn(t)}}}function MI(r,t){return class extends r{constructor(...n){super(...n),this.defaultColor=t,this.color=t}get color(){return this._color}set color(n){const i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function NI(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Wn(t)}}}function kI(r){return class extends r{constructor(...t){super(...t),this.stateChanges=new u,this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}try{na="undefined"!=typeof Intl}catch(r){na=!1}let hv=(()=>{class r{isErrorState(n,i){return!!(n&&n.invalid&&(n.touched||i&&i.submitted))}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=$e({factory:function(){return new r},token:r,providedIn:"root"}),r})();class wW{constructor(t,n,i){this._renderer=t,this.element=n,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const xI={enterDuration:225,exitDuration:150},pv=kh({passive:!0}),LI=["mousedown","touchstart"],FI=["mouseup","mouseleave","touchend","touchcancel"];class AW{constructor(t,n,i,o){this._target=t,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=Do(i))}fadeInRipple(t,n,i={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},xI),i.animation);i.centered&&(t=o.left+o.width/2,n=o.top+o.height/2);const a=i.radius||function(r,t,n){const i=Math.max(Math.abs(r-n.left),Math.abs(r-n.right)),o=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+o*o)}(t,n,o),c=t-o.left,l=n-o.top,f=s.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=c-a+"px",b.style.top=l-a+"px",b.style.height=2*a+"px",b.style.width=2*a+"px",null!=i.color&&(b.style.backgroundColor=i.color),b.style.transitionDuration=`${f}ms`,this._containerElement.appendChild(b),function(r){window.getComputedStyle(r).getPropertyValue("opacity")}(b),b.style.transform="scale(1)";const O=new wW(this,b,i);return O.state=0,this._activeRipples.add(O),i.persistent||(this._mostRecentTransientRipple=O),this._runTimeoutOutsideZone(()=>{const j=O===this._mostRecentTransientRipple;O.state=1,!i.persistent&&(!j||!this._isPointerDown)&&O.fadeOut()},f),O}fadeOutRipple(t){const n=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!n)return;const i=t.element,o=Object.assign(Object.assign({},xI),t.config.animation);i.style.transitionDuration=`${o.exitDuration}ms`,i.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,i.parentNode.removeChild(i)},o.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const n=Do(t);!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,this._registerEvents(LI))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(FI),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const n=mI(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!_I(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=t.changedTouches;for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,n=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,n))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(n=>{this._triggerElement.addEventListener(n,this,pv)})})}_removeTriggerEvents(){this._triggerElement&&(LI.forEach(t=>{this._triggerElement.removeEventListener(t,this,pv)}),this._pointerUpEventsRegistered&&FI.forEach(t=>{this._triggerElement.removeEventListener(t,this,pv)}))}}const OW=new ut("mat-ripple-global-options");let Fh=(()=>{class r{constructor(n,i,o,s,a){this._elementRef=n,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new AW(this,i,n,o)}get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,i=0,o){return"number"==typeof n?this._rippleRenderer.fadeInRipple(n,i,Object.assign(Object.assign({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),n))}}return r.\u0275fac=function(n){return new(n||r)(Ie(jt),Ie(wt),Ie(_n),Ie(OW,8),Ie($s,8))},r.\u0275dir=Ye({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,i){2&n&&Jn("mat-ripple-unbounded",i.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),r})(),VI=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[[zr,Ru],zr]}),r})(),MW=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[[zr]]}),r})(),BI=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[[VI,Jo,zr,MW]]}),r})();function Nu(r,t,n,i){return D(n)&&(i=n,n=void 0),i?Nu(r,t,n).pipe(w(o=>v(o)?i(...o):i(o))):new ae(o=>{HI(r,t,function(a){o.next(arguments.length>1?Array.prototype.slice.call(arguments):a)},o,n)})}function HI(r,t,n,i,o){let s;if(function(r){return r&&"function"==typeof r.addEventListener&&"function"==typeof r.removeEventListener}(r)){const a=r;r.addEventListener(t,n,o),s=()=>a.removeEventListener(t,n,o)}else if(function(r){return r&&"function"==typeof r.on&&"function"==typeof r.off}(r)){const a=r;r.on(t,n),s=()=>a.off(t,n)}else if(function(r){return r&&"function"==typeof r.addListener&&"function"==typeof r.removeListener}(r)){const a=r;r.addListener(t,n),s=()=>a.removeListener(t,n)}else{if(!r||!r.length)throw new TypeError("Invalid event target");for(let a=0,c=r.length;a<c;a++)HI(r[a],t,n,i,o)}i.add(s)}const HW=["underline"],WW=["connectionContainer"],qW=["inputContainer"],GW=["label"];function zW(r,t){1&r&&(Ld(0),ct(1,"div",14),rn(2,"div",15),rn(3,"div",16),rn(4,"div",17),lt(),ct(5,"div",18),rn(6,"div",15),rn(7,"div",16),rn(8,"div",17),lt(),Fd())}function $W(r,t){1&r&&(ct(0,"div",19),or(1,1),lt())}function KW(r,t){if(1&r&&(Ld(0),or(1,2),ct(2,"span"),bn(3),lt(),Fd()),2&r){const n=xn(2);Lt(3),Ds(n._control.placeholder)}}function YW(r,t){1&r&&or(0,3,["*ngSwitchCase","true"])}function JW(r,t){1&r&&(ct(0,"span",23),bn(1," *"),lt())}function QW(r,t){if(1&r){const n=We();ct(0,"label",20,21),on("cdkObserveContent",function(){return function(r){Ot.lFrame.contextLView=r}(n),xn().updateOutlineGap()}),En(2,KW,4,1,"ng-container",12),En(3,YW,1,0,"ng-content",12),En(4,JW,2,0,"span",22),lt()}if(2&r){const n=xn();Jn("mat-empty",n._control.empty&&!n._shouldAlwaysFloat())("mat-form-field-empty",n._control.empty&&!n._shouldAlwaysFloat())("mat-accent","accent"==n.color)("mat-warn","warn"==n.color),Ft("cdkObserveContentDisabled","outline"!=n.appearance)("id",n._labelId)("ngSwitch",n._hasLabel()),Tn("for",n._control.id)("aria-owns",n._control.id),Lt(2),Ft("ngSwitchCase",!1),Lt(1),Ft("ngSwitchCase",!0),Lt(1),Ft("ngIf",!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)}}function XW(r,t){1&r&&(ct(0,"div",24),or(1,4),lt())}function ZW(r,t){if(1&r&&(ct(0,"div",25,26),rn(2,"span",27),lt()),2&r){const n=xn();Lt(2),Jn("mat-accent","accent"==n.color)("mat-warn","warn"==n.color)}}function eq(r,t){1&r&&(ct(0,"div"),or(1,5),lt()),2&r&&Ft("@transitionMessages",xn()._subscriptAnimationState)}function tq(r,t){if(1&r&&(ct(0,"div",31),bn(1),lt()),2&r){const n=xn(2);Ft("id",n._hintLabelId),Lt(1),Ds(n.hintLabel)}}function nq(r,t){if(1&r&&(ct(0,"div",28),En(1,tq,2,2,"div",29),or(2,6),rn(3,"div",30),or(4,7),lt()),2&r){const n=xn();Ft("@transitionMessages",n._subscriptAnimationState),Lt(1),Ft("ngIf",n.hintLabel)}}const rq=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],iq=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],WI=new ut("MatError"),sq={transitionMessages:J_("transitionMessages",[Hf("enter",ns({opacity:1,transform:"translateY(0%)"})),Wf("void => enter",[ns({opacity:0,transform:"translateY(-5px)"}),Q_("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Vh=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=Ye({type:r}),r})();const qI=new ut("MatHint");let _v=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=Ye({type:r,selectors:[["mat-label"]]}),r})(),cq=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=Ye({type:r,selectors:[["mat-placeholder"]]}),r})();const GI=new ut("MatPrefix"),zI=new ut("MatSuffix");let $I=0;const uq=MI(class{constructor(r){this._elementRef=r}},"primary"),dq=new ut("MAT_FORM_FIELD_DEFAULT_OPTIONS"),yv=new ut("MatFormField");let fq=(()=>{class r extends uq{constructor(n,i,o,s,a,c,l,f){super(n),this._changeDetectorRef=i,this._dir=s,this._defaults=a,this._platform=c,this._ngZone=l,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new u,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+$I++,this._labelId="mat-form-field-label-"+$I++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==f,this.appearance=a&&a.appearance?a.appearance:"legacy",this._hideRequiredMarker=!(!a||null==a.hideRequiredMarker)&&a.hideRequiredMarker}get appearance(){return this._appearance}set appearance(n){const i=this._appearance;this._appearance=n||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==n&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=Wn(n)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(n){this._explicitFormFieldControl=n}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const n=this._control;n.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${n.controlType}`),n.stateChanges.pipe(os(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),n.ngControl&&n.ngControl.valueChanges&&n.ngControl.valueChanges.pipe(ar(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ar(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Z(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(os(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(os(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(ar(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(n){const i=this._control?this._control.ngControl:null;return i&&i[n]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Nu(this._label.nativeElement,"transitionend").pipe(Ao(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&n.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,o=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?n.push(i.id):this._hintLabel&&n.push(this._hintLabelId),o&&n.push(o.id)}else this._errorChildren&&n.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(n)}}_validateControlChild(){}updateOutlineGap(){const n=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&n&&n.children.length&&n.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let i=0,o=0;const s=this._connectionContainerRef.nativeElement,a=s.querySelectorAll(".mat-form-field-outline-start"),c=s.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const l=s.getBoundingClientRect();if(0===l.width&&0===l.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const f=this._getStartEnd(l),b=n.children,O=this._getStartEnd(b[0].getBoundingClientRect());let j=0;for(let z=0;z<b.length;z++)j+=b[z].offsetWidth;i=Math.abs(O-f)-5,o=j>0?.75*j+10:0}for(let l=0;l<a.length;l++)a[l].style.width=`${i}px`;for(let l=0;l<c.length;l++)c[l].style.width=`${o}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(n){return this._dir&&"rtl"===this._dir.value?n.right:n.left}_isAttachedToDOM(){const n=this._elementRef.nativeElement;if(n.getRootNode){const i=n.getRootNode();return i&&i!==n}return document.documentElement.contains(n)}}return r.\u0275fac=function(n){return new(n||r)(Ie(jt),Ie(vo),Ie(jt),Ie(ta,8),Ie(dq,8),Ie(_n),Ie(wt),Ie($s,8))},r.\u0275cmp=Vn({type:r,selectors:[["mat-form-field"]],contentQueries:function(n,i,o){if(1&n&&(Tr(o,Vh,5),Tr(o,Vh,7),Tr(o,_v,5),Tr(o,_v,7),Tr(o,cq,5),Tr(o,WI,5),Tr(o,qI,5),Tr(o,GI,5),Tr(o,zI,5)),2&n){let s;Sn(s=Cn())&&(i._controlNonStatic=s.first),Sn(s=Cn())&&(i._controlStatic=s.first),Sn(s=Cn())&&(i._labelChildNonStatic=s.first),Sn(s=Cn())&&(i._labelChildStatic=s.first),Sn(s=Cn())&&(i._placeholderChild=s.first),Sn(s=Cn())&&(i._errorChildren=s),Sn(s=Cn())&&(i._hintChildren=s),Sn(s=Cn())&&(i._prefixChildren=s),Sn(s=Cn())&&(i._suffixChildren=s)}},viewQuery:function(n,i){if(1&n&&(Qi(HW,5),Qi(WW,7),Qi(qW,5),Qi(GW,5)),2&n){let o;Sn(o=Cn())&&(i.underlineRef=o.first),Sn(o=Cn())&&(i._connectionContainerRef=o.first),Sn(o=Cn())&&(i._inputContainerRef=o.first),Sn(o=Cn())&&(i._label=o.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(n,i){2&n&&Jn("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Wt([{provide:yv,useExisting:r}]),Ht],ngContentSelectors:iq,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(n,i){1&n&&(zo(rq),ct(0,"div",0),ct(1,"div",1,2),on("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),En(3,zW,9,0,"ng-container",3),En(4,$W,2,0,"div",4),ct(5,"div",5,6),or(7),ct(8,"span",7),En(9,QW,5,16,"label",8),lt(),lt(),En(10,XW,2,0,"div",9),lt(),En(11,ZW,3,4,"div",10),ct(12,"div",11),En(13,eq,2,1,"div",12),En(14,nq,5,2,"div",13),lt(),lt()),2&n&&(Lt(3),Ft("ngIf","outline"==i.appearance),Lt(1),Ft("ngIf",i._prefixChildren.length),Lt(5),Ft("ngIf",i._hasFloatingLabel()),Lt(1),Ft("ngIf",i._suffixChildren.length),Lt(1),Ft("ngIf","outline"!=i.appearance),Lt(1),Ft("ngSwitch",i._getDisplayedMessages()),Lt(1),Ft("ngSwitchCase","error"),Lt(1),Ft("ngSwitchCase","hint"))},directives:[eu,tu,c_,fH],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[sq.transitionMessages]},changeDetection:0}),r})(),Uh=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[[Jo,zr,iI],zr]}),r})();class pq{constructor(t){this.durationSelector=t}call(t,n){return n.subscribe(new gq(t,this.durationSelector))}}class gq extends ze{constructor(t,n){super(t),this.durationSelector=n,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:o}=this;n=o(t)}catch(o){return this.destination.error(o)}const i=ft(n,new xe(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:n,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),n&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function YI(r){return!v(r)&&r-parseFloat(r)+1>=0}function _q(r){const{index:t,period:n,subscriber:i}=r;if(i.next(t),!i.closed){if(-1===n)return i.complete();r.index=t+1,this.schedule(r,n)}}function jh(r,t=Nh){return function(r){return function(n){return n.lift(new pq(r))}}(()=>function(r=0,t,n){let i=-1;return YI(t)?i=Number(t)<1?1:Number(t):m(t)&&(n=t),m(n)||(n=Nh),new ae(o=>{const s=YI(r)?r:+r-n.now();return n.schedule(_q,s,{index:0,period:i,subscriber:o})})}(r,t))}const JI=kh({passive:!0});let QI=(()=>{class r{constructor(n,i){this._platform=n,this._ngZone=i,this._monitoredElements=new Map}monitor(n){if(!this._platform.isBrowser)return Ks;const i=Do(n),o=this._monitoredElements.get(i);if(o)return o.subject;const s=new u,a="cdk-text-field-autofilled",c=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(a)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(a)&&(i.classList.remove(a),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(a),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",c,JI),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",c,JI)}}),s}stopMonitoring(n){const i=Do(n),o=this._monitoredElements.get(i);o&&(o.unlisten(),o.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((n,i)=>this.stopMonitoring(i))}}return r.\u0275fac=function(n){return new(n||r)(De(_n),De(wt))},r.\u0275prov=$e({factory:function(){return new r(De(_n),De(wt))},token:r,providedIn:"root"}),r})(),XI=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[[Ru]]}),r})();const vq=new ut("MAT_INPUT_VALUE_ACCESSOR"),Eq=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let bq=0;const Sq=kI(class{constructor(r,t,n,i){this._defaultErrorStateMatcher=r,this._parentForm=t,this._parentFormGroup=n,this.ngControl=i}});let Cq=(()=>{class r extends Sq{constructor(n,i,o,s,a,c,l,f,b,O){super(c,s,a,o),this._elementRef=n,this._platform=i,this._autofillMonitor=f,this._formField=O,this._uid="mat-input-"+bq++,this.focused=!1,this.stateChanges=new u,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter($=>lI().has($));const j=this._elementRef.nativeElement,z=j.nodeName.toLowerCase();this._inputValueAccessor=l||j,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&b.runOutsideAngular(()=>{n.nativeElement.addEventListener("keyup",$=>{const Q=$.target;!Q.value&&0===Q.selectionStart&&0===Q.selectionEnd&&(Q.setSelectionRange(1,1),Q.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===z,this._isTextarea="textarea"===z,this._isInFormField=!!O,this._isNativeSelect&&(this.controlType=j.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(n){this._disabled=Wn(n),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(n){this._id=n||this._uid}get required(){return this._required}set required(n){this._required=Wn(n)}get type(){return this._type}set type(n){this._type=n||"text",this._validateType(),!this._isTextarea&&lI().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(n){n!==this.value&&(this._inputValueAccessor.value=n,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(n){this._readonly=Wn(n)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(n=>{this.autofilled=n.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(n){this._elementRef.nativeElement.focus(n)}_focusChanged(n){n!==this.focused&&(this.focused=n,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var n,i;const o=(null===(i=null===(n=this._formField)||void 0===n?void 0:n._hideControlPlaceholder)||void 0===i?void 0:i.call(n))?null:this.placeholder;if(o!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=o,o?s.setAttribute("placeholder",o):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const n=this._elementRef.nativeElement.value;this._previousNativeValue!==n&&(this._previousNativeValue=n,this.stateChanges.next())}_validateType(){Eq.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let n=this._elementRef.nativeElement.validity;return n&&n.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const n=this._elementRef.nativeElement,i=n.options[0];return this.focused||n.multiple||!this.empty||!!(n.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(n){n.length?this._elementRef.nativeElement.setAttribute("aria-describedby",n.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const n=this._elementRef.nativeElement;return this._isNativeSelect&&(n.multiple||n.size>1)}}return r.\u0275fac=function(n){return new(n||r)(Ie(jt),Ie(_n),Ie(eo,10),Ie(uu,8),Ie(du,8),Ie(hv),Ie(vq,10),Ie(QI),Ie(wt),Ie(yv,8))},r.\u0275dir=Ye({type:r,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(n,i){1&n&&on("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&n&&(Il("disabled",i.disabled)("required",i.required),Tn("id",i.id)("data-placeholder",i.placeholder)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),Jn("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[Wt([{provide:Vh,useExisting:r}]),Ht,Pn]}),r})(),wq=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:[hv],imports:[[XI,Uh,zr],XI,Uh]}),r})();const ZI=["mat-button",""],eO=["*"],Aq=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Rq=MI(fv(NI(class{constructor(r){this._elementRef=r}})));let nO=(()=>{class r extends Rq{constructor(n,i,o){super(n),this._focusMonitor=i,this._animationMode=o,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of Aq)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);n.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(n,i){n?this._focusMonitor.focusVia(this._getHostElement(),n,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...n){return n.some(i=>this._getHostElement().hasAttribute(i))}}return r.\u0275fac=function(n){return new(n||r)(Ie(jt),Ie(uv),Ie($s,8))},r.\u0275cmp=Vn({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(n,i){if(1&n&&Qi(Fh,5),2&n){let o;Sn(o=Cn())&&(i.ripple=o.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(n,i){2&n&&(Tn("disabled",i.disabled||null),Jn("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ht],attrs:ZI,ngContentSelectors:eO,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(n,i){1&n&&(zo(),ct(0,"span",0),or(1),lt(),rn(2,"span",1),rn(3,"span",2)),2&n&&(Lt(2),Jn("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Ft("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Fh],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),r})(),Iq=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[[VI,zr],zr]}),r})();const Oq=[{path:"login",component:sH,pathMatch:"full"},{path:"callback",component:(()=>{class r{constructor(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=Vn({type:r,selectors:[["callback"]],decls:4,vars:0,consts:[[1,"page-loader"],["src","assets/img/heart.png","alt","",1,"loader-heart"],[1,"circle-loader"],[1,"mask"]],template:function(n,i){1&n&&(ct(0,"div",0),rn(1,"img",1),rn(2,"div",2),lt(),rn(3,"div",3))},encapsulation:2}),r})()},{path:"",component:(()=>{class r{constructor(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=Vn({type:r,selectors:[["app-main-layout"]],decls:3,vars:0,consts:[[1,"page","top-nav","side-bar"],[1,"page-content"]],template:function(n,i){1&n&&(ct(0,"div",0),ct(1,"main",1),rn(2,"router-outlet"),lt(),lt())},directives:[wu],encapsulation:2}),r})(),children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=Vn({type:r,selectors:[["app-dashboard"]],decls:4,vars:0,consts:[["routerLink","/call"]],template:function(n,i){1&n&&(ct(0,"h1"),bn(1,"Welcome To ZeemoChat!"),lt(),ct(2,"button",0),bn(3,"Start Video Call"),lt())},directives:[Rh],styles:[""]}),r})()},{path:"call",component:(()=>{class r{constructor(n){this.agoraService=n,this.appId=new Hs(ch_agora?ch_agora.appId:""),this.channel=new Hs("123"),this.isHost=new Hs(!1),this.remoteCalls=[],this.connected=!1,this.published=!1,this.uid=Math.floor(100*Math.random()),this.client=this.agoraService.createClient({mode:"rtc",codec:"h264"}),this.assignClientHandlers()}ngOnInit(){this.client.init(this.appId.value,()=>console.log("Initialized successfully"),()=>console.log("Could not initialize"))}join(){this.localStream=this.agoraService.createStream({streamID:this.uid,audio:!0,video:!0,screen:!1}),this.assignLocalStreamHandlers(),this.init(),this.client.join(null,this.channel.value,this.uid)}publish(){this.client.publish(this.localStream,n=>console.log("Publish local stream error: "+n))}unpublish(){this.client.unpublish(this.localStream,n=>console.error(n)),this.published=!1}leave(){this.connected?this.client.leave(()=>{console.log("Left the channel successfully"),this.connected=!1,this.published=!1,this.remoteCalls=[]},n=>{console.log("Leave channel failed")}):this.agoraService.AgoraRTC.Logger.warning("Local client is not connected to channel.")}init(){this.localStream.init(()=>{console.log("getUserMedia successfully"),this.localStream.play("agora_local"),this.connected=!0},n=>console.log("getUserMedia failed",n))}assignLocalStreamHandlers(){this.localStream.on("accessAllowed",()=>{console.log("accessAllowed")}),this.localStream.on("accessDenied",()=>{console.log("accessDenied")})}assignClientHandlers(){this.client.on("stream-published",n=>{this.published=!0,console.log("Publish local stream successfully")}),this.client.on("error",n=>{console.log("Got error msg:",n.reason),"DYNAMIC_KEY_TIMEOUT"===n.reason&&this.client.renewChannelKey("",()=>console.log("Renewed the channel key successfully."),i=>console.error("Renew channel key failed: ",i))}),this.client.on("stream-added",n=>{this.client.subscribe(n.stream,{audio:!0,video:!0},o=>{console.log("Subscribe stream failed",o)})}),this.client.on("stream-subscribed",n=>{const i=n.stream,o=this.getRemoteId(i);this.remoteCalls.length||(this.remoteCalls.push(o),setTimeout(()=>i.play(o),1e3))}),this.client.on("stream-removed",n=>{const i=n.stream;i&&(i.stop(),this.remoteCalls=[],console.log(`Remote stream is removed ${i.getId()}`))}),this.client.on("peer-leave",n=>{const i=n.stream;i&&(i.stop(),this.remoteCalls=this.remoteCalls.filter(o=>o!==`${this.getRemoteId(i)}`),console.log(`${n.uid} left from this channel`))})}getRemoteId(n){return`agora_remote-${n.getId()}`}}return r.\u0275fac=function(n){return new(n||r)(Ie(Gr))},r.\u0275cmp=Vn({type:r,selectors:[["app-call"]],decls:42,vars:9,consts:[[1,"container"],[1,"row"],["appearance","standard",1,"col-6"],["matInput","",3,"formControl"],[1,"col-6"],[1,"row","h-100"],[1,"col-12"],["mat-button","","color","primary",3,"click"],["mat-button","","color","accent",3,"click"],[1,"row","pt-3"],[1,"col"],["id","agora_local",1,"local"],[1,"remote",3,"id"]],template:function(n,i){1&n&&(rn(0,"router-outlet"),ct(1,"section",0),ct(2,"article",1),ct(3,"mat-form-field",2),ct(4,"mat-label"),bn(5,"App Id"),lt(),rn(6,"input",3),lt(),ct(7,"mat-form-field",2),ct(8,"mat-label"),bn(9,"Channel"),lt(),rn(10,"input",3),lt(),ct(11,"div",4),ct(12,"div",5),ct(13,"div",6),ct(14,"button",7),on("click",function(){return i.join()}),bn(15," Join Channel "),lt(),ct(16,"button",7),on("click",function(){return i.publish()}),bn(17," Publish Local Stream "),lt(),ct(18,"button",7),on("click",function(){return i.unpublish()}),bn(19," Unpublish Local Stream "),lt(),ct(20,"button",8),on("click",function(){return i.leave()}),bn(21,"Leave"),lt(),lt(),ct(22,"div",6),bn(23),lt(),lt(),lt(),ct(24,"div",4),ct(25,"div",1),ct(26,"h2",6),bn(27),lt(),ct(28,"h2",6),bn(29),lt(),lt(),lt(),ct(30,"div",6),bn(31),function(r,t){const n=Xt();let i;const o=r+20;n.firstCreatePass?(i=function(r,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(r===i.name)return i}throw new gs("302",`The pipe '${r}' could not be found!`)}(t,n.pipeRegistry),n.data[o]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(o,i.onDestroy)):i=n.data[o];const s=i.factory||(i.factory=Es(i.type)),a=Lo(Ie);try{const c=ld(!1),l=s();ld(c),function(r,t,n,i){n>=r.data.length&&(r.data[n]=null,r.blueprint[n]=null),t[n]=i}(n,We(),o,l)}finally{Lo(a)}}(32,"json"),lt(),lt(),ct(33,"article",9),ct(34,"div",10),ct(35,"h2"),bn(36,"Local"),lt(),rn(37,"div",11),lt(),ct(38,"div",10),ct(39,"h2"),bn(40,"Remote"),lt(),rn(41,"div",12),lt(),lt(),lt()),2&n&&(Lt(6),Ft("formControl",i.appId),Lt(4),Ft("formControl",i.channel),Lt(13),_o("User id: ",i.uid,""),Lt(4),_o("Connected: ",i.connected,""),Lt(2),_o("Published: ",i.published,""),Lt(2),_o(" ",PC(32,7,i.remoteCalls)," "),Lt(10),Ft("id",i.remoteCalls[0]))},directives:[wu,fq,_v,Cq,Nf,pA,q_,nO],pipes:[hT],styles:[".local[_ngcontent-%COMP%]{background:#f1f1f2}.remote[_ngcontent-%COMP%]{background:rgba(51,51,51,.5)}.local[_ngcontent-%COMP%], .remote[_ngcontent-%COMP%]{height:50vw}"]}),r})()}]}];let Dq=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[[Oc.forRoot(Oq)],Oc]}),r})(),Mq=(()=>{class r{constructor(){this.title="ZeemoChat-UI"}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=Vn({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(n,i){1&n&&rn(0,"router-outlet")},directives:[wu],styles:[""]}),r})();var rO="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Nc(r,t){return r(t={exports:{}},t.exports),t.exports}var Mn=Nc(function(r){var t,n;t=rO,n=function(){function i(o){var s=[];if(0===o.length)return"";if("string"!=typeof o[0])throw new TypeError("Url must be a string. Received "+o[0]);if(o[0].match(/^[^/:]+:\/*$/)&&o.length>1){var a=o.shift();o[0]=a+o[0]}o[0]=o[0].match(/^file:\/\/\//)?o[0].replace(/^([^/:]+):\/*/,"$1:///"):o[0].replace(/^([^/:]+):\/*/,"$1://");for(var c=0;c<o.length;c++){var l=o[c];if("string"!=typeof l)throw new TypeError("Url must be a string. Received "+l);""!==l&&(c>0&&(l=l.replace(/^[\/]+/,"")),l=l.replace(/[\/]+$/,c<o.length-1?"":"/"),s.push(l))}var f=s.join("/"),b=(f=f.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return b.shift()+(b.length>0?"?":"")+b.join("&")}return function(){return i("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},r.exports?r.exports=n():t.urljoin=n()}),iO=rO.Symbol,Nq="Function.prototype.bind called on incompatible ",vv=Array.prototype.slice,kq=Object.prototype.toString,ls=Function.prototype.bind||function(r){var t=this;if("function"!=typeof t||"[object Function]"!==kq.call(t))throw new TypeError(Nq+t);for(var n,i=vv.call(arguments,1),o=function(){if(this instanceof n){var f=t.apply(this,i.concat(vv.call(arguments)));return Object(f)===f?f:this}return t.apply(r,i.concat(vv.call(arguments)))},s=Math.max(0,t.length-i.length),a=[],c=0;c<s;c++)a.push("$"+c);if(n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var l=function(){};l.prototype=t.prototype,n.prototype=new l,l.prototype=null}return n},Bh=ls.call(Function.call,Object.prototype.hasOwnProperty),ku=SyntaxError,oO=Function,kc=TypeError,Ev=function(r){try{return oO('"use strict"; return ('+r+").constructor;")()}catch(t){}},ra=Object.getOwnPropertyDescriptor;if(ra)try{ra({},"")}catch(r){ra=null}var bv=function(){throw new kc},Pq=ra?function(){try{return bv}catch(r){try{return ra(arguments,"callee").get}catch(t){return bv}}}():bv,Pc="function"==typeof iO&&"function"==typeof Symbol&&"symbol"==typeof iO("foo")&&"symbol"==typeof Symbol("bar")&&function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var r={},t=Symbol("test"),n=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in r[t]=42,r)return!1;if("function"==typeof Object.keys&&0!==Object.keys(r).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(r).length)return!1;var i=Object.getOwnPropertySymbols(r);if(1!==i.length||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(r,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(r,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}(),us=Object.getPrototypeOf||function(r){return r.__proto__},xc={},xq="undefined"==typeof Uint8Array?void 0:us(Uint8Array),Lc={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":Pc?us([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":xc,"%AsyncGenerator%":xc,"%AsyncGeneratorFunction%":xc,"%AsyncIteratorPrototype%":xc,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":oO,"%GeneratorFunction%":xc,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Pc?us(us([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Pc?us((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Pc?us((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Pc?us(""[Symbol.iterator]()):void 0,"%Symbol%":Pc?Symbol:void 0,"%SyntaxError%":ku,"%ThrowTypeError%":Pq,"%TypedArray%":xq,"%TypeError%":kc,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},sO={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Lq=ls.call(Function.call,Array.prototype.concat),Fq=ls.call(Function.apply,Array.prototype.splice),aO=ls.call(Function.call,String.prototype.replace),Hh=ls.call(Function.call,String.prototype.slice),Vq=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Uq=/\\(\\)?/g,jq=function(r){var t=Hh(r,0,1),n=Hh(r,-1);if("%"===t&&"%"!==n)throw new ku("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new ku("invalid intrinsic syntax, expected opening `%`");var i=[];return aO(r,Vq,function(o,s,a,c){i[i.length]=a?aO(c,Uq,"$1"):s||o}),i},Bq=function(r,t){var n,i=r;if(Bh(sO,i)&&(i="%"+(n=sO[i])[0]+"%"),Bh(Lc,i)){var o=Lc[i];if(o===xc&&(o=function s(a){var c;if("%AsyncFunction%"===a)c=Ev("async function () {}");else if("%GeneratorFunction%"===a)c=Ev("function* () {}");else if("%AsyncGeneratorFunction%"===a)c=Ev("async function* () {}");else if("%AsyncGenerator%"===a){var l=s("%AsyncGeneratorFunction%");l&&(c=l.prototype)}else if("%AsyncIteratorPrototype%"===a){var f=s("%AsyncGenerator%");f&&(c=us(f.prototype))}return Lc[a]=c,c}(i)),void 0===o&&!t)throw new kc("intrinsic "+r+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:o}}throw new ku("intrinsic "+r+" does not exist!")},Fi=function(r,t){if("string"!=typeof r||0===r.length)throw new kc("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new kc('"allowMissing" argument must be a boolean');var n=jq(r),i=n.length>0?n[0]:"",o=Bq("%"+i+"%",t),s=o.name,a=o.value,c=!1,l=o.alias;l&&(i=l[0],Fq(n,Lq([0,1],l)));for(var f=1,b=!0;f<n.length;f+=1){var O=n[f],j=Hh(O,0,1),z=Hh(O,-1);if(('"'===j||"'"===j||"`"===j||'"'===z||"'"===z||"`"===z)&&j!==z)throw new ku("property names with quotes must have matching quotes");if("constructor"!==O&&b||(c=!0),Bh(Lc,s="%"+(i+="."+O)+"%"))a=Lc[s];else if(null!=a){if(!(O in a)){if(!t)throw new kc("base intrinsic for "+r+" exists, but the property is not available.");return}if(ra&&f+1>=n.length){var $=ra(a,O);a=(b=!!$)&&"get"in $&&!("originalValue"in $.get)?$.get:a[O]}else b=Bh(a,O),a=a[O];b&&!c&&(Lc[s]=a)}}return a},Sv=Nc(function(r){var t=Fi("%Function.prototype.apply%"),n=Fi("%Function.prototype.call%"),i=Fi("%Reflect.apply%",!0)||ls.call(n,t),o=Fi("%Object.getOwnPropertyDescriptor%",!0),s=Fi("%Object.defineProperty%",!0),a=Fi("%Math.max%");if(s)try{s({},"a",{value:1})}catch(l){s=null}r.exports=function(l){var f=i(ls,n,arguments);if(o&&s){var b=o(f,"length");b.configurable&&s(f,"length",{value:1+a(0,l.length-(arguments.length-1))})}return f};var c=function(){return i(ls,t,arguments)};s?s(r.exports,"apply",{value:c}):r.exports.apply=c}),Hq=Sv(Fi("String.prototype.indexOf")),Fc=function(r,t){var n=Fi(r,!!t);return"function"==typeof n&&Hq(r,".prototype.")>-1?Sv(n):n},Wq=function(r){return r&&r.default||r}(Object.freeze({__proto__:null,default:{}})),Cv="function"==typeof Map&&Map.prototype,wv=Object.getOwnPropertyDescriptor&&Cv?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Wh=Cv&&wv&&"function"==typeof wv.get?wv.get:null,qq=Cv&&Map.prototype.forEach,Tv="function"==typeof Set&&Set.prototype,Av=Object.getOwnPropertyDescriptor&&Tv?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,qh=Tv&&Av&&"function"==typeof Av.get?Av.get:null,Gq=Tv&&Set.prototype.forEach,Pu="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,xu="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,cO="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,zq=Boolean.prototype.valueOf,$q=Object.prototype.toString,Kq=Function.prototype.toString,Yq=String.prototype.match,Rv="function"==typeof BigInt?BigInt.prototype.valueOf:null,Iv=Object.getOwnPropertySymbols,Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Lu="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Jq=Object.prototype.propertyIsEnumerable,lO=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null),Dv=Wq.custom,Mv=Dv&&dO(Dv)?Dv:null,pr="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null,Qq=function r(t,n,i,o){var s=n||{};if(ia(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ia(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!ia(s,"customInspect")||s.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ia(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function Ve(Je,Tt){if(Je.length>Tt.maxStringLength){var Nn=Je.length-Tt.maxStringLength,pn="... "+Nn+" more character"+(Nn>1?"s":"");return Ve(Je.slice(0,Tt.maxStringLength),Tt)+pn}return uO(Je.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,eG),"single",Tt)}(t,s);if("number"==typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"==typeof t)return String(t)+"n";var c=void 0===s.depth?5:s.depth;if(void 0===i&&(i=0),i>=c&&c>0&&"object"==typeof t)return Nv(t)?"[Array]":"[Object]";var Ve,l=function(Ve,Je){var Tt;if("\t"===Ve.indent)Tt="\t";else{if(!("number"==typeof Ve.indent&&Ve.indent>0))return null;Tt=Array(Ve.indent+1).join(" ")}return{base:Tt,prev:Array(Je+1).join(Tt)}}(s,i);if(void 0===o)o=[];else if(fO(o,t)>=0)return"[Circular]";function f(Ve,Je,Tt){if(Je&&(o=o.slice()).push(Je),Tt){var Nn={depth:s.depth};return ia(s,"quoteStyle")&&(Nn.quoteStyle=s.quoteStyle),r(Ve,Nn,i+1,o)}return r(Ve,s,i+1,o)}if("function"==typeof t){var b=function(Ve){if(Ve.name)return Ve.name;var Je=Yq.call(Kq.call(Ve),/^function\s*([\w$]+)/);return Je?Je[1]:null}(t),O=Gh(t,f);return"[Function"+(b?": "+b:" (anonymous)")+"]"+(O.length>0?" { "+O.join(", ")+" }":"")}if(dO(t)){var j=Lu?String(t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):Ov.call(t);return"object"!=typeof t||Lu?j:Fu(j)}if((Ve=t)&&"object"==typeof Ve&&("undefined"!=typeof HTMLElement&&Ve instanceof HTMLElement||"string"==typeof Ve.nodeName&&"function"==typeof Ve.getAttribute)){for(var z="<"+String(t.nodeName).toLowerCase(),$=t.attributes||[],Q=0;Q<$.length;Q++)z+=" "+$[Q].name+"="+uO(Xq($[Q].value),"double",s);return z+=">",t.childNodes&&t.childNodes.length&&(z+="..."),z+"</"+String(t.nodeName).toLowerCase()+">"}if(Nv(t)){if(0===t.length)return"[]";var re=Gh(t,f);return l&&!function(Ve){for(var Je=0;Je<Ve.length;Je++)if(fO(Ve[Je],"\n")>=0)return!1;return!0}(re)?"["+Pv(re,l)+"]":"[ "+re.join(", ")+" ]"}if(function(Ve){return!("[object Error]"!==ds(Ve)||pr&&"object"==typeof Ve&&pr in Ve)}(t)){var Ee=Gh(t,f);return 0===Ee.length?"["+String(t)+"]":"{ ["+String(t)+"] "+Ee.join(", ")+" }"}if("object"==typeof t&&a){if(Mv&&"function"==typeof t[Mv])return t[Mv]();if("symbol"!==a&&"function"==typeof t.inspect)return t.inspect()}if(function(Ve){if(!Wh||!Ve||"object"!=typeof Ve)return!1;try{Wh.call(Ve);try{qh.call(Ve)}catch(Je){return!0}return Ve instanceof Map}catch(Je){}return!1}(t)){var he=[];return qq.call(t,function(Ve,Je){he.push(f(Je,t,!0)+" => "+f(Ve,t))}),hO("Map",Wh.call(t),he,l)}if(function(Ve){if(!qh||!Ve||"object"!=typeof Ve)return!1;try{qh.call(Ve);try{Wh.call(Ve)}catch(Je){return!0}return Ve instanceof Set}catch(Je){}return!1}(t)){var Ae=[];return Gq.call(t,function(Ve){Ae.push(f(Ve,t))}),hO("Set",qh.call(t),Ae,l)}if(function(Ve){if(!Pu||!Ve||"object"!=typeof Ve)return!1;try{Pu.call(Ve,Pu);try{xu.call(Ve,xu)}catch(Je){return!0}return Ve instanceof WeakMap}catch(Je){}return!1}(t))return kv("WeakMap");if(function(Ve){if(!xu||!Ve||"object"!=typeof Ve)return!1;try{xu.call(Ve,xu);try{Pu.call(Ve,Pu)}catch(Je){return!0}return Ve instanceof WeakSet}catch(Je){}return!1}(t))return kv("WeakSet");if(function(Ve){if(!cO||!Ve||"object"!=typeof Ve)return!1;try{return cO.call(Ve),!0}catch(Je){}return!1}(t))return kv("WeakRef");if(function(Ve){return!("[object Number]"!==ds(Ve)||pr&&"object"==typeof Ve&&pr in Ve)}(t))return Fu(f(Number(t)));if(function(Ve){if(!Ve||"object"!=typeof Ve||!Rv)return!1;try{return Rv.call(Ve),!0}catch(Je){}return!1}(t))return Fu(f(Rv.call(t)));if(function(Ve){return!("[object Boolean]"!==ds(Ve)||pr&&"object"==typeof Ve&&pr in Ve)}(t))return Fu(zq.call(t));if(function(Ve){return!("[object String]"!==ds(Ve)||pr&&"object"==typeof Ve&&pr in Ve)}(t))return Fu(f(String(t)));if(!function(Ve){return!("[object Date]"!==ds(Ve)||pr&&"object"==typeof Ve&&pr in Ve)}(t)&&!function(Ve){return!("[object RegExp]"!==ds(Ve)||pr&&"object"==typeof Ve&&pr in Ve)}(t)){var Fe=Gh(t,f),Be=lO?lO(t)===Object.prototype:t instanceof Object||t.constructor===Object,Ge=t instanceof Object?"":"null prototype",it=!Be&&pr&&Object(t)===t&&pr in t?ds(t).slice(8,-1):Ge?"Object":"",ht=(Be||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(it||Ge?"["+[].concat(it||[],Ge||[]).join(": ")+"] ":"");return 0===Fe.length?ht+"{}":l?ht+"{"+Pv(Fe,l)+"}":ht+"{ "+Fe.join(", ")+" }"}return String(t)};function uO(r,t,n){var i="double"===(n.quoteStyle||t)?'"':"'";return i+r+i}function Xq(r){return String(r).replace(/"/g,"&quot;")}function Nv(r){return!("[object Array]"!==ds(r)||pr&&"object"==typeof r&&pr in r)}function dO(r){if(Lu)return r&&"object"==typeof r&&r instanceof Symbol;if("symbol"==typeof r)return!0;if(!r||"object"!=typeof r||!Ov)return!1;try{return Ov.call(r),!0}catch(t){}return!1}var Zq=Object.prototype.hasOwnProperty||function(r){return r in this};function ia(r,t){return Zq.call(r,t)}function ds(r){return $q.call(r)}function fO(r,t){if(r.indexOf)return r.indexOf(t);for(var n=0,i=r.length;n<i;n++)if(r[n]===t)return n;return-1}function eG(r){var t=r.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function Fu(r){return"Object("+r+")"}function kv(r){return r+" { ? }"}function hO(r,t,n,i){return r+" ("+t+") {"+(i?Pv(n,i):n.join(", "))+"}"}function Pv(r,t){if(0===r.length)return"";var n="\n"+t.prev+t.base;return n+r.join(","+n)+"\n"+t.prev}function Gh(r,t){var n=Nv(r),i=[];if(n){i.length=r.length;for(var o=0;o<r.length;o++)i[o]=ia(r,o)?t(r[o],r):""}var s,a="function"==typeof Iv?Iv(r):[];if(Lu){s={};for(var c=0;c<a.length;c++)s["$"+a[c]]=a[c]}for(var l in r)ia(r,l)&&(n&&String(Number(l))===l&&l<r.length||Lu&&s["$"+l]instanceof Symbol||(/[^\w$]/.test(l)?i.push(t(l,r)+": "+t(r[l],r)):i.push(l+": "+t(r[l],r))));if("function"==typeof Iv)for(var f=0;f<a.length;f++)Jq.call(r,a[f])&&i.push("["+t(a[f])+"]: "+t(r[a[f]],r));return i}var tG=Fi("%TypeError%"),zh=Fi("%WeakMap%",!0),$h=Fi("%Map%",!0),nG=Fc("WeakMap.prototype.get",!0),rG=Fc("WeakMap.prototype.set",!0),iG=Fc("WeakMap.prototype.has",!0),oG=Fc("Map.prototype.get",!0),sG=Fc("Map.prototype.set",!0),aG=Fc("Map.prototype.has",!0),xv=function(r,t){for(var n,i=r;null!==(n=i.next);i=n)if(n.key===t)return i.next=n.next,n.next=r.next,r.next=n,n},pO=function(){var r,t,n,i={assert:function(o){if(!i.has(o))throw new tG("Side channel does not contain "+Qq(o))},get:function(o){if(zh&&o&&("object"==typeof o||"function"==typeof o)){if(r)return nG(r,o)}else if($h){if(t)return oG(t,o)}else if(n)return(c=xv(n,o))&&c.value;var c},has:function(o){if(zh&&o&&("object"==typeof o||"function"==typeof o)){if(r)return iG(r,o)}else if($h){if(t)return aG(t,o)}else if(n)return!!xv(n,o);return!1},set:function(o,s){var a,c,l,f;zh&&o&&("object"==typeof o||"function"==typeof o)?(r||(r=new zh),rG(r,o,s)):$h?(t||(t=new $h),sG(t,o,s)):(n||(n={key:{},next:null}),l=s,(f=xv(a=n,c=o))?f.value=l:a.next={key:c,next:a.next,value:l})}};return i},cG=String.prototype.replace,lG=/%20/g,gO="RFC3986",Vc={default:gO,formatters:{RFC1738:function(r){return cG.call(r,lG,"+")},RFC3986:function(r){return String(r)}},RFC1738:"RFC1738",RFC3986:gO},Lv=Object.prototype.hasOwnProperty,oa=Array.isArray,oo=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),mO=function(r,t){for(var n=t&&t.plainObjects?Object.create(null):{},i=0;i<r.length;++i)void 0!==r[i]&&(n[i]=r[i]);return n},Mo={arrayToObject:mO,assign:function(r,t){return Object.keys(t).reduce(function(n,i){return n[i]=t[i],n},r)},combine:function(r,t){return[].concat(r,t)},compact:function(r){for(var t=[{obj:{o:r},prop:"o"}],n=[],i=0;i<t.length;++i)for(var o=t[i],s=o.obj[o.prop],a=Object.keys(s),c=0;c<a.length;++c){var l=a[c],f=s[l];"object"==typeof f&&null!==f&&-1===n.indexOf(f)&&(t.push({obj:s,prop:l}),n.push(f))}return function(b){for(;b.length>1;){var O=b.pop(),j=O.obj[O.prop];if(oa(j)){for(var z=[],$=0;$<j.length;++$)void 0!==j[$]&&z.push(j[$]);O.obj[O.prop]=z}}}(t),r},decode:function(r,t,n){var i=r.replace(/\+/g," ");if("iso-8859-1"===n)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(o){return i}},encode:function(r,t,n,i,o){if(0===r.length)return r;var s=r;if("symbol"==typeof r?s=Symbol.prototype.toString.call(r):"string"!=typeof r&&(s=String(r)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",c=0;c<s.length;++c){var l=s.charCodeAt(c);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||o===Vc.RFC1738&&(40===l||41===l)?a+=s.charAt(c):l<128?a+=oo[l]:l<2048?a+=oo[192|l>>6]+oo[128|63&l]:l<55296||l>=57344?a+=oo[224|l>>12]+oo[128|l>>6&63]+oo[128|63&l]:(l=65536+((1023&l)<<10|1023&s.charCodeAt(c+=1)),a+=oo[240|l>>18]+oo[128|l>>12&63]+oo[128|l>>6&63]+oo[128|63&l])}return a},isBuffer:function(r){return!(!r||"object"!=typeof r||!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r)))},isRegExp:function(r){return"[object RegExp]"===Object.prototype.toString.call(r)},maybeMap:function(r,t){if(oa(r)){for(var n=[],i=0;i<r.length;i+=1)n.push(t(r[i]));return n}return t(r)},merge:function r(t,n,i){if(!n)return t;if("object"!=typeof n){if(oa(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(i&&(i.plainObjects||i.allowPrototypes)||!Lv.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var o=t;return oa(t)&&!oa(n)&&(o=mO(t,i)),oa(t)&&oa(n)?(n.forEach(function(s,a){if(Lv.call(t,a)){var c=t[a];c&&"object"==typeof c&&s&&"object"==typeof s?t[a]=r(c,s,i):t.push(s)}else t[a]=s}),t):Object.keys(n).reduce(function(s,a){var c=n[a];return s[a]=Lv.call(s,a)?r(s[a],c,i):c,s},o)}},uG=Object.prototype.hasOwnProperty,_O={brackets:function(r){return r+"[]"},comma:"comma",indices:function(r,t){return r+"["+t+"]"},repeat:function(r){return r}},sa=Array.isArray,dG=Array.prototype.push,yO=function(r,t){dG.apply(r,sa(t)?t:[t])},fG=Date.prototype.toISOString,vO=Vc.default,gr={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Mo.encode,encodeValuesOnly:!1,format:vO,formatter:Vc.formatters[vO],indices:!1,serializeDate:function(r){return fG.call(r)},skipNulls:!1,strictNullHandling:!1},hG=function r(t,n,i,o,s,a,c,l,f,b,O,j,z,$,Q){var Ve,re=t;if(Q.has(t))throw new RangeError("Cyclic object value");if("function"==typeof c?re=c(n,re):re instanceof Date?re=b(re):"comma"===i&&sa(re)&&(re=Mo.maybeMap(re,function(Ve){return Ve instanceof Date?b(Ve):Ve})),null===re){if(o)return a&&!z?a(n,gr.encoder,$,"key",O):n;re=""}if("string"==typeof(Ve=re)||"number"==typeof Ve||"boolean"==typeof Ve||"symbol"==typeof Ve||"bigint"==typeof Ve||Mo.isBuffer(re))return a?[j(z?n:a(n,gr.encoder,$,"key",O))+"="+j(a(re,gr.encoder,$,"value",O))]:[j(n)+"="+j(String(re))];var Ee,he=[];if(void 0===re)return he;if("comma"===i&&sa(re))Ee=[{value:re.length>0?re.join(",")||null:void 0}];else if(sa(c))Ee=c;else{var Ae=Object.keys(re);Ee=l?Ae.sort(l):Ae}for(var Fe=0;Fe<Ee.length;++Fe){var Be=Ee[Fe],Ge="object"==typeof Be&&void 0!==Be.value?Be.value:re[Be];if(!s||null!==Ge){var it=sa(re)?"function"==typeof i?i(n,Be):n:n+(f?"."+Be:"["+Be+"]");Q.set(t,!0);var ht=pO();yO(he,r(Ge,it,i,o,s,a,c,l,f,b,O,j,z,$,ht))}}return he},Fv=Object.prototype.hasOwnProperty,pG=Array.isArray,nr={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Mo.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},gG=function(r){return r.replace(/&#(\d+);/g,function(t,n){return String.fromCharCode(parseInt(n,10))})},EO=function(r,t){return r&&"string"==typeof r&&t.comma&&r.indexOf(",")>-1?r.split(","):r},mG=function(r,t,n,i){if(r){var o=n.allowDots?r.replace(/\.([^.[]+)/g,"[$1]"):r,s=/(\[[^[\]]*])/g,a=n.depth>0&&/(\[[^[\]]*])/.exec(o),c=a?o.slice(0,a.index):o,l=[];if(c){if(!n.plainObjects&&Fv.call(Object.prototype,c)&&!n.allowPrototypes)return;l.push(c)}for(var f=0;n.depth>0&&null!==(a=s.exec(o))&&f<n.depth;){if(f+=1,!n.plainObjects&&Fv.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(a[1])}return a&&l.push("["+o.slice(a.index)+"]"),function(b,O,j,z){for(var $=z?O:EO(O,j),Q=b.length-1;Q>=0;--Q){var re,Ee=b[Q];if("[]"===Ee&&j.parseArrays)re=[].concat($);else{re=j.plainObjects?Object.create(null):{};var he="["===Ee.charAt(0)&&"]"===Ee.charAt(Ee.length-1)?Ee.slice(1,-1):Ee,Ae=parseInt(he,10);j.parseArrays||""!==he?!isNaN(Ae)&&Ee!==he&&String(Ae)===he&&Ae>=0&&j.parseArrays&&Ae<=j.arrayLimit?(re=[])[Ae]=$:re[he]=$:re={0:$}}$=re}return $}(l,t,n,i)}},Uc=function(r,t){var n,i=r,o=function(z){if(!z)return gr;if(null!=z.encoder&&"function"!=typeof z.encoder)throw new TypeError("Encoder has to be a function.");var $=z.charset||gr.charset;if(void 0!==z.charset&&"utf-8"!==z.charset&&"iso-8859-1"!==z.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Q=Vc.default;if(void 0!==z.format){if(!uG.call(Vc.formatters,z.format))throw new TypeError("Unknown format option provided.");Q=z.format}var re=Vc.formatters[Q],Ee=gr.filter;return("function"==typeof z.filter||sa(z.filter))&&(Ee=z.filter),{addQueryPrefix:"boolean"==typeof z.addQueryPrefix?z.addQueryPrefix:gr.addQueryPrefix,allowDots:void 0===z.allowDots?gr.allowDots:!!z.allowDots,charset:$,charsetSentinel:"boolean"==typeof z.charsetSentinel?z.charsetSentinel:gr.charsetSentinel,delimiter:void 0===z.delimiter?gr.delimiter:z.delimiter,encode:"boolean"==typeof z.encode?z.encode:gr.encode,encoder:"function"==typeof z.encoder?z.encoder:gr.encoder,encodeValuesOnly:"boolean"==typeof z.encodeValuesOnly?z.encodeValuesOnly:gr.encodeValuesOnly,filter:Ee,format:Q,formatter:re,serializeDate:"function"==typeof z.serializeDate?z.serializeDate:gr.serializeDate,skipNulls:"boolean"==typeof z.skipNulls?z.skipNulls:gr.skipNulls,sort:"function"==typeof z.sort?z.sort:null,strictNullHandling:"boolean"==typeof z.strictNullHandling?z.strictNullHandling:gr.strictNullHandling}}(t);"function"==typeof o.filter?i=(0,o.filter)("",i):sa(o.filter)&&(n=o.filter);var a=[];if("object"!=typeof i||null===i)return"";var c=_O[t&&t.arrayFormat in _O?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices"];n||(n=Object.keys(i)),o.sort&&n.sort(o.sort);for(var l=pO(),f=0;f<n.length;++f){var b=n[f];o.skipNulls&&null===i[b]||yO(a,hG(i[b],b,c,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,l))}var O=a.join(o.delimiter),j=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&(j+="iso-8859-1"===o.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),O.length>0?j+O:""},yG=Nc(function(r){function t(n){if(n)return function(i){for(var o in t.prototype)i[o]=t.prototype[o];return i}(n)}r.exports=t,t.prototype.on=t.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},t.prototype.once=function(n,i){function o(){this.off(n,o),i.apply(this,arguments)}return o.fn=i,this.on(n,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var o,s=this._callbacks["$"+n];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+n],this;for(var a=0;a<s.length;a++)if((o=s[a])===i||o.fn===i){s.splice(a,1);break}return 0===s.length&&delete this._callbacks["$"+n],this},t.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),o=this._callbacks["$"+n],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if(o){s=0;for(var a=(o=o.slice(0)).length;s<a;++s)o[s].apply(this,i)}return this},t.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},t.prototype.hasListeners=function(n){return!!this.listeners(n).length}}),vG=Vu;Vu.default=Vu,Vu.stable=bO,Vu.stableStringify=bO;var No=[],fs=[];function Vu(r,t,n){var i;for(function s(a,c,l,f){var b;if("object"==typeof a&&null!==a){for(b=0;b<l.length;b++)if(l[b]===a){var O=Object.getOwnPropertyDescriptor(f,c);return void(void 0!==O.get?O.configurable?(Object.defineProperty(f,c,{value:"[Circular]"}),No.push([f,c,a,O])):fs.push([a,c]):(f[c]="[Circular]",No.push([f,c,a])))}if(l.push(a),Array.isArray(a))for(b=0;b<a.length;b++)s(a[b],b,l,a);else{var j=Object.keys(a);for(b=0;b<j.length;b++){var z=j[b];s(a[z],z,l,a)}}l.pop()}}(r,"",[],void 0),i=0===fs.length?JSON.stringify(r,t,n):JSON.stringify(r,SO(t),n);0!==No.length;){var o=No.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}return i}function EG(r,t){return r<t?-1:r>t?1:0}function bO(r,t,n){var i,o=function a(c,l,f,b){var O;if("object"==typeof c&&null!==c){for(O=0;O<f.length;O++)if(f[O]===c){var j=Object.getOwnPropertyDescriptor(b,l);return void(void 0!==j.get?j.configurable?(Object.defineProperty(b,l,{value:"[Circular]"}),No.push([b,l,c,j])):fs.push([c,l]):(b[l]="[Circular]",No.push([b,l,c])))}if("function"==typeof c.toJSON)return;if(f.push(c),Array.isArray(c))for(O=0;O<c.length;O++)a(c[O],O,f,c);else{var z={},$=Object.keys(c).sort(EG);for(O=0;O<$.length;O++){var Q=$[O];a(c[Q],Q,f,c),z[Q]=c[Q]}if(void 0===b)return z;No.push([b,l,c]),b[l]=z}f.pop()}}(r,"",[],void 0)||r;for(i=0===fs.length?JSON.stringify(o,t,n):JSON.stringify(o,SO(t),n);0!==No.length;){var s=No.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}return i}function SO(r){return r=void 0!==r?r:function(t,n){return n},function(t,n){if(fs.length>0)for(var i=0;i<fs.length;i++){var o=fs[i];if(o[1]===t&&o[0]===n){n="[Circular]",fs.splice(i,1);break}}return r.call(this,t,n)}}function CO(r){return(CO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}var jc=function(r){return null!==r&&"object"===CO(r)};function wO(r){return(wO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}var bG=Qt;function Qt(r){if(r)return function(t){for(var n in Qt.prototype)Object.prototype.hasOwnProperty.call(Qt.prototype,n)&&(t[n]=Qt.prototype[n]);return t}(r)}Qt.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},Qt.prototype.parse=function(r){return this._parser=r,this},Qt.prototype.responseType=function(r){return this._responseType=r,this},Qt.prototype.serialize=function(r){return this._serializer=r,this},Qt.prototype.timeout=function(r){if(!r||"object"!==wO(r))return this._timeout=r,this._responseTimeout=0,this._uploadTimeout=0,this;for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t))switch(t){case"deadline":this._timeout=r.deadline;break;case"response":this._responseTimeout=r.response;break;case"upload":this._uploadTimeout=r.upload;break;default:console.warn("Unknown timeout option",t)}return this},Qt.prototype.retry=function(r,t){return 0!==arguments.length&&!0!==r||(r=1),r<=0&&(r=0),this._maxRetries=r,this._retries=0,this._retryCallback=t,this};var SG=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];Qt.prototype._shouldRetry=function(r,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(r,t);if(!0===n)return!0;if(!1===n)return!1}catch(i){console.error(i)}return!!(t&&t.status&&t.status>=500&&501!==t.status||r&&(r.code&&SG.includes(r.code)||r.timeout&&"ECONNABORTED"===r.code||r.crossDomain))},Qt.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},Qt.prototype.then=function(r,t){var n=this;if(!this._fullfilledPromise){var i=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(o,s){i.on("abort",function(){if(!(n._maxRetries&&n._maxRetries>n._retries))if(n.timedout&&n.timedoutError)s(n.timedoutError);else{var a=new Error("Aborted");a.code="ABORTED",a.status=n.status,a.method=n.method,a.url=n.url,s(a)}}),i.end(function(a,c){a?s(a):o(c)})})}return this._fullfilledPromise.then(r,t)},Qt.prototype.catch=function(r){return this.then(void 0,r)},Qt.prototype.use=function(r){return r(this),this},Qt.prototype.ok=function(r){if("function"!=typeof r)throw new Error("Callback required");return this._okCallback=r,this},Qt.prototype._isResponseOK=function(r){return!!r&&(this._okCallback?this._okCallback(r):r.status>=200&&r.status<300)},Qt.prototype.getHeader=Qt.prototype.get=function(r){return this._header[r.toLowerCase()]},Qt.prototype.set=function(r,t){if(jc(r)){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&this.set(n,r[n]);return this}return this._header[r.toLowerCase()]=t,this.header[r]=t,this},Qt.prototype.unset=function(r){return delete this._header[r.toLowerCase()],delete this.header[r],this},Qt.prototype.field=function(r,t){if(null==r)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(jc(r)){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&this.field(n,r[n]);return this}if(Array.isArray(t)){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.field(r,t[i]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=String(t)),this._getFormData().append(r,t),this},Qt.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},Qt.prototype._auth=function(r,t,n,i){switch(n.type){case"basic":this.set("Authorization","Basic ".concat(i("".concat(r,":").concat(t))));break;case"auto":this.username=r,this.password=t;break;case"bearer":this.set("Authorization","Bearer ".concat(r))}return this},Qt.prototype.withCredentials=function(r){return void 0===r&&(r=!0),this._withCredentials=r,this},Qt.prototype.redirects=function(r){return this._maxRedirects=r,this},Qt.prototype.maxResponseSize=function(r){if("number"!=typeof r)throw new TypeError("Invalid argument");return this._maxResponseSize=r,this},Qt.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},Qt.prototype.send=function(r){var t=jc(r),n=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(t&&!this._data)Array.isArray(r)?this._data=[]:this._isHost(r)||(this._data={});else if(r&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(t&&jc(this._data))for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(this._data[i]=r[i]);else"string"==typeof r?(n||this.type("form"),this._data="application/x-www-form-urlencoded"===(n=this._header["content-type"])?this._data?"".concat(this._data,"&").concat(r):r:(this._data||"")+r):this._data=r;return!t||this._isHost(r)||n||this.type("json"),this},Qt.prototype.sortQuery=function(r){return this._sort=void 0===r||r,this},Qt.prototype._finalizeQueryString=function(){var r=this._query.join("&");if(r&&(this.url+=(this.url.includes("?")?"&":"?")+r),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.slice(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.slice(0,t)+"?"+n.join("&")}}},Qt.prototype._appendQueryString=function(){console.warn("Unsupported")},Qt.prototype._timeoutError=function(r,t,n){if(!this._aborted){var i=new Error("".concat(r+t,"ms exceeded"));i.timeout=t,i.code="ECONNABORTED",i.errno=n,this.timedout=!0,this.timedoutError=i,this.abort(),this.callback(i)}},Qt.prototype._setTimeouts=function(){var r=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){r._timeoutError("Timeout of ",r._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){r._timeoutError("Response timeout of ",r._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};var AG=aa;function aa(r){if(r)return function(t){for(var n in aa.prototype)Object.prototype.hasOwnProperty.call(aa.prototype,n)&&(t[n]=aa.prototype[n]);return t}(r)}function Vv(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=r[n];return i}function Uv(){this._defaults=[]}aa.prototype.get=function(r){return this.header[r.toLowerCase()]},aa.prototype._setHeaderProperties=function(r){var t=r["content-type"]||"";this.type=function(r){return r.split(/ *; */).shift()}(t);var n=function(r){return r.split(/ *; */).reduce(function(t,n){var i=n.split(/ *= */),o=i.shift(),s=i.shift();return o&&s&&(t[o]=s),t},{})}(t);for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(this[i]=n[i]);this.links={};try{r.link&&(this.links=function(r){return r.split(/ *, */).reduce(function(t,n){var i=n.split(/ *; */),o=i[0].slice(1,-1);return t[i[1].split(/ *= */)[1].slice(1,-1)]=o,t},{})}(r.link))}catch(o){}},aa.prototype._setStatusProperties=function(r){var t=r/100|0;this.statusCode=r,this.status=this.statusCode,this.statusType=t,this.info=1===t,this.ok=2===t,this.redirect=3===t,this.clientError=4===t,this.serverError=5===t,this.error=(4===t||5===t)&&this.toError(),this.created=201===r,this.accepted=202===r,this.noContent=204===r,this.badRequest=400===r,this.unauthorized=401===r,this.notAcceptable=406===r,this.forbidden=403===r,this.notFound=404===r,this.unprocessableEntity=422===r},["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach(function(r){Uv.prototype[r]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this._defaults.push({fn:r,args:n}),this}}),Uv.prototype._setDefaults=function(r){this._defaults.forEach(function(t){r[t.fn].apply(r,function(r){return function(t){if(Array.isArray(t))return Vv(t)}(r)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(t,n){if(t){if("string"==typeof t)return Vv(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Vv(t,n)}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.args))})};for(var Kh=Uv,Yh=Nc(function(r,t){function n($){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&"function"==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})($)}var i;function o(){}"undefined"!=typeof window?i=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),i=void 0):i=self,r.exports=function($,Q){return"function"==typeof Q?new t.Request("GET",$).end(Q):1===arguments.length?new t.Request("GET",$):new t.Request($,Q)};var s=t=r.exports;t.Request=j,s.getXHR=function(){if(i.XMLHttpRequest&&(!i.location||"file:"!==i.location.protocol||!i.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch($){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch($){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch($){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch($){}throw new Error("Browser-only version of superagent could not find XHR")};var a="".trim?function($){return $.trim()}:function($){return $.replace(/(^\s*|\s*$)/g,"")};function c($){if(!jc($))return $;var Q=[];for(var re in $)Object.prototype.hasOwnProperty.call($,re)&&l(Q,re,$[re]);return Q.join("&")}function l($,Q,re){if(void 0!==re)if(null!==re)if(Array.isArray(re))re.forEach(function(he){l($,Q,he)});else if(jc(re))for(var Ee in re)Object.prototype.hasOwnProperty.call(re,Ee)&&l($,"".concat(Q,"[").concat(Ee,"]"),re[Ee]);else $.push(encodeURI(Q)+"="+encodeURIComponent(re));else $.push(encodeURI(Q))}function f($){for(var Q,re,Ee={},he=$.split("&"),Ae=0,Fe=he.length;Ae<Fe;++Ae)-1===(re=(Q=he[Ae]).indexOf("="))?Ee[decodeURIComponent(Q)]="":Ee[decodeURIComponent(Q.slice(0,re))]=decodeURIComponent(Q.slice(re+1));return Ee}function b($){return/[/+]json($|[^-\w])/.test($)}function O($){this.req=$,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var Q=this.xhr.status;1223===Q&&(Q=204),this._setStatusProperties(Q),this.headers=function(re){for(var Ee,he,Ae,Fe,Be=re.split(/\r?\n/),Ge={},it=0,ht=Be.length;it<ht;++it)-1!==(Ee=(he=Be[it]).indexOf(":"))&&(Ae=he.slice(0,Ee).toLowerCase(),Fe=a(he.slice(Ee+1)),Ge[Ae]=Fe);return Ge}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body=null===this.text&&$._responseType?this.xhr.response:"HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function j($,Q){var re=this;this._query=this._query||[],this.method=$,this.url=Q,this.header={},this._header={},this.on("end",function(){var Ee,he=null,Ae=null;try{Ae=new O(re)}catch(Fe){return(he=new Error("Parser is unable to parse the response")).parse=!0,he.original=Fe,re.xhr?(he.rawResponse=void 0===re.xhr.responseType?re.xhr.responseText:re.xhr.response,he.status=re.xhr.status?re.xhr.status:null,he.statusCode=he.status):(he.rawResponse=null,he.status=null),re.callback(he)}re.emit("response",Ae);try{re._isResponseOK(Ae)||(Ee=new Error(Ae.statusText||Ae.text||"Unsuccessful HTTP response"))}catch(Fe){Ee=Fe}Ee?(Ee.original=he,Ee.response=Ae,Ee.status=Ae.status,re.callback(Ee,Ae)):re.callback(null,Ae)})}function z($,Q,re){var Ee=s("DELETE",$);return"function"==typeof Q&&(re=Q,Q=null),Q&&Ee.send(Q),re&&Ee.end(re),Ee}s.serializeObject=c,s.parseString=f,s.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},s.serialize={"application/x-www-form-urlencoded":c,"application/json":vG},s.parse={"application/x-www-form-urlencoded":f,"application/json":JSON.parse},AG(O.prototype),O.prototype._parseBody=function($){var Q=s.parse[this.type];return this.req._parser?this.req._parser(this,$):(!Q&&b(this.type)&&(Q=s.parse["application/json"]),Q&&$&&($.length>0||$ instanceof Object)?Q($):null)},O.prototype.toError=function(){var $=this.req,Q=$.method,re=$.url,Ee="cannot ".concat(Q," ").concat(re," (").concat(this.status,")"),he=new Error(Ee);return he.status=this.status,he.method=Q,he.url=re,he},s.Response=O,yG(j.prototype),bG(j.prototype),j.prototype.type=function($){return this.set("Content-Type",s.types[$]||$),this},j.prototype.accept=function($){return this.set("Accept",s.types[$]||$),this},j.prototype.auth=function($,Q,re){1===arguments.length&&(Q=""),"object"===n(Q)&&null!==Q&&(re=Q,Q=""),re||(re={type:"function"==typeof btoa?"basic":"auto"});var Ee=function(he){if("function"==typeof btoa)return btoa(he);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth($,Q,re,Ee)},j.prototype.query=function($){return"string"!=typeof $&&($=c($)),$&&this._query.push($),this},j.prototype.attach=function($,Q,re){if(Q){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append($,Q,re||Q.name)}return this},j.prototype._getFormData=function(){return this._formData||(this._formData=new i.FormData),this._formData},j.prototype.callback=function($,Q){if(this._shouldRetry($,Q))return this._retry();var re=this._callback;this.clearTimeout(),$&&(this._maxRetries&&($.retries=this._retries-1),this.emit("error",$)),re($,Q)},j.prototype.crossDomainError=function(){var $=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");$.crossDomain=!0,$.status=this.status,$.method=this.method,$.url=this.url,this.callback($)},j.prototype.buffer=j.prototype.ca=j.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},j.prototype.pipe=j.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},j.prototype._isHost=function($){return $&&"object"===n($)&&!Array.isArray($)&&"[object Object]"!==Object.prototype.toString.call($)},j.prototype.end=function($){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=$||o,this._finalizeQueryString(),this._end()},j.prototype._setUploadTimeout=function(){var $=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){$._timeoutError("Upload timeout of ",$._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},j.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var $=this;this.xhr=s.getXHR();var Q=this.xhr,re=this._formData||this._data;this._setTimeouts(),Q.onreadystatechange=function(){var Be=Q.readyState;if(Be>=2&&$._responseTimeoutTimer&&clearTimeout($._responseTimeoutTimer),4===Be){var Ge;try{Ge=Q.status}catch(it){Ge=0}if(!Ge)return $.timedout||$._aborted?void 0:$.crossDomainError();$.emit("end")}};var Ee=function(Be,Ge){Ge.total>0&&(Ge.percent=Ge.loaded/Ge.total*100,100===Ge.percent&&clearTimeout($._uploadTimeoutTimer)),Ge.direction=Be,$.emit("progress",Ge)};if(this.hasListeners("progress"))try{Q.addEventListener("progress",Ee.bind(null,"download")),Q.upload&&Q.upload.addEventListener("progress",Ee.bind(null,"upload"))}catch(Be){}Q.upload&&this._setUploadTimeout();try{this.username&&this.password?Q.open(this.method,this.url,!0,this.username,this.password):Q.open(this.method,this.url,!0)}catch(Be){return this.callback(Be)}if(this._withCredentials&&(Q.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof re&&!this._isHost(re)){var he=this._header["content-type"],Ae=this._serializer||s.serialize[he?he.split(";")[0]:""];!Ae&&b(he)&&(Ae=s.serialize["application/json"]),Ae&&(re=Ae(re))}for(var Fe in this.header)null!==this.header[Fe]&&Object.prototype.hasOwnProperty.call(this.header,Fe)&&Q.setRequestHeader(Fe,this.header[Fe]);this._responseType&&(Q.responseType=this._responseType),this.emit("request",this),Q.send(void 0===re?null:re)},s.agent=function(){return new Kh},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function($){Kh.prototype[$.toLowerCase()]=function(Q,re){var Ee=new s.Request($,Q);return this._setDefaults(Ee),re&&Ee.end(re),Ee}}),Kh.prototype.del=Kh.prototype.delete,s.get=function($,Q,re){var Ee=s("GET",$);return"function"==typeof Q&&(re=Q,Q=null),Q&&Ee.query(Q),re&&Ee.end(re),Ee},s.head=function($,Q,re){var Ee=s("HEAD",$);return"function"==typeof Q&&(re=Q,Q=null),Q&&Ee.query(Q),re&&Ee.end(re),Ee},s.options=function($,Q,re){var Ee=s("OPTIONS",$);return"function"==typeof Q&&(re=Q,Q=null),Q&&Ee.send(Q),re&&Ee.end(re),Ee},s.del=z,s.delete=z,s.patch=function($,Q,re){var Ee=s("PATCH",$);return"function"==typeof Q&&(re=Q,Q=null),Q&&Ee.send(Q),re&&Ee.end(re),Ee},s.post=function($,Q,re){var Ee=s("POST",$);return"function"==typeof Q&&(re=Q,Q=null),Q&&Ee.send(Q),re&&Ee.end(re),Ee},s.put=function($,Q,re){var Ee=s("PUT",$);return"function"==typeof Q&&(re=Q,Q=null),Q&&Ee.send(Q),re&&Ee.end(re),Ee}}),so=[],hi=[],jv=("undefined"!=typeof Uint8Array&&Uint8Array,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Bc=0,NG=jv.length;Bc<NG;++Bc)so[Bc]=jv[Bc],hi[jv.charCodeAt(Bc)]=Bc;function kG(r,t,n){for(var o,s=[],a=t;a<n;a+=3)s.push(so[(o=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]))>>18&63]+so[o>>12&63]+so[o>>6&63]+so[63&o]);return s.join("")}hi["-".charCodeAt(0)]=62,hi["_".charCodeAt(0)]=63;var PG_encode=function(r){return function(r){for(var t,n=r.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(kG(r,s,s+16383>a?a:s+16383));return 1===i?o.push(so[(t=r[n-1])>>2]+so[t<<4&63]+"=="):2===i&&o.push(so[(t=(r[n-2]<<8)+r[n-1])>>10]+so[t>>4&63]+so[t<<2&63]+"="),o.join("")}(function(t){for(var n=new Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(r)).replace(/\+/g,"-").replace(/\//g,"_")},Uu_raw="9.17.0",xG=Object.prototype.toString;function RO(r,t,n,i){if(n="array"===n?"object":n,r&&typeof r[t]!==n)throw new Error(i)}function IO(r,t,n){if(typeof r!==t)throw new Error(n)}function OO(r,t,n){if(-1===t.indexOf(r))throw new Error(n)}var yt={check:function(r,t,n){if(t.optional&&!r||IO(r,t.type,t.message),"object"===t.type&&n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o];n[s].optional&&!r[s]||n[s].condition&&!n[s].condition(r)||(RO(r,s,n[s].type,n[s].message),n[s].values&&OO(r[s],n[s].values,n[s].value_message))}},attribute:RO,variable:IO,value:OO,isArray:function(r){return this.supportsIsArray()?Array.isArray(r):"[object Array]"===xG.call(r)},supportsIsArray:function(){return null!=Array.isArray}};function DO(r){if(null==r)throw new TypeError("Cannot convert first argument to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var c=o[s],l=Object.getOwnPropertyDescriptor(i,c);void 0!==l&&l.enumerable&&(t[c]=i[c])}}return t}var LG_get=function(){return Object.assign?Object.assign:DO};function Bv(r,t){return t.reduce(function(n,i){return r[i]&&(n[i]=r[i]),n},{})}function FG(r){var t=[];for(var n in r)t.push(r[n]);return t}function Hv(){var r=FG(arguments);return r.unshift({}),LG_get().apply(void 0,r)}function MO(r){var t=r.match(/^(https?:|file:|chrome-extension:)\/\/(([^:/?#]*)(?::([0-9]+))?)([/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{href:r,protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}}function VG(r,t){var n=Hv(r);return r[t]&&(n[t]=r[t].trim()),n}var dt={toSnakeCase:function r(t,n){return"object"!=typeof t||yt.isArray(t)||null===t?t:(n=n||[],Object.keys(t).reduce(function(i,o){return i[-1===n.indexOf(o)?function(s){for(var a,c="",l=0,f=!0,b=!0;l<s.length;)a=s.charCodeAt(l),(!b&&a>=65&&a<=90||!f&&a>=48&&a<=57)&&(c+="_"),c+=s[l].toLowerCase(),f=a>=48&&a<=57,b=a>=65&&a<=90,l++;return c}(o):o]=r(t[o]),i},{}))},toCamelCase:function r(t,n,i){return"object"!=typeof t||yt.isArray(t)||null===t?t:(n=n||[],i=i||{},Object.keys(t).reduce(function(o,s){var a,c=-1===n.indexOf(s)?(a=s.split("_")).reduce(function(l,f){return l+f.charAt(0).toUpperCase()+f.slice(1)},a.shift()):s;return o[c]=r(t[c]||t[s],[],i),i.keepOriginal&&(o[s]=r(t[s],[],i)),o},{}))},blacklist:function(r,t){return Object.keys(r).reduce(function(n,i){return-1===t.indexOf(i)&&(n[i]=r[i]),n},{})},merge:function(r,t){return{base:t?Bv(r,t):r,with:function(n,i){return n=i?Bv(n,i):n,Hv(this.base,n)}}},pick:Bv,getKeysNotIn:function(r,t){var n=[];for(var i in r)-1===t.indexOf(i)&&n.push(i);return n},extend:Hv,getOriginFromUrl:function(r){if(r){var t=MO(r);if(!t)return null;var n=t.protocol+"//"+t.hostname;return t.port&&(n+=":"+t.port),n}},getLocationFromUrl:MO,trimUserDetails:function(r){return["username","email","phoneNumber"].reduce(VG,r)},updatePropertyOn:function r(t,n,i){"string"==typeof n&&(n=n.split("."));var o=n[0];t.hasOwnProperty(o)&&(1===n.length?t[o]=i:r(t[o],n.slice(1),i))}};function Hc(r){this.request=r,this.method=r.method,this.url=r.url,this.body=r._data,this.headers=r._header}function ca(r){this.request=r}function ao(r){this._sendTelemetry=!1!==r._sendTelemetry||r._sendTelemetry,this._telemetryInfo=r._telemetryInfo||null,this._timesToRetryFailedRequests=r._timesToRetryFailedRequests,this.headers=r.headers||{},this._universalLoginPage=r.universalLoginPage}function Jh(){return window}Hc.prototype.abort=function(){this.request.abort()},Hc.prototype.getMethod=function(){return this.method},Hc.prototype.getBody=function(){return this.body},Hc.prototype.getUrl=function(){return this.url},Hc.prototype.getHeaders=function(){return this.headers},ca.prototype.set=function(r,t){return this.request=this.request.set(r,t),this},ca.prototype.send=function(r){return this.request=this.request.send(dt.trimUserDetails(r)),this},ca.prototype.withCredentials=function(){return this.request=this.request.withCredentials(),this},ca.prototype.end=function(r){return this.request.end(r),new Hc(this.request)},ao.prototype.setCommonConfiguration=function(r,t){if(t=t||{},this._timesToRetryFailedRequests>0&&(r=r.retry(this._timesToRetryFailedRequests)),t.noHeaders)return r;var n=this.headers;r=r.set("Content-Type","application/json"),t.xRequestLanguage&&(r=r.set("X-Request-Language",t.xRequestLanguage));for(var i=Object.keys(this.headers),o=0;o<i.length;o++)r=r.set(i[o],n[i[o]]);return this._sendTelemetry&&(r=r.set("Auth0-Client",this.getTelemetryData())),r},ao.prototype.getTelemetryData=function(){var r=this._universalLoginPage?"auth0.js-ulp":"auth0.js",t={name:r,version:Uu_raw};this._telemetryInfo&&((t=dt.extend({},this._telemetryInfo)).env=dt.extend({},this._telemetryInfo.env),t.env[r]=Uu_raw);var n=JSON.stringify(t);return PG_encode(n)},ao.prototype.get=function(r,t){return new ca(this.setCommonConfiguration(Yh.get(r),t))},ao.prototype.post=function(r,t){return new ca(this.setCommonConfiguration(Yh.post(r),t))},ao.prototype.patch=function(r,t){return new ca(this.setCommonConfiguration(Yh.patch(r),t))};var cn={redirect:function(r){Jh().location=r},getDocument:function(){return Jh().document},getWindow:Jh,getOrigin:function(){var r=Jh().location,t=r.origin;return t||(t=dt.getOriginFromUrl(r.href)),t}};function ju(){}ju.prototype.getItem=function(){return null},ju.prototype.removeItem=function(){},ju.prototype.setItem=function(){};var Wv=Nc(function(r,t){r.exports=function(){function i(){for(var s=0,a={};s<arguments.length;s++){var c=arguments[s];for(var l in c)a[l]=c[l]}return a}function o(s){return s.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function s(a){function c(){}function l(b,O,j){if("undefined"!=typeof document){"number"==typeof(j=i({path:"/"},c.defaults,j)).expires&&(j.expires=new Date(1*new Date+864e5*j.expires)),j.expires=j.expires?j.expires.toUTCString():"";try{var z=JSON.stringify(O);/^[\{\[]/.test(z)&&(O=z)}catch(re){}O=a.write?a.write(O,b):encodeURIComponent(String(O)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var $="";for(var Q in j)j[Q]&&($+="; "+Q,!0!==j[Q]&&($+="="+j[Q].split(";")[0]));return document.cookie=b+"="+O+$}}function f(b,O){if("undefined"!=typeof document){for(var j={},z=document.cookie?document.cookie.split("; "):[],$=0;$<z.length;$++){var Q=z[$].split("="),re=Q.slice(1).join("=");O||'"'!==re.charAt(0)||(re=re.slice(1,-1));try{var Ee=o(Q[0]);if(re=(a.read||a)(re,Ee)||o(re),O)try{re=JSON.parse(re)}catch(he){}if(j[Ee]=re,b===Ee)break}catch(he){}}return b?j[b]:j}}return c.set=l,c.get=function(b){return f(b,!1)},c.getJSON=function(b){return f(b,!0)},c.remove=function(b,O){l(b,"",i(O,{expires:-1}))},c.defaults={},c.withConverter=s,c}(function(){})}()});function Wc(){}function la(r){this.disableWarnings=r.disableWarnings}function Bu(r){if(this.warn=new la({}),this.storage=new Wc,!0===r.__tryLocalStorageFirst)try{var t=cn.getWindow().localStorage;t&&(this.storage=t)}catch(n){this.warn.warning(n),this.warn.warning("Can't use localStorage. Using CookieStorage instead.")}}function qc(r){this.handler=new Bu(r)}function Qh(r){this.storage=new qc(r)}function NO(r,t){return{error:r,errorDescription:t}}Wc.prototype.getItem=function(r){return Wv.get(r)},Wc.prototype.removeItem=function(r){Wv.remove(r)},Wc.prototype.setItem=function(r,t,n){var i=dt.extend({expires:1},n);"https:"===cn.getWindow().location.protocol&&(i.secure=!0),Wv.set(r,t,i)},la.prototype.warning=function(r){this.disableWarnings||console.warn(r)},Bu.prototype.failover=function(){this.storage instanceof ju?this.warn.warning("DummyStorage: ignore failover"):this.storage instanceof Wc?(this.warn.warning("CookieStorage: failing over DummyStorage"),this.storage=new ju):(this.warn.warning("LocalStorage: failing over CookieStorage"),this.storage=new Wc)},Bu.prototype.getItem=function(r){try{return this.storage.getItem(r)}catch(t){return this.warn.warning(t),this.failover(),this.getItem(r)}},Bu.prototype.removeItem=function(r){try{return this.storage.removeItem(r)}catch(t){return this.warn.warning(t),this.failover(),this.removeItem(r)}},Bu.prototype.setItem=function(r,t,n){try{return this.storage.setItem(r,t,n)}catch(i){return this.warn.warning(i),this.failover(),this.setItem(r,t,n)}},qc.prototype.getItem=function(r){var t=this.handler.getItem(r);try{return JSON.parse(t)}catch(n){return t}},qc.prototype.removeItem=function(r){return this.handler.removeItem(r)},qc.prototype.setItem=function(r,t,n){var i=JSON.stringify(t);return this.handler.setItem(r,i,n)},Qh.prototype.set=function(r,t){this.storage.setItem("auth0.ssodata",JSON.stringify({lastUsedConnection:r,lastUsedSub:t}))},Qh.prototype.get=function(){var r=this.storage.getItem("auth0.ssodata");if(r)return JSON.parse(r)};var hs={buildResponse:NO,invalidToken:function(r){return NO("invalid_token",r)}};function Gn(r,t){return(t=t||{}).ignoreCasing=!!t.ignoreCasing&&t.ignoreCasing,function(n,i){var o;return n||i?(!n&&i.err&&(n=i.err,i=null),!n&&i.error&&(n=i,i=null),n?(dt.updatePropertyOn(o={original:n},"original.response.req._data.password","*****"),n.response&&n.response.statusCode&&(o.statusCode=n.response.statusCode),n.response&&n.response.statusText&&(o.statusText=n.response.statusText),n.response&&n.response.body&&(n=n.response.body),n.err&&(n=n.err),o.code=n.code||n.error||n.error_code||n.status||null,o.description=n.errorDescription||n.error_description||n.description||n.error||n.details||n.err||null,t.forceLegacyError&&(o.error=o.code,o.error_description=o.description),n.error_codes&&n.error_details&&(o.errorDetails={codes:n.error_codes,details:n.error_details}),n.name&&(o.name=n.name),n.policy&&(o.policy=n.policy),r(o)):r(null,!i.type||"text/html"!==i.type&&"text/plain"!==i.type?t.ignoreCasing?i.body||i:dt.toCamelCase(i.body||i,[],{keepOriginal:t.keepOriginalCasing}):i.text)):r(hs.buildResponse("generic_error","Something went wrong"))}}var UG=["realm","audience","otp","client_id","client_secret","redirect_uri","scope","code","grant_type","username","password","refresh_token","assertion","client_assertion","client_assertion_type","code_verifier"],jG=["connection","connection_scope","auth0Client","owp","device","realm","organization","invitation","protocol","_csrf","_intstate","login_ticket","client_id","response_type","response_mode","redirect_uri","audience","scope","state","nonce","display","prompt","screen_hint","max_age","ui_locales","claims_locales","id_token_hint","login_hint","acr_values","claims","registration","request","request_uri","code_challenge","code_challenge_method","access_type","display"],ua="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function da(r){var t={exports:{}};return r(t,t.exports),t.exports}var BG=da(function(r,t){r.exports=function(){function n(Y){return"function"==typeof Y}var i=Array.isArray?Array.isArray:function(Y){return"[object Array]"===Object.prototype.toString.call(Y)},o=0,s=void 0,a=void 0,c=function(Y,se){$[o]=Y,$[o+1]=se,2===(o+=2)&&(a?a(Q):Fe())},l="undefined"!=typeof window?window:void 0,f=l||{},b=f.MutationObserver||f.WebKitMutationObserver,O="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),j="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function z(){var Y=setTimeout;return function(){return Y(Q,1)}}var $=new Array(1e3);function Q(){for(var Y=0;Y<o;Y+=2)(0,$[Y])($[Y+1]),$[Y]=void 0,$[Y+1]=void 0;o=0}var re,Ee,he,Ae,Fe=void 0;function Be(Y,se){var we=this,Me=new this.constructor(ht);void 0===Me[it]&&qt(Me);var Le=we._state;if(Le){var He=arguments[Le-1];c(function(){return pt(Le,Me,He,we._result)})}else Kr(we,Me,Y,se);return Me}function Ge(Y){if(Y&&"object"==typeof Y&&Y.constructor===this)return Y;var se=new this(ht);return Tt(se,Y),se}Fe=O?function(){return process.nextTick(Q)}:b?(Ee=0,he=new b(Q),Ae=document.createTextNode(""),he.observe(Ae,{characterData:!0}),function(){Ae.data=Ee=++Ee%2}):j?((re=new MessageChannel).port1.onmessage=Q,function(){return re.port2.postMessage(0)}):void 0===l?function(){try{var Y=Function("return this")().require("vertx");return void 0!==(s=Y.runOnLoop||Y.runOnContext)?function(){s(Q)}:z()}catch(se){return z()}}():z();var it=Math.random().toString(36).substring(2);function ht(){}var Ve=void 0;function Je(Y,se,we){var Me,Le;se.constructor===Y.constructor&&we===Be&&se.constructor.resolve===Ge?(Me=Y,1===(Le=se)._state?pn(Me,Le._result):2===Le._state?Zt(Me,Le._result):Kr(Le,void 0,function(He){return Tt(Me,He)},function(He){return Zt(Me,He)})):void 0===we?pn(Y,se):n(we)?function(Me,Le,He){c(function(Ke){var kt=!1,tn=function(rr,gi,ga,Yr){try{rr.call(gi,function(mi){kt||(kt=!0,Le!==mi?Tt(Ke,mi):pn(Ke,mi))},function(mi){kt||(kt=!0,Zt(Ke,mi))})}catch(mi){return mi}}(He,Le);!kt&&tn&&(kt=!0,Zt(Ke,tn))},Me)}(Y,se,we):pn(Y,se)}function Tt(Y,se){if(Y===se)Zt(Y,new TypeError("You cannot resolve a promise with itself"));else if(Le=typeof(Me=se),null===Me||"object"!==Le&&"function"!==Le)pn(Y,se);else{var we=void 0;try{we=se.then}catch(He){return void Zt(Y,He)}Je(Y,se,we)}var Me,Le}function Nn(Y){Y._onerror&&Y._onerror(Y._result),nt(Y)}function pn(Y,se){Y._state===Ve&&(Y._result=se,Y._state=1,0!==Y._subscribers.length&&c(nt,Y))}function Zt(Y,se){Y._state===Ve&&(Y._state=2,Y._result=se,c(Nn,Y))}function Kr(Y,se,we,Me){var Le=Y._subscribers,He=Le.length;Y._onerror=null,Le[He]=se,Le[He+1]=we,Le[He+2]=Me,0===He&&Y._state&&c(nt,Y)}function nt(Y){var se=Y._subscribers,we=Y._state;if(0!==se.length){for(var Me=void 0,Le=void 0,He=Y._result,Ke=0;Ke<se.length;Ke+=3)Le=se[Ke+we],(Me=se[Ke])?pt(we,Me,Le,He):Le(He);Y._subscribers.length=0}}function pt(Y,se,we,Me){var Le=n(we),He=void 0,Ke=void 0,kt=!0;if(Le){try{He=we(Me)}catch(tn){kt=!1,Ke=tn}if(se===He)return void Zt(se,new TypeError("A promises callback cannot return that same promise."))}else He=Me;se._state!==Ve||(Le&&kt?Tt(se,He):!1===kt?Zt(se,Ke):1===Y?pn(se,He):2===Y&&Zt(se,He))}var Ct=0;function qt(Y){Y[it]=Ct++,Y._state=void 0,Y._result=void 0,Y._subscribers=[]}var wn=function(){function Y(se,we){this._instanceConstructor=se,this.promise=new se(ht),this.promise[it]||qt(this.promise),i(we)?(this.length=we.length,this._remaining=we.length,this._result=new Array(this.length),0===this.length?pn(this.promise,this._result):(this.length=this.length||0,this._enumerate(we),0===this._remaining&&pn(this.promise,this._result))):Zt(this.promise,new Error("Array Methods must be provided an Array"))}return Y.prototype._enumerate=function(se){for(var we=0;this._state===Ve&&we<se.length;we++)this._eachEntry(se[we],we)},Y.prototype._eachEntry=function(se,we){var Me=this._instanceConstructor,Le=Me.resolve;if(Le===Ge){var He=void 0,Ke=void 0,kt=!1;try{He=se.then}catch(rr){kt=!0,Ke=rr}if(He===Be&&se._state!==Ve)this._settledAt(se._state,we,se._result);else if("function"!=typeof He)this._remaining--,this._result[we]=se;else if(Me===X){var tn=new Me(ht);kt?Zt(tn,Ke):Je(tn,se,He),this._willSettleAt(tn,we)}else this._willSettleAt(new Me(function(rr){return rr(se)}),we)}else this._willSettleAt(Le(se),we)},Y.prototype._settledAt=function(se,we,Me){var Le=this.promise;Le._state===Ve&&(this._remaining--,2===se?Zt(Le,Me):this._result[we]=Me),0===this._remaining&&pn(Le,this._result)},Y.prototype._willSettleAt=function(se,we){var Me=this;Kr(se,void 0,function(Le){return Me._settledAt(1,we,Le)},function(Le){return Me._settledAt(2,we,Le)})},Y}(),X=function(){function Y(se){this[it]=Ct++,this._result=this._state=void 0,this._subscribers=[],ht!==se&&("function"!=typeof se&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Y?function(we,Me){try{Me(function(Le){Tt(we,Le)},function(Le){Zt(we,Le)})}catch(Le){Zt(we,Le)}}(this,se):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Y.prototype.catch=function(se){return this.then(null,se)},Y.prototype.finally=function(se){var Me=this.constructor;return n(se)?this.then(function(Le){return Me.resolve(se()).then(function(){return Le})},function(Le){return Me.resolve(se()).then(function(){throw Le})}):this.then(se,se)},Y}();return X.prototype.then=Be,X.all=function(Y){return new wn(this,Y).promise},X.race=function(Y){var se=this;return i(Y)?new se(function(we,Me){for(var Le=Y.length,He=0;He<Le;He++)se.resolve(Y[He]).then(we,Me)}):new se(function(we,Me){return Me(new TypeError("You must pass an array to race."))})},X.resolve=Ge,X.reject=function(Y){var se=new this(ht);return Zt(se,Y),se},X._setScheduler=function(Y){a=Y},X._setAsap=function(Y){c=Y},X._asap=c,X.polyfill=function(){var Y=void 0;if(void 0!==ua)Y=ua;else if("undefined"!=typeof self)Y=self;else try{Y=Function("return this")()}catch(Me){throw new Error("polyfill failed because global object is unavailable in this environment")}var se=Y.Promise;if(se){var we=null;try{we=Object.prototype.toString.call(se.resolve())}catch(Me){}if("[object Promise]"===we&&!se.cast)return}Y.Promise=X},X.Promise=X,X}()}),HG={__proto__:null,default:{}},qv=da(function(r,t){var n;r.exports=n=n||function(i,o){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(s=globalThis.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==ua&&ua.crypto&&(s=ua.crypto),!s)try{s=HG}catch(he){}var a=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(he){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(he){}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function he(){}return function(Ae){var Fe;return he.prototype=Ae,Fe=new he,he.prototype=null,Fe}}(),l={},f=l.lib={},b=f.Base={extend:function(he){var Ae=c(this);return he&&Ae.mixIn(he),Ae.hasOwnProperty("init")&&this.init!==Ae.init||(Ae.init=function(){Ae.$super.init.apply(this,arguments)}),Ae.init.prototype=Ae,Ae.$super=this,Ae},create:function(){var he=this.extend();return he.init.apply(he,arguments),he},init:function(){},mixIn:function(he){for(var Ae in he)he.hasOwnProperty(Ae)&&(this[Ae]=he[Ae]);he.hasOwnProperty("toString")&&(this.toString=he.toString)},clone:function(){return this.init.prototype.extend(this)}},O=f.WordArray=b.extend({init:function(he,Ae){he=this.words=he||[],this.sigBytes=null!=Ae?Ae:4*he.length},toString:function(he){return(he||z).stringify(this)},concat:function(he){var Ae=this.words,Fe=he.words,Be=this.sigBytes,Ge=he.sigBytes;if(this.clamp(),Be%4)for(var it=0;it<Ge;it++)Ae[Be+it>>>2]|=(Fe[it>>>2]>>>24-it%4*8&255)<<24-(Be+it)%4*8;else for(var ht=0;ht<Ge;ht+=4)Ae[Be+ht>>>2]=Fe[ht>>>2];return this.sigBytes+=Ge,this},clamp:function(){var he=this.words,Ae=this.sigBytes;he[Ae>>>2]&=4294967295<<32-Ae%4*8,he.length=i.ceil(Ae/4)},clone:function(){var he=b.clone.call(this);return he.words=this.words.slice(0),he},random:function(he){for(var Ae=[],Fe=0;Fe<he;Fe+=4)Ae.push(a());return new O.init(Ae,he)}}),j=l.enc={},z=j.Hex={stringify:function(he){for(var Ae=he.words,Fe=he.sigBytes,Be=[],Ge=0;Ge<Fe;Ge++){var it=Ae[Ge>>>2]>>>24-Ge%4*8&255;Be.push((it>>>4).toString(16)),Be.push((15&it).toString(16))}return Be.join("")},parse:function(he){for(var Ae=he.length,Fe=[],Be=0;Be<Ae;Be+=2)Fe[Be>>>3]|=parseInt(he.substr(Be,2),16)<<24-Be%8*4;return new O.init(Fe,Ae/2)}},$=j.Latin1={stringify:function(he){for(var Ae=he.words,Fe=he.sigBytes,Be=[],Ge=0;Ge<Fe;Ge++)Be.push(String.fromCharCode(Ae[Ge>>>2]>>>24-Ge%4*8&255));return Be.join("")},parse:function(he){for(var Ae=he.length,Fe=[],Be=0;Be<Ae;Be++)Fe[Be>>>2]|=(255&he.charCodeAt(Be))<<24-Be%4*8;return new O.init(Fe,Ae)}},Q=j.Utf8={stringify:function(he){try{return decodeURIComponent(escape($.stringify(he)))}catch(Ae){throw new Error("Malformed UTF-8 data")}},parse:function(he){return $.parse(unescape(encodeURIComponent(he)))}},re=f.BufferedBlockAlgorithm=b.extend({reset:function(){this._data=new O.init,this._nDataBytes=0},_append:function(he){"string"==typeof he&&(he=Q.parse(he)),this._data.concat(he),this._nDataBytes+=he.sigBytes},_process:function(he){var Ae,Fe=this._data,Be=Fe.words,Ge=Fe.sigBytes,it=this.blockSize,ht=Ge/(4*it),Ve=(ht=he?i.ceil(ht):i.max((0|ht)-this._minBufferSize,0))*it,Je=i.min(4*Ve,Ge);if(Ve){for(var Tt=0;Tt<Ve;Tt+=it)this._doProcessBlock(Be,Tt);Ae=Be.splice(0,Ve),Fe.sigBytes-=Je}return new O.init(Ae,Je)},clone:function(){var he=b.clone.call(this);return he._data=this._data.clone(),he},_minBufferSize:0});f.Hasher=re.extend({cfg:b.extend(),init:function(he){this.cfg=this.cfg.extend(he),this.reset()},reset:function(){re.reset.call(this),this._doReset()},update:function(he){return this._append(he),this._process(),this},finalize:function(he){return he&&this._append(he),this._doFinalize()},blockSize:16,_createHelper:function(he){return function(Ae,Fe){return new he.init(Fe).finalize(Ae)}},_createHmacHelper:function(he){return function(Ae,Fe){return new Ee.HMAC.init(he,Fe).finalize(Ae)}}});var Ee=l.algo={};return l}(Math)}),PO=da(function(r,t){var n;r.exports=(n=qv,function(i){var o=n,s=o.lib,a=s.WordArray,c=s.Hasher,l=o.algo,f=[],b=[];!function(){function z(Ee){for(var he=i.sqrt(Ee),Ae=2;Ae<=he;Ae++)if(!(Ee%Ae))return!1;return!0}function $(Ee){return 4294967296*(Ee-(0|Ee))|0}for(var Q=2,re=0;re<64;)z(Q)&&(re<8&&(f[re]=$(i.pow(Q,.5))),b[re]=$(i.pow(Q,1/3)),re++),Q++}();var O=[],j=l.SHA256=c.extend({_doReset:function(){this._hash=new a.init(f.slice(0))},_doProcessBlock:function(z,$){for(var Q=this._hash.words,re=Q[0],Ee=Q[1],he=Q[2],Ae=Q[3],Fe=Q[4],Be=Q[5],Ge=Q[6],it=Q[7],ht=0;ht<64;ht++){if(ht<16)O[ht]=0|z[$+ht];else{var Ve=O[ht-15],Je=O[ht-2];O[ht]=((Ve<<25|Ve>>>7)^(Ve<<14|Ve>>>18)^Ve>>>3)+O[ht-7]+((Je<<15|Je>>>17)^(Je<<13|Je>>>19)^Je>>>10)+O[ht-16]}var Tt=re&Ee^re&he^Ee&he,Nn=it+((Fe<<26|Fe>>>6)^(Fe<<21|Fe>>>11)^(Fe<<7|Fe>>>25))+(Fe&Be^~Fe&Ge)+b[ht]+O[ht];it=Ge,Ge=Be,Be=Fe,Fe=Ae+Nn|0,Ae=he,he=Ee,Ee=re,re=Nn+(((re<<30|re>>>2)^(re<<19|re>>>13)^(re<<10|re>>>22))+Tt)|0}Q[0]=Q[0]+re|0,Q[1]=Q[1]+Ee|0,Q[2]=Q[2]+he|0,Q[3]=Q[3]+Ae|0,Q[4]=Q[4]+Fe|0,Q[5]=Q[5]+Be|0,Q[6]=Q[6]+Ge|0,Q[7]=Q[7]+it|0},_doFinalize:function(){var z=this._data,$=z.words,Q=8*this._nDataBytes,re=8*z.sigBytes;return $[re>>>5]|=128<<24-re%32,$[14+(re+64>>>9<<4)]=i.floor(Q/4294967296),$[15+(re+64>>>9<<4)]=Q,z.sigBytes=4*$.length,this._process(),this._hash},clone:function(){var z=c.clone.call(this);return z._hash=this._hash.clone(),z}});o.SHA256=c._createHelper(j),o.HmacSHA256=c._createHmacHelper(j)}(Math),n.SHA256)}),WG=da(function(r,t){var n,i;r.exports=(i=(n=qv).lib.WordArray,n.enc.Base64={stringify:function(o){var s=o.words,a=o.sigBytes,c=this._map;o.clamp();for(var l=[],f=0;f<a;f+=3)for(var b=(s[f>>>2]>>>24-f%4*8&255)<<16|(s[f+1>>>2]>>>24-(f+1)%4*8&255)<<8|s[f+2>>>2]>>>24-(f+2)%4*8&255,O=0;O<4&&f+.75*O<a;O++)l.push(c.charAt(b>>>6*(3-O)&63));var j=c.charAt(64);if(j)for(;l.length%4;)l.push(j);return l.join("")},parse:function(o){var s=o.length,a=this._map,c=this._reverseMap;if(!c){c=this._reverseMap=[];for(var l=0;l<a.length;l++)c[a.charCodeAt(l)]=l}var f=a.charAt(64);if(f){var b=o.indexOf(f);-1!==b&&(s=b)}return function(O,j,z){for(var $=[],Q=0,re=0;re<j;re++)if(re%4){var Ee=z[O.charCodeAt(re-1)]<<re%4*2,he=z[O.charCodeAt(re)]>>>6-re%4*2;$[Q>>>2]|=(Ee|he)<<24-Q%4*8,Q++}return i.create($,Q)}(o,s,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)}),xO=da(function(r,t){r.exports=qv.enc.Hex}),LO=da(function(r,t){(function(){var n;function i(X,Y,se){null!=X&&("number"==typeof X?this.fromNumber(X,Y,se):this.fromString(X,null==Y&&"string"!=typeof X?256:Y))}function o(){return new i(null)}var s="undefined"!=typeof navigator;s&&"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=function(X,Y,se,we,Me,Le){for(var He=32767&Y,Ke=Y>>15;--Le>=0;){var kt=32767&this[X],tn=this[X++]>>15,rr=Ke*kt+tn*He;Me=((kt=He*kt+((32767&rr)<<15)+se[we]+(1073741823&Me))>>>30)+(rr>>>15)+Ke*tn+(Me>>>30),se[we++]=1073741823&kt}return Me},n=30):s&&"Netscape"!=navigator.appName?(i.prototype.am=function(X,Y,se,we,Me,Le){for(;--Le>=0;){var He=Y*this[X++]+se[we]+Me;Me=Math.floor(He/67108864),se[we++]=67108863&He}return Me},n=26):(i.prototype.am=function(X,Y,se,we,Me,Le){for(var He=16383&Y,Ke=Y>>14;--Le>=0;){var kt=16383&this[X],tn=this[X++]>>14,rr=Ke*kt+tn*He;Me=((kt=He*kt+((16383&rr)<<14)+se[we]+Me)>>28)+(rr>>14)+Ke*tn,se[we++]=268435455&kt}return Me},n=28),i.prototype.DB=n,i.prototype.DM=(1<<n)-1,i.prototype.DV=1<<n,i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-n,i.prototype.F2=2*n-52;var a,c,l=new Array;for(a="0".charCodeAt(0),c=0;c<=9;++c)l[a++]=c;for(a="a".charCodeAt(0),c=10;c<36;++c)l[a++]=c;for(a="A".charCodeAt(0),c=10;c<36;++c)l[a++]=c;function f(X){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(X)}function b(X,Y){var se=l[X.charCodeAt(Y)];return null==se?-1:se}function O(X){var Y=o();return Y.fromInt(X),Y}function j(X){var Y,se=1;return 0!=(Y=X>>>16)&&(X=Y,se+=16),0!=(Y=X>>8)&&(X=Y,se+=8),0!=(Y=X>>4)&&(X=Y,se+=4),0!=(Y=X>>2)&&(X=Y,se+=2),0!=(Y=X>>1)&&(X=Y,se+=1),se}function z(X){this.m=X}function $(X){this.m=X,this.mp=X.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<X.DB-15)-1,this.mt2=2*X.t}function Q(X,Y){return X&Y}function re(X,Y){return X|Y}function Ee(X,Y){return X^Y}function he(X,Y){return X&~Y}function Ae(X){if(0==X)return-1;var Y=0;return 0==(65535&X)&&(X>>=16,Y+=16),0==(255&X)&&(X>>=8,Y+=8),0==(15&X)&&(X>>=4,Y+=4),0==(3&X)&&(X>>=2,Y+=2),0==(1&X)&&++Y,Y}function Fe(X){for(var Y=0;0!=X;)X&=X-1,++Y;return Y}function Be(){}function Ge(X){return X}function it(X){this.r2=o(),this.q3=o(),i.ONE.dlShiftTo(2*X.t,this.r2),this.mu=this.r2.divide(X),this.m=X}z.prototype.convert=function(X){return X.s<0||X.compareTo(this.m)>=0?X.mod(this.m):X},z.prototype.revert=function(X){return X},z.prototype.reduce=function(X){X.divRemTo(this.m,null,X)},z.prototype.mulTo=function(X,Y,se){X.multiplyTo(Y,se),this.reduce(se)},z.prototype.sqrTo=function(X,Y){X.squareTo(Y),this.reduce(Y)},$.prototype.convert=function(X){var Y=o();return X.abs().dlShiftTo(this.m.t,Y),Y.divRemTo(this.m,null,Y),X.s<0&&Y.compareTo(i.ZERO)>0&&this.m.subTo(Y,Y),Y},$.prototype.revert=function(X){var Y=o();return X.copyTo(Y),this.reduce(Y),Y},$.prototype.reduce=function(X){for(;X.t<=this.mt2;)X[X.t++]=0;for(var Y=0;Y<this.m.t;++Y){var se=32767&X[Y],we=se*this.mpl+((se*this.mph+(X[Y]>>15)*this.mpl&this.um)<<15)&X.DM;for(X[se=Y+this.m.t]+=this.m.am(0,we,X,Y,0,this.m.t);X[se]>=X.DV;)X[se]-=X.DV,X[++se]++}X.clamp(),X.drShiftTo(this.m.t,X),X.compareTo(this.m)>=0&&X.subTo(this.m,X)},$.prototype.mulTo=function(X,Y,se){X.multiplyTo(Y,se),this.reduce(se)},$.prototype.sqrTo=function(X,Y){X.squareTo(Y),this.reduce(Y)},i.prototype.copyTo=function(X){for(var Y=this.t-1;Y>=0;--Y)X[Y]=this[Y];X.t=this.t,X.s=this.s},i.prototype.fromInt=function(X){this.t=1,this.s=X<0?-1:0,X>0?this[0]=X:X<-1?this[0]=X+this.DV:this.t=0},i.prototype.fromString=function(X,Y){var se;if(16==Y)se=4;else if(8==Y)se=3;else if(256==Y)se=8;else if(2==Y)se=1;else if(32==Y)se=5;else{if(4!=Y)return void this.fromRadix(X,Y);se=2}this.t=0,this.s=0;for(var we=X.length,Me=!1,Le=0;--we>=0;){var He=8==se?255&X[we]:b(X,we);He<0?"-"==X.charAt(we)&&(Me=!0):(Me=!1,0==Le?this[this.t++]=He:Le+se>this.DB?(this[this.t-1]|=(He&(1<<this.DB-Le)-1)<<Le,this[this.t++]=He>>this.DB-Le):this[this.t-1]|=He<<Le,(Le+=se)>=this.DB&&(Le-=this.DB))}8==se&&0!=(128&X[0])&&(this.s=-1,Le>0&&(this[this.t-1]|=(1<<this.DB-Le)-1<<Le)),this.clamp(),Me&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var X=this.s&this.DM;this.t>0&&this[this.t-1]==X;)--this.t},i.prototype.dlShiftTo=function(X,Y){var se;for(se=this.t-1;se>=0;--se)Y[se+X]=this[se];for(se=X-1;se>=0;--se)Y[se]=0;Y.t=this.t+X,Y.s=this.s},i.prototype.drShiftTo=function(X,Y){for(var se=X;se<this.t;++se)Y[se-X]=this[se];Y.t=Math.max(this.t-X,0),Y.s=this.s},i.prototype.lShiftTo=function(X,Y){var se,we=X%this.DB,Me=this.DB-we,Le=(1<<Me)-1,He=Math.floor(X/this.DB),Ke=this.s<<we&this.DM;for(se=this.t-1;se>=0;--se)Y[se+He+1]=this[se]>>Me|Ke,Ke=(this[se]&Le)<<we;for(se=He-1;se>=0;--se)Y[se]=0;Y[He]=Ke,Y.t=this.t+He+1,Y.s=this.s,Y.clamp()},i.prototype.rShiftTo=function(X,Y){Y.s=this.s;var se=Math.floor(X/this.DB);if(se>=this.t)Y.t=0;else{var we=X%this.DB,Me=this.DB-we,Le=(1<<we)-1;Y[0]=this[se]>>we;for(var He=se+1;He<this.t;++He)Y[He-se-1]|=(this[He]&Le)<<Me,Y[He-se]=this[He]>>we;we>0&&(Y[this.t-se-1]|=(this.s&Le)<<Me),Y.t=this.t-se,Y.clamp()}},i.prototype.subTo=function(X,Y){for(var se=0,we=0,Me=Math.min(X.t,this.t);se<Me;)we+=this[se]-X[se],Y[se++]=we&this.DM,we>>=this.DB;if(X.t<this.t){for(we-=X.s;se<this.t;)we+=this[se],Y[se++]=we&this.DM,we>>=this.DB;we+=this.s}else{for(we+=this.s;se<X.t;)we-=X[se],Y[se++]=we&this.DM,we>>=this.DB;we-=X.s}Y.s=we<0?-1:0,we<-1?Y[se++]=this.DV+we:we>0&&(Y[se++]=we),Y.t=se,Y.clamp()},i.prototype.multiplyTo=function(X,Y){var se=this.abs(),we=X.abs(),Me=se.t;for(Y.t=Me+we.t;--Me>=0;)Y[Me]=0;for(Me=0;Me<we.t;++Me)Y[Me+se.t]=se.am(0,we[Me],Y,Me,0,se.t);Y.s=0,Y.clamp(),this.s!=X.s&&i.ZERO.subTo(Y,Y)},i.prototype.squareTo=function(X){for(var Y=this.abs(),se=X.t=2*Y.t;--se>=0;)X[se]=0;for(se=0;se<Y.t-1;++se){var we=Y.am(se,Y[se],X,2*se,0,1);(X[se+Y.t]+=Y.am(se+1,2*Y[se],X,2*se+1,we,Y.t-se-1))>=Y.DV&&(X[se+Y.t]-=Y.DV,X[se+Y.t+1]=1)}X.t>0&&(X[X.t-1]+=Y.am(se,Y[se],X,2*se,0,1)),X.s=0,X.clamp()},i.prototype.divRemTo=function(X,Y,se){var we=X.abs();if(!(we.t<=0)){var Me=this.abs();if(Me.t<we.t)return null!=Y&&Y.fromInt(0),void(null!=se&&this.copyTo(se));null==se&&(se=o());var Le=o(),He=this.s,Ke=X.s,kt=this.DB-j(we[we.t-1]);kt>0?(we.lShiftTo(kt,Le),Me.lShiftTo(kt,se)):(we.copyTo(Le),Me.copyTo(se));var tn=Le.t,rr=Le[tn-1];if(0!=rr){var gi=rr*(1<<this.F1)+(tn>1?Le[tn-2]>>this.F2:0),ga=this.FV/gi,Yr=(1<<this.F1)/gi,mi=1<<this.F2,mr=se.t,ap=mr-tn,ps=null==Y?o():Y;for(Le.dlShiftTo(ap,ps),se.compareTo(ps)>=0&&(se[se.t++]=1,se.subTo(ps,se)),i.ONE.dlShiftTo(tn,ps),ps.subTo(Le,Le);Le.t<tn;)Le[Le.t++]=0;for(;--ap>=0;){var s1=se[--mr]==rr?this.DM:Math.floor(se[mr]*ga+(se[mr-1]+mi)*Yr);if((se[mr]+=Le.am(0,s1,se,ap,0,tn))<s1)for(Le.dlShiftTo(ap,ps),se.subTo(ps,se);se[mr]<--s1;)se.subTo(ps,se)}null!=Y&&(se.drShiftTo(tn,Y),He!=Ke&&i.ZERO.subTo(Y,Y)),se.t=tn,se.clamp(),kt>0&&se.rShiftTo(kt,se),He<0&&i.ZERO.subTo(se,se)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var X=this[0];if(0==(1&X))return 0;var Y=3&X;return(Y=(Y=(Y=(Y=Y*(2-(15&X)*Y)&15)*(2-(255&X)*Y)&255)*(2-((65535&X)*Y&65535))&65535)*(2-X*Y%this.DV)%this.DV)>0?this.DV-Y:-Y},i.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},i.prototype.exp=function(X,Y){if(X>4294967295||X<1)return i.ONE;var se=o(),we=o(),Me=Y.convert(this),Le=j(X)-1;for(Me.copyTo(se);--Le>=0;)if(Y.sqrTo(se,we),(X&1<<Le)>0)Y.mulTo(we,Me,se);else{var He=se;se=we,we=He}return Y.revert(se)},i.prototype.toString=function(X){if(this.s<0)return"-"+this.negate().toString(X);var Y;if(16==X)Y=4;else if(8==X)Y=3;else if(2==X)Y=1;else if(32==X)Y=5;else{if(4!=X)return this.toRadix(X);Y=2}var se,we=(1<<Y)-1,Me=!1,Le="",He=this.t,Ke=this.DB-He*this.DB%Y;if(He-- >0)for(Ke<this.DB&&(se=this[He]>>Ke)>0&&(Me=!0,Le=f(se));He>=0;)Ke<Y?(se=(this[He]&(1<<Ke)-1)<<Y-Ke,se|=this[--He]>>(Ke+=this.DB-Y)):(se=this[He]>>(Ke-=Y)&we,Ke<=0&&(Ke+=this.DB,--He)),se>0&&(Me=!0),Me&&(Le+=f(se));return Me?Le:"0"},i.prototype.negate=function(){var X=o();return i.ZERO.subTo(this,X),X},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(X){var Y=this.s-X.s;if(0!=Y)return Y;var se=this.t;if(0!=(Y=se-X.t))return this.s<0?-Y:Y;for(;--se>=0;)if(0!=(Y=this[se]-X[se]))return Y;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+j(this[this.t-1]^this.s&this.DM)},i.prototype.mod=function(X){var Y=o();return this.abs().divRemTo(X,null,Y),this.s<0&&Y.compareTo(i.ZERO)>0&&X.subTo(Y,Y),Y},i.prototype.modPowInt=function(X,Y){var se;return se=X<256||Y.isEven()?new z(Y):new $(Y),this.exp(X,se)},i.ZERO=O(0),i.ONE=O(1),Be.prototype.convert=Ge,Be.prototype.revert=Ge,Be.prototype.mulTo=function(X,Y,se){X.multiplyTo(Y,se)},Be.prototype.sqrTo=function(X,Y){X.squareTo(Y)},it.prototype.convert=function(X){if(X.s<0||X.t>2*this.m.t)return X.mod(this.m);if(X.compareTo(this.m)<0)return X;var Y=o();return X.copyTo(Y),this.reduce(Y),Y},it.prototype.revert=function(X){return X},it.prototype.reduce=function(X){for(X.drShiftTo(this.m.t-1,this.r2),X.t>this.m.t+1&&(X.t=this.m.t+1,X.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);X.compareTo(this.r2)<0;)X.dAddOffset(1,this.m.t+1);for(X.subTo(this.r2,X);X.compareTo(this.m)>=0;)X.subTo(this.m,X)},it.prototype.mulTo=function(X,Y,se){X.multiplyTo(Y,se),this.reduce(se)},it.prototype.sqrTo=function(X,Y){X.squareTo(Y),this.reduce(Y)};var ht,Ve,Je,Tt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Nn=(1<<26)/Tt[Tt.length-1];function pn(){var X;X=(new Date).getTime(),Ve[Je++]^=255&X,Ve[Je++]^=X>>8&255,Ve[Je++]^=X>>16&255,Ve[Je++]^=X>>24&255,Je>=wn&&(Je-=wn)}if(i.prototype.chunkSize=function(X){return Math.floor(Math.LN2*this.DB/Math.log(X))},i.prototype.toRadix=function(X){if(null==X&&(X=10),0==this.signum()||X<2||X>36)return"0";var Y=this.chunkSize(X),se=Math.pow(X,Y),we=O(se),Me=o(),Le=o(),He="";for(this.divRemTo(we,Me,Le);Me.signum()>0;)He=(se+Le.intValue()).toString(X).substr(1)+He,Me.divRemTo(we,Me,Le);return Le.intValue().toString(X)+He},i.prototype.fromRadix=function(X,Y){this.fromInt(0),null==Y&&(Y=10);for(var se=this.chunkSize(Y),we=Math.pow(Y,se),Me=!1,Le=0,He=0,Ke=0;Ke<X.length;++Ke){var kt=b(X,Ke);kt<0?"-"==X.charAt(Ke)&&0==this.signum()&&(Me=!0):(He=Y*He+kt,++Le>=se&&(this.dMultiply(we),this.dAddOffset(He,0),Le=0,He=0))}Le>0&&(this.dMultiply(Math.pow(Y,Le)),this.dAddOffset(He,0)),Me&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(X,Y,se){if("number"==typeof Y)if(X<2)this.fromInt(1);else for(this.fromNumber(X,se),this.testBit(X-1)||this.bitwiseTo(i.ONE.shiftLeft(X-1),re,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(Y);)this.dAddOffset(2,0),this.bitLength()>X&&this.subTo(i.ONE.shiftLeft(X-1),this);else{var we=new Array,Me=7&X;we.length=1+(X>>3),Y.nextBytes(we),Me>0?we[0]&=(1<<Me)-1:we[0]=0,this.fromString(we,256)}},i.prototype.bitwiseTo=function(X,Y,se){var we,Me,Le=Math.min(X.t,this.t);for(we=0;we<Le;++we)se[we]=Y(this[we],X[we]);if(X.t<this.t){for(Me=X.s&this.DM,we=Le;we<this.t;++we)se[we]=Y(this[we],Me);se.t=this.t}else{for(Me=this.s&this.DM,we=Le;we<X.t;++we)se[we]=Y(Me,X[we]);se.t=X.t}se.s=Y(this.s,X.s),se.clamp()},i.prototype.changeBit=function(X,Y){var se=i.ONE.shiftLeft(X);return this.bitwiseTo(se,Y,se),se},i.prototype.addTo=function(X,Y){for(var se=0,we=0,Me=Math.min(X.t,this.t);se<Me;)we+=this[se]+X[se],Y[se++]=we&this.DM,we>>=this.DB;if(X.t<this.t){for(we+=X.s;se<this.t;)we+=this[se],Y[se++]=we&this.DM,we>>=this.DB;we+=this.s}else{for(we+=this.s;se<X.t;)we+=X[se],Y[se++]=we&this.DM,we>>=this.DB;we+=X.s}Y.s=we<0?-1:0,we>0?Y[se++]=we:we<-1&&(Y[se++]=this.DV+we),Y.t=se,Y.clamp()},i.prototype.dMultiply=function(X){this[this.t]=this.am(0,X-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(X,Y){if(0!=X){for(;this.t<=Y;)this[this.t++]=0;for(this[Y]+=X;this[Y]>=this.DV;)this[Y]-=this.DV,++Y>=this.t&&(this[this.t++]=0),++this[Y]}},i.prototype.multiplyLowerTo=function(X,Y,se){var we,Me=Math.min(this.t+X.t,Y);for(se.s=0,se.t=Me;Me>0;)se[--Me]=0;for(we=se.t-this.t;Me<we;++Me)se[Me+this.t]=this.am(0,X[Me],se,Me,0,this.t);for(we=Math.min(X.t,Y);Me<we;++Me)this.am(0,X[Me],se,Me,0,Y-Me);se.clamp()},i.prototype.multiplyUpperTo=function(X,Y,se){--Y;var we=se.t=this.t+X.t-Y;for(se.s=0;--we>=0;)se[we]=0;for(we=Math.max(Y-this.t,0);we<X.t;++we)se[this.t+we-Y]=this.am(Y-we,X[we],se,0,0,this.t+we-Y);se.clamp(),se.drShiftTo(1,se)},i.prototype.modInt=function(X){if(X<=0)return 0;var Y=this.DV%X,se=this.s<0?X-1:0;if(this.t>0)if(0==Y)se=this[0]%X;else for(var we=this.t-1;we>=0;--we)se=(Y*se+this[we])%X;return se},i.prototype.millerRabin=function(X){var Y=this.subtract(i.ONE),se=Y.getLowestSetBit();if(se<=0)return!1;var we=Y.shiftRight(se);(X=X+1>>1)>Tt.length&&(X=Tt.length);for(var Me=o(),Le=0;Le<X;++Le){Me.fromInt(Tt[Math.floor(Math.random()*Tt.length)]);var He=Me.modPow(we,this);if(0!=He.compareTo(i.ONE)&&0!=He.compareTo(Y)){for(var Ke=1;Ke++<se&&0!=He.compareTo(Y);)if(0==(He=He.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=He.compareTo(Y))return!1}}return!0},i.prototype.clone=function(){var X=o();return this.copyTo(X),X},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},i.prototype.toByteArray=function(){var X=this.t,Y=new Array;Y[0]=this.s;var se,we=this.DB-X*this.DB%8,Me=0;if(X-- >0)for(we<this.DB&&(se=this[X]>>we)!=(this.s&this.DM)>>we&&(Y[Me++]=se|this.s<<this.DB-we);X>=0;)we<8?(se=(this[X]&(1<<we)-1)<<8-we,se|=this[--X]>>(we+=this.DB-8)):(se=this[X]>>(we-=8)&255,we<=0&&(we+=this.DB,--X)),0!=(128&se)&&(se|=-256),0==Me&&(128&this.s)!=(128&se)&&++Me,(Me>0||se!=this.s)&&(Y[Me++]=se);return Y},i.prototype.equals=function(X){return 0==this.compareTo(X)},i.prototype.min=function(X){return this.compareTo(X)<0?this:X},i.prototype.max=function(X){return this.compareTo(X)>0?this:X},i.prototype.and=function(X){var Y=o();return this.bitwiseTo(X,Q,Y),Y},i.prototype.or=function(X){var Y=o();return this.bitwiseTo(X,re,Y),Y},i.prototype.xor=function(X){var Y=o();return this.bitwiseTo(X,Ee,Y),Y},i.prototype.andNot=function(X){var Y=o();return this.bitwiseTo(X,he,Y),Y},i.prototype.not=function(){for(var X=o(),Y=0;Y<this.t;++Y)X[Y]=this.DM&~this[Y];return X.t=this.t,X.s=~this.s,X},i.prototype.shiftLeft=function(X){var Y=o();return X<0?this.rShiftTo(-X,Y):this.lShiftTo(X,Y),Y},i.prototype.shiftRight=function(X){var Y=o();return X<0?this.lShiftTo(-X,Y):this.rShiftTo(X,Y),Y},i.prototype.getLowestSetBit=function(){for(var X=0;X<this.t;++X)if(0!=this[X])return X*this.DB+Ae(this[X]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var X=0,Y=this.s&this.DM,se=0;se<this.t;++se)X+=Fe(this[se]^Y);return X},i.prototype.testBit=function(X){var Y=Math.floor(X/this.DB);return Y>=this.t?0!=this.s:0!=(this[Y]&1<<X%this.DB)},i.prototype.setBit=function(X){return this.changeBit(X,re)},i.prototype.clearBit=function(X){return this.changeBit(X,he)},i.prototype.flipBit=function(X){return this.changeBit(X,Ee)},i.prototype.add=function(X){var Y=o();return this.addTo(X,Y),Y},i.prototype.subtract=function(X){var Y=o();return this.subTo(X,Y),Y},i.prototype.multiply=function(X){var Y=o();return this.multiplyTo(X,Y),Y},i.prototype.divide=function(X){var Y=o();return this.divRemTo(X,Y,null),Y},i.prototype.remainder=function(X){var Y=o();return this.divRemTo(X,null,Y),Y},i.prototype.divideAndRemainder=function(X){var Y=o(),se=o();return this.divRemTo(X,Y,se),new Array(Y,se)},i.prototype.modPow=function(X,Y){var se,we,Me=X.bitLength(),Le=O(1);if(Me<=0)return Le;se=Me<18?1:Me<48?3:Me<144?4:Me<768?5:6,we=Me<8?new z(Y):Y.isEven()?new it(Y):new $(Y);var He=new Array,Ke=3,kt=se-1,tn=(1<<se)-1;if(He[1]=we.convert(this),se>1){var rr=o();for(we.sqrTo(He[1],rr);Ke<=tn;)He[Ke]=o(),we.mulTo(rr,He[Ke-2],He[Ke]),Ke+=2}var gi,ga,Yr=X.t-1,mi=!0,mr=o();for(Me=j(X[Yr])-1;Yr>=0;){for(Me>=kt?gi=X[Yr]>>Me-kt&tn:(gi=(X[Yr]&(1<<Me+1)-1)<<kt-Me,Yr>0&&(gi|=X[Yr-1]>>this.DB+Me-kt)),Ke=se;0==(1&gi);)gi>>=1,--Ke;if((Me-=Ke)<0&&(Me+=this.DB,--Yr),mi)He[gi].copyTo(Le),mi=!1;else{for(;Ke>1;)we.sqrTo(Le,mr),we.sqrTo(mr,Le),Ke-=2;Ke>0?we.sqrTo(Le,mr):(ga=Le,Le=mr,mr=ga),we.mulTo(mr,He[gi],Le)}for(;Yr>=0&&0==(X[Yr]&1<<Me);)we.sqrTo(Le,mr),ga=Le,Le=mr,mr=ga,--Me<0&&(Me=this.DB-1,--Yr)}return we.revert(Le)},i.prototype.modInverse=function(X){var Y=X.isEven();if(this.isEven()&&Y||0==X.signum())return i.ZERO;for(var se=X.clone(),we=this.clone(),Me=O(1),Le=O(0),He=O(0),Ke=O(1);0!=se.signum();){for(;se.isEven();)se.rShiftTo(1,se),Y?(Me.isEven()&&Le.isEven()||(Me.addTo(this,Me),Le.subTo(X,Le)),Me.rShiftTo(1,Me)):Le.isEven()||Le.subTo(X,Le),Le.rShiftTo(1,Le);for(;we.isEven();)we.rShiftTo(1,we),Y?(He.isEven()&&Ke.isEven()||(He.addTo(this,He),Ke.subTo(X,Ke)),He.rShiftTo(1,He)):Ke.isEven()||Ke.subTo(X,Ke),Ke.rShiftTo(1,Ke);se.compareTo(we)>=0?(se.subTo(we,se),Y&&Me.subTo(He,Me),Le.subTo(Ke,Le)):(we.subTo(se,we),Y&&He.subTo(Me,He),Ke.subTo(Le,Ke))}return 0!=we.compareTo(i.ONE)?i.ZERO:Ke.compareTo(X)>=0?Ke.subtract(X):Ke.signum()<0?(Ke.addTo(X,Ke),Ke.signum()<0?Ke.add(X):Ke):Ke},i.prototype.pow=function(X){return this.exp(X,new Be)},i.prototype.gcd=function(X){var Y=this.s<0?this.negate():this.clone(),se=X.s<0?X.negate():X.clone();if(Y.compareTo(se)<0){var we=Y;Y=se,se=we}var Me=Y.getLowestSetBit(),Le=se.getLowestSetBit();if(Le<0)return Y;for(Me<Le&&(Le=Me),Le>0&&(Y.rShiftTo(Le,Y),se.rShiftTo(Le,se));Y.signum()>0;)(Me=Y.getLowestSetBit())>0&&Y.rShiftTo(Me,Y),(Me=se.getLowestSetBit())>0&&se.rShiftTo(Me,se),Y.compareTo(se)>=0?(Y.subTo(se,Y),Y.rShiftTo(1,Y)):(se.subTo(Y,se),se.rShiftTo(1,se));return Le>0&&se.lShiftTo(Le,se),se},i.prototype.isProbablePrime=function(X){var Y,se=this.abs();if(1==se.t&&se[0]<=Tt[Tt.length-1]){for(Y=0;Y<Tt.length;++Y)if(se[0]==Tt[Y])return!0;return!1}if(se.isEven())return!1;for(Y=1;Y<Tt.length;){for(var we=Tt[Y],Me=Y+1;Me<Tt.length&&we<Nn;)we*=Tt[Me++];for(we=se.modInt(we);Y<Me;)if(we%Tt[Y++]==0)return!1}return se.millerRabin(X)},i.prototype.square=function(){var X=o();return this.squareTo(X),X},i.prototype.Barrett=it,null==Ve){var Zt;if(Ve=new Array,Je=0,"undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var Kr=new Uint8Array(32);for(window.crypto.getRandomValues(Kr),Zt=0;Zt<32;++Zt)Ve[Je++]=Kr[Zt]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var nt=window.crypto.random(32);for(Zt=0;Zt<nt.length;++Zt)Ve[Je++]=255&nt.charCodeAt(Zt)}for(;Je<wn;)Zt=Math.floor(65536*Math.random()),Ve[Je++]=Zt>>>8,Ve[Je++]=255&Zt;Je=0,pn()}function pt(){if(null==ht){for(pn(),(ht=new qt).init(Ve),Je=0;Je<Ve.length;++Je)Ve[Je]=0;Je=0}return ht.next()}function Ct(){}function qt(){this.i=0,this.j=0,this.S=new Array}Ct.prototype.nextBytes=function(X){var Y;for(Y=0;Y<X.length;++Y)X[Y]=pt()},qt.prototype.init=function(X){var Y,se,we;for(Y=0;Y<256;++Y)this.S[Y]=Y;for(se=0,Y=0;Y<256;++Y)we=this.S[Y],this.S[Y]=this.S[se=se+this.S[Y]+X[Y%X.length]&255],this.S[se]=we;this.i=0,this.j=0},qt.prototype.next=function(){var X;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,X=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=X,this.S[X+this.S[this.i]&255]};var wn=256;r.exports={default:i,BigInteger:i,SecureRandom:Ct}}).call(ua)}),FO={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},VO={sha256:PO};function UO(r,t){if(this.n=null,this.e=0,!(null!=r&&null!=t&&r.length>0&&t.length>0))throw new Error("Invalid key data");this.n=new LO.BigInteger(r,16),this.e=parseInt(t,16)}UO.prototype.verify=function(r,t){t=t.replace(/[^0-9a-f]|[\s\n]]/gi,"");var n=new LO.BigInteger(t,16);if(n.bitLength()>this.n.bitLength())throw new Error("Signature does not match with the key modulus.");var i=function(s){for(var a in FO){var c=FO[a],l=c.length;if(s.substring(0,l)===c)return{alg:a,hash:s.substring(l)}}return[]}(n.modPowInt(this.e,this.n).toString(16).replace(/^1f+00/,""));if(0===i.length)return!1;if(!VO.hasOwnProperty(i.alg))throw new Error("Hashing algorithm is not supported.");var o=VO[i.alg](r).toString();return i.hash===o};for(var qG=[],pi=[],GG="undefined"!=typeof Uint8Array?Uint8Array:Array,Gv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gc=0,zG=Gv.length;Gc<zG;++Gc)qG[Gc]=Gv[Gc],pi[Gv.charCodeAt(Gc)]=Gc;pi["-".charCodeAt(0)]=62,pi["_".charCodeAt(0)]=63;var jO=function(r){var t,n,O,i=function(f){var b=f.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=f.indexOf("=");return-1===O&&(O=b),[O,O===b?0:4-O%4]}(r),o=i[0],s=i[1],a=new GG(3*(o+(O=s))/4-O),c=0,l=s>0?o-4:o;for(n=0;n<l;n+=4)t=pi[r.charCodeAt(n)]<<18|pi[r.charCodeAt(n+1)]<<12|pi[r.charCodeAt(n+2)]<<6|pi[r.charCodeAt(n+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;return 2===s&&(t=pi[r.charCodeAt(n)]<<2|pi[r.charCodeAt(n+1)]>>4,a[c++]=255&t),1===s&&(t=pi[r.charCodeAt(n)]<<10|pi[r.charCodeAt(n+1)]<<4|pi[r.charCodeAt(n+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t),a};function BO(r){var t=r.length%4;return 0===t?r:r+new Array(4-t+1).join("=")}function HO(r){return r=BO(r).replace(/\-/g,"+").replace(/_/g,"/"),decodeURIComponent(function(t){for(var n="",i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return n}(jO(r)).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function zv(r){return function(t){for(var n="",i=0;i<t.length;i++){var o=t[i].toString(16);n+=2===o.length?o:"0"+o}return n}(jO(BO(r)))}var $G=da(function(r){var t,n;t=ua,n=function(){function i(o){var s=[];if(0===o.length)return"";if("string"!=typeof o[0])throw new TypeError("Url must be a string. Received "+o[0]);if(o[0].match(/^[^/:]+:\/*$/)&&o.length>1){var a=o.shift();o[0]=a+o[0]}o[0]=o[0].match(/^file:\/\/\//)?o[0].replace(/^([^/:]+):\/*/,"$1:///"):o[0].replace(/^([^/:]+):\/*/,"$1://");for(var c=0;c<o.length;c++){var l=o[c];if("string"!=typeof l)throw new TypeError("Url must be a string. Received "+l);""!==l&&(c>0&&(l=l.replace(/^[\/]+/,"")),l=l.replace(/[\/]+$/,c<o.length-1?"":"/"),s.push(l))}var f=s.join("/"),b=(f=f.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return b.shift()+(b.length>0?"?":"")+b.join("&")}return function(){return i("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},r.exports?r.exports=n():t.urljoin=n()});function KG(r,t){return t=t||{},new Promise(function(n,i){var o=new XMLHttpRequest,s=[],a=[],c={},l=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:l,headers:{keys:function(){return s},entries:function(){return a},get:function(b){return c[b.toLowerCase()]},has:function(b){return b.toLowerCase()in c}}}};for(var f in o.open(t.method||"get",r,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(b,O,j){s.push(O=O.toLowerCase()),a.push([O,j]),c[O]=c[O]?c[O]+","+j:j}),n(l())},o.onerror=i,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(f,t.headers[f]);o.send(t.body||null)})}function YG(r){if(r.ok)return r.json();var t=new Error(r.statusText);return t.response=r,Promise.reject(t)}function $v(r){this.name="ConfigurationError",this.message=r||""}function yn(r){this.name="TokenValidationError",this.message=r||""}$v.prototype=Error.prototype,yn.prototype=Error.prototype;var JG=function(){function r(){}var t=r.prototype;return t.get=function(){return null},t.has=function(){return null},t.set=function(){return null},r}();BG.polyfill();var Xh=function(r){return"number"==typeof r},QG=function(){return new Date};function fa(r){var t=r||{};if(this.jwksCache=t.jwksCache||new JG,this.expectedAlg=t.expectedAlg||"RS256",this.issuer=t.issuer,this.audience=t.audience,this.leeway=0===t.leeway?0:t.leeway||60,this.jwksURI=t.jwksURI,this.maxAge=t.maxAge,this.__clock="function"==typeof t.__clock?t.__clock:QG,this.leeway<0||this.leeway>300)throw new $v("The leeway should be positive and lower than five minutes.");if("RS256"!==this.expectedAlg)throw new $v('Signature algorithm of "'+this.expectedAlg+'" is not supported. Expected the ID token to be signed with "RS256".')}function WO(r,t){this.plugins=t;for(var n=0;n<this.plugins.length;n++){if(this.plugins[n].version!==Uu_raw){var i="";throw this.plugins[n].constructor&&this.plugins[n].constructor.name&&(i=this.plugins[n].constructor.name),new Error("Plugin "+i+" version ("+this.plugins[n].version+") is not compatible with the SDK version ("+Uu_raw+")")}this.plugins[n].setWebAuth(r)}}fa.prototype.verify=function(r,t,n){if(!n&&t&&"function"==typeof t&&(n=t,t=void 0),!r)return n(new yn("ID token is required but missing"),null);var i=this.decode(r);if(i instanceof Error)return n(new yn("ID token could not be decoded"),null);var o=i.encoded.header+"."+i.encoded.payload,s=zv(i.encoded.signature),a=i.header.alg,c=i.header.kid,l=i.payload.aud,f=i.payload.sub,b=i.payload.iss,O=i.payload.exp,j=i.payload.nbf,z=i.payload.iat,$=i.payload.azp,Q=i.payload.auth_time,re=i.payload.nonce,Ee=this.__clock(),he=this;if(he.expectedAlg!==a)return n(new yn('Signature algorithm of "'+a+'" is not supported. Expected the ID token to be signed with "RS256".'),null);this.getRsaVerifier(b,c,function(Ae,Fe){if(Ae)return n(Ae,null);if(!Fe.verify(o,s))return n(new yn("Invalid ID token signature."),null);if(!b||"string"!=typeof b)return n(new yn("Issuer (iss) claim must be a string present in the ID token"),null);if(he.issuer!==b)return n(new yn('Issuer (iss) claim mismatch in the ID token, expected "'+he.issuer+'", found "'+b+'"'),null);if(!f||"string"!=typeof f)return n(new yn("Subject (sub) claim must be a string present in the ID token"),null);if(!l||"string"!=typeof l&&!Array.isArray(l))return n(new yn("Audience (aud) claim must be a string or array of strings present in the ID token"),null);if(Array.isArray(l)&&!l.includes(he.audience))return n(new yn('Audience (aud) claim mismatch in the ID token; expected "'+he.audience+'" but was not one of "'+l.join(", ")+'"'),null);if("string"==typeof l&&he.audience!==l)return n(new yn('Audience (aud) claim mismatch in the ID token; expected "'+he.audience+'" but found "'+l+'"'),null);if(t){if(!re||"string"!=typeof re)return n(new yn("Nonce (nonce) claim must be a string present in the ID token"),null);if(re!==t)return n(new yn('Nonce (nonce) claim value mismatch in the ID token; expected "'+t+'", found "'+re+'"'),null)}if(Array.isArray(l)&&l.length>1){if(!$||"string"!=typeof $)return n(new yn("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values"),null);if($!==he.audience)return n(new yn('Authorized Party (azp) claim mismatch in the ID token; expected "'+he.audience+'", found "'+$+'"'),null)}if(!O||!Xh(O))return n(new yn("Expiration Time (exp) claim must be a number present in the ID token"),null);if(!z||!Xh(z))return n(new yn("Issued At (iat) claim must be a number present in the ID token"),null);var Be=O+he.leeway,Ge=new Date(0);if(Ge.setUTCSeconds(Be),Ee>Ge)return n(new yn('Expiration Time (exp) claim error in the ID token; current time "'+Ee+'" is after expiration time "'+Ge+'"'),null);if(j&&Xh(j)){var it=j-he.leeway,ht=new Date(0);if(ht.setUTCSeconds(it),Ee<ht)return n(new yn('Not Before Time (nbf) claim error in the ID token; current time "'+Ee+'" is before the not before time "'+ht+'"'),null)}if(he.maxAge){if(!Q||!Xh(Q))return n(new yn("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified"),null);var Ve=Q+he.maxAge+he.leeway,Je=new Date(0);if(Je.setUTCSeconds(Ve),Ee>Je)return n(new yn('Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time "'+Ee+'" is after last auth time at "'+Je+'"'),null)}return n(null,i.payload)})},fa.prototype.getRsaVerifier=function(r,t,n){var i=this,o=r+t;Promise.resolve(this.jwksCache.has(o)).then(function(s){return s?i.jwksCache.get(o):(a={jwksURI:i.jwksURI,iss:r,kid:t},("undefined"==typeof fetch?KG:fetch)(a.jwksURI||$G(a.iss,".well-known","jwks.json")).then(YG).then(function(c){var l,f,b,O=null;for(l=0;l<c.keys.length&&null===O;l++)(f=c.keys[l]).kid===a.kid&&(O=f);if(!O)throw new Error('Could not find a public key for Key ID (kid) "'+a.kid+'"');return{modulus:zv((b=O).n),exp:zv(b.e)}}).catch(function(c){throw c}));var a}).then(function(s){if(!s||!s.modulus||!s.exp)throw new Error("Empty keyInfo in response");return Promise.resolve(i.jwksCache.set(o,s)).then(function(){n&&n(null,new UO(s.modulus,s.exp))})}).catch(function(s){n&&n(s)})},fa.prototype.decode=function(r){var t,n,i=r.split(".");if(3!==i.length)return new yn("Cannot decode a malformed JWT");try{t=JSON.parse(HO(i[0])),n=JSON.parse(HO(i[1]))}catch(o){return new yn("Token header or payload is not valid JSON")}return{header:t,payload:n,encoded:{header:i[0],payload:i[1],signature:i[2]}}},fa.prototype.validateAccessToken=function(r,t,n,i){if(this.expectedAlg!==t)return i(new yn('Signature algorithm of "'+t+'" is not supported. Expected "'+this.expectedAlg+'"'));var o,s=PO(r),a=xO.stringify(s),c=a.substring(0,a.length/2),l=xO.parse(c),f=WG.stringify(l);return i((o={"+":"-","/":"_","=":""},f.replace(/[+/=]/g,function(b){return o[b]})!==n?new yn("Invalid access_token"):null))},WO.prototype.get=function(r){for(var t=0;t<this.plugins.length;t++)if(this.plugins[t].supports(r))return this.plugins[t].init();return null};var qO_randomString=function(r){var t=new Uint8Array(r),n=[],i="0123456789ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvwxyz-._~",o=cn.getWindow().crypto||cn.getWindow().msCrypto;if(!o)return null;for(var s=o.getRandomValues(t),a=0;a<s.length;a++)n.push(i[s[a]%i.length]);return n.join("")};function ha(r){var t=r.transaction||{};this.namespace=t.namespace||"com.auth0.auth.",this.keyLength=t.keyLength||32,this.storage=new qc(r),this.options=r}function zc(r){if(this.url=r.url,this.callback=r.callback,this.timeout=r.timeout||6e4,this.timeoutCallback=r.timeoutCallback||null,this.eventListenerType=r.eventListenerType||"message",this.iframe=null,this.timeoutHandle=null,this._destroyTimeout=null,this.transientMessageEventListener=null,this.proxyEventListener=null,this.eventValidator=r.eventValidator||{isValid:function(){return!0}},"function"!=typeof this.callback)throw new Error("options.callback must be a function")}function Kv(r){this.webAuth=r,this.warn=new la(r.baseOptions)}function Hu(r,t){this.webAuth=r,this.baseOptions=t,this.request=new ao(t),this.webMessageHandler=new Kv(r),this.storage=new qc(t)}function GO(r,t){return["co/verifier",encodeURIComponent(r),encodeURIComponent(t)].join("/")}function Yv(r,t){this.webAuth=r,this.baseOptions=t,this.crossOriginAuthentication=new Hu(r,this.baseOptions),this.warn=new la({disableWarnings:!!t._disableDeprecationWarnings})}ha.prototype.process=function(r){if(!r.responseType)throw new Error("responseType is required");var t=r.realm||r.connection,n=-1!==r.responseType.indexOf("id_token"),i=this.generateTransaction(r.appState,r.state,r.nonce,t,n,r.organization);return r.state||(r.state=i.state),n&&!r.nonce&&(r.nonce=i.nonce),r},ha.prototype.generateTransaction=function(r,t,n,i,o,s){if(t=t||qO_randomString(this.keyLength),n=n||(o?qO_randomString(this.keyLength):null),cn.getWindow().location.host!==this.options.domain){var a={nonce:n,appState:r,state:t,lastUsedConnection:i};s&&(a.organization=s),this.storage.setItem(this.namespace+t,a,{expires:1/48})}return{state:t,nonce:n}},ha.prototype.getStoredTransaction=function(r){var t;return t=this.storage.getItem(this.namespace+r),this.clearTransaction(r),t},ha.prototype.clearTransaction=function(r){this.storage.removeItem(this.namespace+r)},zc.prototype.init=function(){var r=this,t=cn.getWindow();switch(this.iframe=t.document.createElement("iframe"),this.iframe.style.display="none",this.proxyEventListener=function(n){r.eventListener(n)},this.eventListenerType){case"message":this.eventSourceObject=t;break;case"load":this.eventSourceObject=this.iframe;break;default:throw new Error("Unsupported event listener type: "+this.eventListenerType)}this.eventSourceObject.addEventListener(this.eventListenerType,this.proxyEventListener,!1),t.document.body.appendChild(this.iframe),this.iframe.src=this.url,this.timeoutHandle=setTimeout(function(){r.timeoutHandler()},this.timeout)},zc.prototype.eventListener=function(r){var t={event:r,sourceObject:this.eventSourceObject};this.eventValidator.isValid(t)&&(this.destroy(),this.callback(t))},zc.prototype.timeoutHandler=function(){this.destroy(),this.timeoutCallback&&this.timeoutCallback()},zc.prototype.destroy=function(){var r=this;clearTimeout(this.timeoutHandle),this._destroyTimeout=setTimeout(function(){r.eventSourceObject.removeEventListener(r.eventListenerType,r.proxyEventListener,!1),r.iframe.parentNode&&r.iframe.parentNode.removeChild(r.iframe)},0)},Kv.prototype.run=function(r,t){var n=this;r.responseMode="web_message",r.prompt="none";var s,a,c,i=cn.getOrigin(),o=dt.getOriginFromUrl(r.redirectUri);if(o&&i!==o)return t({error:"origin_mismatch",error_description:"The redirectUri's origin ("+o+") should match the window's origin ("+i+")."});s=this.webAuth.client.buildAuthorizeUrl(r),c=function(s,a){var c=s;return!s&&a.event.data.response.error&&(c=a.event.data.response),c?("consent_required"===c.error&&"localhost"===cn.getWindow().location.hostname&&n.warn.warning("Consent Required. Consent can't be skipped on localhost. Read more here: https://auth0.com/docs/api-auth/user-consent#skipping-consent-for-first-party-clients"),n.webAuth.transactionManager.clearTransaction(c.state),t(dt.pick(c,["error","error_description"]))):n.webAuth.validateAuthenticationResponse(r,a.event.data.response,t)},new zc({url:s,eventListenerType:"message",callback:function(l){c(null,l)},timeout:(a=r).timeout,eventValidator:{isValid:function(l){return!(!l.event.data||"authorization_response"!==l.event.data.type||a.state!==l.event.data.response.state)}},timeoutCallback:function(){c({error:"timeout",error_description:"Timeout during executing web_message communication",state:a.state})}}).init()},Hu.prototype.login=function(r,t){var n=this,i=Mn(this.baseOptions.rootUrl,"/co/authenticate");r.username=r.username||r.email,delete r.email;var o={client_id:r.clientID||this.baseOptions.clientID,username:r.username};r.password&&(o.password=r.password),r.otp&&(o.otp=r.otp);var s=r.realm||this.baseOptions.realm;if(s){var a=r.credentialType||this.baseOptions.credentialType||"http://auth0.com/oauth/grant-type/password-realm";o.realm=s,o.credential_type=a}else o.credential_type="password";this.request.post(i).withCredentials().send(o).end(function(c,l){if(c){var f=c.response&&c.response.body||{error:"request_error",error_description:JSON.stringify(c)};return Gn(t,{forceLegacyError:!0})(f)}function b(){var O=!0===r.popup;r=dt.blacklist(r,["password","credentialType","otp","popup","onRedirecting"]);var j=dt.merge(r).with({loginTicket:l.body.login_ticket}),z=GO(n.baseOptions.rootUrl,l.body.co_id);n.storage.setItem(z,l.body.co_verifier,{expires:1/96}),O?n.webMessageHandler.run(j,Gn(t,{forceLegacyError:!0})):n.webAuth.authorize(j)}"function"==typeof r.onRedirecting?r.onRedirecting(b):b()})},Hu.prototype.callback=function(){var r=decodeURIComponent(function(i){var o=("&"+cn.getWindow().location.hash.substring(1)).split("&origin=");if(2===o.length)return o.pop().split("&").shift()}()),t=cn.getWindow(),n=this;t.addEventListener("message",function(i){if("co_verifier_request"===i.data.type){var o=GO(i.origin,i.data.request.id),s=function(a,c){try{var l=a.getItem(c);return a.removeItem(c),l||""}catch(f){return""}}(n.storage,o);i.source.postMessage({type:"co_verifier_response",response:{verifier:s}},i.origin)}}),t.parent.postMessage({type:"ready"},r)},Yv.prototype.loginWithCredentials=function(r,t){r.realm=r.realm||r.connection,delete r.connection,this.crossOriginAuthentication.login(r,t)},Yv.prototype.signupAndLogin=function(r,t){var n=this;return this.webAuth.client.dbConnection.signup(r,function(i){return i?t(i):(r.realm=r.realm||r.connection,delete r.connection,n.webAuth.login(r,t))})};var zO=Nc(function(r){var t=function(){function n(a,c,l){a.attachEvent?a.attachEvent("on"+c,l):a.addEventListener&&a.addEventListener(c,l,!1)}function i(a,c,l){a.detachEvent?a.detachEvent("on"+c,l):a.removeEventListener&&a.removeEventListener(c,l,!1)}function o(a){/^https?:\/\//.test(a)||(a=window.location.href);var c=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(a);return c?c[1]:a}var s=function(){if("undefined"==typeof navigator)return!1;var a=-1,c=navigator.userAgent;return"Microsoft Internet Explorer"===navigator.appName?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(c)&&(a=parseFloat(RegExp.$1)):c.indexOf("Trident")>-1&&null!==new RegExp("rv:([0-9]{2,2}[.0-9]{0,})").exec(c)&&(a=parseFloat(RegExp.$1)),a>=8}();return"undefined"!=typeof window&&window.JSON&&window.JSON.stringify&&window.JSON.parse&&window.postMessage?{open:function(a,c){if(!c)throw"missing required callback argument";var l,f;a.url||(l="missing required 'url' parameter"),a.relay_url||(l="missing required 'relay_url' parameter"),l&&setTimeout(function(){c(l)},0),a.window_name||(a.window_name=null),a.window_features&&!function(){try{var Ee=navigator.userAgent;return-1!=Ee.indexOf("Fennec/")||-1!=Ee.indexOf("Firefox/")&&-1!=Ee.indexOf("Android")}catch(he){}return!1}()||(a.window_features=void 0);var b,O=a.origin||o(a.url);if(O!==o(a.relay_url))return setTimeout(function(){c("invalid arguments: origin of url and relay_url must match")},0);s&&((f=document.createElement("iframe")).setAttribute("src",a.relay_url),f.style.display="none",f.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(f),b=f.contentWindow);var j=a.popup||window.open(a.url,a.window_name,a.window_features);a.popup&&(j.location.href=a.url),b||(b=j);var z=setInterval(function(){j&&j.closed&&(Q(),c&&(c("User closed the popup window"),c=null))},500),$=JSON.stringify({a:"request",d:a.params});function Q(){if(f&&document.body.removeChild(f),f=void 0,z&&(z=clearInterval(z)),i(window,"message",re),i(window,"unload",Q),j)try{j.close()}catch(Ee){b.postMessage("die",O)}j=b=void 0}function re(Ee){if(Ee.origin===O){try{var he=JSON.parse(Ee.data)}catch(Ae){if(c)return c(Ae);throw Ae}"ready"===he.a?b.postMessage($,O):"error"===he.a?(Q(),c&&(c(he.d),c=null)):"response"===he.a&&(Q(),c&&(c(null,he.d),c=null))}}return n(window,"unload",Q),n(window,"message",re),{originalPopup:j,close:Q,focus:function(){if(j)try{j.focus()}catch(Ee){}}}},onOpen:function(a){var c="*",l=s?function(){for(var j=window.opener.frames,z=j.length-1;z>=0;z--)try{if(j[z].location.protocol===window.location.protocol&&j[z].location.host===window.location.host&&"__winchan_relay_frame"===j[z].name)return j[z]}catch($){}}():window.opener;if(!l)throw"can't find relay frame";function f(j){j=JSON.stringify(j),s?l.doPost(j,c):l.postMessage(j,c)}function b(j){if("die"===j.data)try{window.close()}catch(z){}}n(s?l:window,"message",function j(z){var $;try{$=JSON.parse(z.data)}catch(Q){}$&&"request"===$.a&&(i(window,"message",j),c=z.origin,a&&setTimeout(function(){a(c,$.d,function(Q){a=void 0,f({a:"response",d:Q})})},0))}),n(s?l:window,"message",b);try{f({a:"ready"})}catch(j){n(l,"load",function(z){f({a:"ready"})})}var O=function(){try{i(s?l:window,"message",b)}catch(j){}a&&f({a:"error",d:"client closed window"}),a=void 0;try{window.close()}catch(j){}};return n(window,"unload",O),{detach:function(){i(window,"unload",O)}}}}:{open:function(a,c,l,f){setTimeout(function(){f("unsupported browser")},0)},onOpen:function(a){setTimeout(function(){a("unsupported browser")},0)}}}();r.exports&&(r.exports=t)});function Zh(){this._current_popup=null}function ko(r,t){this.baseOptions=t,this.baseOptions.popupOrigin=t.popupOrigin,this.client=r.client,this.webAuth=r,this.transactionManager=new ha(this.baseOptions),this.crossOriginAuthentication=new Hu(r,this.baseOptions),this.warn=new la({disableWarnings:!!t._disableDeprecationWarnings})}function $c(r){this.authenticationUrl=r.authenticationUrl,this.timeout=r.timeout||6e4,this.handler=null,this.postMessageDataType=r.postMessageDataType||!1,this.postMessageOrigin=r.postMessageOrigin||cn.getWindow().location.origin||cn.getWindow().location.protocol+"//"+cn.getWindow().location.hostname+(cn.getWindow().location.port?":"+cn.getWindow().location.port:"")}function Jv(r){this.baseOptions=r,this.request=new ao(r),this.transactionManager=new ha(this.baseOptions)}function ep(r,t){this.baseOptions=t,this.client=r,this.baseOptions.universalLoginPage=!0,this.request=new ao(this.baseOptions),this.warn=new la({disableWarnings:!!t._disableDeprecationWarnings})}Zh.prototype.calculatePosition=function(r){var t=r.width||500,n=r.height||600,i=cn.getWindow();return{width:t,height:n,left:r.left||(void 0!==i.screenX?i.screenX:i.screenLeft)+((void 0!==i.outerWidth?i.outerWidth:i.document.body.clientWidth)-t)/2,top:r.top||(void 0!==i.screenY?i.screenY:i.screenTop)+((void 0!==i.outerHeight?i.outerHeight:i.document.body.clientHeight)-n)/2}},Zh.prototype.preload=function(r){var t=this,n=cn.getWindow(),i=this.calculatePosition(r.popupOptions||{}),o=dt.merge(i).with(r.popupOptions),s=r.url||"about:blank",a=Uc(o,{encode:!1,delimiter:","});return this._current_popup&&!this._current_popup.closed||(this._current_popup=n.open(s,"auth0_signup_popup",a),this._current_popup.kill=function(){this.close(),t._current_popup=null}),this._current_popup},Zh.prototype.load=function(r,t,n,i){var o=this,s=this.calculatePosition(n.popupOptions||{}),a=dt.merge(s).with(n.popupOptions),c=dt.merge({url:r,relay_url:t,window_features:Uc(a,{delimiter:",",encode:!1}),popup:this._current_popup}).with(n),l=zO.open(c,function(f,b){if(!f||"SyntaxError"!==f.name)return o._current_popup=null,i(f,b)});return l.focus(),l},ko.prototype.buildPopupHandler=function(){var r=this.baseOptions.plugins.get("popup.getPopupHandler");return r?r.getPopupHandler():new Zh},ko.prototype.preload=function(r){r=r||{};var t=this.buildPopupHandler();return t.preload(r),t},ko.prototype.getPopupHandler=function(r,t){return r.popupHandler?r.popupHandler:t?this.preload(r):this.buildPopupHandler()},ko.prototype.callback=function(r){var t=this,n=cn.getWindow(),i=(r=r||{}).popupOrigin||this.baseOptions.popupOrigin||cn.getOrigin();n.opener?zO.onOpen(function(o,s,a){if(o!==i)return a({error:"origin_mismatch",error_description:"The popup's origin ("+o+") should match the `popupOrigin` parameter ("+i+")."});t.webAuth.parseHash(r||{},function(c,l){return a(c||l)})}):n.doPost=function(o){n.parent&&n.parent.postMessage(o,i)}},ko.prototype.authorize=function(r,t){var n,i,o={},s=this.baseOptions.plugins.get("popup.authorize"),a=dt.merge(this.baseOptions,["clientID","scope","domain","audience","tenant","responseType","redirectUri","_csrf","state","_intstate","nonce","organization","invitation"]).with(dt.blacklist(r,["popupHandler"]));return yt.check(a,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),i=Mn(this.baseOptions.rootUrl,"relay.html"),r.owp?a.owp=!0:(o.origin=function(r){/^https?:\/\//.test(r)||(r=window.location.href);var t=/^(https?:\/\/[-_a-zA-Z.0-9:]+)/.exec(r);return t?t[1]:r}(a.redirectUri),i=a.redirectUri),r.popupOptions&&(o.popupOptions=dt.pick(r.popupOptions,["width","height","top","left"])),s&&(a=s.processParams(a)),(a=this.transactionManager.process(a)).scope=a.scope||"openid profile email",delete a.domain,n=this.client.buildAuthorizeUrl(a),this.getPopupHandler(r).load(n,i,o,Gn(t,{keepOriginalCasing:!0}))},ko.prototype.loginWithCredentials=function(r,t){r.realm=r.realm||r.connection,r.popup=!0,r=dt.merge(this.baseOptions,["redirectUri","responseType","state","nonce"]).with(dt.blacklist(r,["popupHandler","connection"])),r=this.transactionManager.process(r),this.crossOriginAuthentication.login(r,t)},ko.prototype.passwordlessVerify=function(r,t){var n=this;return this.client.passwordless.verify(dt.blacklist(r,["popupHandler"]),function(i){if(i)return t(i);r.username=r.phoneNumber||r.email,r.password=r.verificationCode,delete r.email,delete r.phoneNumber,delete r.verificationCode,delete r.type,n.client.loginWithResourceOwner(r,t)})},ko.prototype.signupAndLogin=function(r,t){var n=this;return this.client.dbConnection.signup(r,function(i){if(i)return t(i);n.loginWithCredentials(r,t)})},$c.create=function(r){return new $c(r)},$c.prototype.login=function(r,t){this.handler=new zc({auth0:this.auth0,url:this.authenticationUrl,eventListenerType:r?"message":"load",callback:this.getCallbackHandler(t,r),timeout:this.timeout,eventValidator:this.getEventValidator(),timeoutCallback:function(){t(null,"#error=timeout&error_description=Timeout+during+authentication+renew.")},usePostMessage:r||!1}),this.handler.init()},$c.prototype.getEventValidator=function(){var r=this;return{isValid:function(t){switch(t.event.type){case"message":return t.event.origin===r.postMessageOrigin&&t.event.source===r.handler.iframe.contentWindow&&(!1===r.postMessageDataType||t.event.data.type&&t.event.data.type===r.postMessageDataType);case"load":if("about:"===t.sourceObject.contentWindow.location.protocol)return!1;default:return!0}}}},$c.prototype.getCallbackHandler=function(r,t){return function(n){r(null,t?"object"==typeof n.event.data&&n.event.data.hash?n.event.data.hash:n.event.data:n.sourceObject.contentWindow.location.hash)}},Jv.prototype.login=function(r,t){var n,i;return n=Mn(this.baseOptions.rootUrl,"usernamepassword","login"),r.username=r.username||r.email,r=dt.blacklist(r,["email","onRedirecting"]),i=dt.merge(this.baseOptions,["clientID","redirectUri","tenant","responseType","responseMode","scope","audience"]).with(r),i=this.transactionManager.process(i),i=dt.toSnakeCase(i,["auth0Client"]),this.request.post(n).send(i).end(Gn(t))},Jv.prototype.callback=function(r){var t,n=cn.getDocument();(t=n.createElement("div")).innerHTML=r,n.body.appendChild(t).children[0].submit()},ep.prototype.login=function(r,t){if(cn.getWindow().location.host!==this.baseOptions.domain)throw new Error("This method is meant to be used only inside the Universal Login Page.");var n,i=dt.merge(this.baseOptions,["clientID","redirectUri","tenant","responseType","responseMode","scope","audience","_csrf","state","_intstate","nonce"]).with(r);return yt.check(i,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),(n=new Jv(this.baseOptions)).login(i,function(o,s){if(o)return t(o);function a(){n.callback(s)}if("function"==typeof r.onRedirecting)return r.onRedirecting(function(){a()});a()})},ep.prototype.signupAndLogin=function(r,t){var n=this;return n.client.client.dbConnection.signup(r,function(i){return i?t(i):n.login(r,t)})},ep.prototype.getSSOData=function(r,t){var n,i="";return"function"==typeof r&&(t=r,r=!1),yt.check(r,{type:"boolean",message:"withActiveDirectories parameter is not valid"}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),r&&(i="?"+Uc({ldaps:1,client_id:this.baseOptions.clientID})),n=Mn(this.baseOptions.rootUrl,"user","ssodata",i),this.request.get(n,{noHeaders:!0}).withCredentials().end(Gn(t))};var ZG=function(){},ez={lang:"en",templates:{auth0:function(r){return'<div class="captcha-challenge">\n  <img src="'+r.image+'" />\n  <button type="button" class="captcha-reload">\u21ba</button>\n</div>\n<input type="text" name="captcha"\n  class="form-control captcha-control"\n  placeholder="'+("code"===r.type?"Enter the code shown above":"Solve the formula shown above")+'" />'},recaptcha_v2:function(){return'<div class="recaptcha" ></div><input type="hidden" name="captcha" />'},recaptcha_enterprise:function(){return'<div class="recaptcha" ></div><input type="hidden" name="captcha" />'},error:function(){return'<div class="error" style="color: red;">Error getting the bot detection challenge. Please contact the system administrator.</div>'}}};function $O(r){switch(r){case"recaptcha_v2":return window.grecaptcha;case"recaptcha_enterprise":return window.grecaptcha.enterprise;default:throw new Error("Unknown captcha provider")}}var nz_render=function(r,t,n,i){function o(s){s=s||ZG,r.getChallenge(function(a,c){return a?(t.innerHTML=n.templates.error(a),s(a)):c.required?(t.style.display="","auth0"===c.provider?(O=o,(l=t).innerHTML=n.templates[(b=c).provider](b),l.querySelector(".captcha-reload").addEventListener("click",function(j){j.preventDefault(),O()})):"recaptcha_v2"!==c.provider&&"recaptcha_enterprise"!==c.provider||function(l,f,b){var O=l.hasAttribute("data-wid")&&l.getAttribute("data-wid");function j($){l.querySelector('input[name="captcha"]').value=$||""}if(O)return j(),void $O(b.provider).reset(O);l.innerHTML=f.templates[b.provider](b);var z=l.querySelector(".recaptcha");!function(r,t,n){var i="recaptchaCallback_"+Math.floor(1000001*Math.random());window[i]=function(){var $;delete window[i],$=$O(b.provider),O=$.render(z,{callback:j,"expired-callback":function(){j()},"error-callback":function(){j()},sitekey:b.siteKey}),l.setAttribute("data-wid",O)};var o=window.document.createElement("script");o.src=function(s,a,c){switch(s){case"recaptcha_v2":return"https://www.recaptcha.net/recaptcha/api.js?hl="+a+"&onload="+c;case"recaptcha_enterprise":return"https://www.recaptcha.net/recaptcha/enterprise.js?render=explicit&hl="+a+"&onload="+c;default:throw new Error("Unknown captcha provider")}}(t.provider,t.lang,i),o.async=!0,window.document.body.appendChild(o)}(0,{lang:f.lang,provider:b.provider})}(t,n,c),void s()):(t.style.display="none",void(t.innerHTML=""));var l,b,O})}return n=dt.merge(ez).with(n||{}),o(i),{reload:o,getValue:function(){var s=t.querySelector('input[name="captcha"]');if(s)return s.value}}};function rz(){return new Date}function zn(r){yt.check(r,{type:"object",message:"options parameter is not valid"},{domain:{type:"string",message:"domain option is required"},clientID:{type:"string",message:"clientID option is required"},responseType:{optional:!0,type:"string",message:"responseType is not valid"},responseMode:{optional:!0,type:"string",message:"responseMode is not valid"},redirectUri:{optional:!0,type:"string",message:"redirectUri is not valid"},scope:{optional:!0,type:"string",message:"scope is not valid"},audience:{optional:!0,type:"string",message:"audience is not valid"},popupOrigin:{optional:!0,type:"string",message:"popupOrigin is not valid"},leeway:{optional:!0,type:"number",message:"leeway is not valid"},plugins:{optional:!0,type:"array",message:"plugins is not valid"},maxAge:{optional:!0,type:"number",message:"maxAge is not valid"},_disableDeprecationWarnings:{optional:!0,type:"boolean",message:"_disableDeprecationWarnings option is not valid"},_sendTelemetry:{optional:!0,type:"boolean",message:"_sendTelemetry option is not valid"},_telemetryInfo:{optional:!0,type:"object",message:"_telemetryInfo option is not valid"},_timesToRetryFailedRequests:{optional:!0,type:"number",message:"_timesToRetryFailedRequests option is not valid"}}),r.overrides&&yt.check(r.overrides,{type:"object",message:"overrides option is not valid"},{__tenant:{optional:!0,type:"string",message:"__tenant option is required"},__token_issuer:{optional:!0,type:"string",message:"__token_issuer option is required"},__jwks_uri:{optional:!0,type:"string",message:"__jwks_uri is required"}}),this.baseOptions=r,this.baseOptions.plugins=new WO(this,this.baseOptions.plugins||[]),this.baseOptions._sendTelemetry=!1!==this.baseOptions._sendTelemetry||this.baseOptions._sendTelemetry,this.baseOptions._timesToRetryFailedRequests=r._timesToRetryFailedRequests?parseInt(r._timesToRetryFailedRequests):0,this.baseOptions.tenant=this.baseOptions.overrides&&this.baseOptions.overrides.__tenant||this.baseOptions.domain.split(".")[0],this.baseOptions.token_issuer=this.baseOptions.overrides&&this.baseOptions.overrides.__token_issuer||"https://"+this.baseOptions.domain+"/",this.baseOptions.jwksURI=this.baseOptions.overrides&&this.baseOptions.overrides.__jwks_uri,this.transactionManager=new ha(this.baseOptions),this.client=new $r(this.baseOptions),this.redirect=new Yv(this,this.baseOptions),this.popup=new ko(this,this.baseOptions),this.crossOriginAuthentication=new Hu(this,this.baseOptions),this.webMessageHandler=new Kv(this),this._universalLogin=new ep(this,this.baseOptions),this.ssodataStorage=new Qh(this.baseOptions)}function tp(r,t){this.baseOptions=t,this.request=r}function Qv(r,t){this.baseOptions=t,this.request=r}function $r(r,t){2===arguments.length?this.auth0=r:t=r,yt.check(t,{type:"object",message:"options parameter is not valid"},{domain:{type:"string",message:"domain option is required"},clientID:{type:"string",message:"clientID option is required"},responseType:{optional:!0,type:"string",message:"responseType is not valid"},responseMode:{optional:!0,type:"string",message:"responseMode is not valid"},redirectUri:{optional:!0,type:"string",message:"redirectUri is not valid"},scope:{optional:!0,type:"string",message:"scope is not valid"},audience:{optional:!0,type:"string",message:"audience is not valid"},_disableDeprecationWarnings:{optional:!0,type:"boolean",message:"_disableDeprecationWarnings option is not valid"},_sendTelemetry:{optional:!0,type:"boolean",message:"_sendTelemetry option is not valid"},_telemetryInfo:{optional:!0,type:"object",message:"_telemetryInfo option is not valid"}}),this.baseOptions=t,this.baseOptions._sendTelemetry=!1!==this.baseOptions._sendTelemetry||this.baseOptions._sendTelemetry,this.baseOptions.rootUrl=this.baseOptions.domain&&0===this.baseOptions.domain.toLowerCase().indexOf("http")?this.baseOptions.domain:"https://"+this.baseOptions.domain,this.request=new ao(this.baseOptions),this.passwordless=new tp(this.request,this.baseOptions),this.dbConnection=new Qv(this.request,this.baseOptions),this.warn=new la({disableWarnings:!!t._disableDeprecationWarnings}),this.ssodataStorage=new Qh(this.baseOptions)}function Wu(r){yt.check(r,{type:"object",message:"options parameter is not valid"},{domain:{type:"string",message:"domain option is required"},token:{type:"string",message:"token option is required"},_sendTelemetry:{optional:!0,type:"boolean",message:"_sendTelemetry option is not valid"},_telemetryInfo:{optional:!0,type:"object",message:"_telemetryInfo option is not valid"}}),this.baseOptions=r,this.baseOptions.headers={Authorization:"Bearer "+this.baseOptions.token},this.request=new ao(this.baseOptions),this.baseOptions.rootUrl=Mn("https://"+this.baseOptions.domain,"api","v2")}zn.prototype.parseHash=function(r,t){var n,i;t||"function"!=typeof r?r=r||{}:(t=r,r={});var o=void 0===r.hash?cn.getWindow().location.hash:r.hash;if((n=function(r,t){var n=nr;if(""===r||null==r)return n.plainObjects?Object.create(null):{};for(var i="string"==typeof r?function(f,b){var O,j={},Q=(b.ignoreQueryPrefix?f.replace(/^\?/,""):f).split(b.delimiter,b.parameterLimit===1/0?void 0:b.parameterLimit),re=-1,Ee=b.charset;if(b.charsetSentinel)for(O=0;O<Q.length;++O)0===Q[O].indexOf("utf8=")&&("utf8=%E2%9C%93"===Q[O]?Ee="utf-8":"utf8=%26%2310003%3B"===Q[O]&&(Ee="iso-8859-1"),re=O,O=Q.length);for(O=0;O<Q.length;++O)if(O!==re){var he,Ae,Fe=Q[O],Be=Fe.indexOf("]="),Ge=-1===Be?Fe.indexOf("="):Be+1;-1===Ge?(he=b.decoder(Fe,nr.decoder,Ee,"key"),Ae=b.strictNullHandling?null:""):(he=b.decoder(Fe.slice(0,Ge),nr.decoder,Ee,"key"),Ae=Mo.maybeMap(EO(Fe.slice(Ge+1),b),function(it){return b.decoder(it,nr.decoder,Ee,"value")})),Ae&&b.interpretNumericEntities&&"iso-8859-1"===Ee&&(Ae=gG(Ae)),Fe.indexOf("[]=")>-1&&(Ae=pG(Ae)?[Ae]:Ae),j[he]=Fv.call(j,he)?Mo.combine(j[he],Ae):Ae}return j}(r,n):r,o=n.plainObjects?Object.create(null):{},s=Object.keys(i),a=0;a<s.length;++a){var c=s[a],l=mG(c,i[c],n,"string"==typeof r);o=Mo.merge(o,l,n)}return!0===n.allowSparse?o:Mo.compact(o)}(o=o.replace(/^#?\/?/,""))).hasOwnProperty("error"))return i=hs.buildResponse(n.error,n.error_description),n.state&&(i.state=n.state),t(i);if(!n.hasOwnProperty("access_token")&&!n.hasOwnProperty("id_token")&&!n.hasOwnProperty("refresh_token"))return t(null,null);var s=(this.baseOptions.responseType||r.responseType||"").split(" ");return s.length>0&&-1!==s.indexOf("token")&&!n.hasOwnProperty("access_token")?t(hs.buildResponse("invalid_hash","response_type contains `token`, but the parsed hash does not contain an `access_token` property")):s.length>0&&-1!==s.indexOf("id_token")&&!n.hasOwnProperty("id_token")?t(hs.buildResponse("invalid_hash","response_type contains `id_token`, but the parsed hash does not contain an `id_token` property")):this.validateAuthenticationResponse(r,n,t)},zn.prototype.validateAuthenticationResponse=function(r,t,n){var i=this;r.__enableIdPInitiatedLogin=r.__enableIdPInitiatedLogin||r.__enableImpersonation;var o=t.state,s=this.transactionManager.getStoredTransaction(o),a=r.state||s&&s.state||null;if((o||a||!r.__enableIdPInitiatedLogin)&&a!==o)return n({error:"invalid_token",errorDescription:"`state` does not match."});var l=r.nonce||s&&s.nonce||null,f=s&&s.organization,b=r.state||s&&s.appState||null,O=function(j,z){return j?n(j):(s&&s.lastUsedConnection&&(z&&($=z.sub),i.ssodataStorage.set(s.lastUsedConnection,$)),n(null,{accessToken:(Q=t).access_token||null,idToken:Q.id_token||null,idTokenPayload:z||null,appState:b||null,refreshToken:Q.refresh_token||null,state:Q.state||null,expiresIn:Q.expires_in?parseInt(Q.expires_in,10):null,tokenType:Q.token_type||null,scope:Q.scope||null}));var $,Q};return t.id_token?this.validateToken(t.id_token,l,function(j,z){if(!j){if(f){if(!z.org_id)return O(hs.invalidToken("Organization Id (org_id) claim must be a string present in the ID token"));if(z.org_id!==f)return O(hs.invalidToken('Organization Id (org_id) claim value mismatch in the ID token; expected "'+f+'", found "'+z.org_id+'"'))}return t.access_token&&z.at_hash?(new fa).validateAccessToken(t.access_token,"RS256",z.at_hash,function(Q){return Q?O(hs.invalidToken(Q.message)):O(null,z)}):O(null,z)}if("invalid_token"!==j.error||j.errorDescription&&j.errorDescription.indexOf("Nonce (nonce) claim value mismatch in the ID token")>-1)return O(j);var $=(new fa).decode(t.id_token);return"HS256"!==$.header.alg?O(j):($.payload.nonce||null)!==l?O({error:"invalid_token",errorDescription:'Nonce (nonce) claim value mismatch in the ID token; expected "'+l+'", found "'+$.payload.nonce+'"'}):t.access_token?i.client.userInfo(t.access_token,function(Q,re){return Q?O(Q):O(null,re)}):O({error:"invalid_token",description:"The id_token cannot be validated because it was signed with the HS256 algorithm and public clients (like a browser) can\u2019t store secrets. Please read the associated doc for possible ways to fix this. Read more: https://auth0.com/docs/errors/libraries/auth0-js/invalid-token#parsing-an-hs256-signed-id-token-without-an-access-token"})}):O(null,null)},zn.prototype.validateToken=function(r,t,n){new fa({issuer:this.baseOptions.token_issuer,jwksURI:this.baseOptions.jwksURI,audience:this.baseOptions.clientID,leeway:this.baseOptions.leeway||60,maxAge:this.baseOptions.maxAge,__clock:this.baseOptions.__clock||rz}).verify(r,t,function(i,o){if(i)return n(hs.invalidToken(i.message));n(null,o)})},zn.prototype.renewAuth=function(r,t){var n=!!r.usePostMessage,i=r.postMessageDataType||!1,o=r.postMessageOrigin||cn.getWindow().origin,s=r.timeout,a=this,c=dt.merge(this.baseOptions,["clientID","redirectUri","responseType","scope","audience","_csrf","state","_intstate","nonce"]).with(r);c.responseType=c.responseType||"token",c.responseMode=c.responseMode||"fragment",c=this.transactionManager.process(c),yt.check(c,{type:"object",message:"options parameter is not valid"}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),c.prompt="none",c=dt.blacklist(c,["usePostMessage","tenant","postMessageDataType","postMessageOrigin"]),$c.create({authenticationUrl:this.client.buildAuthorizeUrl(c),postMessageDataType:i,postMessageOrigin:o,timeout:s}).login(n,function(l,f){if("object"==typeof f)return t(l,f);a.parseHash({hash:f},t)})},zn.prototype.checkSession=function(r,t){var n=dt.merge(this.baseOptions,["clientID","responseType","redirectUri","scope","audience","_csrf","state","_intstate","nonce"]).with(r);return"code"===n.responseType?t({error:"error",error_description:"responseType can't be `code`"}):(r.nonce||(n=this.transactionManager.process(n)),n.redirectUri?(yt.check(n,{type:"object",message:"options parameter is not valid"}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),n=dt.blacklist(n,["usePostMessage","tenant","postMessageDataType"]),void this.webMessageHandler.run(n,Gn(t,{forceLegacyError:!0,ignoreCasing:!0}))):t({error:"error",error_description:"redirectUri can't be empty"}))},zn.prototype.changePassword=function(r,t){return this.client.dbConnection.changePassword(r,t)},zn.prototype.passwordlessStart=function(r,t){var n=dt.merge(this.baseOptions,["responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","nonce"]).with(r.authParams);return r.authParams=this.transactionManager.process(n),this.client.passwordless.start(r,t)},zn.prototype.signup=function(r,t){return this.client.dbConnection.signup(r,t)},zn.prototype.authorize=function(r){var t=dt.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","nonce","organization","invitation"]).with(r);yt.check(t,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),(t=this.transactionManager.process(t)).scope=t.scope||"openid profile email",cn.redirect(this.client.buildAuthorizeUrl(t))},zn.prototype.signupAndAuthorize=function(r,t){var n=this;return this.client.dbConnection.signup(dt.blacklist(r,["popupHandler"]),function(i){if(i)return t(i);r.realm=r.connection,r.username||(r.username=r.email),n.client.login(r,t)})},zn.prototype.login=function(r,t){var n=dt.merge(this.baseOptions,["clientID","responseType","redirectUri","scope","audience","_csrf","state","_intstate","nonce","onRedirecting","organization","invitation"]).with(r);n=this.transactionManager.process(n),cn.getWindow().location.host===this.baseOptions.domain?(n.connection=n.realm,delete n.realm,this._universalLogin.login(n,t)):this.crossOriginAuthentication.login(n,t)},zn.prototype.passwordlessLogin=function(r,t){var n=dt.merge(this.baseOptions,["clientID","responseType","redirectUri","scope","audience","_csrf","state","_intstate","nonce","onRedirecting"]).with(r);if(n=this.transactionManager.process(n),cn.getWindow().location.host===this.baseOptions.domain)this.passwordlessVerify(n,t);else{var i=dt.extend({credentialType:"http://auth0.com/oauth/grant-type/passwordless/otp",realm:n.connection,username:n.email||n.phoneNumber,otp:n.verificationCode},dt.blacklist(n,["connection","email","phoneNumber","verificationCode"]));this.crossOriginAuthentication.login(i,t)}},zn.prototype.crossOriginAuthenticationCallback=function(){this.crossOriginVerification()},zn.prototype.crossOriginVerification=function(){this.crossOriginAuthentication.callback()},zn.prototype.logout=function(r){cn.redirect(this.client.buildLogoutUrl(r))},zn.prototype.passwordlessVerify=function(r,t){var n=this,i=dt.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","nonce","onRedirecting"]).with(r);return yt.check(i,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),i=this.transactionManager.process(i),this.client.passwordless.verify(i,function(o){if(o)return t(o);function s(){cn.redirect(n.client.passwordless.buildVerifyUrl(i))}if("function"==typeof r.onRedirecting)return r.onRedirecting(function(){s()});s()})},zn.prototype.renderCaptcha=function(r,t,n){return nz_render(this.client,r,t,n)},tp.prototype.buildVerifyUrl=function(r){var t,n;return yt.check(r,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},verificationCode:{type:"string",message:"verificationCode option is required"},phoneNumber:{optional:!1,type:"string",message:"phoneNumber option is required",condition:function(i){return!i.email}},email:{optional:!1,type:"string",message:"email option is required",condition:function(i){return!i.phoneNumber}}}),t=dt.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","protocol","nonce"]).with(r),this.baseOptions._sendTelemetry&&(t.auth0Client=this.request.getTelemetryData()),t=dt.toSnakeCase(t,["auth0Client"]),n=Uc(t),Mn(this.baseOptions.rootUrl,"passwordless","verify_redirect","?"+n)},tp.prototype.start=function(r,t){var n,i;yt.check(r,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},send:{type:"string",message:"send option is required",values:["link","code"],value_message:"send is not valid ([link, code])"},phoneNumber:{optional:!0,type:"string",message:"phoneNumber option is required",condition:function(a){return"code"===a.send||!a.email}},email:{optional:!0,type:"string",message:"email option is required",condition:function(a){return"link"===a.send||!a.phoneNumber}},authParams:{optional:!0,type:"object",message:"authParams option is required"}}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),n=Mn(this.baseOptions.rootUrl,"passwordless","start");var o=r.xRequestLanguage;return delete r.xRequestLanguage,(i=dt.merge(this.baseOptions,["clientID","responseType","redirectUri","scope"]).with(r)).scope&&(i.authParams=i.authParams||{},i.authParams.scope=i.authParams.scope||i.scope),i.redirectUri&&(i.authParams=i.authParams||{},i.authParams.redirect_uri=i.authParams.redirectUri||i.redirectUri),i.responseType&&(i.authParams=i.authParams||{},i.authParams.response_type=i.authParams.responseType||i.responseType),delete i.redirectUri,delete i.responseType,delete i.scope,i=dt.toSnakeCase(i,["auth0Client","authParams"]),this.request.post(n,o?{xRequestLanguage:o}:void 0).send(i).end(Gn(t))},tp.prototype.verify=function(r,t){var n,i;return yt.check(r,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},verificationCode:{type:"string",message:"verificationCode option is required"},phoneNumber:{optional:!1,type:"string",message:"phoneNumber option is required",condition:function(o){return!o.email}},email:{optional:!1,type:"string",message:"email option is required",condition:function(o){return!o.phoneNumber}}}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),i=dt.pick(r,["connection","verificationCode","phoneNumber","email","auth0Client","clientID"]),i=dt.toSnakeCase(i,["auth0Client"]),n=Mn(this.baseOptions.rootUrl,"passwordless","verify"),this.request.post(n).send(i).end(Gn(t))},Qv.prototype.signup=function(r,t){var n,i,o;return yt.check(r,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},email:{type:"string",message:"email option is required"},password:{type:"string",message:"password option is required"}}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),n=Mn(this.baseOptions.rootUrl,"dbconnections","signup"),o=(i=dt.merge(this.baseOptions,["clientID","state"]).with(r)).user_metadata||i.userMetadata,i=dt.blacklist(i,["scope","userMetadata","user_metadata"]),i=dt.toSnakeCase(i,["auth0Client"]),o&&(i.user_metadata=o),this.request.post(n).send(i).end(Gn(t))},Qv.prototype.changePassword=function(r,t){var n,i;return yt.check(r,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},email:{type:"string",message:"email option is required"}}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),n=Mn(this.baseOptions.rootUrl,"dbconnections","change_password"),i=dt.merge(this.baseOptions,["clientID"]).with(r,["email","connection"]),i=dt.toSnakeCase(i,["auth0Client"]),this.request.post(n).send(i).end(Gn(t))},$r.prototype.buildAuthorizeUrl=function(r){var t,n;return yt.check(r,{type:"object",message:"options parameter is not valid"}),t=dt.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience"]).with(r),yt.check(t,{type:"object",message:"options parameter is not valid"},{clientID:{type:"string",message:"clientID option is required"},redirectUri:{optional:!0,type:"string",message:"redirectUri option is required"},responseType:{type:"string",message:"responseType option is required"},nonce:{type:"string",message:"nonce option is required",condition:function(i){return-1===i.responseType.indexOf("code")&&-1!==i.responseType.indexOf("id_token")}},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),this.baseOptions._sendTelemetry&&(t.auth0Client=this.request.getTelemetryData()),t.connection_scope&&yt.isArray(t.connection_scope)&&(t.connection_scope=t.connection_scope.join(",")),t=dt.blacklist(t,["username","popupOptions","domain","tenant","timeout","appState"]),t=dt.toSnakeCase(t,["auth0Client"]),t=function(r,t){var n=dt.getKeysNotIn(t,jG);return n.length>0&&r.warning("Following parameters are not allowed on the `/authorize` endpoint: ["+n.join(",")+"]"),t}(this.warn,t),n=Uc(t),Mn(this.baseOptions.rootUrl,"authorize","?"+n)},$r.prototype.buildLogoutUrl=function(r){var t,n;return yt.check(r,{optional:!0,type:"object",message:"options parameter is not valid"}),t=dt.merge(this.baseOptions,["clientID"]).with(r||{}),this.baseOptions._sendTelemetry&&(t.auth0Client=this.request.getTelemetryData()),t=dt.toSnakeCase(t,["auth0Client","returnTo"]),n=Uc(dt.blacklist(t,["federated"])),r&&void 0!==r.federated&&!1!==r.federated&&"false"!==r.federated&&(n+="&federated"),Mn(this.baseOptions.rootUrl,"v2","logout","?"+n)},$r.prototype.loginWithDefaultDirectory=function(r,t){return yt.check(r,{type:"object",message:"options parameter is not valid"},{username:{type:"string",message:"username option is required"},password:{type:"string",message:"password option is required"},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),r.grantType="password",this.oauthToken(r,t)},$r.prototype.login=function(r,t){return yt.check(r,{type:"object",message:"options parameter is not valid"},{username:{type:"string",message:"username option is required"},password:{type:"string",message:"password option is required"},realm:{type:"string",message:"realm option is required"},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),r.grantType="http://auth0.com/oauth/grant-type/password-realm",this.oauthToken(r,t)},$r.prototype.oauthToken=function(r,t){var n,i;return yt.check(r,{type:"object",message:"options parameter is not valid"}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),n=Mn(this.baseOptions.rootUrl,"oauth","token"),i=dt.merge(this.baseOptions,["clientID","scope","audience"]).with(r),yt.check(i,{type:"object",message:"options parameter is not valid"},{clientID:{type:"string",message:"clientID option is required"},grantType:{type:"string",message:"grantType option is required"},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),i=function(r,t){return dt.pick(t,UG)}(0,i=dt.toSnakeCase(i,["auth0Client"])),this.request.post(n).send(i).end(Gn(t))},$r.prototype.loginWithResourceOwner=function(r,t){var n,i;return yt.check(r,{type:"object",message:"options parameter is not valid"},{username:{type:"string",message:"username option is required"},password:{type:"string",message:"password option is required"},connection:{type:"string",message:"connection option is required"},scope:{optional:!0,type:"string",message:"scope option is required"}}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),n=Mn(this.baseOptions.rootUrl,"oauth","ro"),i=dt.merge(this.baseOptions,["clientID","scope"]).with(r,["username","password","scope","connection","device"]),(i=dt.toSnakeCase(i,["auth0Client"])).grant_type=i.grant_type||"password",this.request.post(n).send(i).end(Gn(t))},$r.prototype.getSSOData=function(r,t){if(this.auth0||(this.auth0=new zn(this.baseOptions)),cn.getWindow().location.host===this.baseOptions.domain)return this.auth0._universalLogin.getSSOData(r,t);"function"==typeof r&&(t=r),yt.check(t,{type:"function",message:"cb parameter is not valid"});var n=this.baseOptions.clientID,i=this.ssodataStorage.get()||{};this.auth0.checkSession({responseType:"token id_token",scope:"openid profile email",connection:i.lastUsedConnection,timeout:5e3},function(o,s){return o?"login_required"===o.error?t(null,{sso:!1}):("consent_required"===o.error&&(o.error_description="Consent required. When using `getSSOData`, the user has to be authenticated with the following scope: `openid profile email`."),t(o,{sso:!1})):i.lastUsedSub&&i.lastUsedSub!==s.idTokenPayload.sub?t(o,{sso:!1}):t(null,{lastUsedConnection:{name:i.lastUsedConnection},lastUsedUserID:s.idTokenPayload.sub,lastUsedUsername:s.idTokenPayload.email||s.idTokenPayload.name,lastUsedClientID:n,sessionClients:[n],sso:!0})})},$r.prototype.userInfo=function(r,t){var n;return yt.check(r,{type:"string",message:"accessToken parameter is not valid"}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),n=Mn(this.baseOptions.rootUrl,"userinfo"),this.request.get(n).set("Authorization","Bearer "+r).end(Gn(t,{ignoreCasing:!0}))},$r.prototype.getChallenge=function(r){if(yt.check(r,{type:"function",message:"cb parameter is not valid"}),!this.baseOptions.state)return r();var t=Mn(this.baseOptions.rootUrl,"usernamepassword","challenge");return this.request.post(t).send({state:this.baseOptions.state}).end(Gn(r,{ignoreCasing:!0}))},$r.prototype.delegation=function(r,t){var n,i;return yt.check(r,{type:"object",message:"options parameter is not valid"},{grant_type:{type:"string",message:"grant_type option is required"}}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),n=Mn(this.baseOptions.rootUrl,"delegation"),i=dt.merge(this.baseOptions,["clientID"]).with(r),i=dt.toSnakeCase(i,["auth0Client"]),this.request.post(n).send(i).end(Gn(t))},$r.prototype.getUserCountry=function(r){var t;return yt.check(r,{type:"function",message:"cb parameter is not valid"}),t=Mn(this.baseOptions.rootUrl,"user","geoloc","country"),this.request.get(t).end(Gn(r))},Wu.prototype.getUser=function(r,t){var n;return yt.check(r,{type:"string",message:"userId parameter is not valid"}),yt.check(t,{type:"function",message:"cb parameter is not valid"}),n=Mn(this.baseOptions.rootUrl,"users",r),this.request.get(n).end(Gn(t,{ignoreCasing:!0}))},Wu.prototype.patchUserMetadata=function(r,t,n){var i;return yt.check(r,{type:"string",message:"userId parameter is not valid"}),yt.check(t,{type:"object",message:"userMetadata parameter is not valid"}),yt.check(n,{type:"function",message:"cb parameter is not valid"}),i=Mn(this.baseOptions.rootUrl,"users",r),this.request.patch(i).send({user_metadata:t}).end(Gn(n,{ignoreCasing:!0}))},Wu.prototype.patchUserAttributes=function(r,t,n){var i;return yt.check(r,{type:"string",message:"userId parameter is not valid"}),yt.check(t,{type:"object",message:"user parameter is not valid"}),yt.check(n,{type:"function",message:"cb parameter is not valid"}),i=Mn(this.baseOptions.rootUrl,"users",r),this.request.patch(i).send(t).end(Gn(n,{ignoreCasing:!0}))},Wu.prototype.linkUser=function(r,t,n){var i;return yt.check(r,{type:"string",message:"userId parameter is not valid"}),yt.check(t,{type:"string",message:"secondaryUserToken parameter is not valid"}),yt.check(n,{type:"function",message:"cb parameter is not valid"}),i=Mn(this.baseOptions.rootUrl,"users",r,"identities"),this.request.post(i).send({link_with:t}).end(Gn(n,{ignoreCasing:!0}))};const Po={clientID:"JV27y3SYEImqK7zVvQGANP4WkKQfDBDi",domain:"thoughtdesign.auth0.com",responseType:"token id_token",audience:"https://cceportal/api",redirectUri:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+"/callback",scope:"openid profile email",authConnectionType:"TenantUsers"};let iz=(()=>{class r extends Tu{constructor(n,i){super(),this.router=n,this.ngZone=i,this.auth0=new zn({clientID:Po.clientID,domain:Po.domain,responseType:Po.responseType,redirectUri:Po.redirectUri,scope:Po.scope,audience:Po.audience})}login(n,i){return new ae(o=>this.auth0.login({realm:Po.authConnectionType,email:n,password:i},(s,a)=>{if(s)return o.error(new Error(s.description));o.next(a)}))}forgetPassword(n){return new ae(i=>this.auth0.changePassword({connection:Po.authConnectionType,email:n},(o,s)=>{if(o)return i.error(new Error(o.description));i.next(s)}))}handleAuthentication(){}handleAuthenticationWithHash(){}setSession(n){const i=JSON.stringify(1e3*n.expiresIn+(new Date).getTime());localStorage.setItem("access_token",n.accessToken),localStorage.setItem("id_token",n.idToken),localStorage.setItem("expires_at",i),localStorage.setItem("tenant_id",n.tenantId),localStorage.setItem("tenant_user_id",n.tenantUserId)}logout(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),localStorage.removeItem("selected_tenant"),localStorage.removeItem("tenant_id"),localStorage.removeItem("tenant_user_id"),localStorage.removeItem("remember_me"),localStorage.removeItem("user_info"),this.ngZone.run(()=>this.router.navigate(["/login"]))}isAuthenticated(){const n=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<n}isVerified(){const n=JSON.parse(localStorage.getItem("user_info"));return!!n&&n.email_verified}register(n){return new ae(i=>this.auth0.signup({connection:Po.authConnectionType,email:n.email,password:n.password},(o,s)=>{if(o)return i.error(new Error(o.description));i.next(s)}))}resendActivation(){return new ae(n=>this.auth0.signup({connection:"Username-Password-Authentication",email:"email",password:"password"},(i,o)=>{if(i)return n.error(new Error(i.description));n.next(o)}))}getUserInfo(n){return new ae(i=>this.auth0.client.userInfo(n.accessToken,(o,s)=>{if(o)return i.error(new Error(o.description));i.next(s)}))}userloggedIn(n){return this.setSession(n),this.getUserInfo(n).pipe(w(i=>{this.saveUserInfo(i)}))}saveUserInfo(n){localStorage.setItem("user_info",JSON.stringify(n))}requiresLogin(){return"true"===localStorage.getItem("requires_login")}isRememberMe(){return"true"===localStorage.getItem("remember_me")}renewToken(n){!this.requiresLogin()&&this.isRememberMe()?this.auth0.renewAuth({},(i,o)=>{i||!o||(this.setSession(o),this.ngZone.run(()=>this.router.navigate([n])))}):this.ngZone.run(()=>this.router.navigate(["/login"],{queryParams:{returnUrl:n}}))}}return r.\u0275fac=function(n){return new(n||r)(De(tr),De(wt))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();function Xv(r,t){return new ae(t?n=>t.schedule(oz,0,{error:r,subscriber:n}):n=>n.error(r))}function oz({error:r,subscriber:t}){t.error(r)}class az{constructor(t,n){this.notifier=t,this.source=n}call(t,n){return n.subscribe(new cz(t,this.notifier,this.source))}}class cz extends ze{constructor(t,n,i){super(t),this.notifier=n,this.source=i}error(t){if(!this.isStopped){let n=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new u;try{const{notifier:s}=this;i=s(n)}catch(s){return super.error(s)}o=ft(i,new xe(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=o,n.next(t)}}_unsubscribe(){const{errors:t,retriesSubscription:n}=this;t&&(t.unsubscribe(),this.errors=void 0),n&&(n.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:t}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)}}class Pr{constructor(t,n,i){this.kind=t,this.value=n,this.error=i,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,n,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return n&&n(this.error);case"C":return i&&i()}}accept(t,n,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,n,i)}toObservable(){switch(this.kind){case"N":return Rt(this.value);case"E":return Xv(this.error);case"C":return uh()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new Pr("N",t):Pr.undefinedValueNotification}static createError(t){return new Pr("E",void 0,t)}static createComplete(){return Pr.completeNotification}}Pr.completeNotification=new Pr("C"),Pr.undefinedValueNotification=new Pr("N",void 0);class dz{constructor(t,n){this.delay=t,this.scheduler=n}call(t,n){return n.subscribe(new Zv(t,this.delay,this.scheduler))}}class Zv extends S{constructor(t,n,i){super(t),this.delay=n,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const n=t.source,i=n.queue,o=t.scheduler,s=t.destination;for(;i.length>0&&i[0].time-o.now()<=0;)i.shift().notification.observe(s);if(i.length>0){const a=Math.max(0,i[0].time-o.now());this.schedule(t,a)}else this.unsubscribe(),n.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(Zv.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const n=this.scheduler,i=new fz(n.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(n)}_next(t){this.scheduleNotification(Pr.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(Pr.createComplete()),this.unsubscribe()}}class fz{constructor(t,n){this.time=t,this.notification=n}}let gz=(()=>{class r{constructor(n,i,o){this.notifier=n,this.auth=i,this.router=o}intercept(n,i){this.auth.isAuthenticated()||this.auth.renewToken(this.router.url);const o=localStorage.getItem("access_token"),s=localStorage.getItem("tenant_id");return o&&(n=n.clone({headers:n.headers.set("Authorization",`Bearer ${o}`).set("TenantId",`${s}`).set("Access-Control-Allow-Origin","*").set("Access-Control-Allow-Methods","GET,HEAD,OPTIONS,POST,PUT").set("Access-Control-Allow-Headers","Authorization, Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers")})),("POST"===n.method||"PUT"===n.method)&&this.shiftDates(n.body),i.handle(n).pipe(function(r){return t=>t.lift(new az(r,t))}(a=>a.pipe(js((c,l)=>l<1&&c.status>=500?Rt(c):Xv(c)),function(r,t=Nh){const i=function(r){return r instanceof Date&&!isNaN(+r)}(r)?+r-t.now():Math.abs(r);return o=>o.lift(new dz(i,t))}(1e3))),ss(a=>(this.handleError(a),Xv(a))))}shiftDates(n){if(null==n||"object"!=typeof n)return n;for(const i of Object.keys(n)){const o=n[i];o instanceof Date?n[i]=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0)):"object"==typeof o&&this.shiftDates(o)}}handleError(n){if(n instanceof w_){let i="Sorry, an Error occured!";i=n.error&&n.error.message?n.error.message:n.error.title,this.notifier.showError(i)}else if(n instanceof Error){let i=n.message?n.message:n.toString();navigator.onLine||(i="No Internet Connection"),this.notifier.showError(i)}else{let i=n.title?n.title:n.toString();this.notifier.showError(i)}console.error(n)}}return r.\u0275fac=function(n){return new(n||r)(De(ZR),De(Tu),De(tr))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();new class extends xi{flush(t){this.active=!0,this.scheduled=void 0;const{actions:n}=this;let i,o=-1,s=n.length;t=t||n.shift();do{if(i=t.execute(t.state,t.delay))break}while(++o<s&&(t=n.shift()));if(this.active=!1,i){for(;++o<s&&(t=n.shift());)t.unsubscribe();throw i}}}(class extends Mh{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}requestAsyncId(t,n,i=0){return null!==i&&i>0?super.requestAsyncId(t,n,i):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,n,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(t,n,i);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)}});let vz=1;const Ez=Promise.resolve(),np={};function KO(r){return r in np&&(delete np[r],!0)}const YO={setImmediate(r){const t=vz++;return np[t]=!0,Ez.then(()=>KO(t)&&r()),t},clearImmediate(r){KO(r)}};new class extends xi{flush(t){this.active=!0,this.scheduled=void 0;const{actions:n}=this;let i,o=-1,s=n.length;t=t||n.shift();do{if(i=t.execute(t.state,t.delay))break}while(++o<s&&(t=n.shift()));if(this.active=!1,i){for(;++o<s&&(t=n.shift());)t.unsubscribe();throw i}}}(class extends Mh{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}requestAsyncId(t,n,i=0){return null!==i&&i>0?super.requestAsyncId(t,n,i):(t.actions.push(this),t.scheduled||(t.scheduled=YO.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,n,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(t,n,i);0===t.actions.length&&(YO.clearImmediate(n),t.scheduled=void 0)}});new class extends xi{}(class extends Mh{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(t,n,i):t.flush(this)}});let ip=(()=>{class r{constructor(n,i,o){this._ngZone=n,this._platform=i,this._scrolled=new u,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){const i=this.scrollContainers.get(n);i&&(i.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=20){return this._platform.isBrowser?new ae(i=>{this._globalSubscription||this._addGlobalListener();const o=n>0?this._scrolled.pipe(jh(n)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Rt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((n,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(n,i){const o=this.getAncestorScrollContainers(n);return this.scrolled(i).pipe(ki(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(n){const i=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,n)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(n,i){let o=Do(i),s=n.getElementRef().nativeElement;do{if(o==s)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Nu(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return r.\u0275fac=function(n){return new(n||r)(De(wt),De(_n),De(bt,8))},r.\u0275prov=$e({factory:function(){return new r(De(wt),De(_n),De(bt,8))},token:r,providedIn:"root"}),r})(),Kc=(()=>{class r{constructor(n,i,o){this._platform=n,this._change=new u,this._changeListener=s=>{this._change.next(s)},this._document=o,i.runOutsideAngular(()=>{if(n.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const n=this._getWindow();n.removeEventListener("resize",this._changeListener),n.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){const n=this.getViewportScrollPosition(),{width:i,height:o}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+o,right:n.left+i,height:o,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const n=this._document,i=this._getWindow(),o=n.documentElement,s=o.getBoundingClientRect();return{top:-s.top||n.body.scrollTop||i.scrollY||o.scrollTop||0,left:-s.left||n.body.scrollLeft||i.scrollX||o.scrollLeft||0}}change(n=20){return n>0?this._change.pipe(jh(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}}return r.\u0275fac=function(n){return new(n||r)(De(_n),De(wt),De(bt,8))},r.\u0275prov=$e({factory:function(){return new r(De(_n),De(wt),De(bt,8))},token:r,providedIn:"root"}),r})(),e1=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({}),r})(),tD=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[[Du,Ru,e1],Du,e1]}),r})();class t1{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Jz extends t1{constructor(t,n,i,o){super(),this.component=t,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=o}}class n1 extends t1{constructor(t,n,i){super(),this.templateRef=t,this.viewContainerRef=n,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,n=this.context){return this.context=n,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Qz extends t1{constructor(t){super(),this.element=t instanceof jt?t.nativeElement:t}}class Xz extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Jz?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof n1?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Qz?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,n,i,o,s){super(),this.outletElement=t,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=o,this.attachDomPortal=a=>{const c=a.element,l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let o;return t.viewContainerRef?(o=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>o.destroy())):(o=i.create(t.injector||this._defaultInjector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=t,o}attachTemplatePortal(t){let n=t.viewContainerRef,i=n.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(o=>this.outletElement.appendChild(o)),i.detectChanges(),this.setDisposeFn(()=>{let o=n.indexOf(i);-1!==o&&n.remove(o)}),this._attachedPortal=t,i}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Zz=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({}),r})();const oD=uI();class r${constructor(t,n){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=qn(-this._previousScrollPosition.left),t.style.top=qn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,o=this._document.body.style,s=i.scrollBehavior||"",a=o.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),oD&&(i.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),oD&&(i.scrollBehavior=s,o.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class i${constructor(t,n,i,o){this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=i,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class sD{enable(){}disable(){}attach(){}}function r1(r,t){return t.some(n=>r.bottom<n.top||r.top>n.bottom||r.right<n.left||r.left>n.right)}function aD(r,t){return t.some(n=>r.top<n.top||r.bottom>n.bottom||r.left<n.left||r.right>n.right)}class o${constructor(t,n,i,o){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=i,this._config=o,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:o}=this._viewportRuler.getViewportSize();r1(n,[{width:i,height:o,bottom:o,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let s$=(()=>{class r{constructor(n,i,o,s){this._scrollDispatcher=n,this._viewportRuler=i,this._ngZone=o,this.noop=()=>new sD,this.close=a=>new i$(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new r$(this._viewportRuler,this._document),this.reposition=a=>new o$(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}}return r.\u0275fac=function(n){return new(n||r)(De(ip),De(Kc),De(wt),De(bt))},r.\u0275prov=$e({factory:function(){return new r(De(ip),De(Kc),De(wt),De(bt))},token:r,providedIn:"root"}),r})();class cD{constructor(t){if(this.scrollStrategy=new sD,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const n=Object.keys(t);for(const i of n)void 0!==t[i]&&(this[i]=t[i])}}}class a${constructor(t,n,i,o,s){this.offsetX=i,this.offsetY=o,this.panelClass=s,this.originX=t.originX,this.originY=t.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY}}class c${constructor(t,n){this.connectionPair=t,this.scrollableViewProperties=n}}let lD=(()=>{class r{constructor(n){this._attachedOverlays=[],this._document=n}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){const i=this._attachedOverlays.indexOf(n);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return r.\u0275fac=function(n){return new(n||r)(De(bt))},r.\u0275prov=$e({factory:function(){return new r(De(bt))},token:r,providedIn:"root"}),r})(),l$=(()=>{class r extends lD{constructor(n){super(n),this._keydownListener=i=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){o[s]._keydownEvents.next(i);break}}}add(n){super.add(n),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return r.\u0275fac=function(n){return new(n||r)(De(bt))},r.\u0275prov=$e({factory:function(){return new r(De(bt))},token:r,providedIn:"root"}),r})(),u$=(()=>{class r extends lD{constructor(n,i){super(n),this._platform=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ea(o)},this._clickListener=o=>{const s=ea(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const f=c[l];if(!(f._outsidePointerEvents.observers.length<1)&&f.hasAttached()){if(f.overlayElement.contains(s)||f.overlayElement.contains(a))break;f._outsidePointerEvents.next(o)}}}}add(n){if(super.add(n),!this._isAttached){const i=this._document.body;i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const n=this._document.body;n.removeEventListener("pointerdown",this._pointerDownListener,!0),n.removeEventListener("click",this._clickListener,!0),n.removeEventListener("auxclick",this._clickListener,!0),n.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(n.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return r.\u0275fac=function(n){return new(n||r)(De(bt),De(_n))},r.\u0275prov=$e({factory:function(){return new r(De(bt),De(_n))},token:r,providedIn:"root"}),r})(),i1=(()=>{class r{constructor(n,i){this._platform=i,this._document=n}ngOnDestroy(){const n=this._containerElement;n&&n.parentNode&&n.parentNode.removeChild(n)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const n="cdk-overlay-container";if(this._platform.isBrowser||lv()){const o=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].parentNode.removeChild(o[s])}const i=this._document.createElement("div");i.classList.add(n),lv()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return r.\u0275fac=function(n){return new(n||r)(De(bt),De(_n))},r.\u0275prov=$e({factory:function(){return new r(De(bt),De(_n))},token:r,providedIn:"root"}),r})();class d${constructor(t,n,i,o,s,a,c,l,f){this._portalOutlet=t,this._host=n,this._pane=i,this._config=o,this._ngZone=s,this._keyboardDispatcher=a,this._document=c,this._location=l,this._outsideClickDispatcher=f,this._backdropElement=null,this._backdropClick=new u,this._attachments=new u,this._detachments=new u,this._locationChanges=E.EMPTY,this._backdropClickHandler=b=>this._backdropClick.next(b),this._keydownEvents=new u,this._outsidePointerEvents=new u,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let n=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ao(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=qn(this._config.width),t.height=qn(this._config.height),t.minWidth=qn(this._config.minWidth),t.minHeight=qn(this._config.minHeight),t.maxWidth=qn(this._config.maxWidth),t.maxHeight=qn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let n;const i=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",i),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(n)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",i)}),t.style.pointerEvents="none",n=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(t,n,i){const o=t.classList;eI(n).forEach(s=>{s&&(i?o.add(s):o.remove(s))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(ar(Z(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.parentNode&&t.parentNode.removeChild(t),this._backdropElement===t&&(this._backdropElement=null))}}const uD="cdk-overlay-connected-position-bounding-box",f$=/([A-Za-z%]+)$/;class dD{constructor(t,n,i,o,s){this._viewportRuler=n,this._document=i,this._platform=o,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new u,this._resizeSubscription=E.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(uD),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,n=this._overlayRect,i=this._viewportRect,o=[];let s;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,a),l=this._getOverlayPoint(c,n,a),f=this._getOverlayFit(l,n,i,a);if(f.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(f,l,i)?o.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!s||s.overlayFit.visibleArea<f.visibleArea)&&(s={overlayFit:f,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(o.length){let a=null,c=-1;for(const l of o){const f=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);f>c&&(c=f,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&pa(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(uD),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],n=this._getOriginPoint(this._originRect,t);this._applyPosition(t,n)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,n){let i,o;if("center"==n.originX)i=t.left+t.width/2;else{const s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;i="start"==n.originX?s:a}return o="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,{x:i,y:o}}_getOverlayPoint(t,n,i){let o,s;return o="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,s="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:t.x+o,y:t.y+s}}_getOverlayFit(t,n,i,o){const s=hD(n);let{x:a,y:c}=t,l=this._getOffset(o,"x"),f=this._getOffset(o,"y");l&&(a+=l),f&&(c+=f);let j=0-c,z=c+s.height-i.height,$=this._subtractOverflows(s.width,0-a,a+s.width-i.width),Q=this._subtractOverflows(s.height,j,z),re=$*Q;return{visibleArea:re,isCompletelyWithinViewport:s.width*s.height===re,fitsInViewportVertically:Q===s.height,fitsInViewportHorizontally:$==s.width}}_canFitWithFlexibleDimensions(t,n,i){if(this._hasFlexibleDimensions){const o=i.bottom-n.y,s=i.right-n.x,a=fD(this._overlayRef.getConfig().minHeight),c=fD(this._overlayRef.getConfig().minWidth),f=t.fitsInViewportHorizontally||null!=c&&c<=s;return(t.fitsInViewportVertically||null!=a&&a<=o)&&f}return!1}_pushOverlayOnScreen(t,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const o=hD(n),s=this._viewportRect,a=Math.max(t.x+o.width-s.width,0),c=Math.max(t.y+o.height-s.height,0),l=Math.max(s.top-i.top-t.y,0),f=Math.max(s.left-i.left-t.x,0);let b=0,O=0;return b=o.width<=s.width?f||-a:t.x<this._viewportMargin?s.left-i.left-t.x:0,O=o.height<=s.height?l||-c:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:b,y:O},{x:t.x+b,y:t.y+O}}_applyPosition(t,n){if(this._setTransformOrigin(t),this._setOverlayElementStyles(n,t),this._setBoundingBoxStyles(n,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),o=new c$(t,i);this._positionChanges.next(o)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,o=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${o}`}_calculateBoundingBoxRect(t,n){const i=this._viewportRect,o=this._isRtl();let s,a,c,b,O,j;if("top"===n.overlayY)a=t.y,s=i.height-a+this._viewportMargin;else if("bottom"===n.overlayY)c=i.height-t.y+2*this._viewportMargin,s=i.height-c+this._viewportMargin;else{const z=Math.min(i.bottom-t.y+i.top,t.y),$=this._lastBoundingBoxSize.height;s=2*z,a=t.y-z,s>$&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.y-$/2)}if("end"===n.overlayX&&!o||"start"===n.overlayX&&o)j=i.width-t.x+this._viewportMargin,b=t.x-this._viewportMargin;else if("start"===n.overlayX&&!o||"end"===n.overlayX&&o)O=t.x,b=i.right-t.x;else{const z=Math.min(i.right-t.x+i.left,t.x),$=this._lastBoundingBoxSize.width;b=2*z,O=t.x-z,b>$&&!this._isInitialRender&&!this._growAfterOpen&&(O=t.x-$/2)}return{top:a,left:O,bottom:c,right:j,width:b,height:s}}_setBoundingBoxStyles(t,n){const i=this._calculateBoundingBoxRect(t,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;o.height=qn(i.height),o.top=qn(i.top),o.bottom=qn(i.bottom),o.width=qn(i.width),o.left=qn(i.left),o.right=qn(i.right),o.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",o.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",s&&(o.maxHeight=qn(s)),a&&(o.maxWidth=qn(a))}this._lastBoundingBoxSize=i,pa(this._boundingBox.style,o)}_resetBoundingBoxStyles(){pa(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){pa(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,n){const i={},o=this._hasExactPosition(),s=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(o){const b=this._viewportRuler.getViewportScrollPosition();pa(i,this._getExactOverlayY(n,t,b)),pa(i,this._getExactOverlayX(n,t,b))}else i.position="static";let c="",l=this._getOffset(n,"x"),f=this._getOffset(n,"y");l&&(c+=`translateX(${l}px) `),f&&(c+=`translateY(${f}px)`),i.transform=c.trim(),a.maxHeight&&(o?i.maxHeight=qn(a.maxHeight):s&&(i.maxHeight="")),a.maxWidth&&(o?i.maxWidth=qn(a.maxWidth):s&&(i.maxWidth="")),pa(this._pane.style,i)}_getExactOverlayY(t,n,i){let o={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let a=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=a,"bottom"===t.overlayY?o.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":o.top=qn(s.y),o}_getExactOverlayX(t,n,i){let a,o={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),a=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===a?o.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":o.left=qn(s.x),o}_getScrollVisibility(){const t=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:aD(t,i),isOriginOutsideView:r1(t,i),isOverlayClipped:aD(n,i),isOverlayOutsideView:r1(n,i)}}_subtractOverflows(t,...n){return n.reduce((i,o)=>i-Math.max(o,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:t-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,n){return"x"===n?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&eI(t).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof jt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const n=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+n,height:i,width:n}}}function pa(r,t){for(let n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}function fD(r){if("number"!=typeof r&&null!=r){const[t,n]=r.split(f$);return n&&"px"!==n?null:parseFloat(t)}return r||null}function hD(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}class h${constructor(t,n,i,o,s,a,c){this._preferredPositions=[],this._positionStrategy=new dD(i,o,s,a,c).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,n),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,n,i,o){const s=new a$(t,n,i,o);return this._preferredPositions.push(s),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const pD="cdk-global-overlay-wrapper";class p${constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const n=t.getConfig();this._overlayRef=t,this._width&&!n.width&&t.updateSize({width:this._width}),this._height&&!n.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(pD),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:o,height:s,maxWidth:a,maxHeight:c}=i,l=!("100%"!==o&&"100vw"!==o||a&&"100%"!==a&&"100vw"!==a),f=!("100%"!==s&&"100vh"!==s||c&&"100%"!==c&&"100vh"!==c);t.position=this._cssPosition,t.marginLeft=l?"0":this._leftOffset,t.marginTop=f?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,l?n.justifyContent="flex-start":"center"===this._justifyContent?n.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?n.justifyContent="flex-end":"flex-end"===this._justifyContent&&(n.justifyContent="flex-start"):n.justifyContent=this._justifyContent,n.alignItems=f?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(pD),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let g$=(()=>{class r{constructor(n,i,o,s){this._viewportRuler=n,this._document=i,this._platform=o,this._overlayContainer=s}global(){return new p$}connectedTo(n,i,o){return new h$(i,o,n,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(n){return new dD(n,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return r.\u0275fac=function(n){return new(n||r)(De(Kc),De(bt),De(_n),De(i1))},r.\u0275prov=$e({factory:function(){return new r(De(Kc),De(bt),De(_n),De(i1))},token:r,providedIn:"root"}),r})(),m$=0,op=(()=>{class r{constructor(n,i,o,s,a,c,l,f,b,O,j){this.scrollStrategies=n,this._overlayContainer=i,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=f,this._directionality=b,this._location=O,this._outsideClickDispatcher=j}create(n){const i=this._createHostElement(),o=this._createPaneElement(i),s=this._createPortalOutlet(o),a=new cD(n);return a.direction=a.direction||this._directionality.value,new d$(s,i,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(n){const i=this._document.createElement("div");return i.id="cdk-overlay-"+m$++,i.classList.add("cdk-overlay-pane"),n.appendChild(i),i}_createHostElement(){const n=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalOutlet(n){return this._appRef||(this._appRef=this._injector.get(Ls)),new Xz(n,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return r.\u0275fac=function(n){return new(n||r)(De(s$),De(i1),De(yo),De(g$),De(l$),De(en),De(wt),De(bt),De(ta),De(Ql),De(u$))},r.\u0275prov=$e({token:r,factory:r.\u0275fac}),r})();const E$={provide:new ut("cdk-connected-overlay-scroll-strategy"),deps:[op],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let b$=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:[op,E$],imports:[[Du,Zz,tD],tD]}),r})();const x$={provide:new ut("mat-select-scroll-strategy"),deps:[op],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let U$=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:[x$],imports:[[Jo,b$,BI,zr],e1,Uh,BI,zr]}),r})(),o1=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:[gT,fT],imports:[[Oc.forRoot([]),Bf,HA,Jo]]}),r})(),j$=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({providers:[],imports:[[Jo,Bf,Oc,o1,ev]]}),r})(),B$=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r}),r.\u0275inj=xt({imports:[[Jo,HA,Bf,j$,Oc,ev,o1,Uh,wq,Iq,U$]]}),r})(),H$=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Vt({type:r,bootstrap:[Mq]}),r.\u0275inj=xt({providers:[{provide:A_,useClass:gz,multi:!0},{provide:Tu,useClass:iz}],imports:[[E_,Bf,HT,B$,o1,ev,d7,Dq,h7.forRoot({AppID:ch_agora.appId})]]}),r})();(function(){if(fw)throw new Error("Cannot enable prod mode after platform setup.");dw=!1})(),b8().bootstrapModule(H$).catch(r=>console.error(r))}},ge=>{ge(ge.s=898)}]);